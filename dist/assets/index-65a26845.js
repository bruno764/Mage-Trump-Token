var yx=Object.defineProperty;var vx=(t,e,n)=>e in t?yx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var cn=(t,e,n)=>(vx(t,typeof e!="symbol"?e+"":e,n),n);function wx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Hu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var L1={exports:{}},Pf={},B1={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),_x=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),Ix=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),Tx=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),bx=Symbol.for("react.forward_ref"),xx=Symbol.for("react.suspense"),kx=Symbol.for("react.memo"),Rx=Symbol.for("react.lazy"),pv=Symbol.iterator;function Cx(t){return t===null||typeof t!="object"?null:(t=pv&&t[pv]||t["@@iterator"],typeof t=="function"?t:null)}var O1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D1=Object.assign,V1={};function Za(t,e,n){this.props=t,this.context=e,this.refs=V1,this.updater=n||O1}Za.prototype.isReactComponent={};Za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U1(){}U1.prototype=Za.prototype;function Tg(t,e,n){this.props=t,this.context=e,this.refs=V1,this.updater=n||O1}var Ag=Tg.prototype=new U1;Ag.constructor=Tg;D1(Ag,Za.prototype);Ag.isPureReactComponent=!0;var mv=Array.isArray,F1=Object.prototype.hasOwnProperty,bg={current:null},z1={key:!0,ref:!0,__self:!0,__source:!0};function j1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)F1.call(e,r)&&!z1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ku,type:t,key:s,ref:o,props:i,_owner:bg.current}}function Px(t,e){return{$$typeof:Ku,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ku}function Nx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gv=/\/+/g;function Vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nx(""+t.key):e.toString(36)}function sh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ku:case _x:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Vd(o,0):r,mv(i)?(n="",t!=null&&(n=t.replace(gv,"$&/")+"/"),sh(i,e,n,"",function(c){return c})):i!=null&&(xg(i)&&(i=Px(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",mv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Vd(s,a);o+=sh(s,e,n,l,i)}else if(l=Cx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Vd(s,a++),o+=sh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rc(t,e,n){if(t==null)return t;var r=[],i=0;return sh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Mx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gn={current:null},oh={transition:null},Lx={ReactCurrentDispatcher:Gn,ReactCurrentBatchConfig:oh,ReactCurrentOwner:bg};function $1(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!xg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Za;$e.Fragment=Ex;$e.Profiler=Sx;$e.PureComponent=Tg;$e.StrictMode=Ix;$e.Suspense=xx;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx;$e.act=$1;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)F1.call(e,l)&&!z1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ku,type:t.type,key:i,ref:s,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:Ax,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tx,_context:t},t.Consumer=t};$e.createElement=j1;$e.createFactory=function(t){var e=j1.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:bx,render:t}};$e.isValidElement=xg;$e.lazy=function(t){return{$$typeof:Rx,_payload:{_status:-1,_result:t},_init:Mx}};$e.memo=function(t,e){return{$$typeof:kx,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=oh.transition;oh.transition={};try{t()}finally{oh.transition=e}};$e.unstable_act=$1;$e.useCallback=function(t,e){return Gn.current.useCallback(t,e)};$e.useContext=function(t){return Gn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Gn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return Gn.current.useEffect(t,e)};$e.useId=function(){return Gn.current.useId()};$e.useImperativeHandle=function(t,e,n){return Gn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return Gn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return Gn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return Gn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return Gn.current.useReducer(t,e,n)};$e.useRef=function(t){return Gn.current.useRef(t)};$e.useState=function(t){return Gn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return Gn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return Gn.current.useTransition()};$e.version="18.3.1";B1.exports=$e;var le=B1.exports;const q1=Hu(le),Bx=wx({__proto__:null,default:q1},[le]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox=le,Dx=Symbol.for("react.element"),Vx=Symbol.for("react.fragment"),Ux=Object.prototype.hasOwnProperty,Fx=Ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zx={key:!0,ref:!0,__self:!0,__source:!0};function W1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ux.call(e,r)&&!zx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Dx,type:t,key:s,ref:o,props:i,_owner:Fx.current}}Pf.Fragment=Vx;Pf.jsx=W1;Pf.jsxs=W1;L1.exports=Pf;var se=L1.exports,Ne={},Nf={};Nf.byteLength=qx;Nf.toByteArray=Hx;Nf.fromByteArray=Qx;var ei=[],wr=[],jx=typeof Uint8Array<"u"?Uint8Array:Array,Ud="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Xo=0,$x=Ud.length;Xo<$x;++Xo)ei[Xo]=Ud[Xo],wr[Ud.charCodeAt(Xo)]=Xo;wr["-".charCodeAt(0)]=62;wr["_".charCodeAt(0)]=63;function H1(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function qx(t){var e=H1(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Wx(t,e,n){return(e+n)*3/4-n}function Hx(t){var e,n=H1(t),r=n[0],i=n[1],s=new jx(Wx(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=wr[t.charCodeAt(l)]<<18|wr[t.charCodeAt(l+1)]<<12|wr[t.charCodeAt(l+2)]<<6|wr[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=wr[t.charCodeAt(l)]<<2|wr[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=wr[t.charCodeAt(l)]<<10|wr[t.charCodeAt(l+1)]<<4|wr[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Kx(t){return ei[t>>18&63]+ei[t>>12&63]+ei[t>>6&63]+ei[t&63]}function Gx(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Kx(r));return i.join("")}function Qx(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Gx(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(ei[e>>2]+ei[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(ei[e>>10]+ei[e>>4&63]+ei[e<<2&63]+"=")),i.join("")}var kg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */kg.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,f=-7,m=n?i-1:0,w=n?-1:1,S=t[e+m];for(m+=w,s=S&(1<<-f)-1,S>>=-f,f+=a;f>0;s=s*256+t[e+m],m+=w,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=r;f>0;o=o*256+t[e+m],m+=w,f-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(S?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(S?-1:1)*o*Math.pow(2,s-r)};kg.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,f=(1<<c)-1,m=f>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=r?0:s-1,M=r?1:-1,L=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+m>=1?e+=w/l:e+=w*Math.pow(2,1-m),e*l>=2&&(o++,l/=2),o+m>=f?(a=0,o=f):o+m>=1?(a=(e*l-1)*Math.pow(2,i),o=o+m):(a=e*Math.pow(2,m-1)*Math.pow(2,i),o=0));i>=8;t[n+S]=a&255,S+=M,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+S]=o&255,S+=M,o/=256,c-=8);t[n+S-M]|=L*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Nf,n=kg,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const T=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(T,p),T.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(T){if(T>i)throw new RangeError('The value "'+T+'" is invalid for option "size"');const p=new Uint8Array(T);return Object.setPrototypeOf(p,a.prototype),p}function a(T,p,y){if(typeof T=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(T)}return l(T,p,y)}a.poolSize=8192;function l(T,p,y){if(typeof T=="string")return w(T,p);if(ArrayBuffer.isView(T))return M(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Xt(T,ArrayBuffer)||T&&Xt(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xt(T,SharedArrayBuffer)||T&&Xt(T.buffer,SharedArrayBuffer)))return L(T,p,y);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=T.valueOf&&T.valueOf();if(F!=null&&F!==T)return a.from(F,p,y);const H=R(T);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return a.from(T[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}a.from=function(T,p,y){return l(T,p,y)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function f(T,p,y){return c(T),T<=0?o(T):p!==void 0?typeof y=="string"?o(T).fill(p,y):o(T).fill(p):o(T)}a.alloc=function(T,p,y){return f(T,p,y)};function m(T){return c(T),o(T<0?0:b(T)|0)}a.allocUnsafe=function(T){return m(T)},a.allocUnsafeSlow=function(T){return m(T)};function w(T,p){if((typeof p!="string"||p==="")&&(p="utf8"),!a.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const y=k(T,p)|0;let F=o(y);const H=F.write(T,p);return H!==y&&(F=F.slice(0,H)),F}function S(T){const p=T.length<0?0:b(T.length)|0,y=o(p);for(let F=0;F<p;F+=1)y[F]=T[F]&255;return y}function M(T){if(Xt(T,Uint8Array)){const p=new Uint8Array(T);return L(p.buffer,p.byteOffset,p.byteLength)}return S(T)}function L(T,p,y){if(p<0||T.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');let F;return p===void 0&&y===void 0?F=new Uint8Array(T):y===void 0?F=new Uint8Array(T,p):F=new Uint8Array(T,p,y),Object.setPrototypeOf(F,a.prototype),F}function R(T){if(a.isBuffer(T)){const p=b(T.length)|0,y=o(p);return y.length===0||T.copy(y,0,0,p),y}if(T.length!==void 0)return typeof T.length!="number"||rt(T.length)?o(0):S(T);if(T.type==="Buffer"&&Array.isArray(T.data))return S(T.data)}function b(T){if(T>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return T|0}function C(T){return+T!=T&&(T=0),a.alloc(+T)}a.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==a.prototype},a.compare=function(p,y){if(Xt(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),Xt(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(p)||!a.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===y)return 0;let F=p.length,H=y.length;for(let G=0,Z=Math.min(F,H);G<Z;++G)if(p[G]!==y[G]){F=p[G],H=y[G];break}return F<H?-1:H<F?1:0},a.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(p,y){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return a.alloc(0);let F;if(y===void 0)for(y=0,F=0;F<p.length;++F)y+=p[F].length;const H=a.allocUnsafe(y);let G=0;for(F=0;F<p.length;++F){let Z=p[F];if(Xt(Z,Uint8Array))G+Z.length>H.length?(a.isBuffer(Z)||(Z=a.from(Z)),Z.copy(H,G)):Uint8Array.prototype.set.call(H,Z,G);else if(a.isBuffer(Z))Z.copy(H,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Z.length}return H};function k(T,p){if(a.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||Xt(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const y=T.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&y===0)return 0;let H=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return tt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return nt(T).length;default:if(H)return F?-1:tt(T).length;p=(""+p).toLowerCase(),H=!0}}a.byteLength=k;function q(T,p,y){let F=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(T||(T="utf8");;)switch(T){case"hex":return U(this,p,y);case"utf8":case"utf-8":return h(this,p,y);case"ascii":return x(this,p,y);case"latin1":case"binary":return A(this,p,y);case"base64":return E(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,p,y);default:if(F)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),F=!0}}a.prototype._isBuffer=!0;function Y(T,p,y){const F=T[p];T[p]=T[y],T[y]=F}a.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<p;y+=2)Y(this,y,y+1);return this},a.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<p;y+=4)Y(this,y,y+3),Y(this,y+1,y+2);return this},a.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<p;y+=8)Y(this,y,y+7),Y(this,y+1,y+6),Y(this,y+2,y+5),Y(this,y+3,y+4);return this},a.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?h(this,0,p):q.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(p){if(!a.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:a.compare(this,p)===0},a.prototype.inspect=function(){let p="";const y=t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(p+=" ... "),"<Buffer "+p+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(p,y,F,H,G){if(Xt(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(y===void 0&&(y=0),F===void 0&&(F=p?p.length:0),H===void 0&&(H=0),G===void 0&&(G=this.length),y<0||F>p.length||H<0||G>this.length)throw new RangeError("out of range index");if(H>=G&&y>=F)return 0;if(H>=G)return-1;if(y>=F)return 1;if(y>>>=0,F>>>=0,H>>>=0,G>>>=0,this===p)return 0;let Z=G-H,Le=F-y;const Pe=Math.min(Z,Le),xe=this.slice(H,G),ct=p.slice(y,F);for(let Ae=0;Ae<Pe;++Ae)if(xe[Ae]!==ct[Ae]){Z=xe[Ae],Le=ct[Ae];break}return Z<Le?-1:Le<Z?1:0};function X(T,p,y,F,H){if(T.length===0)return-1;if(typeof y=="string"?(F=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,rt(y)&&(y=H?0:T.length-1),y<0&&(y=T.length+y),y>=T.length){if(H)return-1;y=T.length-1}else if(y<0)if(H)y=0;else return-1;if(typeof p=="string"&&(p=a.from(p,F)),a.isBuffer(p))return p.length===0?-1:O(T,p,y,F,H);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(T,p,y):Uint8Array.prototype.lastIndexOf.call(T,p,y):O(T,[p],y,F,H);throw new TypeError("val must be string, number or Buffer")}function O(T,p,y,F,H){let G=1,Z=T.length,Le=p.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(T.length<2||p.length<2)return-1;G=2,Z/=2,Le/=2,y/=2}function Pe(ct,Ae){return G===1?ct[Ae]:ct.readUInt16BE(Ae*G)}let xe;if(H){let ct=-1;for(xe=y;xe<Z;xe++)if(Pe(T,xe)===Pe(p,ct===-1?0:xe-ct)){if(ct===-1&&(ct=xe),xe-ct+1===Le)return ct*G}else ct!==-1&&(xe-=xe-ct),ct=-1}else for(y+Le>Z&&(y=Z-Le),xe=y;xe>=0;xe--){let ct=!0;for(let Ae=0;Ae<Le;Ae++)if(Pe(T,xe+Ae)!==Pe(p,Ae)){ct=!1;break}if(ct)return xe}return-1}a.prototype.includes=function(p,y,F){return this.indexOf(p,y,F)!==-1},a.prototype.indexOf=function(p,y,F){return X(this,p,y,F,!0)},a.prototype.lastIndexOf=function(p,y,F){return X(this,p,y,F,!1)};function P(T,p,y,F){y=Number(y)||0;const H=T.length-y;F?(F=Number(F),F>H&&(F=H)):F=H;const G=p.length;F>G/2&&(F=G/2);let Z;for(Z=0;Z<F;++Z){const Le=parseInt(p.substr(Z*2,2),16);if(rt(Le))return Z;T[y+Z]=Le}return Z}function D(T,p,y,F){return Ye(tt(p,T.length-y),T,y,F)}function z(T,p,y,F){return Ye(dt(p),T,y,F)}function $(T,p,y,F){return Ye(nt(p),T,y,F)}function W(T,p,y,F){return Ye(gi(p,T.length-y),T,y,F)}a.prototype.write=function(p,y,F,H){if(y===void 0)H="utf8",F=this.length,y=0;else if(F===void 0&&typeof y=="string")H=y,F=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(F)?(F=F>>>0,H===void 0&&(H="utf8")):(H=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-y;if((F===void 0||F>G)&&(F=G),p.length>0&&(F<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");let Z=!1;for(;;)switch(H){case"hex":return P(this,p,y,F);case"utf8":case"utf-8":return D(this,p,y,F);case"ascii":case"latin1":case"binary":return z(this,p,y,F);case"base64":return $(this,p,y,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,p,y,F);default:if(Z)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),Z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(T,p,y){return p===0&&y===T.length?e.fromByteArray(T):e.fromByteArray(T.slice(p,y))}function h(T,p,y){y=Math.min(T.length,y);const F=[];let H=p;for(;H<y;){const G=T[H];let Z=null,Le=G>239?4:G>223?3:G>191?2:1;if(H+Le<=y){let Pe,xe,ct,Ae;switch(Le){case 1:G<128&&(Z=G);break;case 2:Pe=T[H+1],(Pe&192)===128&&(Ae=(G&31)<<6|Pe&63,Ae>127&&(Z=Ae));break;case 3:Pe=T[H+1],xe=T[H+2],(Pe&192)===128&&(xe&192)===128&&(Ae=(G&15)<<12|(Pe&63)<<6|xe&63,Ae>2047&&(Ae<55296||Ae>57343)&&(Z=Ae));break;case 4:Pe=T[H+1],xe=T[H+2],ct=T[H+3],(Pe&192)===128&&(xe&192)===128&&(ct&192)===128&&(Ae=(G&15)<<18|(Pe&63)<<12|(xe&63)<<6|ct&63,Ae>65535&&Ae<1114112&&(Z=Ae))}}Z===null?(Z=65533,Le=1):Z>65535&&(Z-=65536,F.push(Z>>>10&1023|55296),Z=56320|Z&1023),F.push(Z),H+=Le}return I(F)}const v=4096;function I(T){const p=T.length;if(p<=v)return String.fromCharCode.apply(String,T);let y="",F=0;for(;F<p;)y+=String.fromCharCode.apply(String,T.slice(F,F+=v));return y}function x(T,p,y){let F="";y=Math.min(T.length,y);for(let H=p;H<y;++H)F+=String.fromCharCode(T[H]&127);return F}function A(T,p,y){let F="";y=Math.min(T.length,y);for(let H=p;H<y;++H)F+=String.fromCharCode(T[H]);return F}function U(T,p,y){const F=T.length;(!p||p<0)&&(p=0),(!y||y<0||y>F)&&(y=F);let H="";for(let G=p;G<y;++G)H+=it[T[G]];return H}function j(T,p,y){const F=T.slice(p,y);let H="";for(let G=0;G<F.length-1;G+=2)H+=String.fromCharCode(F[G]+F[G+1]*256);return H}a.prototype.slice=function(p,y){const F=this.length;p=~~p,y=y===void 0?F:~~y,p<0?(p+=F,p<0&&(p=0)):p>F&&(p=F),y<0?(y+=F,y<0&&(y=0)):y>F&&(y=F),y<p&&(y=p);const H=this.subarray(p,y);return Object.setPrototypeOf(H,a.prototype),H};function N(T,p,y){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+p>y)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(p,y,F){p=p>>>0,y=y>>>0,F||N(p,y,this.length);let H=this[p],G=1,Z=0;for(;++Z<y&&(G*=256);)H+=this[p+Z]*G;return H},a.prototype.readUintBE=a.prototype.readUIntBE=function(p,y,F){p=p>>>0,y=y>>>0,F||N(p,y,this.length);let H=this[p+--y],G=1;for(;y>0&&(G*=256);)H+=this[p+--y]*G;return H},a.prototype.readUint8=a.prototype.readUInt8=function(p,y){return p=p>>>0,y||N(p,1,this.length),this[p]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(p,y){return p=p>>>0,y||N(p,2,this.length),this[p]|this[p+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(p,y){return p=p>>>0,y||N(p,2,this.length),this[p]<<8|this[p+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(p,y){return p=p>>>0,y||N(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(p,y){return p=p>>>0,y||N(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},a.prototype.readBigUInt64LE=un(function(p){p=p>>>0,bt(p,"offset");const y=this[p],F=this[p+7];(y===void 0||F===void 0)&&Fe(p,this.length-8);const H=y+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,G=this[++p]+this[++p]*2**8+this[++p]*2**16+F*2**24;return BigInt(H)+(BigInt(G)<<BigInt(32))}),a.prototype.readBigUInt64BE=un(function(p){p=p>>>0,bt(p,"offset");const y=this[p],F=this[p+7];(y===void 0||F===void 0)&&Fe(p,this.length-8);const H=y*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],G=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+F;return(BigInt(H)<<BigInt(32))+BigInt(G)}),a.prototype.readIntLE=function(p,y,F){p=p>>>0,y=y>>>0,F||N(p,y,this.length);let H=this[p],G=1,Z=0;for(;++Z<y&&(G*=256);)H+=this[p+Z]*G;return G*=128,H>=G&&(H-=Math.pow(2,8*y)),H},a.prototype.readIntBE=function(p,y,F){p=p>>>0,y=y>>>0,F||N(p,y,this.length);let H=y,G=1,Z=this[p+--H];for(;H>0&&(G*=256);)Z+=this[p+--H]*G;return G*=128,Z>=G&&(Z-=Math.pow(2,8*y)),Z},a.prototype.readInt8=function(p,y){return p=p>>>0,y||N(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},a.prototype.readInt16LE=function(p,y){p=p>>>0,y||N(p,2,this.length);const F=this[p]|this[p+1]<<8;return F&32768?F|4294901760:F},a.prototype.readInt16BE=function(p,y){p=p>>>0,y||N(p,2,this.length);const F=this[p+1]|this[p]<<8;return F&32768?F|4294901760:F},a.prototype.readInt32LE=function(p,y){return p=p>>>0,y||N(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},a.prototype.readInt32BE=function(p,y){return p=p>>>0,y||N(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},a.prototype.readBigInt64LE=un(function(p){p=p>>>0,bt(p,"offset");const y=this[p],F=this[p+7];(y===void 0||F===void 0)&&Fe(p,this.length-8);const H=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(F<<24);return(BigInt(H)<<BigInt(32))+BigInt(y+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),a.prototype.readBigInt64BE=un(function(p){p=p>>>0,bt(p,"offset");const y=this[p],F=this[p+7];(y===void 0||F===void 0)&&Fe(p,this.length-8);const H=(y<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(H)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+F)}),a.prototype.readFloatLE=function(p,y){return p=p>>>0,y||N(p,4,this.length),n.read(this,p,!0,23,4)},a.prototype.readFloatBE=function(p,y){return p=p>>>0,y||N(p,4,this.length),n.read(this,p,!1,23,4)},a.prototype.readDoubleLE=function(p,y){return p=p>>>0,y||N(p,8,this.length),n.read(this,p,!0,52,8)},a.prototype.readDoubleBE=function(p,y){return p=p>>>0,y||N(p,8,this.length),n.read(this,p,!1,52,8)};function g(T,p,y,F,H,G){if(!a.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>H||p<G)throw new RangeError('"value" argument is out of bounds');if(y+F>T.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(p,y,F,H){if(p=+p,y=y>>>0,F=F>>>0,!H){const Le=Math.pow(2,8*F)-1;g(this,p,y,F,Le,0)}let G=1,Z=0;for(this[y]=p&255;++Z<F&&(G*=256);)this[y+Z]=p/G&255;return y+F},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(p,y,F,H){if(p=+p,y=y>>>0,F=F>>>0,!H){const Le=Math.pow(2,8*F)-1;g(this,p,y,F,Le,0)}let G=F-1,Z=1;for(this[y+G]=p&255;--G>=0&&(Z*=256);)this[y+G]=p/Z&255;return y+F},a.prototype.writeUint8=a.prototype.writeUInt8=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,1,255,0),this[y]=p&255,y+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,2,65535,0),this[y]=p&255,this[y+1]=p>>>8,y+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,2,65535,0),this[y]=p>>>8,this[y+1]=p&255,y+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,4,4294967295,0),this[y+3]=p>>>24,this[y+2]=p>>>16,this[y+1]=p>>>8,this[y]=p&255,y+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,4,4294967295,0),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4};function V(T,p,y,F,H){Oe(p,F,H,T,y,7);let G=Number(p&BigInt(4294967295));T[y++]=G,G=G>>8,T[y++]=G,G=G>>8,T[y++]=G,G=G>>8,T[y++]=G;let Z=Number(p>>BigInt(32)&BigInt(4294967295));return T[y++]=Z,Z=Z>>8,T[y++]=Z,Z=Z>>8,T[y++]=Z,Z=Z>>8,T[y++]=Z,y}function ie(T,p,y,F,H){Oe(p,F,H,T,y,7);let G=Number(p&BigInt(4294967295));T[y+7]=G,G=G>>8,T[y+6]=G,G=G>>8,T[y+5]=G,G=G>>8,T[y+4]=G;let Z=Number(p>>BigInt(32)&BigInt(4294967295));return T[y+3]=Z,Z=Z>>8,T[y+2]=Z,Z=Z>>8,T[y+1]=Z,Z=Z>>8,T[y]=Z,y+8}a.prototype.writeBigUInt64LE=un(function(p,y=0){return V(this,p,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=un(function(p,y=0){return ie(this,p,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(p,y,F,H){if(p=+p,y=y>>>0,!H){const Pe=Math.pow(2,8*F-1);g(this,p,y,F,Pe-1,-Pe)}let G=0,Z=1,Le=0;for(this[y]=p&255;++G<F&&(Z*=256);)p<0&&Le===0&&this[y+G-1]!==0&&(Le=1),this[y+G]=(p/Z>>0)-Le&255;return y+F},a.prototype.writeIntBE=function(p,y,F,H){if(p=+p,y=y>>>0,!H){const Pe=Math.pow(2,8*F-1);g(this,p,y,F,Pe-1,-Pe)}let G=F-1,Z=1,Le=0;for(this[y+G]=p&255;--G>=0&&(Z*=256);)p<0&&Le===0&&this[y+G+1]!==0&&(Le=1),this[y+G]=(p/Z>>0)-Le&255;return y+F},a.prototype.writeInt8=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,1,127,-128),p<0&&(p=255+p+1),this[y]=p&255,y+1},a.prototype.writeInt16LE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,2,32767,-32768),this[y]=p&255,this[y+1]=p>>>8,y+2},a.prototype.writeInt16BE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,2,32767,-32768),this[y]=p>>>8,this[y+1]=p&255,y+2},a.prototype.writeInt32LE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,4,2147483647,-2147483648),this[y]=p&255,this[y+1]=p>>>8,this[y+2]=p>>>16,this[y+3]=p>>>24,y+4},a.prototype.writeInt32BE=function(p,y,F){return p=+p,y=y>>>0,F||g(this,p,y,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4},a.prototype.writeBigInt64LE=un(function(p,y=0){return V(this,p,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=un(function(p,y=0){return ie(this,p,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(T,p,y,F,H,G){if(y+F>T.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ce(T,p,y,F,H){return p=+p,y=y>>>0,H||ae(T,p,y,4),n.write(T,p,y,F,23,4),y+4}a.prototype.writeFloatLE=function(p,y,F){return ce(this,p,y,!0,F)},a.prototype.writeFloatBE=function(p,y,F){return ce(this,p,y,!1,F)};function be(T,p,y,F,H){return p=+p,y=y>>>0,H||ae(T,p,y,8),n.write(T,p,y,F,52,8),y+8}a.prototype.writeDoubleLE=function(p,y,F){return be(this,p,y,!0,F)},a.prototype.writeDoubleBE=function(p,y,F){return be(this,p,y,!1,F)},a.prototype.copy=function(p,y,F,H){if(!a.isBuffer(p))throw new TypeError("argument should be a Buffer");if(F||(F=0),!H&&H!==0&&(H=this.length),y>=p.length&&(y=p.length),y||(y=0),H>0&&H<F&&(H=F),H===F||p.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),p.length-y<H-F&&(H=p.length-y+F);const G=H-F;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,F,H):Uint8Array.prototype.set.call(p,this.subarray(F,H),y),G},a.prototype.fill=function(p,y,F,H){if(typeof p=="string"){if(typeof y=="string"?(H=y,y=0,F=this.length):typeof F=="string"&&(H=F,F=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!a.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(p.length===1){const Z=p.charCodeAt(0);(H==="utf8"&&Z<128||H==="latin1")&&(p=Z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(y<0||this.length<y||this.length<F)throw new RangeError("Out of range index");if(F<=y)return this;y=y>>>0,F=F===void 0?this.length:F>>>0,p||(p=0);let G;if(typeof p=="number")for(G=y;G<F;++G)this[G]=p;else{const Z=a.isBuffer(p)?p:a.from(p,H),Le=Z.length;if(Le===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(G=0;G<F-y;++G)this[G+y]=Z[G%Le]}return this};const Ee={};function Ce(T,p,y){Ee[T]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(H){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:H,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}Ce("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ce("ERR_INVALID_ARG_TYPE",function(T,p){return`The "${T}" argument must be of type number. Received type ${typeof p}`},TypeError),Ce("ERR_OUT_OF_RANGE",function(T,p,y){let F=`The value of "${T}" is out of range.`,H=y;return Number.isInteger(y)&&Math.abs(y)>2**32?H=ut(String(y)):typeof y=="bigint"&&(H=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(H=ut(H)),H+="n"),F+=` It must be ${p}. Received ${H}`,F},RangeError);function ut(T){let p="",y=T.length;const F=T[0]==="-"?1:0;for(;y>=F+4;y-=3)p=`_${T.slice(y-3,y)}${p}`;return`${T.slice(0,y)}${p}`}function De(T,p,y){bt(p,"offset"),(T[p]===void 0||T[p+y]===void 0)&&Fe(p,T.length-(y+1))}function Oe(T,p,y,F,H,G){if(T>y||T<p){const Z=typeof p=="bigint"?"n":"";let Le;throw G>3?p===0||p===BigInt(0)?Le=`>= 0${Z} and < 2${Z} ** ${(G+1)*8}${Z}`:Le=`>= -(2${Z} ** ${(G+1)*8-1}${Z}) and < 2 ** ${(G+1)*8-1}${Z}`:Le=`>= ${p}${Z} and <= ${y}${Z}`,new Ee.ERR_OUT_OF_RANGE("value",Le,T)}De(F,H,G)}function bt(T,p){if(typeof T!="number")throw new Ee.ERR_INVALID_ARG_TYPE(p,"number",T)}function Fe(T,p,y){throw Math.floor(T)!==T?(bt(T,y),new Ee.ERR_OUT_OF_RANGE(y||"offset","an integer",T)):p<0?new Ee.ERR_BUFFER_OUT_OF_BOUNDS:new Ee.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${p}`,T)}const qe=/[^+/0-9A-Za-z-_]/g;function mi(T){if(T=T.split("=")[0],T=T.trim().replace(qe,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function tt(T,p){p=p||1/0;let y;const F=T.length;let H=null;const G=[];for(let Z=0;Z<F;++Z){if(y=T.charCodeAt(Z),y>55295&&y<57344){if(!H){if(y>56319){(p-=3)>-1&&G.push(239,191,189);continue}else if(Z+1===F){(p-=3)>-1&&G.push(239,191,189);continue}H=y;continue}if(y<56320){(p-=3)>-1&&G.push(239,191,189),H=y;continue}y=(H-55296<<10|y-56320)+65536}else H&&(p-=3)>-1&&G.push(239,191,189);if(H=null,y<128){if((p-=1)<0)break;G.push(y)}else if(y<2048){if((p-=2)<0)break;G.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;G.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;G.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return G}function dt(T){const p=[];for(let y=0;y<T.length;++y)p.push(T.charCodeAt(y)&255);return p}function gi(T,p){let y,F,H;const G=[];for(let Z=0;Z<T.length&&!((p-=2)<0);++Z)y=T.charCodeAt(Z),F=y>>8,H=y%256,G.push(H),G.push(F);return G}function nt(T){return e.toByteArray(mi(T))}function Ye(T,p,y,F){let H;for(H=0;H<F&&!(H+y>=p.length||H>=T.length);++H)p[H+y]=T[H];return H}function Xt(T,p){return T instanceof p||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===p.name}function rt(T){return T!==T}const it=function(){const T="0123456789abcdef",p=new Array(256);for(let y=0;y<16;++y){const F=y*16;for(let H=0;H<16;++H)p[F+H]=T[y]+T[H]}return p}();function un(T){return typeof BigInt>"u"?st:T}function st(){throw new Error("BigInt not supported")}})(Ne);var $p={},K1={exports:{}},dr={},G1={exports:{}},Q1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,U){var j=A.length;A.push(U);e:for(;0<j;){var N=j-1>>>1,g=A[N];if(0<i(g,U))A[N]=U,A[j]=g,j=N;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var U=A[0],j=A.pop();if(j!==U){A[0]=j;e:for(var N=0,g=A.length,V=g>>>1;N<V;){var ie=2*(N+1)-1,ae=A[ie],ce=ie+1,be=A[ce];if(0>i(ae,j))ce<g&&0>i(be,ae)?(A[N]=be,A[ce]=j,N=ce):(A[N]=ae,A[ie]=j,N=ie);else if(ce<g&&0>i(be,j))A[N]=be,A[ce]=j,N=ce;else break e}}return U}function i(A,U){var j=A.sortIndex-U.sortIndex;return j!==0?j:A.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,m=null,w=3,S=!1,M=!1,L=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(A){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=A)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function q(A){if(L=!1,k(A),!M)if(n(l)!==null)M=!0,I(Y);else{var U=n(c);U!==null&&x(q,U.startTime-A)}}function Y(A,U){M=!1,L&&(L=!1,b(P),P=-1),S=!0;var j=w;try{for(k(U),m=n(l);m!==null&&(!(m.expirationTime>U)||A&&!$());){var N=m.callback;if(typeof N=="function"){m.callback=null,w=m.priorityLevel;var g=N(m.expirationTime<=U);U=t.unstable_now(),typeof g=="function"?m.callback=g:m===n(l)&&r(l),k(U)}else r(l);m=n(l)}if(m!==null)var V=!0;else{var ie=n(c);ie!==null&&x(q,ie.startTime-U),V=!1}return V}finally{m=null,w=j,S=!1}}var X=!1,O=null,P=-1,D=5,z=-1;function $(){return!(t.unstable_now()-z<D)}function W(){if(O!==null){var A=t.unstable_now();z=A;var U=!0;try{U=O(!0,A)}finally{U?E():(X=!1,O=null)}}else X=!1}var E;if(typeof C=="function")E=function(){C(W)};else if(typeof MessageChannel<"u"){var h=new MessageChannel,v=h.port2;h.port1.onmessage=W,E=function(){v.postMessage(null)}}else E=function(){R(W,0)};function I(A){O=A,X||(X=!0,E())}function x(A,U){P=R(function(){A(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){M||S||(M=!0,I(Y))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(w){case 1:case 2:case 3:var U=3;break;default:U=w}var j=w;w=U;try{return A()}finally{w=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,U){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=w;w=A;try{return U()}finally{w=j}},t.unstable_scheduleCallback=function(A,U,j){var N=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?N+j:N):j=N,A){case 1:var g=-1;break;case 2:g=250;break;case 5:g=1073741823;break;case 4:g=1e4;break;default:g=5e3}return g=j+g,A={id:f++,callback:U,priorityLevel:A,startTime:j,expirationTime:g,sortIndex:-1},j>N?(A.sortIndex=j,e(c,A),n(l)===null&&A===n(c)&&(L?(b(P),P=-1):L=!0,x(q,j-N))):(A.sortIndex=g,e(l,A),M||S||(M=!0,I(Y))),A},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(A){var U=w;return function(){var j=w;w=U;try{return A.apply(this,arguments)}finally{w=j}}}})(Q1);G1.exports=Q1;var Yx=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx=le,fr=Yx;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y1=new Set,hu={};function ko(t,e){Ma(t,e),Ma(t+"Capture",e)}function Ma(t,e){for(hu[t]=e,t=0;t<e.length;t++)Y1.add(e[t])}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qp=Object.prototype.hasOwnProperty,Jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yv={},vv={};function Zx(t){return qp.call(vv,t)?!0:qp.call(yv,t)?!1:Jx.test(t)?vv[t]=!0:(yv[t]=!0,!1)}function ek(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tk(t,e,n,r){if(e===null||typeof e>"u"||ek(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xn[t]=new Qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xn[e]=new Qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xn[t]=new Qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xn[t]=new Qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xn[t]=new Qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xn[t]=new Qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xn[t]=new Qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xn[t]=new Qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xn[t]=new Qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rg=/[\-:]([a-z])/g;function Cg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rg,Cg);xn[e]=new Qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rg,Cg);xn[e]=new Qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rg,Cg);xn[e]=new Qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,e,n,r){var i=xn.hasOwnProperty(e)?xn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tk(e,n,i,r)&&(n=null),r||i===null?Zx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ji=Xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cc=Symbol.for("react.element"),oa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),Ng=Symbol.for("react.strict_mode"),Wp=Symbol.for("react.profiler"),X1=Symbol.for("react.provider"),J1=Symbol.for("react.context"),Mg=Symbol.for("react.forward_ref"),Hp=Symbol.for("react.suspense"),Kp=Symbol.for("react.suspense_list"),Lg=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),Z1=Symbol.for("react.offscreen"),wv=Symbol.iterator;function Rl(t){return t===null||typeof t!="object"?null:(t=wv&&t[wv]||t["@@iterator"],typeof t=="function"?t:null)}var Ut=Object.assign,Fd;function Ul(t){if(Fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fd=e&&e[1]||""}return`
`+Fd+t}var zd=!1;function jd(t,e){if(!t||zd)return"";zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function nk(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=jd(t.type,!1),t;case 11:return t=jd(t.type.render,!1),t;case 1:return t=jd(t.type,!0),t;default:return""}}function Gp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case aa:return"Fragment";case oa:return"Portal";case Wp:return"Profiler";case Ng:return"StrictMode";case Hp:return"Suspense";case Kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J1:return(t.displayName||"Context")+".Consumer";case X1:return(t._context.displayName||"Context")+".Provider";case Mg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lg:return e=t.displayName||null,e!==null?e:Gp(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return Gp(t(e))}catch{}}return null}function rk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gp(e);case 8:return e===Ng?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ik(t){var e=eE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pc(t){t._valueTracker||(t._valueTracker=ik(t))}function tE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qp(t,e){var n=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _v(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nE(t,e){e=e.checked,e!=null&&Pg(t,"checked",e,!1)}function Yp(t,e){nE(t,e);var n=Ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xp(t,e.type,Ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ev(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xp(t,e,n){(e!=="number"||kh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fl=Array.isArray;function Ea(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Iv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Fl(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ps(n)}}function rE(t,e){var n=Ps(e.value),r=Ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nc,sE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nc=Nc||document.createElement("div"),Nc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sk=["Webkit","ms","Moz","O"];Object.keys(Xl).forEach(function(t){sk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xl[e]=Xl[t]})});function oE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xl.hasOwnProperty(t)&&Xl[t]?(""+e).trim():e+"px"}function aE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ok=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function em(t,e){if(e){if(ok[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function tm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nm=null;function Bg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rm=null,Ia=null,Sa=null;function Tv(t){if(t=Yu(t)){if(typeof rm!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Df(e),rm(t.stateNode,t.type,e))}}function lE(t){Ia?Sa?Sa.push(t):Sa=[t]:Ia=t}function uE(){if(Ia){var t=Ia,e=Sa;if(Sa=Ia=null,Tv(t),e)for(t=0;t<e.length;t++)Tv(e[t])}}function cE(t,e){return t(e)}function hE(){}var $d=!1;function fE(t,e,n){if($d)return t(e,n);$d=!0;try{return cE(t,e,n)}finally{$d=!1,(Ia!==null||Sa!==null)&&(hE(),uE())}}function du(t,e){var n=t.stateNode;if(n===null)return null;var r=Df(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var im=!1;if(Li)try{var Cl={};Object.defineProperty(Cl,"passive",{get:function(){im=!0}}),window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{im=!1}function ak(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Jl=!1,Rh=null,Ch=!1,sm=null,lk={onError:function(t){Jl=!0,Rh=t}};function uk(t,e,n,r,i,s,o,a,l){Jl=!1,Rh=null,ak.apply(lk,arguments)}function ck(t,e,n,r,i,s,o,a,l){if(uk.apply(this,arguments),Jl){if(Jl){var c=Rh;Jl=!1,Rh=null}else throw Error(oe(198));Ch||(Ch=!0,sm=c)}}function Ro(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Av(t){if(Ro(t)!==t)throw Error(oe(188))}function hk(t){var e=t.alternate;if(!e){if(e=Ro(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Av(i),t;if(s===r)return Av(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function pE(t){return t=hk(t),t!==null?mE(t):null}function mE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mE(t);if(e!==null)return e;t=t.sibling}return null}var gE=fr.unstable_scheduleCallback,bv=fr.unstable_cancelCallback,fk=fr.unstable_shouldYield,dk=fr.unstable_requestPaint,Yt=fr.unstable_now,pk=fr.unstable_getCurrentPriorityLevel,Og=fr.unstable_ImmediatePriority,yE=fr.unstable_UserBlockingPriority,Ph=fr.unstable_NormalPriority,mk=fr.unstable_LowPriority,vE=fr.unstable_IdlePriority,Mf=null,ri=null;function gk(t){if(ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(Mf,t,void 0,(t.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:wk,yk=Math.log,vk=Math.LN2;function wk(t){return t>>>=0,t===0?32:31-(yk(t)/vk|0)|0}var Mc=64,Lc=4194304;function zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=zl(a):(s&=o,s!==0&&(r=zl(s)))}else o=n&~i,o!==0?r=zl(o):s!==0&&(r=zl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jr(e),i=1<<n,r|=t[n],e&=~i;return r}function _k(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ek(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_k(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function om(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=Mc;return Mc<<=1,!(Mc&4194240)&&(Mc=64),t}function qd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jr(e),t[e]=n}function Ik(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Dg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ot=0;function _E(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var EE,Vg,IE,SE,TE,am=!1,Bc=[],ms=null,gs=null,ys=null,pu=new Map,mu=new Map,rs=[],Sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xv(t,e){switch(t){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(e.pointerId)}}function Pl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Yu(e),e!==null&&Vg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Tk(t,e,n,r,i){switch(e){case"focusin":return ms=Pl(ms,t,e,n,r,i),!0;case"dragenter":return gs=Pl(gs,t,e,n,r,i),!0;case"mouseover":return ys=Pl(ys,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return pu.set(s,Pl(pu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,mu.set(s,Pl(mu.get(s)||null,t,e,n,r,i)),!0}return!1}function AE(t){var e=oo(t.target);if(e!==null){var n=Ro(e);if(n!==null){if(e=n.tag,e===13){if(e=dE(n),e!==null){t.blockedOn=e,TE(t.priority,function(){IE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ah(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nm=r,n.target.dispatchEvent(r),nm=null}else return e=Yu(n),e!==null&&Vg(e),t.blockedOn=n,!1;e.shift()}return!0}function kv(t,e,n){ah(t)&&n.delete(e)}function Ak(){am=!1,ms!==null&&ah(ms)&&(ms=null),gs!==null&&ah(gs)&&(gs=null),ys!==null&&ah(ys)&&(ys=null),pu.forEach(kv),mu.forEach(kv)}function Nl(t,e){t.blockedOn===e&&(t.blockedOn=null,am||(am=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,Ak)))}function gu(t){function e(i){return Nl(i,t)}if(0<Bc.length){Nl(Bc[0],t);for(var n=1;n<Bc.length;n++){var r=Bc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ms!==null&&Nl(ms,t),gs!==null&&Nl(gs,t),ys!==null&&Nl(ys,t),pu.forEach(e),mu.forEach(e),n=0;n<rs.length;n++)r=rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rs.length&&(n=rs[0],n.blockedOn===null);)AE(n),n.blockedOn===null&&rs.shift()}var Ta=ji.ReactCurrentBatchConfig,Mh=!0;function bk(t,e,n,r){var i=ot,s=Ta.transition;Ta.transition=null;try{ot=1,Ug(t,e,n,r)}finally{ot=i,Ta.transition=s}}function xk(t,e,n,r){var i=ot,s=Ta.transition;Ta.transition=null;try{ot=4,Ug(t,e,n,r)}finally{ot=i,Ta.transition=s}}function Ug(t,e,n,r){if(Mh){var i=lm(t,e,n,r);if(i===null)ep(t,e,r,Lh,n),xv(t,r);else if(Tk(i,t,e,n,r))r.stopPropagation();else if(xv(t,r),e&4&&-1<Sk.indexOf(t)){for(;i!==null;){var s=Yu(i);if(s!==null&&EE(s),s=lm(t,e,n,r),s===null&&ep(t,e,r,Lh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ep(t,e,r,null,n)}}var Lh=null;function lm(t,e,n,r){if(Lh=null,t=Bg(r),t=oo(t),t!==null)if(e=Ro(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lh=t,null}function bE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pk()){case Og:return 1;case yE:return 4;case Ph:case mk:return 16;case vE:return 536870912;default:return 16}default:return 16}}var us=null,Fg=null,lh=null;function xE(){if(lh)return lh;var t,e=Fg,n=e.length,r,i="value"in us?us.value:us.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return lh=i.slice(t,1<r?1-r:void 0)}function uh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oc(){return!0}function Rv(){return!1}function pr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oc:Rv,this.isPropagationStopped=Rv,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oc)},persist:function(){},isPersistent:Oc}),e}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zg=pr(el),Qu=Ut({},el,{view:0,detail:0}),kk=pr(Qu),Wd,Hd,Ml,Lf=Ut({},Qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ml&&(Ml&&t.type==="mousemove"?(Wd=t.screenX-Ml.screenX,Hd=t.screenY-Ml.screenY):Hd=Wd=0,Ml=t),Wd)},movementY:function(t){return"movementY"in t?t.movementY:Hd}}),Cv=pr(Lf),Rk=Ut({},Lf,{dataTransfer:0}),Ck=pr(Rk),Pk=Ut({},Qu,{relatedTarget:0}),Kd=pr(Pk),Nk=Ut({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Mk=pr(Nk),Lk=Ut({},el,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bk=pr(Lk),Ok=Ut({},el,{data:0}),Pv=pr(Ok),Dk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uk[t])?!!e[t]:!1}function jg(){return Fk}var zk=Ut({},Qu,{key:function(t){if(t.key){var e=Dk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(t){return t.type==="keypress"?uh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jk=pr(zk),$k=Ut({},Lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nv=pr($k),qk=Ut({},Qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),Wk=pr(qk),Hk=Ut({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kk=pr(Hk),Gk=Ut({},Lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qk=pr(Gk),Yk=[9,13,27,32],$g=Li&&"CompositionEvent"in window,Zl=null;Li&&"documentMode"in document&&(Zl=document.documentMode);var Xk=Li&&"TextEvent"in window&&!Zl,kE=Li&&(!$g||Zl&&8<Zl&&11>=Zl),Mv=String.fromCharCode(32),Lv=!1;function RE(t,e){switch(t){case"keyup":return Yk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var la=!1;function Jk(t,e){switch(t){case"compositionend":return CE(e);case"keypress":return e.which!==32?null:(Lv=!0,Mv);case"textInput":return t=e.data,t===Mv&&Lv?null:t;default:return null}}function Zk(t,e){if(la)return t==="compositionend"||!$g&&RE(t,e)?(t=xE(),lh=Fg=us=null,la=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kE&&e.locale!=="ko"?null:e.data;default:return null}}var eR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eR[t.type]:e==="textarea"}function PE(t,e,n,r){lE(r),e=Bh(e,"onChange"),0<e.length&&(n=new zg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eu=null,yu=null;function tR(t){jE(t,0)}function Bf(t){var e=ha(t);if(tE(e))return t}function nR(t,e){if(t==="change")return e}var NE=!1;if(Li){var Gd;if(Li){var Qd="oninput"in document;if(!Qd){var Ov=document.createElement("div");Ov.setAttribute("oninput","return;"),Qd=typeof Ov.oninput=="function"}Gd=Qd}else Gd=!1;NE=Gd&&(!document.documentMode||9<document.documentMode)}function Dv(){eu&&(eu.detachEvent("onpropertychange",ME),yu=eu=null)}function ME(t){if(t.propertyName==="value"&&Bf(yu)){var e=[];PE(e,yu,t,Bg(t)),fE(tR,e)}}function rR(t,e,n){t==="focusin"?(Dv(),eu=e,yu=n,eu.attachEvent("onpropertychange",ME)):t==="focusout"&&Dv()}function iR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bf(yu)}function sR(t,e){if(t==="click")return Bf(e)}function oR(t,e){if(t==="input"||t==="change")return Bf(e)}function aR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:aR;function vu(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qp.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function Vv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uv(t,e){var n=Vv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vv(n)}}function LE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BE(){for(var t=window,e=kh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kh(t.document)}return e}function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lR(t){var e=BE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LE(n.ownerDocument.documentElement,n)){if(r!==null&&qg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Uv(n,s);var o=Uv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uR=Li&&"documentMode"in document&&11>=document.documentMode,ua=null,um=null,tu=null,cm=!1;function Fv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cm||ua==null||ua!==kh(r)||(r=ua,"selectionStart"in r&&qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tu&&vu(tu,r)||(tu=r,r=Bh(um,"onSelect"),0<r.length&&(e=new zg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ua)))}function Dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ca={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Yd={},OE={};Li&&(OE=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Of(t){if(Yd[t])return Yd[t];if(!ca[t])return t;var e=ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OE)return Yd[t]=e[n];return t}var DE=Of("animationend"),VE=Of("animationiteration"),UE=Of("animationstart"),FE=Of("transitionend"),zE=new Map,zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){zE.set(t,e),ko(e,[t])}for(var Xd=0;Xd<zv.length;Xd++){var Jd=zv[Xd],cR=Jd.toLowerCase(),hR=Jd[0].toUpperCase()+Jd.slice(1);zs(cR,"on"+hR)}zs(DE,"onAnimationEnd");zs(VE,"onAnimationIteration");zs(UE,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(FE,"onTransitionEnd");Ma("onMouseEnter",["mouseout","mouseover"]);Ma("onMouseLeave",["mouseout","mouseover"]);Ma("onPointerEnter",["pointerout","pointerover"]);Ma("onPointerLeave",["pointerout","pointerover"]);ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ko("onBeforeInput",["compositionend","keypress","textInput","paste"]);ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fR=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function jv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ck(r,e,void 0,t),t.currentTarget=null}function jE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jv(i,a,c),s=l}}}if(Ch)throw t=sm,Ch=!1,sm=null,t}function St(t,e){var n=e[mm];n===void 0&&(n=e[mm]=new Set);var r=t+"__bubble";n.has(r)||($E(e,t,2,!1),n.add(r))}function Zd(t,e,n){var r=0;e&&(r|=4),$E(n,t,r,e)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function wu(t){if(!t[Vc]){t[Vc]=!0,Y1.forEach(function(n){n!=="selectionchange"&&(fR.has(n)||Zd(n,!1,t),Zd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vc]||(e[Vc]=!0,Zd("selectionchange",!1,e))}}function $E(t,e,n,r){switch(bE(e)){case 1:var i=bk;break;case 4:i=xk;break;default:i=Ug}n=i.bind(null,e,n,t),i=void 0,!im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ep(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=oo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fE(function(){var c=s,f=Bg(n),m=[];e:{var w=zE.get(t);if(w!==void 0){var S=zg,M=t;switch(t){case"keypress":if(uh(n)===0)break e;case"keydown":case"keyup":S=jk;break;case"focusin":M="focus",S=Kd;break;case"focusout":M="blur",S=Kd;break;case"beforeblur":case"afterblur":S=Kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Cv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Wk;break;case DE:case VE:case UE:S=Mk;break;case FE:S=Kk;break;case"scroll":S=kk;break;case"wheel":S=Qk;break;case"copy":case"cut":case"paste":S=Bk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Nv}var L=(e&4)!==0,R=!L&&t==="scroll",b=L?w!==null?w+"Capture":null:w;L=[];for(var C=c,k;C!==null;){k=C;var q=k.stateNode;if(k.tag===5&&q!==null&&(k=q,b!==null&&(q=du(C,b),q!=null&&L.push(_u(C,q,k)))),R)break;C=C.return}0<L.length&&(w=new S(w,M,null,n,f),m.push({event:w,listeners:L}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",w&&n!==nm&&(M=n.relatedTarget||n.fromElement)&&(oo(M)||M[Bi]))break e;if((S||w)&&(w=f.window===f?f:(w=f.ownerDocument)?w.defaultView||w.parentWindow:window,S?(M=n.relatedTarget||n.toElement,S=c,M=M?oo(M):null,M!==null&&(R=Ro(M),M!==R||M.tag!==5&&M.tag!==6)&&(M=null)):(S=null,M=c),S!==M)){if(L=Cv,q="onMouseLeave",b="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(L=Nv,q="onPointerLeave",b="onPointerEnter",C="pointer"),R=S==null?w:ha(S),k=M==null?w:ha(M),w=new L(q,C+"leave",S,n,f),w.target=R,w.relatedTarget=k,q=null,oo(f)===c&&(L=new L(b,C+"enter",M,n,f),L.target=k,L.relatedTarget=R,q=L),R=q,S&&M)t:{for(L=S,b=M,C=0,k=L;k;k=Jo(k))C++;for(k=0,q=b;q;q=Jo(q))k++;for(;0<C-k;)L=Jo(L),C--;for(;0<k-C;)b=Jo(b),k--;for(;C--;){if(L===b||b!==null&&L===b.alternate)break t;L=Jo(L),b=Jo(b)}L=null}else L=null;S!==null&&$v(m,w,S,L,!1),M!==null&&R!==null&&$v(m,R,M,L,!0)}}e:{if(w=c?ha(c):window,S=w.nodeName&&w.nodeName.toLowerCase(),S==="select"||S==="input"&&w.type==="file")var Y=nR;else if(Bv(w))if(NE)Y=oR;else{Y=iR;var X=rR}else(S=w.nodeName)&&S.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(Y=sR);if(Y&&(Y=Y(t,c))){PE(m,Y,n,f);break e}X&&X(t,w,c),t==="focusout"&&(X=w._wrapperState)&&X.controlled&&w.type==="number"&&Xp(w,"number",w.value)}switch(X=c?ha(c):window,t){case"focusin":(Bv(X)||X.contentEditable==="true")&&(ua=X,um=c,tu=null);break;case"focusout":tu=um=ua=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,Fv(m,n,f);break;case"selectionchange":if(uR)break;case"keydown":case"keyup":Fv(m,n,f)}var O;if($g)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else la?RE(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(kE&&n.locale!=="ko"&&(la||P!=="onCompositionStart"?P==="onCompositionEnd"&&la&&(O=xE()):(us=f,Fg="value"in us?us.value:us.textContent,la=!0)),X=Bh(c,P),0<X.length&&(P=new Pv(P,t,null,n,f),m.push({event:P,listeners:X}),O?P.data=O:(O=CE(n),O!==null&&(P.data=O)))),(O=Xk?Jk(t,n):Zk(t,n))&&(c=Bh(c,"onBeforeInput"),0<c.length&&(f=new Pv("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:c}),f.data=O))}jE(m,e)})}function _u(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=du(t,n),s!=null&&r.unshift(_u(t,s,i)),s=du(t,e),s!=null&&r.push(_u(t,s,i))),t=t.return}return r}function Jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $v(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=du(n,s),l!=null&&o.unshift(_u(n,l,a))):i||(l=du(n,s),l!=null&&o.push(_u(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dR=/\r\n?/g,pR=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace(dR,`
`).replace(pR,"")}function Uc(t,e,n){if(e=qv(e),qv(t)!==e&&n)throw Error(oe(425))}function Oh(){}var hm=null,fm=null;function dm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pm=typeof setTimeout=="function"?setTimeout:void 0,mR=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,gR=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(t){return Wv.resolve(null).then(t).catch(yR)}:pm;function yR(t){setTimeout(function(){throw t})}function tp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),gu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);gu(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tl=Math.random().toString(36).slice(2),ti="__reactFiber$"+tl,Eu="__reactProps$"+tl,Bi="__reactContainer$"+tl,mm="__reactEvents$"+tl,vR="__reactListeners$"+tl,wR="__reactHandles$"+tl;function oo(t){var e=t[ti];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bi]||n[ti]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hv(t);t!==null;){if(n=t[ti])return n;t=Hv(t)}return e}t=n,n=t.parentNode}return null}function Yu(t){return t=t[ti]||t[Bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Df(t){return t[Eu]||null}var gm=[],fa=-1;function js(t){return{current:t}}function At(t){0>fa||(t.current=gm[fa],gm[fa]=null,fa--)}function vt(t,e){fa++,gm[fa]=t.current,t.current=e}var Ns={},zn=js(Ns),nr=js(!1),mo=Ns;function La(t,e){var n=t.type.contextTypes;if(!n)return Ns;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rr(t){return t=t.childContextTypes,t!=null}function Dh(){At(nr),At(zn)}function Kv(t,e,n){if(zn.current!==Ns)throw Error(oe(168));vt(zn,e),vt(nr,n)}function qE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,rk(t)||"Unknown",i));return Ut({},n,r)}function Vh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ns,mo=zn.current,vt(zn,t),vt(nr,nr.current),!0}function Gv(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=qE(t,e,mo),r.__reactInternalMemoizedMergedChildContext=t,At(nr),At(zn),vt(zn,t)):At(nr),vt(nr,n)}var Ii=null,Vf=!1,np=!1;function WE(t){Ii===null?Ii=[t]:Ii.push(t)}function _R(t){Vf=!0,WE(t)}function $s(){if(!np&&Ii!==null){np=!0;var t=0,e=ot;try{var n=Ii;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ii=null,Vf=!1}catch(i){throw Ii!==null&&(Ii=Ii.slice(t+1)),gE(Og,$s),i}finally{ot=e,np=!1}}return null}var da=[],pa=0,Uh=null,Fh=0,Tr=[],Ar=0,go=null,xi=1,ki="";function eo(t,e){da[pa++]=Fh,da[pa++]=Uh,Uh=t,Fh=e}function HE(t,e,n){Tr[Ar++]=xi,Tr[Ar++]=ki,Tr[Ar++]=go,go=t;var r=xi;t=ki;var i=32-jr(r)-1;r&=~(1<<i),n+=1;var s=32-jr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xi=1<<32-jr(e)+i|n<<i|r,ki=s+t}else xi=1<<s|n<<i|r,ki=t}function Wg(t){t.return!==null&&(eo(t,1),HE(t,1,0))}function Hg(t){for(;t===Uh;)Uh=da[--pa],da[pa]=null,Fh=da[--pa],da[pa]=null;for(;t===go;)go=Tr[--Ar],Tr[Ar]=null,ki=Tr[--Ar],Tr[Ar]=null,xi=Tr[--Ar],Tr[Ar]=null}var hr=null,ur=null,Pt=!1,Ur=null;function KE(t,e){var n=xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,ur=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=go!==null?{id:xi,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,ur=null,!0):!1;default:return!1}}function ym(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vm(t){if(Pt){var e=ur;if(e){var n=e;if(!Qv(t,e)){if(ym(t))throw Error(oe(418));e=vs(n.nextSibling);var r=hr;e&&Qv(t,e)?KE(r,n):(t.flags=t.flags&-4097|2,Pt=!1,hr=t)}}else{if(ym(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Pt=!1,hr=t}}}function Yv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Fc(t){if(t!==hr)return!1;if(!Pt)return Yv(t),Pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dm(t.type,t.memoizedProps)),e&&(e=ur)){if(ym(t))throw GE(),Error(oe(418));for(;e;)KE(t,e),e=vs(e.nextSibling)}if(Yv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=hr?vs(t.stateNode.nextSibling):null;return!0}function GE(){for(var t=ur;t;)t=vs(t.nextSibling)}function Ba(){ur=hr=null,Pt=!1}function Kg(t){Ur===null?Ur=[t]:Ur.push(t)}var ER=ji.ReactCurrentBatchConfig;function Ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function zc(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xv(t){var e=t._init;return e(t._payload)}function QE(t){function e(b,C){if(t){var k=b.deletions;k===null?(b.deletions=[C],b.flags|=16):k.push(C)}}function n(b,C){if(!t)return null;for(;C!==null;)e(b,C),C=C.sibling;return null}function r(b,C){for(b=new Map;C!==null;)C.key!==null?b.set(C.key,C):b.set(C.index,C),C=C.sibling;return b}function i(b,C){return b=Is(b,C),b.index=0,b.sibling=null,b}function s(b,C,k){return b.index=k,t?(k=b.alternate,k!==null?(k=k.index,k<C?(b.flags|=2,C):k):(b.flags|=2,C)):(b.flags|=1048576,C)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,C,k,q){return C===null||C.tag!==6?(C=up(k,b.mode,q),C.return=b,C):(C=i(C,k),C.return=b,C)}function l(b,C,k,q){var Y=k.type;return Y===aa?f(b,C,k.props.children,q,k.key):C!==null&&(C.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===ts&&Xv(Y)===C.type)?(q=i(C,k.props),q.ref=Ll(b,C,k),q.return=b,q):(q=gh(k.type,k.key,k.props,null,b.mode,q),q.ref=Ll(b,C,k),q.return=b,q)}function c(b,C,k,q){return C===null||C.tag!==4||C.stateNode.containerInfo!==k.containerInfo||C.stateNode.implementation!==k.implementation?(C=cp(k,b.mode,q),C.return=b,C):(C=i(C,k.children||[]),C.return=b,C)}function f(b,C,k,q,Y){return C===null||C.tag!==7?(C=ho(k,b.mode,q,Y),C.return=b,C):(C=i(C,k),C.return=b,C)}function m(b,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return C=up(""+C,b.mode,k),C.return=b,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Cc:return k=gh(C.type,C.key,C.props,null,b.mode,k),k.ref=Ll(b,null,C),k.return=b,k;case oa:return C=cp(C,b.mode,k),C.return=b,C;case ts:var q=C._init;return m(b,q(C._payload),k)}if(Fl(C)||Rl(C))return C=ho(C,b.mode,k,null),C.return=b,C;zc(b,C)}return null}function w(b,C,k,q){var Y=C!==null?C.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return Y!==null?null:a(b,C,""+k,q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Cc:return k.key===Y?l(b,C,k,q):null;case oa:return k.key===Y?c(b,C,k,q):null;case ts:return Y=k._init,w(b,C,Y(k._payload),q)}if(Fl(k)||Rl(k))return Y!==null?null:f(b,C,k,q,null);zc(b,k)}return null}function S(b,C,k,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number")return b=b.get(k)||null,a(C,b,""+q,Y);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Cc:return b=b.get(q.key===null?k:q.key)||null,l(C,b,q,Y);case oa:return b=b.get(q.key===null?k:q.key)||null,c(C,b,q,Y);case ts:var X=q._init;return S(b,C,k,X(q._payload),Y)}if(Fl(q)||Rl(q))return b=b.get(k)||null,f(C,b,q,Y,null);zc(C,q)}return null}function M(b,C,k,q){for(var Y=null,X=null,O=C,P=C=0,D=null;O!==null&&P<k.length;P++){O.index>P?(D=O,O=null):D=O.sibling;var z=w(b,O,k[P],q);if(z===null){O===null&&(O=D);break}t&&O&&z.alternate===null&&e(b,O),C=s(z,C,P),X===null?Y=z:X.sibling=z,X=z,O=D}if(P===k.length)return n(b,O),Pt&&eo(b,P),Y;if(O===null){for(;P<k.length;P++)O=m(b,k[P],q),O!==null&&(C=s(O,C,P),X===null?Y=O:X.sibling=O,X=O);return Pt&&eo(b,P),Y}for(O=r(b,O);P<k.length;P++)D=S(O,b,P,k[P],q),D!==null&&(t&&D.alternate!==null&&O.delete(D.key===null?P:D.key),C=s(D,C,P),X===null?Y=D:X.sibling=D,X=D);return t&&O.forEach(function($){return e(b,$)}),Pt&&eo(b,P),Y}function L(b,C,k,q){var Y=Rl(k);if(typeof Y!="function")throw Error(oe(150));if(k=Y.call(k),k==null)throw Error(oe(151));for(var X=Y=null,O=C,P=C=0,D=null,z=k.next();O!==null&&!z.done;P++,z=k.next()){O.index>P?(D=O,O=null):D=O.sibling;var $=w(b,O,z.value,q);if($===null){O===null&&(O=D);break}t&&O&&$.alternate===null&&e(b,O),C=s($,C,P),X===null?Y=$:X.sibling=$,X=$,O=D}if(z.done)return n(b,O),Pt&&eo(b,P),Y;if(O===null){for(;!z.done;P++,z=k.next())z=m(b,z.value,q),z!==null&&(C=s(z,C,P),X===null?Y=z:X.sibling=z,X=z);return Pt&&eo(b,P),Y}for(O=r(b,O);!z.done;P++,z=k.next())z=S(O,b,P,z.value,q),z!==null&&(t&&z.alternate!==null&&O.delete(z.key===null?P:z.key),C=s(z,C,P),X===null?Y=z:X.sibling=z,X=z);return t&&O.forEach(function(W){return e(b,W)}),Pt&&eo(b,P),Y}function R(b,C,k,q){if(typeof k=="object"&&k!==null&&k.type===aa&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Cc:e:{for(var Y=k.key,X=C;X!==null;){if(X.key===Y){if(Y=k.type,Y===aa){if(X.tag===7){n(b,X.sibling),C=i(X,k.props.children),C.return=b,b=C;break e}}else if(X.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===ts&&Xv(Y)===X.type){n(b,X.sibling),C=i(X,k.props),C.ref=Ll(b,X,k),C.return=b,b=C;break e}n(b,X);break}else e(b,X);X=X.sibling}k.type===aa?(C=ho(k.props.children,b.mode,q,k.key),C.return=b,b=C):(q=gh(k.type,k.key,k.props,null,b.mode,q),q.ref=Ll(b,C,k),q.return=b,b=q)}return o(b);case oa:e:{for(X=k.key;C!==null;){if(C.key===X)if(C.tag===4&&C.stateNode.containerInfo===k.containerInfo&&C.stateNode.implementation===k.implementation){n(b,C.sibling),C=i(C,k.children||[]),C.return=b,b=C;break e}else{n(b,C);break}else e(b,C);C=C.sibling}C=cp(k,b.mode,q),C.return=b,b=C}return o(b);case ts:return X=k._init,R(b,C,X(k._payload),q)}if(Fl(k))return M(b,C,k,q);if(Rl(k))return L(b,C,k,q);zc(b,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,C!==null&&C.tag===6?(n(b,C.sibling),C=i(C,k),C.return=b,b=C):(n(b,C),C=up(k,b.mode,q),C.return=b,b=C),o(b)):n(b,C)}return R}var Oa=QE(!0),YE=QE(!1),zh=js(null),jh=null,ma=null,Gg=null;function Qg(){Gg=ma=jh=null}function Yg(t){var e=zh.current;At(zh),t._currentValue=e}function wm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Aa(t,e){jh=t,Gg=ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tr=!0),t.firstContext=null)}function Cr(t){var e=t._currentValue;if(Gg!==t)if(t={context:t,memoizedValue:e,next:null},ma===null){if(jh===null)throw Error(oe(308));ma=t,jh.dependencies={lanes:0,firstContext:t}}else ma=ma.next=t;return e}var ao=null;function Xg(t){ao===null?ao=[t]:ao.push(t)}function XE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Xg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Oi(t,r)}function Oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ns=!1;function Jg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Oi(t,n)}return i=r.interleaved,i===null?(e.next=e,Xg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Oi(t,n)}function ch(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}function Jv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $h(t,e,n,r){var i=t.updateQueue;ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=l))}if(s!==null){var m=i.baseState;o=0,f=c=l=null,a=s;do{var w=a.lane,S=a.eventTime;if((r&w)===w){f!==null&&(f=f.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var M=t,L=a;switch(w=e,S=n,L.tag){case 1:if(M=L.payload,typeof M=="function"){m=M.call(S,m,w);break e}m=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=L.payload,w=typeof M=="function"?M.call(S,m,w):M,w==null)break e;m=Ut({},m,w);break e;case 2:ns=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[a]:w.push(a))}else S={eventTime:S,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=S,l=m):f=f.next=S,o|=w;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;w=a,a=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(1);if(f===null&&(l=m),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);vo|=o,t.lanes=o,t.memoizedState=m}}function Zv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var Xu={},ii=js(Xu),Iu=js(Xu),Su=js(Xu);function lo(t){if(t===Xu)throw Error(oe(174));return t}function Zg(t,e){switch(vt(Su,e),vt(Iu,t),vt(ii,Xu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zp(e,t)}At(ii),vt(ii,e)}function Da(){At(ii),At(Iu),At(Su)}function ZE(t){lo(Su.current);var e=lo(ii.current),n=Zp(e,t.type);e!==n&&(vt(Iu,t),vt(ii,n))}function e0(t){Iu.current===t&&(At(ii),At(Iu))}var Bt=js(0);function qh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rp=[];function t0(){for(var t=0;t<rp.length;t++)rp[t]._workInProgressVersionPrimary=null;rp.length=0}var hh=ji.ReactCurrentDispatcher,ip=ji.ReactCurrentBatchConfig,yo=0,Vt=null,sn=null,dn=null,Wh=!1,nu=!1,Tu=0,IR=0;function Pn(){throw Error(oe(321))}function n0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hr(t[n],e[n]))return!1;return!0}function r0(t,e,n,r,i,s){if(yo=s,Vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hh.current=t===null||t.memoizedState===null?bR:xR,t=n(r,i),nu){s=0;do{if(nu=!1,Tu=0,25<=s)throw Error(oe(301));s+=1,dn=sn=null,e.updateQueue=null,hh.current=kR,t=n(r,i)}while(nu)}if(hh.current=Hh,e=sn!==null&&sn.next!==null,yo=0,dn=sn=Vt=null,Wh=!1,e)throw Error(oe(300));return t}function i0(){var t=Tu!==0;return Tu=0,t}function Jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Vt.memoizedState=dn=t:dn=dn.next=t,dn}function Pr(){if(sn===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=dn===null?Vt.memoizedState:dn.next;if(e!==null)dn=e,sn=t;else{if(t===null)throw Error(oe(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},dn===null?Vt.memoizedState=dn=t:dn=dn.next=t}return dn}function Au(t,e){return typeof e=="function"?e(t):e}function sp(t){var e=Pr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=sn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var f=c.lane;if((yo&f)===f)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,Vt.lanes|=f,vo|=f}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hr(r,e.memoizedState)||(tr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Vt.lanes|=s,vo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function op(t){var e=Pr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hr(s,e.memoizedState)||(tr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eI(){}function tI(t,e){var n=Vt,r=Pr(),i=e(),s=!Hr(r.memoizedState,i);if(s&&(r.memoizedState=i,tr=!0),r=r.queue,s0(iI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,bu(9,rI.bind(null,n,r,i,e),void 0,null),mn===null)throw Error(oe(349));yo&30||nI(n,e,i)}return i}function nI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rI(t,e,n,r){e.value=n,e.getSnapshot=r,sI(e)&&oI(t)}function iI(t,e,n){return n(function(){sI(e)&&oI(t)})}function sI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hr(t,n)}catch{return!0}}function oI(t){var e=Oi(t,1);e!==null&&$r(e,t,1,-1)}function ew(t){var e=Jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:t},e.queue=t,t=t.dispatch=AR.bind(null,Vt,t),[e.memoizedState,t]}function bu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aI(){return Pr().memoizedState}function fh(t,e,n,r){var i=Jr();Vt.flags|=t,i.memoizedState=bu(1|e,n,void 0,r===void 0?null:r)}function Uf(t,e,n,r){var i=Pr();r=r===void 0?null:r;var s=void 0;if(sn!==null){var o=sn.memoizedState;if(s=o.destroy,r!==null&&n0(r,o.deps)){i.memoizedState=bu(e,n,s,r);return}}Vt.flags|=t,i.memoizedState=bu(1|e,n,s,r)}function tw(t,e){return fh(8390656,8,t,e)}function s0(t,e){return Uf(2048,8,t,e)}function lI(t,e){return Uf(4,2,t,e)}function uI(t,e){return Uf(4,4,t,e)}function cI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hI(t,e,n){return n=n!=null?n.concat([t]):null,Uf(4,4,cI.bind(null,e,t),n)}function o0(){}function fI(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&n0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dI(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&n0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pI(t,e,n){return yo&21?(Hr(n,e)||(n=wE(),Vt.lanes|=n,vo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tr=!0),t.memoizedState=n)}function SR(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=ip.transition;ip.transition={};try{t(!1),e()}finally{ot=n,ip.transition=r}}function mI(){return Pr().memoizedState}function TR(t,e,n){var r=Es(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gI(t))yI(e,n);else if(n=XE(t,e,n,r),n!==null){var i=Hn();$r(n,t,r,i),vI(n,e,r)}}function AR(t,e,n){var r=Es(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gI(t))yI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hr(a,o)){var l=e.interleaved;l===null?(i.next=i,Xg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=XE(t,e,i,r),n!==null&&(i=Hn(),$r(n,t,r,i),vI(n,e,r))}}function gI(t){var e=t.alternate;return t===Vt||e!==null&&e===Vt}function yI(t,e){nu=Wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}var Hh={readContext:Cr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},bR={readContext:Cr,useCallback:function(t,e){return Jr().memoizedState=[t,e===void 0?null:e],t},useContext:Cr,useEffect:tw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fh(4194308,4,cI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fh(4194308,4,t,e)},useInsertionEffect:function(t,e){return fh(4,2,t,e)},useMemo:function(t,e){var n=Jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=TR.bind(null,Vt,t),[r.memoizedState,t]},useRef:function(t){var e=Jr();return t={current:t},e.memoizedState=t},useState:ew,useDebugValue:o0,useDeferredValue:function(t){return Jr().memoizedState=t},useTransition:function(){var t=ew(!1),e=t[0];return t=SR.bind(null,t[1]),Jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vt,i=Jr();if(Pt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),mn===null)throw Error(oe(349));yo&30||nI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,tw(iI.bind(null,r,s,t),[t]),r.flags|=2048,bu(9,rI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jr(),e=mn.identifierPrefix;if(Pt){var n=ki,r=xi;n=(r&~(1<<32-jr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xR={readContext:Cr,useCallback:fI,useContext:Cr,useEffect:s0,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:dI,useReducer:sp,useRef:aI,useState:function(){return sp(Au)},useDebugValue:o0,useDeferredValue:function(t){var e=Pr();return pI(e,sn.memoizedState,t)},useTransition:function(){var t=sp(Au)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1},kR={readContext:Cr,useCallback:fI,useContext:Cr,useEffect:s0,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:dI,useReducer:op,useRef:aI,useState:function(){return op(Au)},useDebugValue:o0,useDeferredValue:function(t){var e=Pr();return sn===null?e.memoizedState=t:pI(e,sn.memoizedState,t)},useTransition:function(){var t=op(Au)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1};function Dr(t,e){if(t&&t.defaultProps){e=Ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _m(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ff={isMounted:function(t){return(t=t._reactInternals)?Ro(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Es(t),s=Pi(r,i);s.payload=e,n!=null&&(s.callback=n),e=ws(t,s,i),e!==null&&($r(e,t,i,r),ch(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Es(t),s=Pi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ws(t,s,i),e!==null&&($r(e,t,i,r),ch(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hn(),r=Es(t),i=Pi(n,r);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,r),e!==null&&($r(e,t,r,n),ch(e,t,r))}};function nw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!vu(n,r)||!vu(i,s):!0}function wI(t,e,n){var r=!1,i=Ns,s=e.contextType;return typeof s=="object"&&s!==null?s=Cr(s):(i=rr(e)?mo:zn.current,r=e.contextTypes,s=(r=r!=null)?La(t,i):Ns),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ff,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function rw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ff.enqueueReplaceState(e,e.state,null)}function Em(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Jg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cr(s):(s=rr(e)?mo:zn.current,i.context=La(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_m(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ff.enqueueReplaceState(i,i.state,null),$h(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Va(t,e){try{var n="",r=e;do n+=nk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ap(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Im(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RR=typeof WeakMap=="function"?WeakMap:Map;function _I(t,e,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gh||(Gh=!0,Nm=r),Im(t,e)},n}function EI(t,e,n){n=Pi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Im(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Im(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$R.bind(null,t,e,n),e.then(t,t))}function sw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ow(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pi(-1,1),e.tag=2,ws(n,e,1))),n.lanes|=1),t)}var CR=ji.ReactCurrentOwner,tr=!1;function $n(t,e,n,r){e.child=t===null?YE(e,null,n,r):Oa(e,t.child,n,r)}function aw(t,e,n,r,i){n=n.render;var s=e.ref;return Aa(e,i),r=r0(t,e,n,r,s,i),n=i0(),t!==null&&!tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(Pt&&n&&Wg(e),e.flags|=1,$n(t,e,r,i),e.child)}function lw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!p0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,II(t,e,s,r,i)):(t=gh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:vu,n(o,r)&&t.ref===e.ref)return Di(t,e,i)}return e.flags|=1,t=Is(s,r),t.ref=e.ref,t.return=e,e.child=t}function II(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(vu(s,r)&&t.ref===e.ref)if(tr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(tr=!0);else return e.lanes=t.lanes,Di(t,e,i)}return Sm(t,e,n,r,i)}function SI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(ya,ar),ar|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vt(ya,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,vt(ya,ar),ar|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,vt(ya,ar),ar|=r;return $n(t,e,i,n),e.child}function TI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sm(t,e,n,r,i){var s=rr(n)?mo:zn.current;return s=La(e,s),Aa(e,i),n=r0(t,e,n,r,s,i),r=i0(),t!==null&&!tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(Pt&&r&&Wg(e),e.flags|=1,$n(t,e,n,i),e.child)}function uw(t,e,n,r,i){if(rr(n)){var s=!0;Vh(e)}else s=!1;if(Aa(e,i),e.stateNode===null)dh(t,e),wI(e,n,r),Em(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Cr(c):(c=rr(n)?mo:zn.current,c=La(e,c));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&rw(e,o,r,c),ns=!1;var w=e.memoizedState;o.state=w,$h(e,r,o,i),l=e.memoizedState,a!==r||w!==l||nr.current||ns?(typeof f=="function"&&(_m(e,n,f,r),l=e.memoizedState),(a=ns||nw(e,n,a,r,w,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,JE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Dr(e.type,a),o.props=c,m=e.pendingProps,w=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cr(l):(l=rr(n)?mo:zn.current,l=La(e,l));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||w!==l)&&rw(e,o,r,l),ns=!1,w=e.memoizedState,o.state=w,$h(e,r,o,i);var M=e.memoizedState;a!==m||w!==M||nr.current||ns?(typeof S=="function"&&(_m(e,n,S,r),M=e.memoizedState),(c=ns||nw(e,n,c,r,w,M,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,M,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,M,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=M),o.props=r,o.state=M,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Tm(t,e,n,r,s,i)}function Tm(t,e,n,r,i,s){TI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Gv(e,n,!1),Di(t,e,s);r=e.stateNode,CR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oa(e,t.child,null,s),e.child=Oa(e,null,a,s)):$n(t,e,a,s),e.memoizedState=r.state,i&&Gv(e,n,!0),e.child}function AI(t){var e=t.stateNode;e.pendingContext?Kv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kv(t,e.context,!1),Zg(t,e.containerInfo)}function cw(t,e,n,r,i){return Ba(),Kg(i),e.flags|=256,$n(t,e,n,r),e.child}var Am={dehydrated:null,treeContext:null,retryLane:0};function bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function bI(t,e,n){var r=e.pendingProps,i=Bt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),vt(Bt,i&1),t===null)return vm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$f(o,r,0,null),t=ho(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bm(n),e.memoizedState=Am,t):a0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Is(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Is(a,s):(s=ho(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?bm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Am,r}return s=t.child,t=s.sibling,r=Is(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function a0(t,e){return e=$f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jc(t,e,n,r){return r!==null&&Kg(r),Oa(e,t.child,null,n),t=a0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ap(Error(oe(422))),jc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=$f({mode:"visible",children:r.children},i,0,null),s=ho(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Oa(e,t.child,null,o),e.child.memoizedState=bm(o),e.memoizedState=Am,s);if(!(e.mode&1))return jc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=ap(s,r,void 0),jc(t,e,o,r)}if(a=(o&t.childLanes)!==0,tr||a){if(r=mn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Oi(t,i),$r(r,t,i,-1))}return d0(),r=ap(Error(oe(421))),jc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ur=vs(i.nextSibling),hr=e,Pt=!0,Ur=null,t!==null&&(Tr[Ar++]=xi,Tr[Ar++]=ki,Tr[Ar++]=go,xi=t.id,ki=t.overflow,go=e),e=a0(e,r.children),e.flags|=4096,e)}function hw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wm(t.return,e,n)}function lp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($n(t,e,r.children,n),r=Bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hw(t,n,e);else if(t.tag===19)hw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vt(Bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lp(e,!0,n,null,s);break;case"together":lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NR(t,e,n){switch(e.tag){case 3:AI(e),Ba();break;case 5:ZE(e);break;case 1:rr(e.type)&&Vh(e);break;case 4:Zg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;vt(zh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vt(Bt,Bt.current&1),e.flags|=128,null):n&e.child.childLanes?bI(t,e,n):(vt(Bt,Bt.current&1),t=Di(t,e,n),t!==null?t.sibling:null);vt(Bt,Bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vt(Bt,Bt.current),r)break;return null;case 22:case 23:return e.lanes=0,SI(t,e,n)}return Di(t,e,n)}var kI,xm,RI,CI;kI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xm=function(){};RI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,lo(ii.current);var s=null;switch(n){case"input":i=Qp(t,i),r=Qp(t,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=Jp(t,i),r=Jp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oh)}em(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&St("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};CI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bl(t,e){if(!Pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MR(t,e,n){var r=e.pendingProps;switch(Hg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return rr(e.type)&&Dh(),Nn(e),null;case 3:return r=e.stateNode,Da(),At(nr),At(zn),t0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ur!==null&&(Bm(Ur),Ur=null))),xm(t,e),Nn(e),null;case 5:e0(e);var i=lo(Su.current);if(n=e.type,t!==null&&e.stateNode!=null)RI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Nn(e),null}if(t=lo(ii.current),Fc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ti]=e,r[Eu]=s,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(i=0;i<jl.length;i++)St(jl[i],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":_v(r,s),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},St("invalid",r);break;case"textarea":Iv(r,s),St("invalid",r)}em(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Uc(r.textContent,a,t),i=["children",""+a]):hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",r)}switch(n){case"input":Pc(r),Ev(r,s,!0);break;case"textarea":Pc(r),Sv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Oh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ti]=e,t[Eu]=r,kI(t,e,!1,!1),e.stateNode=t;e:{switch(o=tm(n,r),n){case"dialog":St("cancel",t),St("close",t),i=r;break;case"iframe":case"object":case"embed":St("load",t),i=r;break;case"video":case"audio":for(i=0;i<jl.length;i++)St(jl[i],t);i=r;break;case"source":St("error",t),i=r;break;case"img":case"image":case"link":St("error",t),St("load",t),i=r;break;case"details":St("toggle",t),i=r;break;case"input":_v(t,r),i=Qp(t,r),St("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),St("invalid",t);break;case"textarea":Iv(t,r),i=Jp(t,r),St("invalid",t);break;default:i=r}em(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?aE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fu(t,l):typeof l=="number"&&fu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&St("scroll",t):l!=null&&Pg(t,s,l,o))}switch(n){case"input":Pc(t),Ev(t,r,!1);break;case"textarea":Pc(t),Sv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ea(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)CI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=lo(Su.current),lo(ii.current),Fc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ti]=e,(s=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:Uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ti]=e,e.stateNode=r}return Nn(e),null;case 13:if(At(Bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pt&&ur!==null&&e.mode&1&&!(e.flags&128))GE(),Ba(),e.flags|=98560,s=!1;else if(s=Fc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[ti]=e}else Ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),s=!1}else Ur!==null&&(Bm(Ur),Ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Bt.current&1?on===0&&(on=3):d0())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return Da(),xm(t,e),t===null&&wu(e.stateNode.containerInfo),Nn(e),null;case 10:return Yg(e.type._context),Nn(e),null;case 17:return rr(e.type)&&Dh(),Nn(e),null;case 19:if(At(Bt),s=e.memoizedState,s===null)return Nn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Bl(s,!1);else{if(on!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qh(t),o!==null){for(e.flags|=128,Bl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vt(Bt,Bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Yt()>Ua&&(e.flags|=128,r=!0,Bl(s,!1),e.lanes=4194304)}else{if(!r)if(t=qh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pt)return Nn(e),null}else 2*Yt()-s.renderingStartTime>Ua&&n!==1073741824&&(e.flags|=128,r=!0,Bl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Yt(),e.sibling=null,n=Bt.current,vt(Bt,r?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return f0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ar&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function LR(t,e){switch(Hg(e),e.tag){case 1:return rr(e.type)&&Dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Da(),At(nr),At(zn),t0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return e0(e),null;case 13:if(At(Bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(Bt),null;case 4:return Da(),null;case 10:return Yg(e.type._context),null;case 22:case 23:return f0(),null;case 24:return null;default:return null}}var $c=!1,Un=!1,BR=typeof WeakSet=="function"?WeakSet:Set,ge=null;function ga(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Kt(t,e,r)}else n.current=null}function km(t,e,n){try{n()}catch(r){Kt(t,e,r)}}var fw=!1;function OR(t,e){if(hm=Mh,t=BE(),qg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,f=0,m=t,w=null;t:for(;;){for(var S;m!==n||i!==0&&m.nodeType!==3||(a=o+i),m!==s||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)w=m,m=S;for(;;){if(m===t)break t;if(w===n&&++c===i&&(a=o),w===s&&++f===r&&(l=o),(S=m.nextSibling)!==null)break;m=w,w=m.parentNode}m=S}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fm={focusedElem:t,selectionRange:n},Mh=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var L=M.memoizedProps,R=M.memoizedState,b=e.stateNode,C=b.getSnapshotBeforeUpdate(e.elementType===e.type?L:Dr(e.type,L),R);b.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(q){Kt(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return M=fw,fw=!1,M}function ru(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&km(e,n,s)}i=i.next}while(i!==r)}}function zf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PI(t){var e=t.alternate;e!==null&&(t.alternate=null,PI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ti],delete e[Eu],delete e[mm],delete e[vR],delete e[wR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NI(t){return t.tag===5||t.tag===3||t.tag===4}function dw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oh));else if(r!==4&&(t=t.child,t!==null))for(Cm(t,e,n),t=t.sibling;t!==null;)Cm(t,e,n),t=t.sibling}function Pm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}var _n=null,Vr=!1;function Gi(t,e,n){for(n=n.child;n!==null;)MI(t,e,n),n=n.sibling}function MI(t,e,n){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(Mf,n)}catch{}switch(n.tag){case 5:Un||ga(n,e);case 6:var r=_n,i=Vr;_n=null,Gi(t,e,n),_n=r,Vr=i,_n!==null&&(Vr?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Vr?(t=_n,n=n.stateNode,t.nodeType===8?tp(t.parentNode,n):t.nodeType===1&&tp(t,n),gu(t)):tp(_n,n.stateNode));break;case 4:r=_n,i=Vr,_n=n.stateNode.containerInfo,Vr=!0,Gi(t,e,n),_n=r,Vr=i;break;case 0:case 11:case 14:case 15:if(!Un&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&km(n,e,o),i=i.next}while(i!==r)}Gi(t,e,n);break;case 1:if(!Un&&(ga(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Kt(n,e,a)}Gi(t,e,n);break;case 21:Gi(t,e,n);break;case 22:n.mode&1?(Un=(r=Un)||n.memoizedState!==null,Gi(t,e,n),Un=r):Gi(t,e,n);break;default:Gi(t,e,n)}}function pw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BR),e.forEach(function(r){var i=WR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_n=a.stateNode,Vr=!1;break e;case 3:_n=a.stateNode.containerInfo,Vr=!0;break e;case 4:_n=a.stateNode.containerInfo,Vr=!0;break e}a=a.return}if(_n===null)throw Error(oe(160));MI(s,o,i),_n=null,Vr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Kt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LI(e,t),e=e.sibling}function LI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lr(e,t),Yr(t),r&4){try{ru(3,t,t.return),zf(3,t)}catch(L){Kt(t,t.return,L)}try{ru(5,t,t.return)}catch(L){Kt(t,t.return,L)}}break;case 1:Lr(e,t),Yr(t),r&512&&n!==null&&ga(n,n.return);break;case 5:if(Lr(e,t),Yr(t),r&512&&n!==null&&ga(n,n.return),t.flags&32){var i=t.stateNode;try{fu(i,"")}catch(L){Kt(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nE(i,s),tm(a,o);var c=tm(a,s);for(o=0;o<l.length;o+=2){var f=l[o],m=l[o+1];f==="style"?aE(i,m):f==="dangerouslySetInnerHTML"?sE(i,m):f==="children"?fu(i,m):Pg(i,f,m,c)}switch(a){case"input":Yp(i,s);break;case"textarea":rE(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?Ea(i,!!s.multiple,S,!1):w!==!!s.multiple&&(s.defaultValue!=null?Ea(i,!!s.multiple,s.defaultValue,!0):Ea(i,!!s.multiple,s.multiple?[]:"",!1))}i[Eu]=s}catch(L){Kt(t,t.return,L)}}break;case 6:if(Lr(e,t),Yr(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(L){Kt(t,t.return,L)}}break;case 3:if(Lr(e,t),Yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gu(e.containerInfo)}catch(L){Kt(t,t.return,L)}break;case 4:Lr(e,t),Yr(t);break;case 13:Lr(e,t),Yr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(c0=Yt())),r&4&&pw(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Un=(c=Un)||f,Lr(e,t),Un=c):Lr(e,t),Yr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(ge=t,f=t.child;f!==null;){for(m=ge=f;ge!==null;){switch(w=ge,S=w.child,w.tag){case 0:case 11:case 14:case 15:ru(4,w,w.return);break;case 1:ga(w,w.return);var M=w.stateNode;if(typeof M.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(L){Kt(r,n,L)}}break;case 5:ga(w,w.return);break;case 22:if(w.memoizedState!==null){gw(m);continue}}S!==null?(S.return=w,ge=S):gw(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=oE("display",o))}catch(L){Kt(t,t.return,L)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(L){Kt(t,t.return,L)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lr(e,t),Yr(t),r&4&&pw(t);break;case 21:break;default:Lr(e,t),Yr(t)}}function Yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NI(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fu(i,""),r.flags&=-33);var s=dw(t);Pm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dw(t);Cm(t,a,o);break;default:throw Error(oe(161))}}catch(l){Kt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DR(t,e,n){ge=t,BI(t)}function BI(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$c;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Un;a=$c;var c=Un;if($c=o,(Un=l)&&!c)for(ge=i;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?yw(i):l!==null?(l.return=o,ge=l):yw(i);for(;s!==null;)ge=s,BI(s),s=s.sibling;ge=i,$c=a,Un=c}mw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ge=s):mw(t)}}function mw(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Un||zf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Un)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&gu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Un||e.flags&512&&Rm(e)}catch(w){Kt(e,e.return,w)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function gw(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function yw(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zf(4,e)}catch(l){Kt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Kt(e,i,l)}}var s=e.return;try{Rm(e)}catch(l){Kt(e,s,l)}break;case 5:var o=e.return;try{Rm(e)}catch(l){Kt(e,o,l)}}}catch(l){Kt(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var VR=Math.ceil,Kh=ji.ReactCurrentDispatcher,l0=ji.ReactCurrentOwner,kr=ji.ReactCurrentBatchConfig,Qe=0,mn=null,tn=null,bn=0,ar=0,ya=js(0),on=0,xu=null,vo=0,jf=0,u0=0,iu=null,Jn=null,c0=0,Ua=1/0,Ei=null,Gh=!1,Nm=null,_s=null,qc=!1,cs=null,Qh=0,su=0,Mm=null,ph=-1,mh=0;function Hn(){return Qe&6?Yt():ph!==-1?ph:ph=Yt()}function Es(t){return t.mode&1?Qe&2&&bn!==0?bn&-bn:ER.transition!==null?(mh===0&&(mh=wE()),mh):(t=ot,t!==0||(t=window.event,t=t===void 0?16:bE(t.type)),t):1}function $r(t,e,n,r){if(50<su)throw su=0,Mm=null,Error(oe(185));Gu(t,n,r),(!(Qe&2)||t!==mn)&&(t===mn&&(!(Qe&2)&&(jf|=n),on===4&&is(t,bn)),ir(t,r),n===1&&Qe===0&&!(e.mode&1)&&(Ua=Yt()+500,Vf&&$s()))}function ir(t,e){var n=t.callbackNode;Ek(t,e);var r=Nh(t,t===mn?bn:0);if(r===0)n!==null&&bv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bv(n),e===1)t.tag===0?_R(vw.bind(null,t)):WE(vw.bind(null,t)),gR(function(){!(Qe&6)&&$s()}),n=null;else{switch(_E(r)){case 1:n=Og;break;case 4:n=yE;break;case 16:n=Ph;break;case 536870912:n=vE;break;default:n=Ph}n=$I(n,OI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function OI(t,e){if(ph=-1,mh=0,Qe&6)throw Error(oe(327));var n=t.callbackNode;if(ba()&&t.callbackNode!==n)return null;var r=Nh(t,t===mn?bn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yh(t,r);else{e=r;var i=Qe;Qe|=2;var s=VI();(mn!==t||bn!==e)&&(Ei=null,Ua=Yt()+500,co(t,e));do try{zR();break}catch(a){DI(t,a)}while(1);Qg(),Kh.current=s,Qe=i,tn!==null?e=0:(mn=null,bn=0,e=on)}if(e!==0){if(e===2&&(i=om(t),i!==0&&(r=i,e=Lm(t,i))),e===1)throw n=xu,co(t,0),is(t,r),ir(t,Yt()),n;if(e===6)is(t,r);else{if(i=t.current.alternate,!(r&30)&&!UR(i)&&(e=Yh(t,r),e===2&&(s=om(t),s!==0&&(r=s,e=Lm(t,s))),e===1))throw n=xu,co(t,0),is(t,r),ir(t,Yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:to(t,Jn,Ei);break;case 3:if(is(t,r),(r&130023424)===r&&(e=c0+500-Yt(),10<e)){if(Nh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pm(to.bind(null,t,Jn,Ei),e);break}to(t,Jn,Ei);break;case 4:if(is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-jr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VR(r/1960))-r,10<r){t.timeoutHandle=pm(to.bind(null,t,Jn,Ei),r);break}to(t,Jn,Ei);break;case 5:to(t,Jn,Ei);break;default:throw Error(oe(329))}}}return ir(t,Yt()),t.callbackNode===n?OI.bind(null,t):null}function Lm(t,e){var n=iu;return t.current.memoizedState.isDehydrated&&(co(t,e).flags|=256),t=Yh(t,e),t!==2&&(e=Jn,Jn=n,e!==null&&Bm(e)),t}function Bm(t){Jn===null?Jn=t:Jn.push.apply(Jn,t)}function UR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~u0,e&=~jf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jr(e),r=1<<n;t[n]=-1,e&=~r}}function vw(t){if(Qe&6)throw Error(oe(327));ba();var e=Nh(t,0);if(!(e&1))return ir(t,Yt()),null;var n=Yh(t,e);if(t.tag!==0&&n===2){var r=om(t);r!==0&&(e=r,n=Lm(t,r))}if(n===1)throw n=xu,co(t,0),is(t,e),ir(t,Yt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,to(t,Jn,Ei),ir(t,Yt()),null}function h0(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(Ua=Yt()+500,Vf&&$s())}}function wo(t){cs!==null&&cs.tag===0&&!(Qe&6)&&ba();var e=Qe;Qe|=1;var n=kr.transition,r=ot;try{if(kr.transition=null,ot=1,t)return t()}finally{ot=r,kr.transition=n,Qe=e,!(Qe&6)&&$s()}}function f0(){ar=ya.current,At(ya)}function co(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mR(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(Hg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dh();break;case 3:Da(),At(nr),At(zn),t0();break;case 5:e0(r);break;case 4:Da();break;case 13:At(Bt);break;case 19:At(Bt);break;case 10:Yg(r.type._context);break;case 22:case 23:f0()}n=n.return}if(mn=t,tn=t=Is(t.current,null),bn=ar=e,on=0,xu=null,u0=jf=vo=0,Jn=iu=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ao=null}return t}function DI(t,e){do{var n=tn;try{if(Qg(),hh.current=Hh,Wh){for(var r=Vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wh=!1}if(yo=0,dn=sn=Vt=null,nu=!1,Tu=0,l0.current=null,n===null||n.return===null){on=1,xu=e,tn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=bn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var w=f.alternate;w?(f.updateQueue=w.updateQueue,f.memoizedState=w.memoizedState,f.lanes=w.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=sw(o);if(S!==null){S.flags&=-257,ow(S,o,a,s,e),S.mode&1&&iw(s,c,e),e=S,l=c;var M=e.updateQueue;if(M===null){var L=new Set;L.add(l),e.updateQueue=L}else M.add(l);break e}else{if(!(e&1)){iw(s,c,e),d0();break e}l=Error(oe(426))}}else if(Pt&&a.mode&1){var R=sw(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),ow(R,o,a,s,e),Kg(Va(l,a));break e}}s=l=Va(l,a),on!==4&&(on=2),iu===null?iu=[s]:iu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=_I(s,l,e);Jv(s,b);break e;case 1:a=l;var C=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof C.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(_s===null||!_s.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var q=EI(s,a,e);Jv(s,q);break e}}s=s.return}while(s!==null)}FI(n)}catch(Y){e=Y,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(1)}function VI(){var t=Kh.current;return Kh.current=Hh,t===null?Hh:t}function d0(){(on===0||on===3||on===2)&&(on=4),mn===null||!(vo&268435455)&&!(jf&268435455)||is(mn,bn)}function Yh(t,e){var n=Qe;Qe|=2;var r=VI();(mn!==t||bn!==e)&&(Ei=null,co(t,e));do try{FR();break}catch(i){DI(t,i)}while(1);if(Qg(),Qe=n,Kh.current=r,tn!==null)throw Error(oe(261));return mn=null,bn=0,on}function FR(){for(;tn!==null;)UI(tn)}function zR(){for(;tn!==null&&!fk();)UI(tn)}function UI(t){var e=jI(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?FI(t):tn=e,l0.current=null}function FI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LR(n,e),n!==null){n.flags&=32767,tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,tn=null;return}}else if(n=MR(n,e,ar),n!==null){tn=n;return}if(e=e.sibling,e!==null){tn=e;return}tn=e=t}while(e!==null);on===0&&(on=5)}function to(t,e,n){var r=ot,i=kr.transition;try{kr.transition=null,ot=1,jR(t,e,n,r)}finally{kr.transition=i,ot=r}return null}function jR(t,e,n,r){do ba();while(cs!==null);if(Qe&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ik(t,s),t===mn&&(tn=mn=null,bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qc||(qc=!0,$I(Ph,function(){return ba(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kr.transition,kr.transition=null;var o=ot;ot=1;var a=Qe;Qe|=4,l0.current=null,OR(t,n),LI(n,t),lR(fm),Mh=!!hm,fm=hm=null,t.current=n,DR(n),dk(),Qe=a,ot=o,kr.transition=s}else t.current=n;if(qc&&(qc=!1,cs=t,Qh=i),s=t.pendingLanes,s===0&&(_s=null),gk(n.stateNode),ir(t,Yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gh)throw Gh=!1,t=Nm,Nm=null,t;return Qh&1&&t.tag!==0&&ba(),s=t.pendingLanes,s&1?t===Mm?su++:(su=0,Mm=t):su=0,$s(),null}function ba(){if(cs!==null){var t=_E(Qh),e=kr.transition,n=ot;try{if(kr.transition=null,ot=16>t?16:t,cs===null)var r=!1;else{if(t=cs,cs=null,Qh=0,Qe&6)throw Error(oe(331));var i=Qe;for(Qe|=4,ge=t.current;ge!==null;){var s=ge,o=s.child;if(ge.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ge=c;ge!==null;){var f=ge;switch(f.tag){case 0:case 11:case 15:ru(8,f,s)}var m=f.child;if(m!==null)m.return=f,ge=m;else for(;ge!==null;){f=ge;var w=f.sibling,S=f.return;if(PI(f),f===c){ge=null;break}if(w!==null){w.return=S,ge=w;break}ge=S}}}var M=s.alternate;if(M!==null){var L=M.child;if(L!==null){M.child=null;do{var R=L.sibling;L.sibling=null,L=R}while(L!==null)}}ge=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ge=o;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ge=b;break e}ge=s.return}}var C=t.current;for(ge=C;ge!==null;){o=ge;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,ge=k;else e:for(o=C;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zf(9,a)}}catch(Y){Kt(a,a.return,Y)}if(a===o){ge=null;break e}var q=a.sibling;if(q!==null){q.return=a.return,ge=q;break e}ge=a.return}}if(Qe=i,$s(),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(Mf,t)}catch{}r=!0}return r}finally{ot=n,kr.transition=e}}return!1}function ww(t,e,n){e=Va(n,e),e=_I(t,e,1),t=ws(t,e,1),e=Hn(),t!==null&&(Gu(t,1,e),ir(t,e))}function Kt(t,e,n){if(t.tag===3)ww(t,t,n);else for(;e!==null;){if(e.tag===3){ww(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=Va(n,t),t=EI(e,t,1),e=ws(e,t,1),t=Hn(),e!==null&&(Gu(e,1,t),ir(e,t));break}}e=e.return}}function $R(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hn(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(bn&n)===n&&(on===4||on===3&&(bn&130023424)===bn&&500>Yt()-c0?co(t,0):u0|=n),ir(t,e)}function zI(t,e){e===0&&(t.mode&1?(e=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):e=1);var n=Hn();t=Oi(t,e),t!==null&&(Gu(t,e,n),ir(t,n))}function qR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zI(t,n)}function WR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),zI(t,n)}var jI;jI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)tr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tr=!1,NR(t,e,n);tr=!!(t.flags&131072)}else tr=!1,Pt&&e.flags&1048576&&HE(e,Fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dh(t,e),t=e.pendingProps;var i=La(e,zn.current);Aa(e,n),i=r0(null,e,r,t,i,n);var s=i0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(s=!0,Vh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jg(e),i.updater=Ff,e.stateNode=i,i._reactInternals=e,Em(e,r,t,n),e=Tm(null,e,r,!0,s,n)):(e.tag=0,Pt&&s&&Wg(e),$n(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KR(r),t=Dr(r,t),i){case 0:e=Sm(null,e,r,t,n);break e;case 1:e=uw(null,e,r,t,n);break e;case 11:e=aw(null,e,r,t,n);break e;case 14:e=lw(null,e,r,Dr(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),Sm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),uw(t,e,r,i,n);case 3:e:{if(AI(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,JE(t,e),$h(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Va(Error(oe(423)),e),e=cw(t,e,r,n,i);break e}else if(r!==i){i=Va(Error(oe(424)),e),e=cw(t,e,r,n,i);break e}else for(ur=vs(e.stateNode.containerInfo.firstChild),hr=e,Pt=!0,Ur=null,n=YE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ba(),r===i){e=Di(t,e,n);break e}$n(t,e,r,n)}e=e.child}return e;case 5:return ZE(e),t===null&&vm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,dm(r,i)?o=null:s!==null&&dm(r,s)&&(e.flags|=32),TI(t,e),$n(t,e,o,n),e.child;case 6:return t===null&&vm(e),null;case 13:return bI(t,e,n);case 4:return Zg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oa(e,null,r,n):$n(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),aw(t,e,r,i,n);case 7:return $n(t,e,e.pendingProps,n),e.child;case 8:return $n(t,e,e.pendingProps.children,n),e.child;case 12:return $n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,vt(zh,r._currentValue),r._currentValue=o,s!==null)if(Hr(s.value,o)){if(s.children===i.children&&!nr.current){e=Di(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Pi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),wm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),wm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$n(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Aa(e,n),i=Cr(i),r=r(i),e.flags|=1,$n(t,e,r,n),e.child;case 14:return r=e.type,i=Dr(r,e.pendingProps),i=Dr(r.type,i),lw(t,e,r,i,n);case 15:return II(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dr(r,i),dh(t,e),e.tag=1,rr(r)?(t=!0,Vh(e)):t=!1,Aa(e,n),wI(e,r,i),Em(e,r,i,n),Tm(null,e,r,!0,t,n);case 19:return xI(t,e,n);case 22:return SI(t,e,n)}throw Error(oe(156,e.tag))};function $I(t,e){return gE(t,e)}function HR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(t,e,n,r){return new HR(t,e,n,r)}function p0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KR(t){if(typeof t=="function")return p0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mg)return 11;if(t===Lg)return 14}return 2}function Is(t,e){var n=t.alternate;return n===null?(n=xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")p0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case aa:return ho(n.children,i,s,e);case Ng:o=8,i|=8;break;case Wp:return t=xr(12,n,e,i|2),t.elementType=Wp,t.lanes=s,t;case Hp:return t=xr(13,n,e,i),t.elementType=Hp,t.lanes=s,t;case Kp:return t=xr(19,n,e,i),t.elementType=Kp,t.lanes=s,t;case Z1:return $f(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X1:o=10;break e;case J1:o=9;break e;case Mg:o=11;break e;case Lg:o=14;break e;case ts:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=xr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ho(t,e,n,r){return t=xr(7,t,r,e),t.lanes=n,t}function $f(t,e,n,r){return t=xr(22,t,r,e),t.elementType=Z1,t.lanes=n,t.stateNode={isHidden:!1},t}function up(t,e,n){return t=xr(6,t,null,e),t.lanes=n,t}function cp(t,e,n){return e=xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qd(0),this.expirationTimes=qd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function m0(t,e,n,r,i,s,o,a,l){return t=new GR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jg(s),t}function QR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qI(t){if(!t)return Ns;t=t._reactInternals;e:{if(Ro(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(rr(n))return qE(t,n,e)}return e}function WI(t,e,n,r,i,s,o,a,l){return t=m0(n,r,!0,t,i,s,o,a,l),t.context=qI(null),n=t.current,r=Hn(),i=Es(n),s=Pi(r,i),s.callback=e??null,ws(n,s,i),t.current.lanes=i,Gu(t,i,r),ir(t,r),t}function qf(t,e,n,r){var i=e.current,s=Hn(),o=Es(i);return n=qI(n),e.context===null?e.context=n:e.pendingContext=n,e=Pi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ws(i,e,o),t!==null&&($r(t,i,o,s),ch(t,i,o)),o}function Xh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _w(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function g0(t,e){_w(t,e),(t=t.alternate)&&_w(t,e)}function YR(){return null}var HI=typeof reportError=="function"?reportError:function(t){console.error(t)};function y0(t){this._internalRoot=t}Wf.prototype.render=y0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));qf(t,e,null,null)};Wf.prototype.unmount=y0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wo(function(){qf(null,t,null,null)}),e[Bi]=null}};function Wf(t){this._internalRoot=t}Wf.prototype.unstable_scheduleHydration=function(t){if(t){var e=SE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rs.length&&e!==0&&e<rs[n].priority;n++);rs.splice(n,0,t),n===0&&AE(t)}};function v0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ew(){}function XR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Xh(o);s.call(c)}}var o=WI(e,r,t,0,null,!1,!1,"",Ew);return t._reactRootContainer=o,t[Bi]=o.current,wu(t.nodeType===8?t.parentNode:t),wo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Xh(l);a.call(c)}}var l=m0(t,0,!1,null,null,!1,!1,"",Ew);return t._reactRootContainer=l,t[Bi]=l.current,wu(t.nodeType===8?t.parentNode:t),wo(function(){qf(e,l,n,r)}),l}function Kf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Xh(o);a.call(l)}}qf(e,o,t,i)}else o=XR(n,e,t,i,r);return Xh(o)}EE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zl(e.pendingLanes);n!==0&&(Dg(e,n|1),ir(e,Yt()),!(Qe&6)&&(Ua=Yt()+500,$s()))}break;case 13:wo(function(){var r=Oi(t,1);if(r!==null){var i=Hn();$r(r,t,1,i)}}),g0(t,1)}};Vg=function(t){if(t.tag===13){var e=Oi(t,134217728);if(e!==null){var n=Hn();$r(e,t,134217728,n)}g0(t,134217728)}};IE=function(t){if(t.tag===13){var e=Es(t),n=Oi(t,e);if(n!==null){var r=Hn();$r(n,t,e,r)}g0(t,e)}};SE=function(){return ot};TE=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};rm=function(t,e,n){switch(e){case"input":if(Yp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Df(r);if(!i)throw Error(oe(90));tE(r),Yp(r,i)}}}break;case"textarea":rE(t,n);break;case"select":e=n.value,e!=null&&Ea(t,!!n.multiple,e,!1)}};cE=h0;hE=wo;var JR={usingClientEntryPoint:!1,Events:[Yu,ha,Df,lE,uE,h0]},Ol={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZR={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||YR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{Mf=Wc.inject(ZR),ri=Wc}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JR;dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v0(e))throw Error(oe(200));return QR(t,e,null,n)};dr.createRoot=function(t,e){if(!v0(t))throw Error(oe(299));var n=!1,r="",i=HI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=m0(t,1,!1,null,null,n,!1,r,i),t[Bi]=e.current,wu(t.nodeType===8?t.parentNode:t),new y0(e)};dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=pE(e),t=t===null?null:t.stateNode,t};dr.flushSync=function(t){return wo(t)};dr.hydrate=function(t,e,n){if(!Hf(e))throw Error(oe(200));return Kf(null,t,e,!0,n)};dr.hydrateRoot=function(t,e,n){if(!v0(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=HI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=WI(e,null,t,1,n??null,i,!1,s,o),t[Bi]=e.current,wu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Wf(e)};dr.render=function(t,e,n){if(!Hf(e))throw Error(oe(200));return Kf(null,t,e,!1,n)};dr.unmountComponentAtNode=function(t){if(!Hf(t))throw Error(oe(40));return t._reactRootContainer?(wo(function(){Kf(null,null,t,!1,function(){t._reactRootContainer=null,t[Bi]=null})}),!0):!1};dr.unstable_batchedUpdates=h0;dr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hf(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Kf(t,e,n,!1,r)};dr.version="18.3.1-next-f1338f8080-20240426";function KI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KI)}catch(t){console.error(t)}}KI(),K1.exports=dr;var e2=K1.exports,Iw=e2;$p.createRoot=Iw.createRoot,$p.hydrateRoot=Iw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ku.apply(this,arguments)}var hs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hs||(hs={}));const Sw="popstate";function t2(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Om("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jh(i)}return r2(e,n,null,t)}function rn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function n2(){return Math.random().toString(36).substr(2,8)}function Tw(t,e){return{usr:t.state,key:t.key,idx:e}}function Om(t,e,n,r){return n===void 0&&(n=null),ku({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nl(e):e,{state:n,key:e&&e.key||r||n2()})}function Jh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function r2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=hs.Pop,l=null,c=f();c==null&&(c=0,o.replaceState(ku({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function m(){a=hs.Pop;let R=f(),b=R==null?null:R-c;c=R,l&&l({action:a,location:L.location,delta:b})}function w(R,b){a=hs.Push;let C=Om(L.location,R,b);n&&n(C,R),c=f()+1;let k=Tw(C,c),q=L.createHref(C);try{o.pushState(k,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(q)}s&&l&&l({action:a,location:L.location,delta:1})}function S(R,b){a=hs.Replace;let C=Om(L.location,R,b);n&&n(C,R),c=f();let k=Tw(C,c),q=L.createHref(C);o.replaceState(k,"",q),s&&l&&l({action:a,location:L.location,delta:0})}function M(R){let b=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof R=="string"?R:Jh(R);return C=C.replace(/ $/,"%20"),rn(b,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,b)}let L={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Sw,m),l=R,()=>{i.removeEventListener(Sw,m),l=null}},createHref(R){return e(i,R)},createURL:M,encodeLocation(R){let b=M(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:w,replace:S,go(R){return o.go(R)}};return L}var Aw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Aw||(Aw={}));function i2(t,e,n){return n===void 0&&(n="/"),s2(t,e,n,!1)}function s2(t,e,n,r){let i=typeof e=="string"?nl(e):e,s=w0(i.pathname||"/",n);if(s==null)return null;let o=QI(t);o2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=y2(s);a=m2(o[l],c,r)}return a}function QI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(rn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ss([r,l.relativePath]),f=n.concat(l);s.children&&s.children.length>0&&(rn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),QI(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:d2(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of YI(s.path))i(s,o,l)}),e}function YI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=YI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function o2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:p2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const a2=/^:[\w-]+$/,l2=3,u2=2,c2=1,h2=10,f2=-2,bw=t=>t==="*";function d2(t,e){let n=t.split("/"),r=n.length;return n.some(bw)&&(r+=f2),e&&(r+=u2),n.filter(i=>!bw(i)).reduce((i,s)=>i+(a2.test(s)?l2:s===""?c2:h2),r)}function p2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function m2(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=xw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),w=l.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=xw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ss([s,m.pathname]),pathnameBase:E2(Ss([s,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(s=Ss([s,m.pathnameBase]))}return o}function xw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=g2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,f,m)=>{let{paramName:w,isOptional:S}=f;if(w==="*"){let L=a[m]||"";o=s.slice(0,s.length-L.length).replace(/(.)\/+$/,"$1")}const M=a[m];return S&&!M?c[w]=void 0:c[w]=(M||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function g2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function y2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function w0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function v2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?nl(t):t;return{pathname:n?n.startsWith("/")?n:w2(n,e):e,search:I2(r),hash:S2(i)}}function w2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XI(t,e){let n=_2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function JI(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=nl(t):(i=ku({},t),rn(!i.pathname||!i.pathname.includes("?"),hp("?","pathname","search",i)),rn(!i.pathname||!i.pathname.includes("#"),hp("#","pathname","hash",i)),rn(!i.search||!i.search.includes("#"),hp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),m-=1;i.pathname=w.join("/")}a=m>=0?e[m]:"/"}let l=v2(i,a),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const Ss=t=>t.join("/").replace(/\/\/+/g,"/"),E2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),I2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,S2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function T2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ZI=["post","put","patch","delete"];new Set(ZI);const A2=["get",...ZI];new Set(A2);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ru.apply(this,arguments)}const _0=le.createContext(null),b2=le.createContext(null),Co=le.createContext(null),Gf=le.createContext(null),Po=le.createContext({outlet:null,matches:[],isDataRoute:!1}),eS=le.createContext(null);function x2(t,e){let{relative:n}=e===void 0?{}:e;Ju()||rn(!1);let{basename:r,navigator:i}=le.useContext(Co),{hash:s,pathname:o,search:a}=rS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ss([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ju(){return le.useContext(Gf)!=null}function Qf(){return Ju()||rn(!1),le.useContext(Gf).location}function tS(t){le.useContext(Co).static||le.useLayoutEffect(t)}function nS(){let{isDataRoute:t}=le.useContext(Po);return t?F2():k2()}function k2(){Ju()||rn(!1);let t=le.useContext(_0),{basename:e,future:n,navigator:r}=le.useContext(Co),{matches:i}=le.useContext(Po),{pathname:s}=Qf(),o=JSON.stringify(XI(i,n.v7_relativeSplatPath)),a=le.useRef(!1);return tS(()=>{a.current=!0}),le.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let m=JI(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ss([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,s,t])}function rS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=le.useContext(Co),{matches:i}=le.useContext(Po),{pathname:s}=Qf(),o=JSON.stringify(XI(i,r.v7_relativeSplatPath));return le.useMemo(()=>JI(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function R2(t,e){return C2(t,e)}function C2(t,e,n,r){Ju()||rn(!1);let{navigator:i,static:s}=le.useContext(Co),{matches:o}=le.useContext(Po),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let f=Qf(),m;if(e){var w;let b=typeof e=="string"?nl(e):e;c==="/"||(w=b.pathname)!=null&&w.startsWith(c)||rn(!1),m=b}else m=f;let S=m.pathname||"/",M=S;if(c!=="/"){let b=c.replace(/^\//,"").split("/");M="/"+S.replace(/^\//,"").split("/").slice(b.length).join("/")}let L=!s&&n&&n.matches&&n.matches.length>0?n.matches:i2(t,{pathname:M}),R=B2(L&&L.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ss([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ss([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return e&&R?le.createElement(Gf.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:hs.Pop}},R):R}function P2(){let t=U2(),e=T2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),n?le.createElement("pre",{style:i},n):null,s)}const N2=le.createElement(P2,null);class M2 extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?le.createElement(Po.Provider,{value:this.props.routeContext},le.createElement(eS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L2(t){let{routeContext:e,match:n,children:r}=t,i=le.useContext(_0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),le.createElement(Po.Provider,{value:e},r)}function B2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);f>=0||rn(!1),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=f),m.route.id){let{loaderData:w,errors:S}=n,M=m.route.loader&&w[m.route.id]===void 0&&(!S||S[m.route.id]===void 0);if(m.route.lazy||M){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,m,w)=>{let S,M=!1,L=null,R=null;n&&(S=a&&m.route.id?a[m.route.id]:void 0,L=m.route.errorElement||N2,l&&(c<0&&w===0?(z2("route-fallback",!1),M=!0,R=null):c===w&&(M=!0,R=m.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,w+1)),C=()=>{let k;return S?k=L:M?k=R:m.route.Component?k=le.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=f,le.createElement(L2,{match:m,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:k})};return n&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?le.createElement(M2,{location:n.location,revalidation:n.revalidation,component:L,error:S,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):C()},null)}var iS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iS||{}),Zh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zh||{});function O2(t){let e=le.useContext(_0);return e||rn(!1),e}function D2(t){let e=le.useContext(b2);return e||rn(!1),e}function V2(t){let e=le.useContext(Po);return e||rn(!1),e}function sS(t){let e=V2(),n=e.matches[e.matches.length-1];return n.route.id||rn(!1),n.route.id}function U2(){var t;let e=le.useContext(eS),n=D2(Zh.UseRouteError),r=sS(Zh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function F2(){let{router:t}=O2(iS.UseNavigateStable),e=sS(Zh.UseNavigateStable),n=le.useRef(!1);return tS(()=>{n.current=!0}),le.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ru({fromRouteId:e},s)))},[t,e])}const kw={};function z2(t,e,n){!e&&!kw[t]&&(kw[t]=!0)}function j2(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function $l(t){rn(!1)}function $2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=hs.Pop,navigator:s,static:o=!1,future:a}=t;Ju()&&rn(!1);let l=e.replace(/^\/*/,"/"),c=le.useMemo(()=>({basename:l,navigator:s,static:o,future:Ru({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=nl(r));let{pathname:f="/",search:m="",hash:w="",state:S=null,key:M="default"}=r,L=le.useMemo(()=>{let R=w0(f,l);return R==null?null:{location:{pathname:R,search:m,hash:w,state:S,key:M},navigationType:i}},[l,f,m,w,S,M,i]);return L==null?null:le.createElement(Co.Provider,{value:c},le.createElement(Gf.Provider,{children:n,value:L}))}function q2(t){let{children:e,location:n}=t;return R2(Dm(e),n)}new Promise(()=>{});function Dm(t,e){e===void 0&&(e=[]);let n=[];return le.Children.forEach(t,(r,i)=>{if(!le.isValidElement(r))return;let s=[...e,i];if(r.type===le.Fragment){n.push.apply(n,Dm(r.props.children,s));return}r.type!==$l&&rn(!1),!r.props.index||!r.props.children||rn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Dm(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vm.apply(this,arguments)}function W2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function H2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function K2(t,e){return t.button===0&&(!e||e==="_self")&&!H2(t)}const G2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Q2="6";try{window.__reactRouterVersion=Q2}catch{}const Y2="startTransition",Rw=Bx[Y2];function X2(t){let{basename:e,children:n,future:r,window:i}=t,s=le.useRef();s.current==null&&(s.current=t2({window:i,v5Compat:!0}));let o=s.current,[a,l]=le.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=le.useCallback(m=>{c&&Rw?Rw(()=>l(m)):l(m)},[l,c]);return le.useLayoutEffect(()=>o.listen(f),[o,f]),le.useEffect(()=>j2(r),[r]),le.createElement($2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const J2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hc=le.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:f,viewTransition:m}=e,w=W2(e,G2),{basename:S}=le.useContext(Co),M,L=!1;if(typeof c=="string"&&Z2.test(c)&&(M=c,J2))try{let k=new URL(window.location.href),q=c.startsWith("//")?new URL(k.protocol+c):new URL(c),Y=w0(q.pathname,S);q.origin===k.origin&&Y!=null?c=Y+q.search+q.hash:L=!0}catch{}let R=x2(c,{relative:i}),b=eC(c,{replace:o,state:a,target:l,preventScrollReset:f,relative:i,viewTransition:m});function C(k){r&&r(k),k.defaultPrevented||b(k)}return le.createElement("a",Vm({},w,{href:M||R,onClick:L||s?r:C,ref:n,target:l}))});var Cw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cw||(Cw={}));var Pw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pw||(Pw={}));function eC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=nS(),c=Qf(),f=rS(t,{relative:o});return le.useCallback(m=>{if(K2(m,n)){m.preventDefault();let w=r!==void 0?r:Jh(c)===Jh(f);l(t,{replace:w,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,f,r,i,n,t,s,o,a])}function Nw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function tC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yf(t,...e){if(!tC(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Nw(t.outputLen),Nw(t.blockLen)}function ef(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rC(t,e){Yf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Zo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xr(t,e){return t<<32-e|t>>>e}function iC(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function E0(t){return typeof t=="string"&&(t=iC(t)),Yf(t),t}function sC(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Yf(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class oS{clone(){return this._cloneInto()}}function aS(t){const e=r=>t().update(E0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function lS(t=32){if(Zo&&typeof Zo.getRandomValues=="function")return Zo.getRandomValues(new Uint8Array(t));if(Zo&&typeof Zo.randomBytes=="function")return Zo.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function oC(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function aC(t,e,n){return t&e^~t&n}function lC(t,e,n){return t&e^t&n^e&n}class uS extends oS{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fp(this.buffer)}update(e){ef(this);const{view:n,buffer:r,blockLen:i}=this;e=E0(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=fp(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ef(this),rC(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let m=o;m<i;m++)n[m]=0;oC(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=fp(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,f=this.get();if(c>f.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<c;m++)a.setUint32(4*m,f[m],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Kc=BigInt(2**32-1),Um=BigInt(32);function cS(t,e=!1){return e?{h:Number(t&Kc),l:Number(t>>Um&Kc)}:{h:Number(t>>Um&Kc)|0,l:Number(t&Kc)|0}}function uC(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=cS(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const cC=(t,e)=>BigInt(t>>>0)<<Um|BigInt(e>>>0),hC=(t,e,n)=>t>>>n,fC=(t,e,n)=>t<<32-n|e>>>n,dC=(t,e,n)=>t>>>n|e<<32-n,pC=(t,e,n)=>t<<32-n|e>>>n,mC=(t,e,n)=>t<<64-n|e>>>n-32,gC=(t,e,n)=>t>>>n-32|e<<64-n,yC=(t,e)=>e,vC=(t,e)=>t,wC=(t,e,n)=>t<<n|e>>>32-n,_C=(t,e,n)=>e<<n|t>>>32-n,EC=(t,e,n)=>e<<n-32|t>>>64-n,IC=(t,e,n)=>t<<n-32|e>>>64-n;function SC(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const TC=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),AC=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,bC=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),xC=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,kC=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),RC=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,CC={fromBig:cS,split:uC,toBig:cC,shrSH:hC,shrSL:fC,rotrSH:dC,rotrSL:pC,rotrBH:mC,rotrBL:gC,rotr32H:yC,rotr32L:vC,rotlSH:wC,rotlSL:_C,rotlBH:EC,rotlBL:IC,add:SC,add3L:TC,add3H:AC,add4L:bC,add4H:xC,add5H:RC,add5L:kC},Ve=CC,[PC,NC]=(()=>Ve.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Qi=new Uint32Array(80),Yi=new Uint32Array(80);class MC extends uS{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:f,Fh:m,Fl:w,Gh:S,Gl:M,Hh:L,Hl:R}=this;return[e,n,r,i,s,o,a,l,c,f,m,w,S,M,L,R]}set(e,n,r,i,s,o,a,l,c,f,m,w,S,M,L,R){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=f|0,this.Fh=m|0,this.Fl=w|0,this.Gh=S|0,this.Gl=M|0,this.Hh=L|0,this.Hl=R|0}process(e,n){for(let k=0;k<16;k++,n+=4)Qi[k]=e.getUint32(n),Yi[k]=e.getUint32(n+=4);for(let k=16;k<80;k++){const q=Qi[k-15]|0,Y=Yi[k-15]|0,X=Ve.rotrSH(q,Y,1)^Ve.rotrSH(q,Y,8)^Ve.shrSH(q,Y,7),O=Ve.rotrSL(q,Y,1)^Ve.rotrSL(q,Y,8)^Ve.shrSL(q,Y,7),P=Qi[k-2]|0,D=Yi[k-2]|0,z=Ve.rotrSH(P,D,19)^Ve.rotrBH(P,D,61)^Ve.shrSH(P,D,6),$=Ve.rotrSL(P,D,19)^Ve.rotrBL(P,D,61)^Ve.shrSL(P,D,6),W=Ve.add4L(O,$,Yi[k-7],Yi[k-16]),E=Ve.add4H(W,X,z,Qi[k-7],Qi[k-16]);Qi[k]=E|0,Yi[k]=W|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:f,Eh:m,El:w,Fh:S,Fl:M,Gh:L,Gl:R,Hh:b,Hl:C}=this;for(let k=0;k<80;k++){const q=Ve.rotrSH(m,w,14)^Ve.rotrSH(m,w,18)^Ve.rotrBH(m,w,41),Y=Ve.rotrSL(m,w,14)^Ve.rotrSL(m,w,18)^Ve.rotrBL(m,w,41),X=m&S^~m&L,O=w&M^~w&R,P=Ve.add5L(C,Y,O,NC[k],Yi[k]),D=Ve.add5H(P,b,q,X,PC[k],Qi[k]),z=P|0,$=Ve.rotrSH(r,i,28)^Ve.rotrBH(r,i,34)^Ve.rotrBH(r,i,39),W=Ve.rotrSL(r,i,28)^Ve.rotrBL(r,i,34)^Ve.rotrBL(r,i,39),E=r&s^r&a^s&a,h=i&o^i&l^o&l;b=L|0,C=R|0,L=S|0,R=M|0,S=m|0,M=w|0,{h:m,l:w}=Ve.add(c|0,f|0,D|0,z|0),c=a|0,f=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const v=Ve.add3L(z,W,h);r=Ve.add3H(v,D,$,E),i=v|0}({h:r,l:i}=Ve.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ve.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ve.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:f}=Ve.add(this.Dh|0,this.Dl|0,c|0,f|0),{h:m,l:w}=Ve.add(this.Eh|0,this.El|0,m|0,w|0),{h:S,l:M}=Ve.add(this.Fh|0,this.Fl|0,S|0,M|0),{h:L,l:R}=Ve.add(this.Gh|0,this.Gl|0,L|0,R|0),{h:b,l:C}=Ve.add(this.Hh|0,this.Hl|0,b|0,C|0),this.set(r,i,s,o,a,l,c,f,m,w,S,M,L,R,b,C)}roundClean(){Qi.fill(0),Yi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const LC=aS(()=>new MC);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xf=BigInt(0),Jf=BigInt(1),BC=BigInt(2);function _o(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Zu(t){if(!_o(t))throw new Error("Uint8Array expected")}function Ni(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const OC=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Eo(t){Zu(t);let e="";for(let n=0;n<t.length;n++)e+=OC[t[n]];return e}function va(t){const e=t.toString(16);return e.length&1?"0"+e:e}function I0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Xf:BigInt("0x"+t)}const _i={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mw(t){if(t>=_i._0&&t<=_i._9)return t-_i._0;if(t>=_i.A&&t<=_i.F)return t-(_i.A-10);if(t>=_i.a&&t<=_i.f)return t-(_i.a-10)}function Fa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Mw(t.charCodeAt(s)),a=Mw(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function fo(t){return I0(Eo(t))}function xa(t){return Zu(t),I0(Eo(Uint8Array.from(t).reverse()))}function za(t,e){return Fa(t.toString(16).padStart(e*2,"0"))}function Cu(t,e){return za(t,e).reverse()}function DC(t){return Fa(va(t))}function Zt(t,e,n){let r;if(typeof e=="string")try{r=Fa(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(_o(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Io(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Zu(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function VC(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function UC(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const dp=t=>typeof t=="bigint"&&Xf<=t;function Zf(t,e,n){return dp(t)&&dp(e)&&dp(n)&&e<=t&&t<n}function br(t,e,n,r){if(!Zf(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function hS(t){let e;for(e=0;t>Xf;t>>=Jf,e+=1);return e}function FC(t,e){return t>>BigInt(e)&Jf}function zC(t,e,n){return t|(n?Jf:Xf)<<BigInt(e)}const S0=t=>(BC<<BigInt(t-1))-Jf,pp=t=>new Uint8Array(t),Lw=t=>Uint8Array.from(t);function fS(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=pp(t),i=pp(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...m)=>n(i,r,...m),l=(m=pp())=>{i=a(Lw([0]),m),r=a(),m.length!==0&&(i=a(Lw([1]),m),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const w=[];for(;m<e;){r=a();const S=r.slice();w.push(S),m+=r.length}return Io(...w)};return(m,w)=>{o(),l(m);let S;for(;!(S=w(c()));)l();return o(),S}}const jC={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||_o(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function rl(t,e,n={}){const r=(i,s,o)=>{const a=jC[s];if(typeof a!="function")throw new Error("invalid validator function");const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const $C=()=>{throw new Error("not implemented")};function Pu(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const qC=Object.freeze(Object.defineProperty({__proto__:null,aInRange:br,abool:Ni,abytes:Zu,bitGet:FC,bitLen:hS,bitMask:S0,bitSet:zC,bytesToHex:Eo,bytesToNumberBE:fo,bytesToNumberLE:xa,concatBytes:Io,createHmacDrbg:fS,ensureBytes:Zt,equalBytes:VC,hexToBytes:Fa,hexToNumber:I0,inRange:Zf,isBytes:_o,memoized:Pu,notImplemented:$C,numberToBytesBE:za,numberToBytesLE:Cu,numberToHexUnpadded:va,numberToVarBytesBE:DC,utf8ToBytes:UC,validateObject:rl},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pn=BigInt(0),Dt=BigInt(1),ro=BigInt(2),WC=BigInt(3),Fm=BigInt(4),Bw=BigInt(5),Ow=BigInt(8);function Ct(t,e){const n=t%e;return n>=pn?n:e+n}function HC(t,e,n){if(e<pn)throw new Error("invalid exponent, negatives unsupported");if(n<=pn)throw new Error("invalid modulus");if(n===Dt)return pn;let r=Dt;for(;e>pn;)e&Dt&&(r=r*t%n),t=t*t%n,e>>=Dt;return r}function Wt(t,e,n){let r=t;for(;e-- >pn;)r*=r,r%=n;return r}function zm(t,e){if(t===pn)throw new Error("invert: expected non-zero number");if(e<=pn)throw new Error("invert: expected positive modulus, got "+e);let n=Ct(t,e),r=e,i=pn,s=Dt;for(;n!==pn;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==Dt)throw new Error("invert: does not exist");return Ct(i,e)}function KC(t){const e=(t-Dt)/ro;let n,r,i;for(n=t-Dt,r=0;n%ro===pn;n/=ro,r++);for(i=ro;i<t&&HC(i,e,t)!==t-Dt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Dt)/Fm;return function(l,c){const f=l.pow(c,o);if(!l.eql(l.sqr(f),c))throw new Error("Cannot find square root");return f}}const s=(n+Dt)/ro;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,f=a.pow(a.mul(a.ONE,i),n),m=a.pow(l,s),w=a.pow(l,n);for(;!a.eql(w,a.ONE);){if(a.eql(w,a.ZERO))return a.ZERO;let S=1;for(let L=a.sqr(w);S<c&&!a.eql(L,a.ONE);S++)L=a.sqr(L);const M=a.pow(f,Dt<<BigInt(c-S-1));f=a.sqr(M),m=a.mul(m,M),w=a.mul(w,f),c=S}return m}}function GC(t){if(t%Fm===WC){const e=(t+Dt)/Fm;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Ow===Bw){const e=(t-Bw)/Ow;return function(r,i){const s=r.mul(i,ro),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,ro),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return KC(t)}const QC=(t,e)=>(Ct(t,e)&Dt)===Dt,YC=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function XC(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=YC.reduce((r,i)=>(r[i]="function",r),e);return rl(t,n)}function JC(t,e,n){if(n<pn)throw new Error("invalid exponent, negatives unsupported");if(n===pn)return t.ONE;if(n===Dt)return e;let r=t.ONE,i=e;for(;n>pn;)n&Dt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Dt;return r}function ZC(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function dS(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ed(t,e,n=!1,r={}){if(t<=pn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=dS(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:S0(i),ZERO:pn,ONE:Dt,create:l=>Ct(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return pn<=l&&l<t},is0:l=>l===pn,isOdd:l=>(l&Dt)===Dt,neg:l=>Ct(-l,t),eql:(l,c)=>l===c,sqr:l=>Ct(l*l,t),add:(l,c)=>Ct(l+c,t),sub:(l,c)=>Ct(l-c,t),mul:(l,c)=>Ct(l*c,t),pow:(l,c)=>JC(a,l,c),div:(l,c)=>Ct(l*zm(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>zm(l,t),sqrt:r.sqrt||(l=>(o||(o=GC(t)),o(a,l))),invertBatch:l=>ZC(a,l),cmov:(l,c,f)=>f?c:l,toBytes:l=>n?Cu(l,s):za(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return n?xa(l):fo(l)}});return Object.freeze(a)}function pS(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function mS(t){const e=pS(t);return e+Math.ceil(e/2)}function eP(t,e,n=!1){const r=t.length,i=pS(e),s=mS(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?xa(t):fo(t),a=Ct(o,e-Dt)+Dt;return n?Cu(a,i):za(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dw=BigInt(0),Gc=BigInt(1);function mp(t,e){const n=e.negate();return t?n:e}function gS(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function gp(t,e){gS(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function tP(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function nP(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const yp=new WeakMap,yS=new WeakMap;function vp(t){return yS.get(t)||1}function vS(t,e){return{constTimeNegate:mp,hasPrecomputes(n){return vp(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Dw;)r&Gc&&(i=i.add(s)),s=s.double(),r>>=Gc;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=gp(r,e),o=[];let a=n,l=a;for(let c=0;c<i;c++){l=a,o.push(l);for(let f=1;f<s;f++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=gp(n,e);let a=t.ZERO,l=t.BASE;const c=BigInt(2**n-1),f=2**n,m=BigInt(n);for(let w=0;w<s;w++){const S=w*o;let M=Number(i&c);i>>=m,M>o&&(M-=f,i+=Gc);const L=S,R=S+Math.abs(M)-1,b=w%2!==0,C=M<0;M===0?l=l.add(mp(b,r[L])):a=a.add(mp(C,r[R]))}return{p:a,f:l}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=gp(n,e),l=BigInt(2**n-1),c=2**n,f=BigInt(n);for(let m=0;m<o;m++){const w=m*a;if(i===Dw)break;let S=Number(i&l);if(i>>=f,S>a&&(S-=c,i+=Gc),S===0)continue;let M=r[w+Math.abs(S)-1];S<0&&(M=M.negate()),s=s.add(M)}return s},getPrecomputes(n,r,i){let s=yp.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&yp.set(r,i(s))),s},wNAFCached(n,r,i){const s=vp(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=vp(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){gS(r,e),yS.set(n,r),yp.delete(n)}}}function wS(t,e,n,r){if(tP(n,t),nP(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=hS(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),c=Math.floor((e.BITS-1)/o)*o;let f=i;for(let m=c;m>=0;m-=o){l.fill(i);for(let S=0;S<r.length;S++){const M=r[S],L=Number(M>>BigInt(m)&BigInt(a));l[L]=l[L].add(n[S])}let w=i;for(let S=l.length-1,M=i;S>0;S--)M=M.add(l[S]),w=w.add(M);if(f=f.add(w),m!==0)for(let S=0;S<o;S++)f=f.double()}return f}function T0(t){return XC(t.Fp),rl(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...dS(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Br=BigInt(0),Yn=BigInt(1),Qc=BigInt(2),rP=BigInt(8),iP={zip215:!0};function sP(t){const e=T0(t);return rl(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function oP(t){const e=sP(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,c=Qc<<BigInt(a*8)-Yn,f=n.create,m=ed(e.n,e.nBitLength),w=e.uvRatio||((I,x)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(x))}}catch{return{isValid:!1,value:Br}}}),S=e.adjustScalarBytes||(I=>I),M=e.domain||((I,x,A)=>{if(Ni("phflag",A),x.length||A)throw new Error("Contexts/pre-hash are not supported");return I});function L(I,x){br("coordinate "+I,x,Br,c)}function R(I){if(!(I instanceof k))throw new Error("ExtendedPoint expected")}const b=Pu((I,x)=>{const{ex:A,ey:U,ez:j}=I,N=I.is0();x==null&&(x=N?rP:n.inv(j));const g=f(A*x),V=f(U*x),ie=f(j*x);if(N)return{x:Br,y:Yn};if(ie!==Yn)throw new Error("invZ was invalid");return{x:g,y:V}}),C=Pu(I=>{const{a:x,d:A}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:U,ey:j,ez:N,et:g}=I,V=f(U*U),ie=f(j*j),ae=f(N*N),ce=f(ae*ae),be=f(V*x),Ee=f(ae*f(be+ie)),Ce=f(ce+f(A*f(V*ie)));if(Ee!==Ce)throw new Error("bad point: equation left != right (1)");const ut=f(U*j),De=f(N*g);if(ut!==De)throw new Error("bad point: equation left != right (2)");return!0});class k{constructor(x,A,U,j){this.ex=x,this.ey=A,this.ez=U,this.et=j,L("x",x),L("y",A),L("z",U),L("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof k)throw new Error("extended point not allowed");const{x:A,y:U}=x||{};return L("x",A),L("y",U),new k(A,U,Yn,f(A*U))}static normalizeZ(x){const A=n.invertBatch(x.map(U=>U.ez));return x.map((U,j)=>U.toAffine(A[j])).map(k.fromAffine)}static msm(x,A){return wS(k,m,x,A)}_setWindowSize(x){X.setWindowSize(this,x)}assertValidity(){C(this)}equals(x){R(x);const{ex:A,ey:U,ez:j}=this,{ex:N,ey:g,ez:V}=x,ie=f(A*V),ae=f(N*j),ce=f(U*V),be=f(g*j);return ie===ae&&ce===be}is0(){return this.equals(k.ZERO)}negate(){return new k(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:x}=e,{ex:A,ey:U,ez:j}=this,N=f(A*A),g=f(U*U),V=f(Qc*f(j*j)),ie=f(x*N),ae=A+U,ce=f(f(ae*ae)-N-g),be=ie+g,Ee=be-V,Ce=ie-g,ut=f(ce*Ee),De=f(be*Ce),Oe=f(ce*Ce),bt=f(Ee*be);return new k(ut,De,bt,Oe)}add(x){R(x);const{a:A,d:U}=e,{ex:j,ey:N,ez:g,et:V}=this,{ex:ie,ey:ae,ez:ce,et:be}=x;if(A===BigInt(-1)){const nt=f((N-j)*(ae+ie)),Ye=f((N+j)*(ae-ie)),Xt=f(Ye-nt);if(Xt===Br)return this.double();const rt=f(g*Qc*be),it=f(V*Qc*ce),un=it+rt,st=Ye+nt,T=it-rt,p=f(un*Xt),y=f(st*T),F=f(un*T),H=f(Xt*st);return new k(p,y,H,F)}const Ee=f(j*ie),Ce=f(N*ae),ut=f(V*U*be),De=f(g*ce),Oe=f((j+N)*(ie+ae)-Ee-Ce),bt=De-ut,Fe=De+ut,qe=f(Ce-A*Ee),mi=f(Oe*bt),tt=f(Fe*qe),dt=f(Oe*qe),gi=f(bt*Fe);return new k(mi,tt,gi,dt)}subtract(x){return this.add(x.negate())}wNAF(x){return X.wNAFCached(this,x,k.normalizeZ)}multiply(x){const A=x;br("scalar",A,Yn,r);const{p:U,f:j}=this.wNAF(A);return k.normalizeZ([U,j])[0]}multiplyUnsafe(x,A=k.ZERO){const U=x;return br("scalar",U,Br,r),U===Br?Y:this.is0()||U===Yn?this:X.wNAFCachedUnsafe(this,U,k.normalizeZ,A)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return X.unsafeLadder(this,r).is0()}toAffine(x){return b(this,x)}clearCofactor(){const{h:x}=e;return x===Yn?this:this.multiplyUnsafe(x)}static fromHex(x,A=!1){const{d:U,a:j}=e,N=n.BYTES;x=Zt("pointHex",x,N),Ni("zip215",A);const g=x.slice(),V=x[N-1];g[N-1]=V&-129;const ie=xa(g),ae=A?c:n.ORDER;br("pointHex.y",ie,Br,ae);const ce=f(ie*ie),be=f(ce-Yn),Ee=f(U*ce-j);let{isValid:Ce,value:ut}=w(be,Ee);if(!Ce)throw new Error("Point.fromHex: invalid y coordinate");const De=(ut&Yn)===Yn,Oe=(V&128)!==0;if(!A&&ut===Br&&Oe)throw new Error("Point.fromHex: x=0 and x_0=1");return Oe!==De&&(ut=f(-ut)),k.fromAffine({x:ut,y:ie})}static fromPrivateKey(x){return D(x).point}toRawBytes(){const{x,y:A}=this.toAffine(),U=Cu(A,n.BYTES);return U[U.length-1]|=x&Yn?128:0,U}toHex(){return Eo(this.toRawBytes())}}k.BASE=new k(e.Gx,e.Gy,Yn,f(e.Gx*e.Gy)),k.ZERO=new k(Br,Yn,Yn,Br);const{BASE:q,ZERO:Y}=k,X=vS(k,a*8);function O(I){return Ct(I,r)}function P(I){return O(xa(I))}function D(I){const x=n.BYTES;I=Zt("private key",I,x);const A=Zt("hashed private key",s(I),2*x),U=S(A.slice(0,x)),j=A.slice(x,2*x),N=P(U),g=q.multiply(N),V=g.toRawBytes();return{head:U,prefix:j,scalar:N,point:g,pointBytes:V}}function z(I){return D(I).pointBytes}function $(I=new Uint8Array,...x){const A=Io(...x);return P(s(M(A,Zt("context",I),!!i)))}function W(I,x,A={}){I=Zt("message",I),i&&(I=i(I));const{prefix:U,scalar:j,pointBytes:N}=D(x),g=$(A.context,U,I),V=q.multiply(g).toRawBytes(),ie=$(A.context,V,N,I),ae=O(g+ie*j);br("signature.s",ae,Br,r);const ce=Io(V,Cu(ae,n.BYTES));return Zt("result",ce,n.BYTES*2)}const E=iP;function h(I,x,A,U=E){const{context:j,zip215:N}=U,g=n.BYTES;I=Zt("signature",I,2*g),x=Zt("message",x),A=Zt("publicKey",A,g),N!==void 0&&Ni("zip215",N),i&&(x=i(x));const V=xa(I.slice(g,2*g));let ie,ae,ce;try{ie=k.fromHex(A,N),ae=k.fromHex(I.slice(0,g),N),ce=q.multiplyUnsafe(V)}catch{return!1}if(!N&&ie.isSmallOrder())return!1;const be=$(j,ae.toRawBytes(),ie.toRawBytes(),x);return ae.add(ie.multiplyUnsafe(be)).subtract(ce).clearCofactor().equals(k.ZERO)}return q._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:W,verify:h,ExtendedPoint:k,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,x=k.BASE){return x._setWindowSize(I),x.multiply(BigInt(3)),x}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const A0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Vw=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const aP=BigInt(1),Uw=BigInt(2);BigInt(3);const lP=BigInt(5),uP=BigInt(8);function cP(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=A0,a=t*t%s*t%s,l=Wt(a,Uw,s)*a%s,c=Wt(l,aP,s)*t%s,f=Wt(c,lP,s)*c%s,m=Wt(f,e,s)*f%s,w=Wt(m,n,s)*m%s,S=Wt(w,r,s)*w%s,M=Wt(S,i,s)*S%s,L=Wt(M,i,s)*S%s,R=Wt(L,e,s)*f%s;return{pow_p_5_8:Wt(R,Uw,s)*t%s,b2:a}}function hP(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function fP(t,e){const n=A0,r=Ct(e*e*e,n),i=Ct(r*r*e,n),s=cP(t*i).pow_p_5_8;let o=Ct(t*r*s,n);const a=Ct(e*o*o,n),l=o,c=Ct(o*Vw,n),f=a===t,m=a===Ct(-t,n),w=a===Ct(-t*Vw,n);return f&&(o=l),(m||w)&&(o=c),QC(o,n)&&(o=Ct(-o,n)),{isValid:f||m,value:o}}const dP=(()=>ed(A0,void 0,!0))(),pP=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:dP,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:uP,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:LC,randomBytes:lS,adjustScalarBytes:hP,uvRatio:fP}))(),td=(()=>oP(pP))();var b0={exports:{}};const mP={},gP=Object.freeze(Object.defineProperty({__proto__:null,default:mP},Symbol.toStringTag,{value:"Module"})),yP=Sg(gP);b0.exports;(function(t){(function(e,n){function r(E,h){if(!E)throw new Error(h||"Assertion failed")}function i(E,h){E.super_=h;var v=function(){};v.prototype=h.prototype,E.prototype=new v,E.prototype.constructor=E}function s(E,h,v){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((h==="le"||h==="be")&&(v=h,h=10),this._init(E||0,h||10,v||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=yP.Buffer}catch{}s.isBN=function(h){return h instanceof s?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===s.wordSize&&Array.isArray(h.words)},s.max=function(h,v){return h.cmp(v)>0?h:v},s.min=function(h,v){return h.cmp(v)<0?h:v},s.prototype._init=function(h,v,I){if(typeof h=="number")return this._initNumber(h,v,I);if(typeof h=="object")return this._initArray(h,v,I);v==="hex"&&(v=16),r(v===(v|0)&&v>=2&&v<=36),h=h.toString().replace(/\s+/g,"");var x=0;h[0]==="-"&&(x++,this.negative=1),x<h.length&&(v===16?this._parseHex(h,x,I):(this._parseBase(h,v,x),I==="le"&&this._initArray(this.toArray(),v,I)))},s.prototype._initNumber=function(h,v,I){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(r(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),v,I)},s.prototype._initArray=function(h,v,I){if(r(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var A,U,j=0;if(I==="be")for(x=h.length-1,A=0;x>=0;x-=3)U=h[x]|h[x-1]<<8|h[x-2]<<16,this.words[A]|=U<<j&67108863,this.words[A+1]=U>>>26-j&67108863,j+=24,j>=26&&(j-=26,A++);else if(I==="le")for(x=0,A=0;x<h.length;x+=3)U=h[x]|h[x+1]<<8|h[x+2]<<16,this.words[A]|=U<<j&67108863,this.words[A+1]=U>>>26-j&67108863,j+=24,j>=26&&(j-=26,A++);return this._strip()};function a(E,h){var v=E.charCodeAt(h);if(v>=48&&v<=57)return v-48;if(v>=65&&v<=70)return v-55;if(v>=97&&v<=102)return v-87;r(!1,"Invalid character in "+E)}function l(E,h,v){var I=a(E,v);return v-1>=h&&(I|=a(E,v-1)<<4),I}s.prototype._parseHex=function(h,v,I){this.length=Math.ceil((h.length-v)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var A=0,U=0,j;if(I==="be")for(x=h.length-1;x>=v;x-=2)j=l(h,v,x)<<A,this.words[U]|=j&67108863,A>=18?(A-=18,U+=1,this.words[U]|=j>>>26):A+=8;else{var N=h.length-v;for(x=N%2===0?v+1:v;x<h.length;x+=2)j=l(h,v,x)<<A,this.words[U]|=j&67108863,A>=18?(A-=18,U+=1,this.words[U]|=j>>>26):A+=8}this._strip()};function c(E,h,v,I){for(var x=0,A=0,U=Math.min(E.length,v),j=h;j<U;j++){var N=E.charCodeAt(j)-48;x*=I,N>=49?A=N-49+10:N>=17?A=N-17+10:A=N,r(N>=0&&A<I,"Invalid character"),x+=A}return x}s.prototype._parseBase=function(h,v,I){this.words=[0],this.length=1;for(var x=0,A=1;A<=67108863;A*=v)x++;x--,A=A/v|0;for(var U=h.length-I,j=U%x,N=Math.min(U,U-j)+I,g=0,V=I;V<N;V+=x)g=c(h,V,V+x,v),this.imuln(A),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(j!==0){var ie=1;for(g=c(h,V,h.length,v),V=0;V<j;V++)ie*=v;this.imuln(ie),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this._strip()},s.prototype.copy=function(h){h.words=new Array(this.length);for(var v=0;v<this.length;v++)h.words[v]=this.words[v];h.length=this.length,h.negative=this.negative,h.red=this.red};function f(E,h){E.words=h.words,E.length=h.length,E.negative=h.negative,E.red=h.red}if(s.prototype._move=function(h){f(h,this)},s.prototype.clone=function(){var h=new s(null);return this.copy(h),h},s.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=m}catch{s.prototype.inspect=m}else s.prototype.inspect=m;function m(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(h,v){h=h||10,v=v|0||1;var I;if(h===16||h==="hex"){I="";for(var x=0,A=0,U=0;U<this.length;U++){var j=this.words[U],N=((j<<x|A)&16777215).toString(16);A=j>>>24-x&16777215,x+=2,x>=26&&(x-=26,U--),A!==0||U!==this.length-1?I=w[6-N.length]+N+I:I=N+I}for(A!==0&&(I=A.toString(16)+I);I.length%v!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(h===(h|0)&&h>=2&&h<=36){var g=S[h],V=M[h];I="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var ae=ie.modrn(V).toString(h);ie=ie.idivn(V),ie.isZero()?I=ae+I:I=w[g-ae.length]+ae+I}for(this.isZero()&&(I="0"+I);I.length%v!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(h,v){return this.toArrayLike(o,h,v)}),s.prototype.toArray=function(h,v){return this.toArrayLike(Array,h,v)};var L=function(h,v){return h.allocUnsafe?h.allocUnsafe(v):new h(v)};s.prototype.toArrayLike=function(h,v,I){this._strip();var x=this.byteLength(),A=I||Math.max(1,x);r(x<=A,"byte array longer than desired length"),r(A>0,"Requested array length <= 0");var U=L(h,A),j=v==="le"?"LE":"BE";return this["_toArrayLike"+j](U,x),U},s.prototype._toArrayLikeLE=function(h,v){for(var I=0,x=0,A=0,U=0;A<this.length;A++){var j=this.words[A]<<U|x;h[I++]=j&255,I<h.length&&(h[I++]=j>>8&255),I<h.length&&(h[I++]=j>>16&255),U===6?(I<h.length&&(h[I++]=j>>24&255),x=0,U=0):(x=j>>>24,U+=2)}if(I<h.length)for(h[I++]=x;I<h.length;)h[I++]=0},s.prototype._toArrayLikeBE=function(h,v){for(var I=h.length-1,x=0,A=0,U=0;A<this.length;A++){var j=this.words[A]<<U|x;h[I--]=j&255,I>=0&&(h[I--]=j>>8&255),I>=0&&(h[I--]=j>>16&255),U===6?(I>=0&&(h[I--]=j>>24&255),x=0,U=0):(x=j>>>24,U+=2)}if(I>=0)for(h[I--]=x;I>=0;)h[I--]=0},Math.clz32?s.prototype._countBits=function(h){return 32-Math.clz32(h)}:s.prototype._countBits=function(h){var v=h,I=0;return v>=4096&&(I+=13,v>>>=13),v>=64&&(I+=7,v>>>=7),v>=8&&(I+=4,v>>>=4),v>=2&&(I+=2,v>>>=2),I+v},s.prototype._zeroBits=function(h){if(h===0)return 26;var v=h,I=0;return v&8191||(I+=13,v>>>=13),v&127||(I+=7,v>>>=7),v&15||(I+=4,v>>>=4),v&3||(I+=2,v>>>=2),v&1||I++,I},s.prototype.bitLength=function(){var h=this.words[this.length-1],v=this._countBits(h);return(this.length-1)*26+v};function R(E){for(var h=new Array(E.bitLength()),v=0;v<h.length;v++){var I=v/26|0,x=v%26;h[v]=E.words[I]>>>x&1}return h}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,v=0;v<this.length;v++){var I=this._zeroBits(this.words[v]);if(h+=I,I!==26)break}return h},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},s.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var v=0;v<h.length;v++)this.words[v]=this.words[v]|h.words[v];return this._strip()},s.prototype.ior=function(h){return r((this.negative|h.negative)===0),this.iuor(h)},s.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},s.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},s.prototype.iuand=function(h){var v;this.length>h.length?v=h:v=this;for(var I=0;I<v.length;I++)this.words[I]=this.words[I]&h.words[I];return this.length=v.length,this._strip()},s.prototype.iand=function(h){return r((this.negative|h.negative)===0),this.iuand(h)},s.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},s.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},s.prototype.iuxor=function(h){var v,I;this.length>h.length?(v=this,I=h):(v=h,I=this);for(var x=0;x<I.length;x++)this.words[x]=v.words[x]^I.words[x];if(this!==v)for(;x<v.length;x++)this.words[x]=v.words[x];return this.length=v.length,this._strip()},s.prototype.ixor=function(h){return r((this.negative|h.negative)===0),this.iuxor(h)},s.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},s.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},s.prototype.inotn=function(h){r(typeof h=="number"&&h>=0);var v=Math.ceil(h/26)|0,I=h%26;this._expand(v),I>0&&v--;for(var x=0;x<v;x++)this.words[x]=~this.words[x]&67108863;return I>0&&(this.words[x]=~this.words[x]&67108863>>26-I),this._strip()},s.prototype.notn=function(h){return this.clone().inotn(h)},s.prototype.setn=function(h,v){r(typeof h=="number"&&h>=0);var I=h/26|0,x=h%26;return this._expand(I+1),v?this.words[I]=this.words[I]|1<<x:this.words[I]=this.words[I]&~(1<<x),this._strip()},s.prototype.iadd=function(h){var v;if(this.negative!==0&&h.negative===0)return this.negative=0,v=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,v=this.isub(h),h.negative=1,v._normSign();var I,x;this.length>h.length?(I=this,x=h):(I=h,x=this);for(var A=0,U=0;U<x.length;U++)v=(I.words[U]|0)+(x.words[U]|0)+A,this.words[U]=v&67108863,A=v>>>26;for(;A!==0&&U<I.length;U++)v=(I.words[U]|0)+A,this.words[U]=v&67108863,A=v>>>26;if(this.length=I.length,A!==0)this.words[this.length]=A,this.length++;else if(I!==this)for(;U<I.length;U++)this.words[U]=I.words[U];return this},s.prototype.add=function(h){var v;return h.negative!==0&&this.negative===0?(h.negative=0,v=this.sub(h),h.negative^=1,v):h.negative===0&&this.negative!==0?(this.negative=0,v=h.sub(this),this.negative=1,v):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},s.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var v=this.iadd(h);return h.negative=1,v._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var I=this.cmp(h);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,A;I>0?(x=this,A=h):(x=h,A=this);for(var U=0,j=0;j<A.length;j++)v=(x.words[j]|0)-(A.words[j]|0)+U,U=v>>26,this.words[j]=v&67108863;for(;U!==0&&j<x.length;j++)v=(x.words[j]|0)+U,U=v>>26,this.words[j]=v&67108863;if(U===0&&j<x.length&&x!==this)for(;j<x.length;j++)this.words[j]=x.words[j];return this.length=Math.max(this.length,j),x!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(h){return this.clone().isub(h)};function b(E,h,v){v.negative=h.negative^E.negative;var I=E.length+h.length|0;v.length=I,I=I-1|0;var x=E.words[0]|0,A=h.words[0]|0,U=x*A,j=U&67108863,N=U/67108864|0;v.words[0]=j;for(var g=1;g<I;g++){for(var V=N>>>26,ie=N&67108863,ae=Math.min(g,h.length-1),ce=Math.max(0,g-E.length+1);ce<=ae;ce++){var be=g-ce|0;x=E.words[be]|0,A=h.words[ce]|0,U=x*A+ie,V+=U/67108864|0,ie=U&67108863}v.words[g]=ie|0,N=V|0}return N!==0?v.words[g]=N|0:v.length--,v._strip()}var C=function(h,v,I){var x=h.words,A=v.words,U=I.words,j=0,N,g,V,ie=x[0]|0,ae=ie&8191,ce=ie>>>13,be=x[1]|0,Ee=be&8191,Ce=be>>>13,ut=x[2]|0,De=ut&8191,Oe=ut>>>13,bt=x[3]|0,Fe=bt&8191,qe=bt>>>13,mi=x[4]|0,tt=mi&8191,dt=mi>>>13,gi=x[5]|0,nt=gi&8191,Ye=gi>>>13,Xt=x[6]|0,rt=Xt&8191,it=Xt>>>13,un=x[7]|0,st=un&8191,T=un>>>13,p=x[8]|0,y=p&8191,F=p>>>13,H=x[9]|0,G=H&8191,Z=H>>>13,Le=A[0]|0,Pe=Le&8191,xe=Le>>>13,ct=A[1]|0,Ae=ct&8191,xt=ct>>>13,gl=A[2]|0,Nt=gl&8191,pt=gl>>>13,Uo=A[3]|0,kt=Uo&8191,lt=Uo>>>13,yl=A[4]|0,wt=yl&8191,Mt=yl>>>13,qi=A[5]|0,Lt=qi&8191,We=qi>>>13,vl=A[6]|0,mt=vl&8191,gt=vl>>>13,gc=A[7]|0,jt=gc&8191,ht=gc>>>13,yc=A[8]|0,$t=yc&8191,_t=yc>>>13,wl=A[9]|0,Rt=wl&8191,Et=wl>>>13;I.negative=h.negative^v.negative,I.length=19,N=Math.imul(ae,Pe),g=Math.imul(ae,xe),g=g+Math.imul(ce,Pe)|0,V=Math.imul(ce,xe);var gr=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(gr>>>26)|0,gr&=67108863,N=Math.imul(Ee,Pe),g=Math.imul(Ee,xe),g=g+Math.imul(Ce,Pe)|0,V=Math.imul(Ce,xe),N=N+Math.imul(ae,Ae)|0,g=g+Math.imul(ae,xt)|0,g=g+Math.imul(ce,Ae)|0,V=V+Math.imul(ce,xt)|0;var Fo=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,N=Math.imul(De,Pe),g=Math.imul(De,xe),g=g+Math.imul(Oe,Pe)|0,V=Math.imul(Oe,xe),N=N+Math.imul(Ee,Ae)|0,g=g+Math.imul(Ee,xt)|0,g=g+Math.imul(Ce,Ae)|0,V=V+Math.imul(Ce,xt)|0,N=N+Math.imul(ae,Nt)|0,g=g+Math.imul(ae,pt)|0,g=g+Math.imul(ce,Nt)|0,V=V+Math.imul(ce,pt)|0;var zo=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(zo>>>26)|0,zo&=67108863,N=Math.imul(Fe,Pe),g=Math.imul(Fe,xe),g=g+Math.imul(qe,Pe)|0,V=Math.imul(qe,xe),N=N+Math.imul(De,Ae)|0,g=g+Math.imul(De,xt)|0,g=g+Math.imul(Oe,Ae)|0,V=V+Math.imul(Oe,xt)|0,N=N+Math.imul(Ee,Nt)|0,g=g+Math.imul(Ee,pt)|0,g=g+Math.imul(Ce,Nt)|0,V=V+Math.imul(Ce,pt)|0,N=N+Math.imul(ae,kt)|0,g=g+Math.imul(ae,lt)|0,g=g+Math.imul(ce,kt)|0,V=V+Math.imul(ce,lt)|0;var Ks=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,N=Math.imul(tt,Pe),g=Math.imul(tt,xe),g=g+Math.imul(dt,Pe)|0,V=Math.imul(dt,xe),N=N+Math.imul(Fe,Ae)|0,g=g+Math.imul(Fe,xt)|0,g=g+Math.imul(qe,Ae)|0,V=V+Math.imul(qe,xt)|0,N=N+Math.imul(De,Nt)|0,g=g+Math.imul(De,pt)|0,g=g+Math.imul(Oe,Nt)|0,V=V+Math.imul(Oe,pt)|0,N=N+Math.imul(Ee,kt)|0,g=g+Math.imul(Ee,lt)|0,g=g+Math.imul(Ce,kt)|0,V=V+Math.imul(Ce,lt)|0,N=N+Math.imul(ae,wt)|0,g=g+Math.imul(ae,Mt)|0,g=g+Math.imul(ce,wt)|0,V=V+Math.imul(ce,Mt)|0;var Gs=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,N=Math.imul(nt,Pe),g=Math.imul(nt,xe),g=g+Math.imul(Ye,Pe)|0,V=Math.imul(Ye,xe),N=N+Math.imul(tt,Ae)|0,g=g+Math.imul(tt,xt)|0,g=g+Math.imul(dt,Ae)|0,V=V+Math.imul(dt,xt)|0,N=N+Math.imul(Fe,Nt)|0,g=g+Math.imul(Fe,pt)|0,g=g+Math.imul(qe,Nt)|0,V=V+Math.imul(qe,pt)|0,N=N+Math.imul(De,kt)|0,g=g+Math.imul(De,lt)|0,g=g+Math.imul(Oe,kt)|0,V=V+Math.imul(Oe,lt)|0,N=N+Math.imul(Ee,wt)|0,g=g+Math.imul(Ee,Mt)|0,g=g+Math.imul(Ce,wt)|0,V=V+Math.imul(Ce,Mt)|0,N=N+Math.imul(ae,Lt)|0,g=g+Math.imul(ae,We)|0,g=g+Math.imul(ce,Lt)|0,V=V+Math.imul(ce,We)|0;var jo=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(jo>>>26)|0,jo&=67108863,N=Math.imul(rt,Pe),g=Math.imul(rt,xe),g=g+Math.imul(it,Pe)|0,V=Math.imul(it,xe),N=N+Math.imul(nt,Ae)|0,g=g+Math.imul(nt,xt)|0,g=g+Math.imul(Ye,Ae)|0,V=V+Math.imul(Ye,xt)|0,N=N+Math.imul(tt,Nt)|0,g=g+Math.imul(tt,pt)|0,g=g+Math.imul(dt,Nt)|0,V=V+Math.imul(dt,pt)|0,N=N+Math.imul(Fe,kt)|0,g=g+Math.imul(Fe,lt)|0,g=g+Math.imul(qe,kt)|0,V=V+Math.imul(qe,lt)|0,N=N+Math.imul(De,wt)|0,g=g+Math.imul(De,Mt)|0,g=g+Math.imul(Oe,wt)|0,V=V+Math.imul(Oe,Mt)|0,N=N+Math.imul(Ee,Lt)|0,g=g+Math.imul(Ee,We)|0,g=g+Math.imul(Ce,Lt)|0,V=V+Math.imul(Ce,We)|0,N=N+Math.imul(ae,mt)|0,g=g+Math.imul(ae,gt)|0,g=g+Math.imul(ce,mt)|0,V=V+Math.imul(ce,gt)|0;var $o=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+($o>>>26)|0,$o&=67108863,N=Math.imul(st,Pe),g=Math.imul(st,xe),g=g+Math.imul(T,Pe)|0,V=Math.imul(T,xe),N=N+Math.imul(rt,Ae)|0,g=g+Math.imul(rt,xt)|0,g=g+Math.imul(it,Ae)|0,V=V+Math.imul(it,xt)|0,N=N+Math.imul(nt,Nt)|0,g=g+Math.imul(nt,pt)|0,g=g+Math.imul(Ye,Nt)|0,V=V+Math.imul(Ye,pt)|0,N=N+Math.imul(tt,kt)|0,g=g+Math.imul(tt,lt)|0,g=g+Math.imul(dt,kt)|0,V=V+Math.imul(dt,lt)|0,N=N+Math.imul(Fe,wt)|0,g=g+Math.imul(Fe,Mt)|0,g=g+Math.imul(qe,wt)|0,V=V+Math.imul(qe,Mt)|0,N=N+Math.imul(De,Lt)|0,g=g+Math.imul(De,We)|0,g=g+Math.imul(Oe,Lt)|0,V=V+Math.imul(Oe,We)|0,N=N+Math.imul(Ee,mt)|0,g=g+Math.imul(Ee,gt)|0,g=g+Math.imul(Ce,mt)|0,V=V+Math.imul(Ce,gt)|0,N=N+Math.imul(ae,jt)|0,g=g+Math.imul(ae,ht)|0,g=g+Math.imul(ce,jt)|0,V=V+Math.imul(ce,ht)|0;var _l=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(_l>>>26)|0,_l&=67108863,N=Math.imul(y,Pe),g=Math.imul(y,xe),g=g+Math.imul(F,Pe)|0,V=Math.imul(F,xe),N=N+Math.imul(st,Ae)|0,g=g+Math.imul(st,xt)|0,g=g+Math.imul(T,Ae)|0,V=V+Math.imul(T,xt)|0,N=N+Math.imul(rt,Nt)|0,g=g+Math.imul(rt,pt)|0,g=g+Math.imul(it,Nt)|0,V=V+Math.imul(it,pt)|0,N=N+Math.imul(nt,kt)|0,g=g+Math.imul(nt,lt)|0,g=g+Math.imul(Ye,kt)|0,V=V+Math.imul(Ye,lt)|0,N=N+Math.imul(tt,wt)|0,g=g+Math.imul(tt,Mt)|0,g=g+Math.imul(dt,wt)|0,V=V+Math.imul(dt,Mt)|0,N=N+Math.imul(Fe,Lt)|0,g=g+Math.imul(Fe,We)|0,g=g+Math.imul(qe,Lt)|0,V=V+Math.imul(qe,We)|0,N=N+Math.imul(De,mt)|0,g=g+Math.imul(De,gt)|0,g=g+Math.imul(Oe,mt)|0,V=V+Math.imul(Oe,gt)|0,N=N+Math.imul(Ee,jt)|0,g=g+Math.imul(Ee,ht)|0,g=g+Math.imul(Ce,jt)|0,V=V+Math.imul(Ce,ht)|0,N=N+Math.imul(ae,$t)|0,g=g+Math.imul(ae,_t)|0,g=g+Math.imul(ce,$t)|0,V=V+Math.imul(ce,_t)|0;var Wi=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,N=Math.imul(G,Pe),g=Math.imul(G,xe),g=g+Math.imul(Z,Pe)|0,V=Math.imul(Z,xe),N=N+Math.imul(y,Ae)|0,g=g+Math.imul(y,xt)|0,g=g+Math.imul(F,Ae)|0,V=V+Math.imul(F,xt)|0,N=N+Math.imul(st,Nt)|0,g=g+Math.imul(st,pt)|0,g=g+Math.imul(T,Nt)|0,V=V+Math.imul(T,pt)|0,N=N+Math.imul(rt,kt)|0,g=g+Math.imul(rt,lt)|0,g=g+Math.imul(it,kt)|0,V=V+Math.imul(it,lt)|0,N=N+Math.imul(nt,wt)|0,g=g+Math.imul(nt,Mt)|0,g=g+Math.imul(Ye,wt)|0,V=V+Math.imul(Ye,Mt)|0,N=N+Math.imul(tt,Lt)|0,g=g+Math.imul(tt,We)|0,g=g+Math.imul(dt,Lt)|0,V=V+Math.imul(dt,We)|0,N=N+Math.imul(Fe,mt)|0,g=g+Math.imul(Fe,gt)|0,g=g+Math.imul(qe,mt)|0,V=V+Math.imul(qe,gt)|0,N=N+Math.imul(De,jt)|0,g=g+Math.imul(De,ht)|0,g=g+Math.imul(Oe,jt)|0,V=V+Math.imul(Oe,ht)|0,N=N+Math.imul(Ee,$t)|0,g=g+Math.imul(Ee,_t)|0,g=g+Math.imul(Ce,$t)|0,V=V+Math.imul(Ce,_t)|0,N=N+Math.imul(ae,Rt)|0,g=g+Math.imul(ae,Et)|0,g=g+Math.imul(ce,Rt)|0,V=V+Math.imul(ce,Et)|0;var qo=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(qo>>>26)|0,qo&=67108863,N=Math.imul(G,Ae),g=Math.imul(G,xt),g=g+Math.imul(Z,Ae)|0,V=Math.imul(Z,xt),N=N+Math.imul(y,Nt)|0,g=g+Math.imul(y,pt)|0,g=g+Math.imul(F,Nt)|0,V=V+Math.imul(F,pt)|0,N=N+Math.imul(st,kt)|0,g=g+Math.imul(st,lt)|0,g=g+Math.imul(T,kt)|0,V=V+Math.imul(T,lt)|0,N=N+Math.imul(rt,wt)|0,g=g+Math.imul(rt,Mt)|0,g=g+Math.imul(it,wt)|0,V=V+Math.imul(it,Mt)|0,N=N+Math.imul(nt,Lt)|0,g=g+Math.imul(nt,We)|0,g=g+Math.imul(Ye,Lt)|0,V=V+Math.imul(Ye,We)|0,N=N+Math.imul(tt,mt)|0,g=g+Math.imul(tt,gt)|0,g=g+Math.imul(dt,mt)|0,V=V+Math.imul(dt,gt)|0,N=N+Math.imul(Fe,jt)|0,g=g+Math.imul(Fe,ht)|0,g=g+Math.imul(qe,jt)|0,V=V+Math.imul(qe,ht)|0,N=N+Math.imul(De,$t)|0,g=g+Math.imul(De,_t)|0,g=g+Math.imul(Oe,$t)|0,V=V+Math.imul(Oe,_t)|0,N=N+Math.imul(Ee,Rt)|0,g=g+Math.imul(Ee,Et)|0,g=g+Math.imul(Ce,Rt)|0,V=V+Math.imul(Ce,Et)|0;var Qs=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,N=Math.imul(G,Nt),g=Math.imul(G,pt),g=g+Math.imul(Z,Nt)|0,V=Math.imul(Z,pt),N=N+Math.imul(y,kt)|0,g=g+Math.imul(y,lt)|0,g=g+Math.imul(F,kt)|0,V=V+Math.imul(F,lt)|0,N=N+Math.imul(st,wt)|0,g=g+Math.imul(st,Mt)|0,g=g+Math.imul(T,wt)|0,V=V+Math.imul(T,Mt)|0,N=N+Math.imul(rt,Lt)|0,g=g+Math.imul(rt,We)|0,g=g+Math.imul(it,Lt)|0,V=V+Math.imul(it,We)|0,N=N+Math.imul(nt,mt)|0,g=g+Math.imul(nt,gt)|0,g=g+Math.imul(Ye,mt)|0,V=V+Math.imul(Ye,gt)|0,N=N+Math.imul(tt,jt)|0,g=g+Math.imul(tt,ht)|0,g=g+Math.imul(dt,jt)|0,V=V+Math.imul(dt,ht)|0,N=N+Math.imul(Fe,$t)|0,g=g+Math.imul(Fe,_t)|0,g=g+Math.imul(qe,$t)|0,V=V+Math.imul(qe,_t)|0,N=N+Math.imul(De,Rt)|0,g=g+Math.imul(De,Et)|0,g=g+Math.imul(Oe,Rt)|0,V=V+Math.imul(Oe,Et)|0;var yi=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(yi>>>26)|0,yi&=67108863,N=Math.imul(G,kt),g=Math.imul(G,lt),g=g+Math.imul(Z,kt)|0,V=Math.imul(Z,lt),N=N+Math.imul(y,wt)|0,g=g+Math.imul(y,Mt)|0,g=g+Math.imul(F,wt)|0,V=V+Math.imul(F,Mt)|0,N=N+Math.imul(st,Lt)|0,g=g+Math.imul(st,We)|0,g=g+Math.imul(T,Lt)|0,V=V+Math.imul(T,We)|0,N=N+Math.imul(rt,mt)|0,g=g+Math.imul(rt,gt)|0,g=g+Math.imul(it,mt)|0,V=V+Math.imul(it,gt)|0,N=N+Math.imul(nt,jt)|0,g=g+Math.imul(nt,ht)|0,g=g+Math.imul(Ye,jt)|0,V=V+Math.imul(Ye,ht)|0,N=N+Math.imul(tt,$t)|0,g=g+Math.imul(tt,_t)|0,g=g+Math.imul(dt,$t)|0,V=V+Math.imul(dt,_t)|0,N=N+Math.imul(Fe,Rt)|0,g=g+Math.imul(Fe,Et)|0,g=g+Math.imul(qe,Rt)|0,V=V+Math.imul(qe,Et)|0;var Nr=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,N=Math.imul(G,wt),g=Math.imul(G,Mt),g=g+Math.imul(Z,wt)|0,V=Math.imul(Z,Mt),N=N+Math.imul(y,Lt)|0,g=g+Math.imul(y,We)|0,g=g+Math.imul(F,Lt)|0,V=V+Math.imul(F,We)|0,N=N+Math.imul(st,mt)|0,g=g+Math.imul(st,gt)|0,g=g+Math.imul(T,mt)|0,V=V+Math.imul(T,gt)|0,N=N+Math.imul(rt,jt)|0,g=g+Math.imul(rt,ht)|0,g=g+Math.imul(it,jt)|0,V=V+Math.imul(it,ht)|0,N=N+Math.imul(nt,$t)|0,g=g+Math.imul(nt,_t)|0,g=g+Math.imul(Ye,$t)|0,V=V+Math.imul(Ye,_t)|0,N=N+Math.imul(tt,Rt)|0,g=g+Math.imul(tt,Et)|0,g=g+Math.imul(dt,Rt)|0,V=V+Math.imul(dt,Et)|0;var Ys=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,N=Math.imul(G,Lt),g=Math.imul(G,We),g=g+Math.imul(Z,Lt)|0,V=Math.imul(Z,We),N=N+Math.imul(y,mt)|0,g=g+Math.imul(y,gt)|0,g=g+Math.imul(F,mt)|0,V=V+Math.imul(F,gt)|0,N=N+Math.imul(st,jt)|0,g=g+Math.imul(st,ht)|0,g=g+Math.imul(T,jt)|0,V=V+Math.imul(T,ht)|0,N=N+Math.imul(rt,$t)|0,g=g+Math.imul(rt,_t)|0,g=g+Math.imul(it,$t)|0,V=V+Math.imul(it,_t)|0,N=N+Math.imul(nt,Rt)|0,g=g+Math.imul(nt,Et)|0,g=g+Math.imul(Ye,Rt)|0,V=V+Math.imul(Ye,Et)|0;var El=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(El>>>26)|0,El&=67108863,N=Math.imul(G,mt),g=Math.imul(G,gt),g=g+Math.imul(Z,mt)|0,V=Math.imul(Z,gt),N=N+Math.imul(y,jt)|0,g=g+Math.imul(y,ht)|0,g=g+Math.imul(F,jt)|0,V=V+Math.imul(F,ht)|0,N=N+Math.imul(st,$t)|0,g=g+Math.imul(st,_t)|0,g=g+Math.imul(T,$t)|0,V=V+Math.imul(T,_t)|0,N=N+Math.imul(rt,Rt)|0,g=g+Math.imul(rt,Et)|0,g=g+Math.imul(it,Rt)|0,V=V+Math.imul(it,Et)|0;var Wo=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,N=Math.imul(G,jt),g=Math.imul(G,ht),g=g+Math.imul(Z,jt)|0,V=Math.imul(Z,ht),N=N+Math.imul(y,$t)|0,g=g+Math.imul(y,_t)|0,g=g+Math.imul(F,$t)|0,V=V+Math.imul(F,_t)|0,N=N+Math.imul(st,Rt)|0,g=g+Math.imul(st,Et)|0,g=g+Math.imul(T,Rt)|0,V=V+Math.imul(T,Et)|0;var Ho=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Ho>>>26)|0,Ho&=67108863,N=Math.imul(G,$t),g=Math.imul(G,_t),g=g+Math.imul(Z,$t)|0,V=Math.imul(Z,_t),N=N+Math.imul(y,Rt)|0,g=g+Math.imul(y,Et)|0,g=g+Math.imul(F,Rt)|0,V=V+Math.imul(F,Et)|0;var Ko=(j+N|0)+((g&8191)<<13)|0;j=(V+(g>>>13)|0)+(Ko>>>26)|0,Ko&=67108863,N=Math.imul(G,Rt),g=Math.imul(G,Et),g=g+Math.imul(Z,Rt)|0,V=Math.imul(Z,Et);var Xs=(j+N|0)+((g&8191)<<13)|0;return j=(V+(g>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,U[0]=gr,U[1]=Fo,U[2]=zo,U[3]=Ks,U[4]=Gs,U[5]=jo,U[6]=$o,U[7]=_l,U[8]=Wi,U[9]=qo,U[10]=Qs,U[11]=yi,U[12]=Nr,U[13]=Ys,U[14]=El,U[15]=Wo,U[16]=Ho,U[17]=Ko,U[18]=Xs,j!==0&&(U[19]=j,I.length++),I};Math.imul||(C=b);function k(E,h,v){v.negative=h.negative^E.negative,v.length=E.length+h.length;for(var I=0,x=0,A=0;A<v.length-1;A++){var U=x;x=0;for(var j=I&67108863,N=Math.min(A,h.length-1),g=Math.max(0,A-E.length+1);g<=N;g++){var V=A-g,ie=E.words[V]|0,ae=h.words[g]|0,ce=ie*ae,be=ce&67108863;U=U+(ce/67108864|0)|0,be=be+j|0,j=be&67108863,U=U+(be>>>26)|0,x+=U>>>26,U&=67108863}v.words[A]=j,I=U,U=x}return I!==0?v.words[A]=I:v.length--,v._strip()}function q(E,h,v){return k(E,h,v)}s.prototype.mulTo=function(h,v){var I,x=this.length+h.length;return this.length===10&&h.length===10?I=C(this,h,v):x<63?I=b(this,h,v):x<1024?I=k(this,h,v):I=q(this,h,v),I},s.prototype.mul=function(h){var v=new s(null);return v.words=new Array(this.length+h.length),this.mulTo(h,v)},s.prototype.mulf=function(h){var v=new s(null);return v.words=new Array(this.length+h.length),q(this,h,v)},s.prototype.imul=function(h){return this.clone().mulTo(h,this)},s.prototype.imuln=function(h){var v=h<0;v&&(h=-h),r(typeof h=="number"),r(h<67108864);for(var I=0,x=0;x<this.length;x++){var A=(this.words[x]|0)*h,U=(A&67108863)+(I&67108863);I>>=26,I+=A/67108864|0,I+=U>>>26,this.words[x]=U&67108863}return I!==0&&(this.words[x]=I,this.length++),v?this.ineg():this},s.prototype.muln=function(h){return this.clone().imuln(h)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(h){var v=R(h);if(v.length===0)return new s(1);for(var I=this,x=0;x<v.length&&v[x]===0;x++,I=I.sqr());if(++x<v.length)for(var A=I.sqr();x<v.length;x++,A=A.sqr())v[x]!==0&&(I=I.mul(A));return I},s.prototype.iushln=function(h){r(typeof h=="number"&&h>=0);var v=h%26,I=(h-v)/26,x=67108863>>>26-v<<26-v,A;if(v!==0){var U=0;for(A=0;A<this.length;A++){var j=this.words[A]&x,N=(this.words[A]|0)-j<<v;this.words[A]=N|U,U=j>>>26-v}U&&(this.words[A]=U,this.length++)}if(I!==0){for(A=this.length-1;A>=0;A--)this.words[A+I]=this.words[A];for(A=0;A<I;A++)this.words[A]=0;this.length+=I}return this._strip()},s.prototype.ishln=function(h){return r(this.negative===0),this.iushln(h)},s.prototype.iushrn=function(h,v,I){r(typeof h=="number"&&h>=0);var x;v?x=(v-v%26)/26:x=0;var A=h%26,U=Math.min((h-A)/26,this.length),j=67108863^67108863>>>A<<A,N=I;if(x-=U,x=Math.max(0,x),N){for(var g=0;g<U;g++)N.words[g]=this.words[g];N.length=U}if(U!==0)if(this.length>U)for(this.length-=U,g=0;g<this.length;g++)this.words[g]=this.words[g+U];else this.words[0]=0,this.length=1;var V=0;for(g=this.length-1;g>=0&&(V!==0||g>=x);g--){var ie=this.words[g]|0;this.words[g]=V<<26-A|ie>>>A,V=ie&j}return N&&V!==0&&(N.words[N.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(h,v,I){return r(this.negative===0),this.iushrn(h,v,I)},s.prototype.shln=function(h){return this.clone().ishln(h)},s.prototype.ushln=function(h){return this.clone().iushln(h)},s.prototype.shrn=function(h){return this.clone().ishrn(h)},s.prototype.ushrn=function(h){return this.clone().iushrn(h)},s.prototype.testn=function(h){r(typeof h=="number"&&h>=0);var v=h%26,I=(h-v)/26,x=1<<v;if(this.length<=I)return!1;var A=this.words[I];return!!(A&x)},s.prototype.imaskn=function(h){r(typeof h=="number"&&h>=0);var v=h%26,I=(h-v)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(v!==0&&I++,this.length=Math.min(I,this.length),v!==0){var x=67108863^67108863>>>v<<v;this.words[this.length-1]&=x}return this._strip()},s.prototype.maskn=function(h){return this.clone().imaskn(h)},s.prototype.iaddn=function(h){return r(typeof h=="number"),r(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},s.prototype._iaddn=function(h){this.words[0]+=h;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},s.prototype.isubn=function(h){if(r(typeof h=="number"),r(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},s.prototype.addn=function(h){return this.clone().iaddn(h)},s.prototype.subn=function(h){return this.clone().isubn(h)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(h,v,I){var x=h.length+I,A;this._expand(x);var U,j=0;for(A=0;A<h.length;A++){U=(this.words[A+I]|0)+j;var N=(h.words[A]|0)*v;U-=N&67108863,j=(U>>26)-(N/67108864|0),this.words[A+I]=U&67108863}for(;A<this.length-I;A++)U=(this.words[A+I]|0)+j,j=U>>26,this.words[A+I]=U&67108863;if(j===0)return this._strip();for(r(j===-1),j=0,A=0;A<this.length;A++)U=-(this.words[A]|0)+j,j=U>>26,this.words[A]=U&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(h,v){var I=this.length-h.length,x=this.clone(),A=h,U=A.words[A.length-1]|0,j=this._countBits(U);I=26-j,I!==0&&(A=A.ushln(I),x.iushln(I),U=A.words[A.length-1]|0);var N=x.length-A.length,g;if(v!=="mod"){g=new s(null),g.length=N+1,g.words=new Array(g.length);for(var V=0;V<g.length;V++)g.words[V]=0}var ie=x.clone()._ishlnsubmul(A,1,N);ie.negative===0&&(x=ie,g&&(g.words[N]=1));for(var ae=N-1;ae>=0;ae--){var ce=(x.words[A.length+ae]|0)*67108864+(x.words[A.length+ae-1]|0);for(ce=Math.min(ce/U|0,67108863),x._ishlnsubmul(A,ce,ae);x.negative!==0;)ce--,x.negative=0,x._ishlnsubmul(A,1,ae),x.isZero()||(x.negative^=1);g&&(g.words[ae]=ce)}return g&&g._strip(),x._strip(),v!=="div"&&I!==0&&x.iushrn(I),{div:g||null,mod:x}},s.prototype.divmod=function(h,v,I){if(r(!h.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var x,A,U;return this.negative!==0&&h.negative===0?(U=this.neg().divmod(h,v),v!=="mod"&&(x=U.div.neg()),v!=="div"&&(A=U.mod.neg(),I&&A.negative!==0&&A.iadd(h)),{div:x,mod:A}):this.negative===0&&h.negative!==0?(U=this.divmod(h.neg(),v),v!=="mod"&&(x=U.div.neg()),{div:x,mod:U.mod}):this.negative&h.negative?(U=this.neg().divmod(h.neg(),v),v!=="div"&&(A=U.mod.neg(),I&&A.negative!==0&&A.isub(h)),{div:U.div,mod:A}):h.length>this.length||this.cmp(h)<0?{div:new s(0),mod:this}:h.length===1?v==="div"?{div:this.divn(h.words[0]),mod:null}:v==="mod"?{div:null,mod:new s(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new s(this.modrn(h.words[0]))}:this._wordDiv(h,v)},s.prototype.div=function(h){return this.divmod(h,"div",!1).div},s.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},s.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},s.prototype.divRound=function(h){var v=this.divmod(h);if(v.mod.isZero())return v.div;var I=v.div.negative!==0?v.mod.isub(h):v.mod,x=h.ushrn(1),A=h.andln(1),U=I.cmp(x);return U<0||A===1&&U===0?v.div:v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},s.prototype.modrn=function(h){var v=h<0;v&&(h=-h),r(h<=67108863);for(var I=(1<<26)%h,x=0,A=this.length-1;A>=0;A--)x=(I*x+(this.words[A]|0))%h;return v?-x:x},s.prototype.modn=function(h){return this.modrn(h)},s.prototype.idivn=function(h){var v=h<0;v&&(h=-h),r(h<=67108863);for(var I=0,x=this.length-1;x>=0;x--){var A=(this.words[x]|0)+I*67108864;this.words[x]=A/h|0,I=A%h}return this._strip(),v?this.ineg():this},s.prototype.divn=function(h){return this.clone().idivn(h)},s.prototype.egcd=function(h){r(h.negative===0),r(!h.isZero());var v=this,I=h.clone();v.negative!==0?v=v.umod(h):v=v.clone();for(var x=new s(1),A=new s(0),U=new s(0),j=new s(1),N=0;v.isEven()&&I.isEven();)v.iushrn(1),I.iushrn(1),++N;for(var g=I.clone(),V=v.clone();!v.isZero();){for(var ie=0,ae=1;!(v.words[0]&ae)&&ie<26;++ie,ae<<=1);if(ie>0)for(v.iushrn(ie);ie-- >0;)(x.isOdd()||A.isOdd())&&(x.iadd(g),A.isub(V)),x.iushrn(1),A.iushrn(1);for(var ce=0,be=1;!(I.words[0]&be)&&ce<26;++ce,be<<=1);if(ce>0)for(I.iushrn(ce);ce-- >0;)(U.isOdd()||j.isOdd())&&(U.iadd(g),j.isub(V)),U.iushrn(1),j.iushrn(1);v.cmp(I)>=0?(v.isub(I),x.isub(U),A.isub(j)):(I.isub(v),U.isub(x),j.isub(A))}return{a:U,b:j,gcd:I.iushln(N)}},s.prototype._invmp=function(h){r(h.negative===0),r(!h.isZero());var v=this,I=h.clone();v.negative!==0?v=v.umod(h):v=v.clone();for(var x=new s(1),A=new s(0),U=I.clone();v.cmpn(1)>0&&I.cmpn(1)>0;){for(var j=0,N=1;!(v.words[0]&N)&&j<26;++j,N<<=1);if(j>0)for(v.iushrn(j);j-- >0;)x.isOdd()&&x.iadd(U),x.iushrn(1);for(var g=0,V=1;!(I.words[0]&V)&&g<26;++g,V<<=1);if(g>0)for(I.iushrn(g);g-- >0;)A.isOdd()&&A.iadd(U),A.iushrn(1);v.cmp(I)>=0?(v.isub(I),x.isub(A)):(I.isub(v),A.isub(x))}var ie;return v.cmpn(1)===0?ie=x:ie=A,ie.cmpn(0)<0&&ie.iadd(h),ie},s.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var v=this.clone(),I=h.clone();v.negative=0,I.negative=0;for(var x=0;v.isEven()&&I.isEven();x++)v.iushrn(1),I.iushrn(1);do{for(;v.isEven();)v.iushrn(1);for(;I.isEven();)I.iushrn(1);var A=v.cmp(I);if(A<0){var U=v;v=I,I=U}else if(A===0||I.cmpn(1)===0)break;v.isub(I)}while(!0);return I.iushln(x)},s.prototype.invm=function(h){return this.egcd(h).a.umod(h)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(h){return this.words[0]&h},s.prototype.bincn=function(h){r(typeof h=="number");var v=h%26,I=(h-v)/26,x=1<<v;if(this.length<=I)return this._expand(I+1),this.words[I]|=x,this;for(var A=x,U=I;A!==0&&U<this.length;U++){var j=this.words[U]|0;j+=A,A=j>>>26,j&=67108863,this.words[U]=j}return A!==0&&(this.words[U]=A,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(h){var v=h<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;this._strip();var I;if(this.length>1)I=1;else{v&&(h=-h),r(h<=67108863,"Number is too big");var x=this.words[0]|0;I=x===h?0:x<h?-1:1}return this.negative!==0?-I|0:I},s.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var v=this.ucmp(h);return this.negative!==0?-v|0:v},s.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var v=0,I=this.length-1;I>=0;I--){var x=this.words[I]|0,A=h.words[I]|0;if(x!==A){x<A?v=-1:x>A&&(v=1);break}}return v},s.prototype.gtn=function(h){return this.cmpn(h)===1},s.prototype.gt=function(h){return this.cmp(h)===1},s.prototype.gten=function(h){return this.cmpn(h)>=0},s.prototype.gte=function(h){return this.cmp(h)>=0},s.prototype.ltn=function(h){return this.cmpn(h)===-1},s.prototype.lt=function(h){return this.cmp(h)===-1},s.prototype.lten=function(h){return this.cmpn(h)<=0},s.prototype.lte=function(h){return this.cmp(h)<=0},s.prototype.eqn=function(h){return this.cmpn(h)===0},s.prototype.eq=function(h){return this.cmp(h)===0},s.red=function(h){return new $(h)},s.prototype.toRed=function(h){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(h){return this.red=h,this},s.prototype.forceRed=function(h){return r(!this.red,"Already a number in reduction context"),this._forceRed(h)},s.prototype.redAdd=function(h){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},s.prototype.redIAdd=function(h){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},s.prototype.redSub=function(h){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},s.prototype.redISub=function(h){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},s.prototype.redShl=function(h){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},s.prototype.redMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},s.prototype.redIMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(h){return r(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var Y={k256:null,p224:null,p192:null,p25519:null};function X(E,h){this.name=E,this.p=new s(h,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var h=new s(null);return h.words=new Array(Math.ceil(this.n/13)),h},X.prototype.ireduce=function(h){var v=h,I;do this.split(v,this.tmp),v=this.imulK(v),v=v.iadd(this.tmp),I=v.bitLength();while(I>this.n);var x=I<this.n?-1:v.ucmp(this.p);return x===0?(v.words[0]=0,v.length=1):x>0?v.isub(this.p):v.strip!==void 0?v.strip():v._strip(),v},X.prototype.split=function(h,v){h.iushrn(this.n,0,v)},X.prototype.imulK=function(h){return h.imul(this.k)};function O(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(O,X),O.prototype.split=function(h,v){for(var I=4194303,x=Math.min(h.length,9),A=0;A<x;A++)v.words[A]=h.words[A];if(v.length=x,h.length<=9){h.words[0]=0,h.length=1;return}var U=h.words[9];for(v.words[v.length++]=U&I,A=10;A<h.length;A++){var j=h.words[A]|0;h.words[A-10]=(j&I)<<4|U>>>22,U=j}U>>>=22,h.words[A-10]=U,U===0&&h.length>10?h.length-=10:h.length-=9},O.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var v=0,I=0;I<h.length;I++){var x=h.words[I]|0;v+=x*977,h.words[I]=v&67108863,v=x*64+(v/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function P(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(P,X);function D(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,X);function z(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,X),z.prototype.imulK=function(h){for(var v=0,I=0;I<h.length;I++){var x=(h.words[I]|0)*19+v,A=x&67108863;x>>>=26,h.words[I]=A,v=x}return v!==0&&(h.words[h.length++]=v),h},s._prime=function(h){if(Y[h])return Y[h];var v;if(h==="k256")v=new O;else if(h==="p224")v=new P;else if(h==="p192")v=new D;else if(h==="p25519")v=new z;else throw new Error("Unknown prime "+h);return Y[h]=v,v};function $(E){if(typeof E=="string"){var h=s._prime(E);this.m=h.p,this.prime=h}else r(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}$.prototype._verify1=function(h){r(h.negative===0,"red works only with positives"),r(h.red,"red works only with red numbers")},$.prototype._verify2=function(h,v){r((h.negative|v.negative)===0,"red works only with positives"),r(h.red&&h.red===v.red,"red works only with red numbers")},$.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(f(h,h.umod(this.m)._forceRed(this)),h)},$.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},$.prototype.add=function(h,v){this._verify2(h,v);var I=h.add(v);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},$.prototype.iadd=function(h,v){this._verify2(h,v);var I=h.iadd(v);return I.cmp(this.m)>=0&&I.isub(this.m),I},$.prototype.sub=function(h,v){this._verify2(h,v);var I=h.sub(v);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},$.prototype.isub=function(h,v){this._verify2(h,v);var I=h.isub(v);return I.cmpn(0)<0&&I.iadd(this.m),I},$.prototype.shl=function(h,v){return this._verify1(h),this.imod(h.ushln(v))},$.prototype.imul=function(h,v){return this._verify2(h,v),this.imod(h.imul(v))},$.prototype.mul=function(h,v){return this._verify2(h,v),this.imod(h.mul(v))},$.prototype.isqr=function(h){return this.imul(h,h.clone())},$.prototype.sqr=function(h){return this.mul(h,h)},$.prototype.sqrt=function(h){if(h.isZero())return h.clone();var v=this.m.andln(3);if(r(v%2===1),v===3){var I=this.m.add(new s(1)).iushrn(2);return this.pow(h,I)}for(var x=this.m.subn(1),A=0;!x.isZero()&&x.andln(1)===0;)A++,x.iushrn(1);r(!x.isZero());var U=new s(1).toRed(this),j=U.redNeg(),N=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new s(2*g*g).toRed(this);this.pow(g,N).cmp(j)!==0;)g.redIAdd(j);for(var V=this.pow(g,x),ie=this.pow(h,x.addn(1).iushrn(1)),ae=this.pow(h,x),ce=A;ae.cmp(U)!==0;){for(var be=ae,Ee=0;be.cmp(U)!==0;Ee++)be=be.redSqr();r(Ee<ce);var Ce=this.pow(V,new s(1).iushln(ce-Ee-1));ie=ie.redMul(Ce),V=Ce.redSqr(),ae=ae.redMul(V),ce=Ee}return ie},$.prototype.invm=function(h){var v=h._invmp(this.m);return v.negative!==0?(v.negative=0,this.imod(v).redNeg()):this.imod(v)},$.prototype.pow=function(h,v){if(v.isZero())return new s(1).toRed(this);if(v.cmpn(1)===0)return h.clone();var I=4,x=new Array(1<<I);x[0]=new s(1).toRed(this),x[1]=h;for(var A=2;A<x.length;A++)x[A]=this.mul(x[A-1],h);var U=x[0],j=0,N=0,g=v.bitLength()%26;for(g===0&&(g=26),A=v.length-1;A>=0;A--){for(var V=v.words[A],ie=g-1;ie>=0;ie--){var ae=V>>ie&1;if(U!==x[0]&&(U=this.sqr(U)),ae===0&&j===0){N=0;continue}j<<=1,j|=ae,N++,!(N!==I&&(A!==0||ie!==0))&&(U=this.mul(U,x[j]),N=0,j=0)}g=26}return U},$.prototype.convertTo=function(h){var v=h.umod(this.m);return v===h?v.clone():v},$.prototype.convertFrom=function(h){var v=h.clone();return v.red=null,v},s.mont=function(h){return new W(h)};function W(E){$.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(W,$),W.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},W.prototype.convertFrom=function(h){var v=this.imod(h.mul(this.rinv));return v.red=null,v},W.prototype.imul=function(h,v){if(h.isZero()||v.isZero())return h.words[0]=0,h.length=1,h;var I=h.imul(v),x=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=I.isub(x).iushrn(this.shift),U=A;return A.cmp(this.m)>=0?U=A.isub(this.m):A.cmpn(0)<0&&(U=A.iadd(this.m)),U._forceRed(this)},W.prototype.mul=function(h,v){if(h.isZero()||v.isZero())return new s(0)._forceRed(this);var I=h.mul(v),x=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=I.isub(x).iushrn(this.shift),U=A;return A.cmp(this.m)>=0?U=A.isub(this.m):A.cmpn(0)<0&&(U=A.iadd(this.m)),U._forceRed(this)},W.prototype.invm=function(h){var v=this.imod(h._invmp(this.m).mul(this.r2));return v._forceRed(this)}})(t,Wr)})(b0);var _S=b0.exports;const Fw=Hu(_S);var jm={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=Ne,r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(jm,jm.exports);var vP=jm.exports,Yc=vP.Buffer;function wP(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function f(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Yc.from(S)),!Yc.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var M=0,L=0,R=0,b=S.length;R!==b&&S[R]===0;)R++,M++;for(var C=(b-R)*c+1>>>0,k=new Uint8Array(C);R!==b;){for(var q=S[R],Y=0,X=C-1;(q!==0||Y<L)&&X!==-1;X--,Y++)q+=256*k[X]>>>0,k[X]=q%o>>>0,q=q/o>>>0;if(q!==0)throw new Error("Non-zero carry");L=Y,R++}for(var O=C-L;O!==C&&k[O]===0;)O++;for(var P=a.repeat(M);O<C;++O)P+=t.charAt(k[O]);return P}function m(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Yc.alloc(0);for(var M=0,L=0,R=0;S[M]===a;)L++,M++;for(var b=(S.length-M)*l+1>>>0,C=new Uint8Array(b);M<S.length;){var k=S.charCodeAt(M);if(k>255)return;var q=e[k];if(q===255)return;for(var Y=0,X=b-1;(q!==0||Y<R)&&X!==-1;X--,Y++)q+=o*C[X]>>>0,C[X]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");R=Y,M++}for(var O=b-R;O!==b&&C[O]===0;)O++;var P=Yc.allocUnsafe(L+(b-O));P.fill(0,0,L);for(var D=L;O!==b;)P[D++]=C[O++];return P}function w(S){var M=m(S);if(M)return M;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:m,decode:w}}var _P=wP,EP=_P,IP="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ES=EP(IP);const Tn=Hu(ES),SP=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ji=new Uint32Array(64);class TP extends uS{constructor(){super(64,32,8,!1),this.A=Xi[0]|0,this.B=Xi[1]|0,this.C=Xi[2]|0,this.D=Xi[3]|0,this.E=Xi[4]|0,this.F=Xi[5]|0,this.G=Xi[6]|0,this.H=Xi[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let m=0;m<16;m++,n+=4)Ji[m]=e.getUint32(n,!1);for(let m=16;m<64;m++){const w=Ji[m-15],S=Ji[m-2],M=Xr(w,7)^Xr(w,18)^w>>>3,L=Xr(S,17)^Xr(S,19)^S>>>10;Ji[m]=L+Ji[m-7]+M+Ji[m-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:f}=this;for(let m=0;m<64;m++){const w=Xr(a,6)^Xr(a,11)^Xr(a,25),S=f+w+aC(a,l,c)+SP[m]+Ji[m]|0,L=(Xr(r,2)^Xr(r,13)^Xr(r,22))+lC(r,i,s)|0;f=c,c=l,l=a,a=o+S|0,o=s,s=i,i=r,r=S+L|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,f=f+this.H|0,this.set(r,i,s,o,a,l,c,f)}roundClean(){Ji.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $m=aS(()=>new TP);var In={};function Ti(t,e,n){return e<=t&&t<=n}function nd(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function AP(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function bP(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var tf=-1;function x0(t){this.tokens=[].slice.call(t)}x0.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():tf},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var ja=-1;function wp(t,e){if(t)throw TypeError("Decoder error");return e||65533}var nf="utf-8";function rf(t,e){if(!(this instanceof rf))return new rf(t,e);if(t=t!==void 0?String(t).toLowerCase():nf,t!==nf)throw new Error("Encoding not supported. Only utf-8 is supported");e=nd(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}rf.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=nd(n),this._streaming||(this._decoder=new xP({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new x0(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==ja);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===ja)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),bP(s)}};function sf(t,e){if(!(this instanceof sf))return new sf(t,e);if(t=t!==void 0?String(t).toLowerCase():nf,t!==nf)throw new Error("Encoding not supported. Only utf-8 is supported");e=nd(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}sf.prototype={encode:function(e,n){e=e?String(e):"",n=nd(n),this._streaming||(this._encoder=new kP(this._options)),this._streaming=!!n.stream;for(var r=[],i=new x0(AP(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==ja);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==ja;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function xP(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===tf&&i!==0)return i=0,wp(e);if(l===tf)return ja;if(i===0){if(Ti(l,0,127))return l;if(Ti(l,194,223))i=1,n=l-192;else if(Ti(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(Ti(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return wp(e);return n=n<<6*i,null}if(!Ti(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),wp(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function kP(t){t.fatal,this.handler=function(e,n){if(n===tf)return ja;if(Ti(n,0,127))return n;var r,i;Ti(n,128,2047)?(r=1,i=192):Ti(n,2048,65535)?(r=2,i=224):Ti(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const RP=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:rf,TextEncoder:sf},Symbol.toStringTag,{value:"Module"})),CP=Sg(RP);var PP=Wr&&Wr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),NP=Wr&&Wr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fi=Wr&&Wr.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},MP=Wr&&Wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&PP(e,t,n);return NP(e,t),e},IS=Wr&&Wr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(In,"__esModule",{value:!0});var SS=In.deserializeUnchecked=RS=In.deserialize=kS=In.serialize=In.BinaryReader=In.BinaryWriter=In.BorshError=In.baseDecode=In.baseEncode=void 0;const fs=IS(_S),TS=IS(ES),LP=MP(CP),BP=typeof TextDecoder!="function"?LP.TextDecoder:TextDecoder,OP=new BP("utf-8",{fatal:!0});function DP(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),TS.default.encode(Buffer.from(t))}In.baseEncode=DP;function VP(t){return Buffer.from(TS.default.decode(t))}In.baseDecode=VP;const _p=1024;class qn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}In.BorshError=qn;class AS{constructor(){this.buf=Buffer.alloc(_p),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(_p)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new fs.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new fs.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new fs.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new fs.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(_p)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}In.BinaryWriter=AS;function di(t,e,n){const r=n.value;n.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new qn("Reached the end of buffer when deserializing")}throw s}}}class mr{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new fs.default(e,"le")}readU128(){const e=this.readBuffer(16);return new fs.default(e,"le")}readU256(){const e=this.readBuffer(32);return new fs.default(e,"le")}readU512(){const e=this.readBuffer(64);return new fs.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new qn(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return OP.decode(n)}catch(r){throw new qn(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let i=0;i<n;++i)r.push(e());return r}}fi([di],mr.prototype,"readU8",null);fi([di],mr.prototype,"readU16",null);fi([di],mr.prototype,"readU32",null);fi([di],mr.prototype,"readU64",null);fi([di],mr.prototype,"readU128",null);fi([di],mr.prototype,"readU256",null);fi([di],mr.prototype,"readU512",null);fi([di],mr.prototype,"readString",null);fi([di],mr.prototype,"readFixedArray",null);fi([di],mr.prototype,"readArray",null);In.BinaryReader=mr;function bS(t){return t.charAt(0).toUpperCase()+t.slice(1)}function io(t,e,n,r,i){try{if(typeof r=="string")i[`write${bS(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new qn(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new qn(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)io(t,null,n[s],r[0],i)}else i.writeArray(n,s=>{io(t,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?i.writeU8(0):(i.writeU8(1),io(t,e,n,r.type,i));break}case"map":{i.writeU32(n.size),n.forEach((s,o)=>{io(t,e,o,r.key,i),io(t,e,s,r.value,i)});break}default:throw new qn(`FieldType ${r} unrecognized`)}else xS(t,n,i)}catch(s){throw s instanceof qn&&s.addToFieldPath(e),s}}function xS(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new qn(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{io(t,i,e[i],s,n)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){n.writeU8(s),io(t,o,e[o],a,n);break}}}else throw new qn(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function UP(t,e,n=AS){const r=new n;return xS(t,e,r),r.toArray()}var kS=In.serialize=UP;function so(t,e,n,r){try{if(typeof n=="string")return r[`read${bS(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const i=[];for(let s=0;s<n[1];s++)i.push(so(t,null,n[0],r));return i}else return r.readArray(()=>so(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?so(t,e,n.type,r):void 0;if(n.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=so(t,e,n.key,r),l=so(t,e,n.value,r);i.set(a,l)}return i}return k0(t,n,r)}catch(i){throw i instanceof qn&&i.addToFieldPath(e),i}}function k0(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new qn(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=so(t,s,o,n);return new e(i)}if(r.kind==="enum"){const i=n.readU8();if(i>=r.values.length)throw new qn(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=so(t,s,o,n);return new e({[s]:a})}throw new qn(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function FP(t,e,n,r=mr){const i=new r(n),s=k0(t,e,i);if(i.offset<n.length)throw new qn(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s}var RS=In.deserialize=FP;function zP(t,e,n,r=mr){const i=new r(n);return k0(t,e,i)}SS=In.deserializeUnchecked=zP;var J={};Object.defineProperty(J,"__esModule",{value:!0});J.s16=J.s8=J.nu64be=J.u48be=J.u40be=J.u32be=J.u24be=J.u16be=wn=J.nu64=J.u48=J.u40=Ie=J.u32=J.u24=_r=J.u16=Ze=J.u8=po=J.offset=J.greedy=J.Constant=J.UTF8=J.CString=J.Blob=J.Boolean=J.BitField=J.BitStructure=J.VariantLayout=J.Union=J.UnionLayoutDiscriminator=J.UnionDiscriminator=J.Structure=J.Sequence=J.DoubleBE=J.Double=J.FloatBE=J.Float=J.NearInt64BE=J.NearInt64=J.NearUInt64BE=J.NearUInt64=J.IntBE=J.Int=J.UIntBE=J.UInt=J.OffsetLayout=J.GreedyCount=J.ExternalLayout=J.bindConstructorLayout=J.nameWithProperty=J.Layout=J.uint8ArrayToBuffer=J.checkUint8Array=void 0;J.constant=J.utf8=J.cstr=Ht=J.blob=J.unionLayoutDiscriminator=J.union=Wn=J.seq=J.bits=ve=J.struct=J.f64be=J.f64=J.f32be=J.f32=J.ns64be=J.s48be=J.s40be=J.s32be=J.s24be=J.s16be=lr=J.ns64=J.s48=J.s40=J.s32=J.s24=void 0;const R0=Ne;function il(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}J.checkUint8Array=il;function Je(t){return il(t),R0.Buffer.from(t.buffer,t.byteOffset,t.length)}J.uint8ArrayToBuffer=Je;class at{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}J.Layout=at;function C0(t,e){return e.property?t+"["+e.property+"]":t}J.nameWithProperty=C0;function jP(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof at))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}J.bindConstructorLayout=jP;class Zn extends at{isCount(){throw new Error("ExternalLayout is abstract")}}J.ExternalLayout=Zn;class CS extends Zn{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){il(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}J.GreedyCount=CS;class P0 extends Zn{constructor(e,n=0,r){if(!(e instanceof at))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Rr||this.layout instanceof qr}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}J.OffsetLayout=P0;class Rr extends at{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Je(e).readUIntLE(n,this.span)}encode(e,n,r=0){return Je(n).writeUIntLE(e,r,this.span),this.span}}J.UInt=Rr;class qr extends at{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Je(e).readUIntBE(n,this.span)}encode(e,n,r=0){return Je(n).writeUIntBE(e,r,this.span),this.span}}J.UIntBE=qr;class No extends at{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Je(e).readIntLE(n,this.span)}encode(e,n,r=0){return Je(n).writeIntLE(e,r,this.span),this.span}}J.Int=No;class sl extends at{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Je(e).readIntBE(n,this.span)}encode(e,n,r=0){return Je(n).writeIntBE(e,r,this.span),this.span}}J.IntBE=sl;const qm=Math.pow(2,32);function rd(t){const e=Math.floor(t/qm),n=t-e*qm;return{hi32:e,lo32:n}}function id(t,e){return t*qm+e}class PS extends at{constructor(e){super(8,e)}decode(e,n=0){const r=Je(e),i=r.readUInt32LE(n),s=r.readUInt32LE(n+4);return id(s,i)}encode(e,n,r=0){const i=rd(e),s=Je(n);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}J.NearUInt64=PS;class NS extends at{constructor(e){super(8,e)}decode(e,n=0){const r=Je(e),i=r.readUInt32BE(n),s=r.readUInt32BE(n+4);return id(i,s)}encode(e,n,r=0){const i=rd(e),s=Je(n);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}J.NearUInt64BE=NS;class MS extends at{constructor(e){super(8,e)}decode(e,n=0){const r=Je(e),i=r.readUInt32LE(n),s=r.readInt32LE(n+4);return id(s,i)}encode(e,n,r=0){const i=rd(e),s=Je(n);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}J.NearInt64=MS;class LS extends at{constructor(e){super(8,e)}decode(e,n=0){const r=Je(e),i=r.readInt32BE(n),s=r.readUInt32BE(n+4);return id(i,s)}encode(e,n,r=0){const i=rd(e),s=Je(n);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}J.NearInt64BE=LS;class BS extends at{constructor(e){super(4,e)}decode(e,n=0){return Je(e).readFloatLE(n)}encode(e,n,r=0){return Je(n).writeFloatLE(e,r),4}}J.Float=BS;class OS extends at{constructor(e){super(4,e)}decode(e,n=0){return Je(e).readFloatBE(n)}encode(e,n,r=0){return Je(n).writeFloatBE(e,r),4}}J.FloatBE=OS;class DS extends at{constructor(e){super(8,e)}decode(e,n=0){return Je(e).readDoubleLE(n)}encode(e,n,r=0){return Je(n).writeDoubleLE(e,r),8}}J.Double=DS;class VS extends at{constructor(e){super(8,e)}decode(e,n=0){return Je(e).readDoubleBE(n)}encode(e,n,r=0){return Je(n).writeDoubleBE(e,r),8}}J.DoubleBE=VS;class US extends at{constructor(e,n,r){if(!(e instanceof at))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof Zn&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(n instanceof Zn)&&0<e.span&&(i=n*e.span),super(i,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof Zn&&(i=i.decode(e,n)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,n+r),++s}return r}decode(e,n=0){const r=[];let i=0,s=this.count;for(s instanceof Zn&&(s=s.decode(e,n));i<s;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),i+=1;return r}encode(e,n,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,n,r+o),0);return this.count instanceof Zn&&this.count.encode(e.length,n,r),s}}J.Sequence=US;class FS extends at{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof at,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,n);return n+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){il(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,n)),n+=i.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const c=e[a.property];c!==void 0&&(o=a.encode(c,n,r),0>l&&(l=a.getSpan(n,r)))}s=r,r+=l}return s+o-i}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}J.Structure=FS;class N0{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}J.UnionDiscriminator=N0;class of extends N0{constructor(e,n){if(!(e instanceof Zn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}J.UnionLayoutDiscriminator=of;class M0 extends at{constructor(e,n,r){let i;if(e instanceof Rr||e instanceof qr)i=new of(new P0(e));else if(e instanceof Zn&&e.isCount())i=new of(e);else if(e instanceof N0)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof at))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let s=-1;n&&(s=n.span,0<=s&&(e instanceof Rr||e instanceof qr)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Rr||e instanceof qr,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const i=this.discriminator,s=i.decode(e,n),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,n+l)}else r=o.decode(e,n);return r}encode(e,n,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],n,r),a+o.encode(e[o.property],n,r+a)}return i.encode(e,n,r)}addVariant(e,n,r){const i=new zS(this,e,n,r);return this.registry[e]=i,i}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}J.Union=M0;class zS extends at{constructor(e,n,r,i){if(!(e instanceof M0))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof at))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,n+r)),r+i}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],n,r+i),s+=this.layout.getSpan(n,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}J.VariantLayout=zS;function ea(t){return 0>t&&(t+=4294967296),t}class L0 extends at{constructor(e,n,r){if(!(e instanceof Rr||e instanceof qr))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let i=0;this._packedSetValue=function(s){return i=ea(s),this},this._packedGetValue=function(){return i}}decode(e,n=0){const r=this.makeDestinationObject(),i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,n,r=0){const i=this.word.decode(n,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new B0(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new jS(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}J.BitStructure=L0;class B0{constructor(e,n,r){if(!(e instanceof L0))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(n+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-n),this.wordMask=ea(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return ea(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==ea(e&this.valueMask))throw new TypeError(C0("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=ea(e<<this.start);this.container._packedSetValue(ea(n&~this.wordMask)|r)}}J.BitField=B0;let jS=class extends B0{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};J.Boolean=jS;class $S extends at{constructor(e,n){if(!(e instanceof Zn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Zn||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),Je(e).slice(n,n+r)}encode(e,n,r){let i=this.length;if(this.length instanceof Zn&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(C0("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>n.length)throw new RangeError("encoding overruns Uint8Array");const s=Je(e);return Je(n).write(s.toString("hex"),r,i,"hex"),this.length instanceof Zn&&this.length.encode(i,n,r),i}}J.Blob=$S;class qS extends at{constructor(e){super(-1,e)}getSpan(e,n=0){il(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return Je(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=R0.Buffer.from(e,"utf8"),s=i.length;if(r+s>n.length)throw new RangeError("encoding overruns Buffer");const o=Je(n);return i.copy(o,r),o[r+s]=0,s+1}}J.CString=qS;class WS extends at{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return il(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Je(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=R0.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>n.length)throw new RangeError("encoding overruns Buffer");return i.copy(Je(n),r),s}}J.UTF8=WS;class HS extends at{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}J.Constant=HS;J.greedy=(t,e)=>new CS(t,e);var po=J.offset=(t,e,n)=>new P0(t,e,n),Ze=J.u8=t=>new Rr(1,t),_r=J.u16=t=>new Rr(2,t);J.u24=t=>new Rr(3,t);var Ie=J.u32=t=>new Rr(4,t);J.u40=t=>new Rr(5,t);J.u48=t=>new Rr(6,t);var wn=J.nu64=t=>new PS(t);J.u16be=t=>new qr(2,t);J.u24be=t=>new qr(3,t);J.u32be=t=>new qr(4,t);J.u40be=t=>new qr(5,t);J.u48be=t=>new qr(6,t);J.nu64be=t=>new NS(t);J.s8=t=>new No(1,t);J.s16=t=>new No(2,t);J.s24=t=>new No(3,t);J.s32=t=>new No(4,t);J.s40=t=>new No(5,t);J.s48=t=>new No(6,t);var lr=J.ns64=t=>new MS(t);J.s16be=t=>new sl(2,t);J.s24be=t=>new sl(3,t);J.s32be=t=>new sl(4,t);J.s40be=t=>new sl(5,t);J.s48be=t=>new sl(6,t);J.ns64be=t=>new LS(t);J.f32=t=>new BS(t);J.f32be=t=>new OS(t);J.f64=t=>new DS(t);J.f64be=t=>new VS(t);var ve=J.struct=(t,e,n)=>new FS(t,e,n);J.bits=(t,e,n)=>new L0(t,e,n);var Wn=J.seq=(t,e,n)=>new US(t,e,n);J.union=(t,e,n)=>new M0(t,e,n);J.unionLayoutDiscriminator=(t,e)=>new of(t,e);var Ht=J.blob=(t,e)=>new $S(t,e);J.cstr=t=>new qS(t);J.utf8=(t,e)=>new WS(t,e);J.constant=(t,e)=>new HS(t,e);var ec={};Object.defineProperty(ec,"__esModule",{value:!0});function $P(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var qP=ec.toBigIntLE=$P;function WP(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}ec.toBigIntBE=WP;function HP(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var KP=ec.toBufferLE=HP;function GP(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}ec.toBufferBE=GP;class QP extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function YP(t){return tc(t)&&typeof t[Symbol.iterator]=="function"}function tc(t){return typeof t=="object"&&t!=null}function af(t){return tc(t)&&!Array.isArray(t)}function Kr(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function XP(t){const{done:e,value:n}=t.next();return e?void 0:n}function JP(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Kr(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*zw(t,e,n,r){YP(t)||(t=[t]);for(const i of t){const s=JP(i,e,n,r);s&&(yield s)}}function*O0(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,f,m]of e.entries(t,a)){const w=O0(f,m,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,f],coerce:s,mask:o,message:n.message});for(const S of w)S[0]?(l=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):s&&(f=S[1],c===void 0?t=f:t instanceof Map?t.set(c,f):t instanceof Set?t.add(f):tc(t)&&(f!==void 0||c in t)&&(t[c]=f))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let pi=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const f=i(l,c);return zw(f,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const f=s(l,c);return zw(f,c,this,l)}:this.refiner=()=>[]}assert(e,n){return ZP(e,this,n)}create(e,n){return fe(e,this,n)}is(e){return KS(e,this)}mask(e,n){return eN(e,this,n)}validate(e,n={}){return nc(e,this,n)}};function ZP(t,e,n){const r=nc(t,e,{message:n});if(r[0])throw r[0]}function fe(t,e,n){const r=nc(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function eN(t,e,n){const r=nc(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function KS(t,e){return!nc(t,e)[0]}function nc(t,e,n={}){const r=O0(t,e,n),i=XP(r);return i[0]?[new QP(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Mo(t,e){return new pi({type:t,schema:null,validator:e})}function tN(){return Mo("any",()=>!0)}function de(t){return new pi({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Kr(e)}`}})}function ci(){return Mo("boolean",t=>typeof t=="boolean")}function D0(t){return Mo("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Kr(e)}`)}function Ot(t){const e=Kr(t),n=typeof t;return new pi({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Kr(r)}`}})}function nN(){return Mo("never",()=>!1)}function pe(t){return new pi({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function Q(){return Mo("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Kr(t)}`)}function Se(t){return new pi({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function GS(t,e){return new pi({type:"record",schema:null,*entries(n){if(tc(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return af(n)||`Expected an object, but received: ${Kr(n)}`},coercer(n){return af(n)?{...n}:n}})}function ue(){return Mo("string",t=>typeof t=="string"||`Expected a string, but received: ${Kr(t)}`)}function V0(t){const e=nN();return new pi({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Kr(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function re(t){const e=Object.keys(t);return new pi({type:"type",schema:t,*entries(n){if(tc(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return af(n)||`Expected an object, but received: ${Kr(n)}`},coercer(n){return af(n)?{...n}:n}})}function Kn(t){const e=t.map(n=>n.type).join(" | ");return new pi({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=O0(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Kr(n)}`,...i]}})}function ol(){return Mo("unknown",()=>!0)}function rc(t,e,n){return new pi({...t,coercer:(r,i)=>KS(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var Xc,rN=new Uint8Array(16);function QS(){if(!Xc&&(Xc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Xc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xc(rN)}const iN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sd(t){return typeof t=="string"&&iN.test(t)}var vn=[];for(var Ep=0;Ep<256;++Ep)vn.push((Ep+256).toString(16).substr(1));function od(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(vn[t[e+0]]+vn[t[e+1]]+vn[t[e+2]]+vn[t[e+3]]+"-"+vn[t[e+4]]+vn[t[e+5]]+"-"+vn[t[e+6]]+vn[t[e+7]]+"-"+vn[t[e+8]]+vn[t[e+9]]+"-"+vn[t[e+10]]+vn[t[e+11]]+vn[t[e+12]]+vn[t[e+13]]+vn[t[e+14]]+vn[t[e+15]]).toLowerCase();if(!sd(n))throw TypeError("Stringified UUID is invalid");return n}var jw,Ip,Sp=0,Tp=0;function sN(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||jw,o=t.clockseq!==void 0?t.clockseq:Ip;if(s==null||o==null){var a=t.random||(t.rng||QS)();s==null&&(s=jw=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Ip=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Tp+1,f=l-Sp+(c-Tp)/1e4;if(f<0&&t.clockseq===void 0&&(o=o+1&16383),(f<0||l>Sp)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Sp=l,Tp=c,Ip=o,l+=122192928e5;var m=((l&268435455)*1e4+c)%4294967296;i[r++]=m>>>24&255,i[r++]=m>>>16&255,i[r++]=m>>>8&255,i[r++]=m&255;var w=l/4294967296*1e4&268435455;i[r++]=w>>>8&255,i[r++]=w&255,i[r++]=w>>>24&15|16,i[r++]=w>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var S=0;S<6;++S)i[r+S]=s[S];return e||od(i)}function YS(t){if(!sd(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function oN(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var aN="6ba7b810-9dad-11d1-80b4-00c04fd430c8",lN="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function XS(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=oN(i)),typeof s=="string"&&(s=YS(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return od(l)}try{r.name=t}catch{}return r.DNS=aN,r.URL=lN,r}function uN(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return cN(hN(fN(t),t.length*8))}function cN(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function JS(t){return(t+64>>>9<<4)+14+1}function hN(t,e){t[e>>5]|=128<<e%32,t[JS(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,f=s;n=Mn(n,r,i,s,t[o],7,-680876936),s=Mn(s,n,r,i,t[o+1],12,-389564586),i=Mn(i,s,n,r,t[o+2],17,606105819),r=Mn(r,i,s,n,t[o+3],22,-1044525330),n=Mn(n,r,i,s,t[o+4],7,-176418897),s=Mn(s,n,r,i,t[o+5],12,1200080426),i=Mn(i,s,n,r,t[o+6],17,-1473231341),r=Mn(r,i,s,n,t[o+7],22,-45705983),n=Mn(n,r,i,s,t[o+8],7,1770035416),s=Mn(s,n,r,i,t[o+9],12,-1958414417),i=Mn(i,s,n,r,t[o+10],17,-42063),r=Mn(r,i,s,n,t[o+11],22,-1990404162),n=Mn(n,r,i,s,t[o+12],7,1804603682),s=Mn(s,n,r,i,t[o+13],12,-40341101),i=Mn(i,s,n,r,t[o+14],17,-1502002290),r=Mn(r,i,s,n,t[o+15],22,1236535329),n=Ln(n,r,i,s,t[o+1],5,-165796510),s=Ln(s,n,r,i,t[o+6],9,-1069501632),i=Ln(i,s,n,r,t[o+11],14,643717713),r=Ln(r,i,s,n,t[o],20,-373897302),n=Ln(n,r,i,s,t[o+5],5,-701558691),s=Ln(s,n,r,i,t[o+10],9,38016083),i=Ln(i,s,n,r,t[o+15],14,-660478335),r=Ln(r,i,s,n,t[o+4],20,-405537848),n=Ln(n,r,i,s,t[o+9],5,568446438),s=Ln(s,n,r,i,t[o+14],9,-1019803690),i=Ln(i,s,n,r,t[o+3],14,-187363961),r=Ln(r,i,s,n,t[o+8],20,1163531501),n=Ln(n,r,i,s,t[o+13],5,-1444681467),s=Ln(s,n,r,i,t[o+2],9,-51403784),i=Ln(i,s,n,r,t[o+7],14,1735328473),r=Ln(r,i,s,n,t[o+12],20,-1926607734),n=Bn(n,r,i,s,t[o+5],4,-378558),s=Bn(s,n,r,i,t[o+8],11,-2022574463),i=Bn(i,s,n,r,t[o+11],16,1839030562),r=Bn(r,i,s,n,t[o+14],23,-35309556),n=Bn(n,r,i,s,t[o+1],4,-1530992060),s=Bn(s,n,r,i,t[o+4],11,1272893353),i=Bn(i,s,n,r,t[o+7],16,-155497632),r=Bn(r,i,s,n,t[o+10],23,-1094730640),n=Bn(n,r,i,s,t[o+13],4,681279174),s=Bn(s,n,r,i,t[o],11,-358537222),i=Bn(i,s,n,r,t[o+3],16,-722521979),r=Bn(r,i,s,n,t[o+6],23,76029189),n=Bn(n,r,i,s,t[o+9],4,-640364487),s=Bn(s,n,r,i,t[o+12],11,-421815835),i=Bn(i,s,n,r,t[o+15],16,530742520),r=Bn(r,i,s,n,t[o+2],23,-995338651),n=On(n,r,i,s,t[o],6,-198630844),s=On(s,n,r,i,t[o+7],10,1126891415),i=On(i,s,n,r,t[o+14],15,-1416354905),r=On(r,i,s,n,t[o+5],21,-57434055),n=On(n,r,i,s,t[o+12],6,1700485571),s=On(s,n,r,i,t[o+3],10,-1894986606),i=On(i,s,n,r,t[o+10],15,-1051523),r=On(r,i,s,n,t[o+1],21,-2054922799),n=On(n,r,i,s,t[o+8],6,1873313359),s=On(s,n,r,i,t[o+15],10,-30611744),i=On(i,s,n,r,t[o+6],15,-1560198380),r=On(r,i,s,n,t[o+13],21,1309151649),n=On(n,r,i,s,t[o+4],6,-145523070),s=On(s,n,r,i,t[o+11],10,-1120210379),i=On(i,s,n,r,t[o+2],15,718787259),r=On(r,i,s,n,t[o+9],21,-343485551),n=ds(n,a),r=ds(r,l),i=ds(i,c),s=ds(s,f)}return[n,r,i,s]}function fN(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(JS(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function ds(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function dN(t,e){return t<<e|t>>>32-e}function ad(t,e,n,r,i,s){return ds(dN(ds(ds(e,t),ds(r,s)),i),n)}function Mn(t,e,n,r,i,s,o){return ad(e&n|~e&r,t,e,i,s,o)}function Ln(t,e,n,r,i,s,o){return ad(e&r|n&~r,t,e,i,s,o)}function Bn(t,e,n,r,i,s,o){return ad(e^n^r,t,e,i,s,o)}function On(t,e,n,r,i,s,o){return ad(n^(e|~r),t,e,i,s,o)}var pN=XS("v3",48,uN);const mN=pN;function gN(t,e,n){t=t||{};var r=t.random||(t.rng||QS)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return od(r)}function yN(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Ap(t,e){return t<<e|t>>>32-e}function vN(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=t[l*64+f*4]<<24|t[l*64+f*4+1]<<16|t[l*64+f*4+2]<<8|t[l*64+f*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var m=0;m<o;++m){for(var w=new Uint32Array(80),S=0;S<16;++S)w[S]=a[m][S];for(var M=16;M<80;++M)w[M]=Ap(w[M-3]^w[M-8]^w[M-14]^w[M-16],1);for(var L=n[0],R=n[1],b=n[2],C=n[3],k=n[4],q=0;q<80;++q){var Y=Math.floor(q/20),X=Ap(L,5)+yN(Y,R,b,C)+k+e[Y]+w[q]>>>0;k=C,C=b,b=Ap(R,30)>>>0,R=L,L=X}n[0]=n[0]+L>>>0,n[1]=n[1]+R>>>0,n[2]=n[2]+b>>>0,n[3]=n[3]+C>>>0,n[4]=n[4]+k>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var wN=XS("v5",80,vN);const _N=wN,EN="00000000-0000-0000-0000-000000000000";function IN(t){if(!sd(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const SN=Object.freeze(Object.defineProperty({__proto__:null,NIL:EN,parse:YS,stringify:od,v1:sN,v3:mN,v4:gN,v5:_N,validate:sd,version:IN},Symbol.toStringTag,{value:"Module"})),ZS=Sg(SN),TN=ZS.v4,AN=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return TN()};s.id=o(s,r)}else i===2&&n===null?r.notificationIdNull&&(s.id=null):s.id=n;return s};var bN=AN;const xN=ZS.v4,kN=bN,Nu=function(t,e){if(!(this instanceof Nu))return new Nu(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return xN()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var RN=Nu;Nu.prototype.request=function(t,e,n,r){const i=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,s=t;else{typeof n=="function"&&(r=n,n=void 0);const c=typeof r=="function";try{s=kN(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(f){if(c)return r(f);throw f}if(!c)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(c){return r(c)}return this.callServer(l,function(c,f){i._parseResponse(c,f,r)}),s};Nu.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return n(i)}if(n.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return n(null,r.filter(i),r.filter(s))}else return n(null,r.error,r.result);n(null,r)};const CN=Hu(RN);var eT={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function s(l,c,f,m,w){if(typeof f!="function")throw new TypeError("The listener must be a function");var S=new i(f,m||l,w),M=n?n+c:c;return l._events[M]?l._events[M].fn?l._events[M]=[l._events[M],S]:l._events[M].push(S):(l._events[M]=S,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],f,m;if(this._eventsCount===0)return c;for(m in f=this._events)e.call(f,m)&&c.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},a.prototype.listeners=function(c){var f=n?n+c:c,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var w=0,S=m.length,M=new Array(S);w<S;w++)M[w]=m[w].fn;return M},a.prototype.listenerCount=function(c){var f=n?n+c:c,m=this._events[f];return m?m.fn?1:m.length:0},a.prototype.emit=function(c,f,m,w,S,M){var L=n?n+c:c;if(!this._events[L])return!1;var R=this._events[L],b=arguments.length,C,k;if(R.fn){switch(R.once&&this.removeListener(c,R.fn,void 0,!0),b){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,f),!0;case 3:return R.fn.call(R.context,f,m),!0;case 4:return R.fn.call(R.context,f,m,w),!0;case 5:return R.fn.call(R.context,f,m,w,S),!0;case 6:return R.fn.call(R.context,f,m,w,S,M),!0}for(k=1,C=new Array(b-1);k<b;k++)C[k-1]=arguments[k];R.fn.apply(R.context,C)}else{var q=R.length,Y;for(k=0;k<q;k++)switch(R[k].once&&this.removeListener(c,R[k].fn,void 0,!0),b){case 1:R[k].fn.call(R[k].context);break;case 2:R[k].fn.call(R[k].context,f);break;case 3:R[k].fn.call(R[k].context,f,m);break;case 4:R[k].fn.call(R[k].context,f,m,w);break;default:if(!C)for(Y=1,C=new Array(b-1);Y<b;Y++)C[Y-1]=arguments[Y];R[k].fn.apply(R[k].context,C)}}return!0},a.prototype.on=function(c,f,m){return s(this,c,f,m,!1)},a.prototype.once=function(c,f,m){return s(this,c,f,m,!0)},a.prototype.removeListener=function(c,f,m,w){var S=n?n+c:c;if(!this._events[S])return this;if(!f)return o(this,S),this;var M=this._events[S];if(M.fn)M.fn===f&&(!w||M.once)&&(!m||M.context===m)&&o(this,S);else{for(var L=0,R=[],b=M.length;L<b;L++)(M[L].fn!==f||w&&!M[L].once||m&&M[L].context!==m)&&R.push(M[L]);R.length?this._events[S]=R.length===1?R[0]:R:o(this,S)}return this},a.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(eT);var PN=eT.exports;const tT=Hu(PN);var NN=class extends tT{constructor(e,n,r){super();cn(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function MN(t,e){return new NN(t,e)}var LN=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},BN=class extends tT{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();cn(this,"address");cn(this,"rpc_id");cn(this,"queue");cn(this,"options");cn(this,"autoconnect");cn(this,"ready");cn(this,"reconnect");cn(this,"reconnect_timer_id");cn(this,"reconnect_interval");cn(this,"max_reconnects");cn(this,"rest_options");cn(this,"current_reconnects");cn(this,"generate_request_id");cn(this,"socket");cn(this,"webSocketFactory");cn(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new LN,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Ne.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};class nT extends oS{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,nC(e);const r=E0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ef(this),this.iHash.update(e),this}digestInto(e){ef(this),Yf(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const rT=(t,e,n)=>new nT(t,e).update(n).digest();rT.create=(t,e)=>new nT(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $w(t){t.lowS!==void 0&&Ni("lowS",t.lowS),t.prehash!==void 0&&Ni("prehash",t.prehash)}function ON(t){const e=T0(t);rl(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:DN,hexToBytes:VN}=qC;class UN extends Error{constructor(e=""){super(e)}}const Si={Err:UN,_tlv:{encode:(t,e)=>{const{Err:n}=Si;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=va(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?va(i.length/2|128):"";return va(t)+s+i+e},decode(t,e){const{Err:n}=Si;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of c)o=o<<8|f;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Si;if(t<Ai)throw new e("integer: negative integers are not allowed");let n=va(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Si;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return DN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Si,i=typeof t=="string"?VN(t):t;Zu(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:f}=r.decode(2,l);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Si,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Ai=BigInt(0),hn=BigInt(1);BigInt(2);const qw=BigInt(3);BigInt(4);function FN(t){const e=ON(t),{Fp:n}=e,r=ed(e.n,e.nBitLength),i=e.toBytes||((L,R,b)=>{const C=R.toAffine();return Io(Uint8Array.from([4]),n.toBytes(C.x),n.toBytes(C.y))}),s=e.fromBytes||(L=>{const R=L.subarray(1),b=n.fromBytes(R.subarray(0,n.BYTES)),C=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:b,y:C}});function o(L){const{a:R,b}=e,C=n.sqr(L),k=n.mul(C,L);return n.add(n.add(k,n.mul(L,R)),b)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(L){return Zf(L,hn,e.n)}function l(L){const{allowedPrivateKeyLengths:R,nByteLength:b,wrapPrivateKey:C,n:k}=e;if(R&&typeof L!="bigint"){if(_o(L)&&(L=Eo(L)),typeof L!="string"||!R.includes(L.length))throw new Error("invalid private key");L=L.padStart(b*2,"0")}let q;try{q=typeof L=="bigint"?L:fo(Zt("private key",L,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof L)}return C&&(q=Ct(q,k)),br("private key",q,hn,k),q}function c(L){if(!(L instanceof w))throw new Error("ProjectivePoint expected")}const f=Pu((L,R)=>{const{px:b,py:C,pz:k}=L;if(n.eql(k,n.ONE))return{x:b,y:C};const q=L.is0();R==null&&(R=q?n.ONE:n.inv(k));const Y=n.mul(b,R),X=n.mul(C,R),O=n.mul(k,R);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:Y,y:X}}),m=Pu(L=>{if(L.is0()){if(e.allowInfinityPoint&&!n.is0(L.py))return;throw new Error("bad point: ZERO")}const{x:R,y:b}=L.toAffine();if(!n.isValid(R)||!n.isValid(b))throw new Error("bad point: x or y not FE");const C=n.sqr(b),k=o(R);if(!n.eql(C,k))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{constructor(R,b,C){if(this.px=R,this.py=b,this.pz=C,R==null||!n.isValid(R))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(C==null||!n.isValid(C))throw new Error("z required");Object.freeze(this)}static fromAffine(R){const{x:b,y:C}=R||{};if(!R||!n.isValid(b)||!n.isValid(C))throw new Error("invalid affine point");if(R instanceof w)throw new Error("projective point not allowed");const k=q=>n.eql(q,n.ZERO);return k(b)&&k(C)?w.ZERO:new w(b,C,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){const b=n.invertBatch(R.map(C=>C.pz));return R.map((C,k)=>C.toAffine(b[k])).map(w.fromAffine)}static fromHex(R){const b=w.fromAffine(s(Zt("pointHex",R)));return b.assertValidity(),b}static fromPrivateKey(R){return w.BASE.multiply(l(R))}static msm(R,b){return wS(w,r,R,b)}_setWindowSize(R){M.setWindowSize(this,R)}assertValidity(){m(this)}hasEvenY(){const{y:R}=this.toAffine();if(n.isOdd)return!n.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){c(R);const{px:b,py:C,pz:k}=this,{px:q,py:Y,pz:X}=R,O=n.eql(n.mul(b,X),n.mul(q,k)),P=n.eql(n.mul(C,X),n.mul(Y,k));return O&&P}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:R,b}=e,C=n.mul(b,qw),{px:k,py:q,pz:Y}=this;let X=n.ZERO,O=n.ZERO,P=n.ZERO,D=n.mul(k,k),z=n.mul(q,q),$=n.mul(Y,Y),W=n.mul(k,q);return W=n.add(W,W),P=n.mul(k,Y),P=n.add(P,P),X=n.mul(R,P),O=n.mul(C,$),O=n.add(X,O),X=n.sub(z,O),O=n.add(z,O),O=n.mul(X,O),X=n.mul(W,X),P=n.mul(C,P),$=n.mul(R,$),W=n.sub(D,$),W=n.mul(R,W),W=n.add(W,P),P=n.add(D,D),D=n.add(P,D),D=n.add(D,$),D=n.mul(D,W),O=n.add(O,D),$=n.mul(q,Y),$=n.add($,$),D=n.mul($,W),X=n.sub(X,D),P=n.mul($,z),P=n.add(P,P),P=n.add(P,P),new w(X,O,P)}add(R){c(R);const{px:b,py:C,pz:k}=this,{px:q,py:Y,pz:X}=R;let O=n.ZERO,P=n.ZERO,D=n.ZERO;const z=e.a,$=n.mul(e.b,qw);let W=n.mul(b,q),E=n.mul(C,Y),h=n.mul(k,X),v=n.add(b,C),I=n.add(q,Y);v=n.mul(v,I),I=n.add(W,E),v=n.sub(v,I),I=n.add(b,k);let x=n.add(q,X);return I=n.mul(I,x),x=n.add(W,h),I=n.sub(I,x),x=n.add(C,k),O=n.add(Y,X),x=n.mul(x,O),O=n.add(E,h),x=n.sub(x,O),D=n.mul(z,I),O=n.mul($,h),D=n.add(O,D),O=n.sub(E,D),D=n.add(E,D),P=n.mul(O,D),E=n.add(W,W),E=n.add(E,W),h=n.mul(z,h),I=n.mul($,I),E=n.add(E,h),h=n.sub(W,h),h=n.mul(z,h),I=n.add(I,h),W=n.mul(E,I),P=n.add(P,W),W=n.mul(x,I),O=n.mul(v,O),O=n.sub(O,W),W=n.mul(v,E),D=n.mul(x,D),D=n.add(D,W),new w(O,P,D)}subtract(R){return this.add(R.negate())}is0(){return this.equals(w.ZERO)}wNAF(R){return M.wNAFCached(this,R,w.normalizeZ)}multiplyUnsafe(R){const{endo:b,n:C}=e;br("scalar",R,Ai,C);const k=w.ZERO;if(R===Ai)return k;if(this.is0()||R===hn)return this;if(!b||M.hasPrecomputes(this))return M.wNAFCachedUnsafe(this,R,w.normalizeZ);let{k1neg:q,k1:Y,k2neg:X,k2:O}=b.splitScalar(R),P=k,D=k,z=this;for(;Y>Ai||O>Ai;)Y&hn&&(P=P.add(z)),O&hn&&(D=D.add(z)),z=z.double(),Y>>=hn,O>>=hn;return q&&(P=P.negate()),X&&(D=D.negate()),D=new w(n.mul(D.px,b.beta),D.py,D.pz),P.add(D)}multiply(R){const{endo:b,n:C}=e;br("scalar",R,hn,C);let k,q;if(b){const{k1neg:Y,k1:X,k2neg:O,k2:P}=b.splitScalar(R);let{p:D,f:z}=this.wNAF(X),{p:$,f:W}=this.wNAF(P);D=M.constTimeNegate(Y,D),$=M.constTimeNegate(O,$),$=new w(n.mul($.px,b.beta),$.py,$.pz),k=D.add($),q=z.add(W)}else{const{p:Y,f:X}=this.wNAF(R);k=Y,q=X}return w.normalizeZ([k,q])[0]}multiplyAndAddUnsafe(R,b,C){const k=w.BASE,q=(X,O)=>O===Ai||O===hn||!X.equals(k)?X.multiplyUnsafe(O):X.multiply(O),Y=q(this,b).add(q(R,C));return Y.is0()?void 0:Y}toAffine(R){return f(this,R)}isTorsionFree(){const{h:R,isTorsionFree:b}=e;if(R===hn)return!0;if(b)return b(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:R,clearCofactor:b}=e;return R===hn?this:b?b(w,this):this.multiplyUnsafe(e.h)}toRawBytes(R=!0){return Ni("isCompressed",R),this.assertValidity(),i(w,this,R)}toHex(R=!0){return Ni("isCompressed",R),Eo(this.toRawBytes(R))}}w.BASE=new w(e.Gx,e.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const S=e.nBitLength,M=vS(w,e.endo?Math.ceil(S/2):S);return{CURVE:e,ProjectivePoint:w,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function zN(t){const e=T0(t);return rl(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function jN(t){const e=zN(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(h){return Ct(h,r)}function a(h){return zm(h,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:f,isWithinCurveOrder:m}=FN({...e,toBytes(h,v,I){const x=v.toAffine(),A=n.toBytes(x.x),U=Io;return Ni("isCompressed",I),I?U(Uint8Array.from([v.hasEvenY()?2:3]),A):U(Uint8Array.from([4]),A,n.toBytes(x.y))},fromBytes(h){const v=h.length,I=h[0],x=h.subarray(1);if(v===i&&(I===2||I===3)){const A=fo(x);if(!Zf(A,hn,n.ORDER))throw new Error("Point is not on curve");const U=f(A);let j;try{j=n.sqrt(U)}catch(V){const ie=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+ie)}const N=(j&hn)===hn;return(I&1)===1!==N&&(j=n.neg(j)),{x:A,y:j}}else if(v===s&&I===4){const A=n.fromBytes(x.subarray(0,n.BYTES)),U=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:A,y:U}}else{const A=i,U=s;throw new Error("invalid Point, expected length of "+A+", or uncompressed "+U+", got "+v)}}}),w=h=>Eo(za(h,e.nByteLength));function S(h){const v=r>>hn;return h>v}function M(h){return S(h)?o(-h):h}const L=(h,v,I)=>fo(h.slice(v,I));class R{constructor(v,I,x){this.r=v,this.s=I,this.recovery=x,this.assertValidity()}static fromCompact(v){const I=e.nByteLength;return v=Zt("compactSignature",v,I*2),new R(L(v,0,I),L(v,I,2*I))}static fromDER(v){const{r:I,s:x}=Si.toSig(Zt("DER",v));return new R(I,x)}assertValidity(){br("r",this.r,hn,r),br("s",this.s,hn,r)}addRecoveryBit(v){return new R(this.r,this.s,v)}recoverPublicKey(v){const{r:I,s:x,recovery:A}=this,U=X(Zt("msgHash",v));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");const j=A===2||A===3?I+e.n:I;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const N=A&1?"03":"02",g=l.fromHex(N+w(j)),V=a(j),ie=o(-U*V),ae=o(x*V),ce=l.BASE.multiplyAndAddUnsafe(g,ie,ae);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Fa(this.toDERHex())}toDERHex(){return Si.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Fa(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const b={isValidPrivateKey(h){try{return c(h),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const h=mS(e.n);return eP(e.randomBytes(h),e.n)},precompute(h=8,v=l.BASE){return v._setWindowSize(h),v.multiply(BigInt(3)),v}};function C(h,v=!0){return l.fromPrivateKey(h).toRawBytes(v)}function k(h){const v=_o(h),I=typeof h=="string",x=(v||I)&&h.length;return v?x===i||x===s:I?x===2*i||x===2*s:h instanceof l}function q(h,v,I=!0){if(k(h))throw new Error("first arg must be private key");if(!k(v))throw new Error("second arg must be public key");return l.fromHex(v).multiply(c(h)).toRawBytes(I)}const Y=e.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const v=fo(h),I=h.length*8-e.nBitLength;return I>0?v>>BigInt(I):v},X=e.bits2int_modN||function(h){return o(Y(h))},O=S0(e.nBitLength);function P(h){return br("num < 2^"+e.nBitLength,h,Ai,O),za(h,e.nByteLength)}function D(h,v,I=z){if(["recovered","canonical"].some(Ee=>Ee in I))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:A}=e;let{lowS:U,prehash:j,extraEntropy:N}=I;U==null&&(U=!0),h=Zt("msgHash",h),$w(I),j&&(h=Zt("prehashed msgHash",x(h)));const g=X(h),V=c(v),ie=[P(V),P(g)];if(N!=null&&N!==!1){const Ee=N===!0?A(n.BYTES):N;ie.push(Zt("extraEntropy",Ee))}const ae=Io(...ie),ce=g;function be(Ee){const Ce=Y(Ee);if(!m(Ce))return;const ut=a(Ce),De=l.BASE.multiply(Ce).toAffine(),Oe=o(De.x);if(Oe===Ai)return;const bt=o(ut*o(ce+Oe*V));if(bt===Ai)return;let Fe=(De.x===Oe?0:2)|Number(De.y&hn),qe=bt;return U&&S(bt)&&(qe=M(bt),Fe^=1),new R(Oe,qe,Fe)}return{seed:ae,k2sig:be}}const z={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function W(h,v,I=z){const{seed:x,k2sig:A}=D(h,v,I),U=e;return fS(U.hash.outputLen,U.nByteLength,U.hmac)(x,A)}l.BASE._setWindowSize(8);function E(h,v,I,x=$){var Fe;const A=h;v=Zt("msgHash",v),I=Zt("publicKey",I);const{lowS:U,prehash:j,format:N}=x;if($w(x),"strict"in x)throw new Error("options.strict was renamed to lowS");if(N!==void 0&&N!=="compact"&&N!=="der")throw new Error("format must be compact or der");const g=typeof A=="string"||_o(A),V=!g&&!N&&typeof A=="object"&&A!==null&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!g&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ie,ae;try{if(V&&(ie=new R(A.r,A.s)),g){try{N!=="compact"&&(ie=R.fromDER(A))}catch(qe){if(!(qe instanceof Si.Err))throw qe}!ie&&N!=="der"&&(ie=R.fromCompact(A))}ae=l.fromHex(I)}catch{return!1}if(!ie||U&&ie.hasHighS())return!1;j&&(v=e.hash(v));const{r:ce,s:be}=ie,Ee=X(v),Ce=a(be),ut=o(Ee*Ce),De=o(ce*Ce),Oe=(Fe=l.BASE.multiplyAndAddUnsafe(ae,ut,De))==null?void 0:Fe.toAffine();return Oe?o(Oe.x)===ce:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:q,sign:W,verify:E,ProjectivePoint:l,Signature:R,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $N(t){return{hash:t,hmac:(e,...n)=>rT(t,e,sC(...n)),randomBytes:lS}}function qN(t,e){const n=r=>jN({...t,...$N(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iT=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ww=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),WN=BigInt(1),Wm=BigInt(2),Hw=(t,e)=>(t+e/Wm)/e;function HN(t){const e=iT,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,f=c*c*t%e,m=Wt(f,n,e)*f%e,w=Wt(m,n,e)*f%e,S=Wt(w,Wm,e)*c%e,M=Wt(S,i,e)*S%e,L=Wt(M,s,e)*M%e,R=Wt(L,a,e)*L%e,b=Wt(R,l,e)*R%e,C=Wt(b,a,e)*L%e,k=Wt(C,n,e)*f%e,q=Wt(k,o,e)*M%e,Y=Wt(q,r,e)*c%e,X=Wt(Y,Wm,e);if(!Hm.eql(Hm.sqr(X),t))throw new Error("Cannot find square root");return X}const Hm=ed(iT,void 0,void 0,{sqrt:HN}),KN=qN({a:BigInt(0),b:BigInt(7),Fp:Hm,n:Ww,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Ww,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-WN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Hw(s*t,e),l=Hw(-r*t,e);let c=Ct(t-a*n-l*i,e),f=Ct(-a*r-l*s,e);const m=c>o,w=f>o;if(m&&(c=e-c),w&&(f=e-f),c>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:m,k1:c,k2neg:w,k2:f}}}},$m);BigInt(0);td.utils.randomPrivateKey;function Kw(t){try{return td.ExtendedPoint.fromHex(t),!0}catch{return!1}}const GN=(t,e)=>td.sign(t,e.slice(0,32)),QN=td.verify,En=t=>Ne.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Ne.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Ne.Buffer.from(t);class YN{constructor(e){Object.assign(this,e)}encode(){return Ne.Buffer.from(kS(yh,this))}static decode(e){return RS(yh,this,e)}static decodeUnchecked(e){return SS(yh,this,e)}}const yh=new Map;var sT;const XN=32,Ts=32;function JN(t){return t._bn!==void 0}let Gw=1;class Te extends YN{constructor(e){if(super({}),this._bn=void 0,JN(e))this._bn=e._bn;else{if(typeof e=="string"){const n=Tn.decode(e);if(n.length!=Ts)throw new Error("Invalid public key input");this._bn=new Fw(n)}else this._bn=new Fw(e);if(this._bn.byteLength()>Ts)throw new Error("Invalid public key input")}}static unique(){const e=new Te(Gw);return Gw+=1,new Te(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Tn.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Ne.Buffer);if(e.length===Ts)return e;const n=Ne.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=Ne.Buffer.concat([e.toBuffer(),Ne.Buffer.from(n),r.toBuffer()]),s=$m(i);return new Te(s)}static createProgramAddressSync(e,n){let r=Ne.Buffer.alloc(0);e.forEach(function(s){if(s.length>XN)throw new TypeError("Max seed length exceeded");r=Ne.Buffer.concat([r,En(s)])}),r=Ne.Buffer.concat([r,n.toBuffer(),Ne.Buffer.from("ProgramDerivedAddress")]);const i=$m(r);if(Kw(i))throw new Error("Invalid seeds, address must fall off the curve");return new Te(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(Ne.Buffer.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new Te(e);return Kw(n.toBytes())}}sT=Te;Te.default=new sT("11111111111111111111111111111111");yh.set(Te,{kind:"struct",fields:[["_bn","u256"]]});new Te("BPFLoader1111111111111111111111111111111111");const ka=1280-40-8,oT=127,aT=64;class lT extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(lT.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class uT extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(uT.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ql extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ql.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class lf{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const je=(t="publicKey")=>Ht(32,t),wa=(t="string")=>{const e=ve([Ie("length"),Ie("lengthPadding"),Ht(po(Ie(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:Ne.Buffer.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>Ie().span+Ie().span+Ne.Buffer.from(s,"utf8").length,i},ZN=(t="authorized")=>ve([je("staker"),je("withdrawer")],t),eM=(t="lockup")=>ve([lr("unixTimestamp"),lr("epoch"),je("custodian")],t),tM=(t="voteInit")=>ve([je("nodePubkey"),je("authorizedVoter"),je("authorizedWithdrawer"),Ze("commission")],t),nM=(t="voteAuthorizeWithSeedArgs")=>ve([Ie("voteAuthorizationType"),je("currentAuthorityDerivedKeyOwnerPubkey"),wa("currentAuthorityDerivedKeySeed"),je("newAuthorized")],t);function cT(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return cT({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function Er(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Ir(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function en(t,e){if(!t)throw new Error(e||"Assertion failed")}class ld{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new ld(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];en(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{en(n.length>0,"Expected at least one writable signer key");const[l]=n[0];en(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new Te(l)),...r.map(([l])=>new Te(l)),...i.map(([l])=>new Te(l)),...s.map(([l])=>new Te(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new Te(s),l=e.findIndex(c=>c.equals(a));l>=0&&(en(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const hT="Reached end of buffer unexpectedly";function bi(t){if(t.length===0)throw new Error(hT);return t.shift()}function Sr(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(hT);return t.splice(...e)}class Ms{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new Te(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Tn.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new lf(this.staticAccountKeys)}static compile(e){const n=ld.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new lf(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Tn.encode(a.data)}));return new Ms({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Ir(n,e);const r=this.instructions.map(m=>{const{accounts:w,programIdIndex:S}=m,M=Array.from(Tn.decode(m.data));let L=[];Ir(L,w.length);let R=[];return Ir(R,M.length),{programIdIndex:S,keyIndicesCount:Ne.Buffer.from(L),keyIndices:w,dataLength:Ne.Buffer.from(R),data:M}});let i=[];Ir(i,r.length);let s=Ne.Buffer.alloc(ka);Ne.Buffer.from(i).copy(s);let o=i.length;r.forEach(m=>{const S=ve([Ze("programIdIndex"),Ht(m.keyIndicesCount.length,"keyIndicesCount"),Wn(Ze("keyIndex"),m.keyIndices.length,"keyIndices"),Ht(m.dataLength.length,"dataLength"),Wn(Ze("userdatum"),m.data.length,"data")]).encode(m,s,o);o+=S}),s=s.slice(0,o);const a=ve([Ht(1,"numRequiredSignatures"),Ht(1,"numReadonlySignedAccounts"),Ht(1,"numReadonlyUnsignedAccounts"),Ht(n.length,"keyCount"),Wn(je("key"),e,"keys"),je("recentBlockhash")]),l={numRequiredSignatures:Ne.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Ne.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Ne.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Ne.Buffer.from(n),keys:this.accountKeys.map(m=>En(m.toBytes())),recentBlockhash:Tn.decode(this.recentBlockhash)};let c=Ne.Buffer.alloc(2048);const f=a.encode(l,c);return s.copy(c,f),c.slice(0,f+s.length)}static from(e){let n=[...e];const r=bi(n);if(r!==(r&oT))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=bi(n),s=bi(n),o=Er(n);let a=[];for(let w=0;w<o;w++){const S=Sr(n,0,Ts);a.push(new Te(Ne.Buffer.from(S)))}const l=Sr(n,0,Ts),c=Er(n);let f=[];for(let w=0;w<c;w++){const S=bi(n),M=Er(n),L=Sr(n,0,M),R=Er(n),b=Sr(n,0,R),C=Tn.encode(Ne.Buffer.from(b));f.push({programIdIndex:S,accounts:L,data:C})}const m={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Tn.encode(Ne.Buffer.from(l)),accountKeys:a,instructions:f};return new Ms(m)}}class uf{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new lf(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=ld.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const f of s){const m=n.extractTableLookup(f);if(m!==void 0){const[w,{writable:S,readonly:M}]=m;r.push(w),i.writable.push(...S),i.readonly.push(...M)}}const[o,a]=n.getMessageComponents(),c=new lf(a,i).compileInstructions(e.instructions);return new uf({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Ir(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Ir(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ir(s,this.addressTableLookups.length);const o=ve([Ze("prefix"),ve([Ze("numRequiredSignatures"),Ze("numReadonlySignedAccounts"),Ze("numReadonlyUnsignedAccounts")],"header"),Ht(e.length,"staticAccountKeysLength"),Wn(je(),this.staticAccountKeys.length,"staticAccountKeys"),je("recentBlockhash"),Ht(r.length,"instructionsLength"),Ht(n.length,"serializedInstructions"),Ht(s.length,"addressTableLookupsLength"),Ht(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(ka),l=128,c=o.encode({prefix:l,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(f=>f.toBytes()),recentBlockhash:Tn.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(ka);for(const r of this.compiledInstructions){const i=Array();Ir(i,r.accountKeyIndexes.length);const s=Array();Ir(s,r.data.length);const o=ve([Ze("programIdIndex"),Ht(i.length,"encodedAccountKeyIndexesLength"),Wn(Ze(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ht(s.length,"encodedDataLength"),Ht(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(ka);for(const r of this.addressTableLookups){const i=Array();Ir(i,r.writableIndexes.length);const s=Array();Ir(s,r.readonlyIndexes.length);const o=ve([je("accountKey"),Ht(i.length,"encodedWritableIndexesLength"),Wn(Ze(),r.writableIndexes.length,"writableIndexes"),Ht(s.length,"encodedReadonlyIndexesLength"),Wn(Ze(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=bi(n),i=r&oT;en(r!==i,"Expected versioned message but received legacy message");const s=i;en(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:bi(n),numReadonlySignedAccounts:bi(n),numReadonlyUnsignedAccounts:bi(n)},a=[],l=Er(n);for(let M=0;M<l;M++)a.push(new Te(Sr(n,0,Ts)));const c=Tn.encode(Sr(n,0,Ts)),f=Er(n),m=[];for(let M=0;M<f;M++){const L=bi(n),R=Er(n),b=Sr(n,0,R),C=Er(n),k=new Uint8Array(Sr(n,0,C));m.push({programIdIndex:L,accountKeyIndexes:b,data:k})}const w=Er(n),S=[];for(let M=0;M<w;M++){const L=new Te(Sr(n,0,Ts)),R=Er(n),b=Sr(n,0,R),C=Er(n),k=Sr(n,0,C);S.push({accountKey:L,writableIndexes:b,readonlyIndexes:k})}return new uf({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:m,addressTableLookups:S})}}let Zi=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const rM=Ne.Buffer.alloc(aT).fill(0);class Or{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Ne.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ni{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Or(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let L=0;L<n.length;L++)if(n[L].programId===void 0)throw new Error(`Transaction instruction index ${L} has undefined program id`);const i=[],s=[];n.forEach(L=>{L.keys.forEach(b=>{s.push({...b})});const R=L.programId.toString();i.includes(R)||i.push(R)}),i.forEach(L=>{s.push({pubkey:new Te(L),isSigner:!1,isWritable:!1})});const o=[];s.forEach(L=>{const R=L.pubkey.toString(),b=o.findIndex(C=>C.pubkey.toString()===R);b>-1?(o[b].isWritable=o[b].isWritable||L.isWritable,o[b].isSigner=o[b].isSigner||L.isSigner):o.push(L)}),o.sort(function(L,R){if(L.isSigner!==R.isSigner)return L.isSigner?-1:1;if(L.isWritable!==R.isWritable)return L.isWritable?-1:1;const b={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return L.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",b)});const a=o.findIndex(L=>L.pubkey.equals(r));if(a>-1){const[L]=o.splice(a,1);L.isSigner=!0,L.isWritable=!0,o.unshift(L)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const L of this.signatures){const R=o.findIndex(b=>b.pubkey.equals(L.publicKey));if(R>-1)o[R].isSigner||(o[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${L.publicKey.toString()}`)}let l=0,c=0,f=0;const m=[],w=[];o.forEach(({pubkey:L,isSigner:R,isWritable:b})=>{R?(m.push(L.toString()),l+=1,b||(c+=1)):(w.push(L.toString()),b||(f+=1))});const S=m.concat(w),M=n.map(L=>{const{data:R,programId:b}=L;return{programIdIndex:S.indexOf(b.toString()),accounts:L.keys.map(C=>S.indexOf(C.pubkey.toString())),data:Tn.encode(R)}});return M.forEach(L=>{en(L.programIdIndex>=0),L.accounts.forEach(R=>en(R>=0))}),new Ms({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:f},accountKeys:S,recentBlockhash:e,instructions:M})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=GN(r,i.secretKey);this._addSignature(i.publicKey,En(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){en(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=Ne.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):QN(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Ir(r,n.length);const i=r.length+n.length*64+e.length,s=Ne.Buffer.alloc(i);return en(n.length<256),Ne.Buffer.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(en(o.length===64,"signature has invalid length"),Ne.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),en(s.length<=ka,`Transaction too large: ${s.length} > ${ka}`),s}get keys(){return en(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return en(this.instructions.length===1),this.instructions[0].programId}get data(){return en(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Er(n);let i=[];for(let s=0;s<r;s++){const o=Sr(n,0,aT);i.push(Tn.encode(Ne.Buffer.from(o)))}return ni.populate(Ms.from(n),i)}static populate(e,n=[]){const r=new ni;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==Tn.encode(rM)?null:Tn.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Or({keys:s,programId:e.accountKeys[i.programIdIndex],data:Tn.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}const iM=160,sM=64,oM=iM/sM,aM=1e3/oM;new Te("SysvarC1ock11111111111111111111111111111111");new Te("SysvarEpochSchedu1e111111111111111111111111");new Te("Sysvar1nstructions1111111111111111111111111");const bp=new Te("SysvarRecentB1ockHashes11111111111111111111"),Qw=new Te("SysvarRent111111111111111111111111111111111");new Te("SysvarRewards111111111111111111111111111111");new Te("SysvarS1otHashes111111111111111111111111111");new Te("SysvarS1otHistory11111111111111111111111111");new Te("SysvarStakeHistory1111111111111111111111111");class Yw extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class we extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function ta(t){return new Promise(e=>setTimeout(e,t))}function yr(t,e){const n=t.layout.span>=0?t.layout.span:cT(t,e),r=Ne.Buffer.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const lM=wn("lamportsPerSignature"),fT=ve([Ie("version"),Ie("state"),je("authorizedPubkey"),je("nonce"),ve([lM],"feeCalculator")]),Xw=fT.span;class U0{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=fT.decode(En(e),0);return new U0({authorizedPubkey:new Te(n.authorizedPubkey),nonce:new Te(n.nonce).toString(),feeCalculator:n.feeCalculator})}}const uM=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}},cM=t=>e=>{const n=Ht(t,e),{encode:r,decode:i}=uM(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return qP(Ne.Buffer.from(l))},s.encode=(o,a,l)=>{const c=KP(o,t);return r(c,a,l)},s},$a=cM(8),vr=Object.freeze({Create:{index:0,layout:ve([Ie("instruction"),lr("lamports"),lr("space"),je("programId")])},Assign:{index:1,layout:ve([Ie("instruction"),je("programId")])},Transfer:{index:2,layout:ve([Ie("instruction"),$a("lamports")])},CreateWithSeed:{index:3,layout:ve([Ie("instruction"),je("base"),wa("seed"),lr("lamports"),lr("space"),je("programId")])},AdvanceNonceAccount:{index:4,layout:ve([Ie("instruction")])},WithdrawNonceAccount:{index:5,layout:ve([Ie("instruction"),lr("lamports")])},InitializeNonceAccount:{index:6,layout:ve([Ie("instruction"),je("authorized")])},AuthorizeNonceAccount:{index:7,layout:ve([Ie("instruction"),je("authorized")])},Allocate:{index:8,layout:ve([Ie("instruction"),lr("space")])},AllocateWithSeed:{index:9,layout:ve([Ie("instruction"),je("base"),wa("seed"),lr("space"),je("programId")])},AssignWithSeed:{index:10,layout:ve([Ie("instruction"),je("base"),wa("seed"),je("programId")])},TransferWithSeed:{index:11,layout:ve([Ie("instruction"),$a("lamports"),wa("seed"),je("programId")])},UpgradeNonceAccount:{index:12,layout:ve([Ie("instruction")])}});class Mu{constructor(){}static createAccount(e){const n=vr.Create,r=yr(n,{lamports:e.lamports,space:e.space,programId:En(e.programId.toBuffer())});return new Or({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=vr.TransferWithSeed;n=yr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:En(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=vr.Transfer;n=yr(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Or({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=vr.AssignWithSeed;n=yr(i,{base:En(e.basePubkey.toBuffer()),seed:e.seed,programId:En(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=vr.Assign;n=yr(i,{programId:En(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Or({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=vr.CreateWithSeed,r=yr(n,{base:En(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:En(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Or({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new ni;"basePubkey"in e&&"seed"in e?n.add(Mu.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Xw,programId:this.programId})):n.add(Mu.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Xw,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=vr.InitializeNonceAccount,r=yr(n,{authorized:En(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bp,isSigner:!1,isWritable:!1},{pubkey:Qw,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Or(i)}static nonceAdvance(e){const n=vr.AdvanceNonceAccount,r=yr(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bp,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Or(i)}static nonceWithdraw(e){const n=vr.WithdrawNonceAccount,r=yr(n,{lamports:e.lamports});return new Or({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:bp,isSigner:!1,isWritable:!1},{pubkey:Qw,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=vr.AuthorizeNonceAccount,r=yr(n,{authorized:En(e.newAuthorizedPubkey.toBuffer())});return new Or({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=vr.AllocateWithSeed;n=yr(i,{base:En(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:En(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=vr.Allocate;n=yr(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Or({keys:r,programId:this.programId,data:n})}}Mu.programId=new Te("11111111111111111111111111111111");new Te("BPFLoader2111111111111111111111111111111111");function hM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xp,Jw;function fM(){if(Jw)return xp;Jw=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,f,m;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(m=t.call(r),m==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(m==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],f=n(r[c],!1),f!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+f),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return xp=function(r){var i=n(r,!1);if(i!==void 0)return""+i},xp}var dM=fM(),Zw=hM(dM);const Dl=32;function kp(t){let e=0;for(;t>1;)t/=2,e++;return e}function pM(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class mM{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=kp(pM(e+Dl+1))-kp(Dl)-1,r=this.getSlotsInEpoch(n),i=e-(r-Dl);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Dl:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+kp(Dl)):this.slotsPerEpoch}}var gM=globalThis.fetch;class yM extends BN{constructor(e,n,r){const i=s=>{const o=MN(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function vM(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const e_=56;class t_{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=vM(wM,e),r=e.length-e_;en(r>=0,"lookup table is invalid"),en(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ve([Wn(je(),i,"addresses")]).decode(e.slice(e_));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new Te(n.authority[0]):void 0,addresses:s.map(o=>new Te(o))}}}const wM={index:1,layout:ve([Ie("typeIndex"),$a("deactivationSlot"),wn("lastExtendedSlot"),Ze("lastExtendedStartIndex"),Ze(),Wn(je(),po(Ze(),-1),"authority")])},_M=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function EM(t){const e=t.match(_M);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Ft=rc(D0(Te),ue(),t=>new Te(t)),dT=V0([ue(),Ot("base64")]),F0=rc(D0(Ne.Buffer),dT,t=>Ne.Buffer.from(t[0],"base64")),IM=30*1e3;function SM(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function yt(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function n_(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function pT(t){return Kn([re({jsonrpc:Ot("2.0"),id:ue(),result:t}),re({jsonrpc:Ot("2.0"),id:ue(),error:re({code:ol(),message:ue(),data:Se(tN())})})])}const TM=pT(ol());function Ue(t){return rc(pT(t),TM,e=>"error"in e?e:{...e,result:fe(e.result,t)})}function Gt(t){return Ue(re({context:re({slot:Q()}),value:t}))}function ud(t){return re({context:re({slot:Q()}),value:t})}function Rp(t,e){return t===0?new uf({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new Te(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:Tn.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Ms(e)}const AM=re({foundation:Q(),foundationTerm:Q(),initial:Q(),taper:Q(),terminal:Q()}),bM=Ue(de(pe(re({epoch:Q(),effectiveSlot:Q(),amount:Q(),postBalance:Q(),commission:Se(pe(Q()))})))),xM=de(re({slot:Q(),prioritizationFee:Q()})),kM=re({total:Q(),validator:Q(),foundation:Q(),epoch:Q()}),RM=re({epoch:Q(),slotIndex:Q(),slotsInEpoch:Q(),absoluteSlot:Q(),blockHeight:Se(Q()),transactionCount:Se(Q())}),CM=re({slotsPerEpoch:Q(),leaderScheduleSlotOffset:Q(),warmup:ci(),firstNormalEpoch:Q(),firstNormalSlot:Q()}),PM=GS(ue(),de(Q())),Lo=pe(Kn([re({}),ue()])),NM=re({err:Lo}),MM=Ot("receivedSignature"),LM=re({"solana-core":ue(),"feature-set":Se(Q())}),BM=re({program:ue(),programId:Ft,parsed:ol()}),OM=re({programId:Ft,accounts:de(Ft),data:ue()}),r_=Gt(re({err:pe(Kn([re({}),ue()])),logs:pe(de(ue())),accounts:Se(pe(de(pe(re({executable:ci(),owner:ue(),lamports:Q(),data:de(ue()),rentEpoch:Se(Q())}))))),unitsConsumed:Se(Q()),returnData:Se(pe(re({programId:ue(),data:V0([ue(),Ot("base64")])}))),innerInstructions:Se(pe(de(re({index:Q(),instructions:de(Kn([BM,OM]))}))))})),DM=Gt(re({byIdentity:GS(ue(),de(Q())),range:re({firstSlot:Q(),lastSlot:Q()})}));function VM(t,e,n,r,i,s){const o=n||gM;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(f,m)=>{const w=await new Promise((S,M)=>{try{r(f,m,(L,R)=>S([L,R]))}catch(L){M(L)}});return await o(...w)}),new CN(async(f,m)=>{const w={method:"POST",body:f,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},VL)};try{let S=5,M,L=500;for(;l?M=await l(t,w):M=await o(t,w),!(M.status!==429||i===!0||(S-=1,S===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${L}ms delay...`),await ta(L),L*=2;const R=await M.text();M.ok?m(null,R):m(new Error(`${M.status} ${M.statusText}: ${R}`))}catch(S){S instanceof Error&&m(S)}},{})}function UM(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function FM(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const zM=Ue(AM),jM=Ue(kM),$M=Ue(xM),qM=Ue(RM),WM=Ue(CM),HM=Ue(PM),KM=Ue(Q()),GM=Gt(re({total:Q(),circulating:Q(),nonCirculating:Q(),nonCirculatingAccounts:de(Ft)})),Km=re({amount:ue(),uiAmount:pe(Q()),decimals:Q(),uiAmountString:Se(ue())}),QM=Gt(de(re({address:Ft,amount:ue(),uiAmount:pe(Q()),decimals:Q(),uiAmountString:Se(ue())}))),YM=Gt(de(re({pubkey:Ft,account:re({executable:ci(),owner:Ft,lamports:Q(),data:F0,rentEpoch:Q()})}))),Gm=re({program:ue(),parsed:ol(),space:Q()}),XM=Gt(de(re({pubkey:Ft,account:re({executable:ci(),owner:Ft,lamports:Q(),data:Gm,rentEpoch:Q()})}))),JM=Gt(de(re({lamports:Q(),address:Ft}))),Lu=re({executable:ci(),owner:Ft,lamports:Q(),data:F0,rentEpoch:Q()}),ZM=re({pubkey:Ft,account:Lu}),eL=rc(Kn([D0(Ne.Buffer),Gm]),Kn([dT,Gm]),t=>Array.isArray(t)?fe(t,F0):t),Qm=re({executable:ci(),owner:Ft,lamports:Q(),data:eL,rentEpoch:Q()}),tL=re({pubkey:Ft,account:Qm}),nL=re({state:Kn([Ot("active"),Ot("inactive"),Ot("activating"),Ot("deactivating")]),active:Q(),inactive:Q()}),rL=Ue(de(re({signature:ue(),slot:Q(),err:Lo,memo:pe(ue()),blockTime:Se(pe(Q()))}))),iL=Ue(de(re({signature:ue(),slot:Q(),err:Lo,memo:pe(ue()),blockTime:Se(pe(Q()))}))),sL=re({subscription:Q(),result:ud(Lu)}),oL=re({pubkey:Ft,account:Lu}),aL=re({subscription:Q(),result:ud(oL)}),lL=re({parent:Q(),slot:Q(),root:Q()}),uL=re({subscription:Q(),result:lL}),cL=Kn([re({type:Kn([Ot("firstShredReceived"),Ot("completed"),Ot("optimisticConfirmation"),Ot("root")]),slot:Q(),timestamp:Q()}),re({type:Ot("createdBank"),parent:Q(),slot:Q(),timestamp:Q()}),re({type:Ot("frozen"),slot:Q(),timestamp:Q(),stats:re({numTransactionEntries:Q(),numSuccessfulTransactions:Q(),numFailedTransactions:Q(),maxTransactionsPerEntry:Q()})}),re({type:Ot("dead"),slot:Q(),timestamp:Q(),err:ue()})]),hL=re({subscription:Q(),result:cL}),fL=re({subscription:Q(),result:ud(Kn([NM,MM]))}),dL=re({subscription:Q(),result:Q()}),pL=re({pubkey:ue(),gossip:pe(ue()),tpu:pe(ue()),rpc:pe(ue()),version:pe(ue())}),i_=re({votePubkey:ue(),nodePubkey:ue(),activatedStake:Q(),epochVoteAccount:ci(),epochCredits:de(V0([Q(),Q(),Q()])),commission:Q(),lastVote:Q(),rootSlot:pe(Q())}),mL=Ue(re({current:de(i_),delinquent:de(i_)})),gL=Kn([Ot("processed"),Ot("confirmed"),Ot("finalized")]),yL=re({slot:Q(),confirmations:pe(Q()),err:Lo,confirmationStatus:Se(gL)}),vL=Gt(de(pe(yL))),wL=Ue(Q()),mT=re({accountKey:Ft,writableIndexes:de(Q()),readonlyIndexes:de(Q())}),z0=re({signatures:de(ue()),message:re({accountKeys:de(ue()),header:re({numRequiredSignatures:Q(),numReadonlySignedAccounts:Q(),numReadonlyUnsignedAccounts:Q()}),instructions:de(re({accounts:de(Q()),data:ue(),programIdIndex:Q()})),recentBlockhash:ue(),addressTableLookups:Se(de(mT))})}),gT=re({pubkey:Ft,signer:ci(),writable:ci(),source:Se(Kn([Ot("transaction"),Ot("lookupTable")]))}),yT=re({accountKeys:de(gT),signatures:de(ue())}),vT=re({parsed:ol(),program:ue(),programId:Ft}),wT=re({accounts:de(Ft),data:ue(),programId:Ft}),_L=Kn([wT,vT]),EL=Kn([re({parsed:ol(),program:ue(),programId:ue()}),re({accounts:de(ue()),data:ue(),programId:ue()})]),_T=rc(_L,EL,t=>"accounts"in t?fe(t,wT):fe(t,vT)),ET=re({signatures:de(ue()),message:re({accountKeys:de(gT),instructions:de(_T),recentBlockhash:ue(),addressTableLookups:Se(pe(de(mT)))})}),cf=re({accountIndex:Q(),mint:ue(),owner:Se(ue()),programId:Se(ue()),uiTokenAmount:Km}),IT=re({writable:de(Ft),readonly:de(Ft)}),cd=re({err:Lo,fee:Q(),innerInstructions:Se(pe(de(re({index:Q(),instructions:de(re({accounts:de(Q()),data:ue(),programIdIndex:Q()}))})))),preBalances:de(Q()),postBalances:de(Q()),logMessages:Se(pe(de(ue()))),preTokenBalances:Se(pe(de(cf))),postTokenBalances:Se(pe(de(cf))),loadedAddresses:Se(IT),computeUnitsConsumed:Se(Q())}),j0=re({err:Lo,fee:Q(),innerInstructions:Se(pe(de(re({index:Q(),instructions:de(_T)})))),preBalances:de(Q()),postBalances:de(Q()),logMessages:Se(pe(de(ue()))),preTokenBalances:Se(pe(de(cf))),postTokenBalances:Se(pe(de(cf))),loadedAddresses:Se(IT),computeUnitsConsumed:Se(Q())}),al=Kn([Ot(0),Ot("legacy")]),Bo=re({pubkey:ue(),lamports:Q(),postBalance:pe(Q()),rewardType:pe(ue()),commission:Se(pe(Q()))}),IL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),transactions:de(re({transaction:z0,meta:pe(cd),version:Se(al)})),rewards:Se(de(Bo)),blockTime:pe(Q()),blockHeight:pe(Q())}))),SL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),rewards:Se(de(Bo)),blockTime:pe(Q()),blockHeight:pe(Q())}))),TL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),transactions:de(re({transaction:yT,meta:pe(cd),version:Se(al)})),rewards:Se(de(Bo)),blockTime:pe(Q()),blockHeight:pe(Q())}))),AL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),transactions:de(re({transaction:ET,meta:pe(j0),version:Se(al)})),rewards:Se(de(Bo)),blockTime:pe(Q()),blockHeight:pe(Q())}))),bL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),transactions:de(re({transaction:yT,meta:pe(j0),version:Se(al)})),rewards:Se(de(Bo)),blockTime:pe(Q()),blockHeight:pe(Q())}))),xL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),rewards:Se(de(Bo)),blockTime:pe(Q()),blockHeight:pe(Q())}))),kL=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),transactions:de(re({transaction:z0,meta:pe(cd)})),rewards:Se(de(Bo)),blockTime:pe(Q())}))),s_=Ue(pe(re({blockhash:ue(),previousBlockhash:ue(),parentSlot:Q(),signatures:de(ue()),blockTime:pe(Q())}))),Cp=Ue(pe(re({slot:Q(),meta:pe(cd),blockTime:Se(pe(Q())),transaction:z0,version:Se(al)}))),Jc=Ue(pe(re({slot:Q(),transaction:ET,meta:pe(j0),blockTime:Se(pe(Q())),version:Se(al)}))),RL=Gt(re({blockhash:ue(),lastValidBlockHeight:Q()})),CL=Gt(ci()),PL=re({slot:Q(),numTransactions:Q(),numSlots:Q(),samplePeriodSecs:Q()}),NL=Ue(de(PL)),ML=Gt(pe(re({feeCalculator:re({lamportsPerSignature:Q()})}))),LL=Ue(ue()),BL=Ue(ue()),OL=re({err:Lo,logs:de(ue()),signature:ue()}),DL=re({result:ud(OL),subscription:Q()}),VL={"solana-client":"js/1.0.0-maintenance"};class UL{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async f=>{const{commitment:m,config:w}=yt(f),S=this._buildArgs([],m,void 0,w),M=Zw(S);return c[M]=c[M]??(async()=>{try{const L=await this._rpcRequest("getBlockHeight",S),R=fe(L,Ue(Q()));if("error"in R)throw new we(R.error,"failed to get block height information");return R.result}finally{delete c[M]}})(),await c[M]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=SM(e),this._rpcWsEndpoint=r||EM(e),this._rpcClient=VM(e,i,s,o,a,l),this._rpcRequest=UM(this._rpcClient),this._rpcBatchRequest=FM(this._rpcClient),this._rpcWebSocket=new yM(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=fe(o,Gt(Q()));if("error"in a)throw new we(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=fe(n,Ue(pe(Q())));if("error"in r)throw new we(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=fe(e,Ue(Q()));if("error"in n)throw new we(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=fe(e,KM);if("error"in n)throw new we(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=fe(r,GM);if("error"in i)throw new we(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=fe(i,Gt(Km));if("error"in s)throw new we(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=fe(i,Gt(Km));if("error"in s)throw new we(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=yt(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=fe(l,YM);if("error"in c)throw new we(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=fe(o,XM);if("error"in a)throw new we(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=fe(i,JM);if("error"in s)throw new we(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=fe(i,QM);if("error"in s)throw new we(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=fe(o,Gt(pe(Lu)));if("error"in a)throw new we(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=fe(o,Gt(pe(Qm)));if("error"in a)throw new we(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=yt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=fe(a,Gt(de(pe(Qm))));if("error"in l)throw new we(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=yt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=fe(a,Gt(de(pe(Lu))));if("error"in l)throw new we(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=yt(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=fe(a,Ue(nL));if("error"in l)throw new we(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=yt(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:n_(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=de(ZM),f=o.withContext===!0?fe(l,Gt(c)):fe(l,Ue(c));if("error"in f)throw new we(f.error,`failed to get accounts owned by program ${e.toBase58()}`);return f.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=fe(o,Ue(de(tL)));if("error"in a)throw new we(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=Tn.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return en(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(m,w)=>{r=void 0;const S={context:w,value:m};l({__type:Zi.PROCESSED,response:S})},e);const f=new Promise(m=>{r==null?m():i=this._onSubscriptionStateChange(r,w=>{w==="subscribed"&&m()})});(async()=>{if(await f,s)return;const m=await this.getSignatureStatus(n);if(s||m==null)return;const{context:w,value:S}=m;if(S!=null)if(S!=null&&S.err)c(S.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Zi.PROCESSED,response:{context:w,value:S}})}})()}catch(f){c(f)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(m=>{const w=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let S=await w();if(!s){for(;S<=r;)if(await ta(1e3),s||(S=await w(),s))return;m({__type:Zi.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let f;try{const m=await Promise.race([c,l,o]);if(m.__type===Zi.PROCESSED)f=m.response;else throw new lT(i)}finally{s=!0,a()}return f}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(S=>{let M=s,L=null;const R=async()=>{try{const{context:b,value:C}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return L=b.slot,C==null?void 0:C.nonce}catch{return M}};(async()=>{if(M=await R(),!a)for(;;){if(s!==M){S({__type:Zi.NONCE_INVALID,slotInWhichNonceDidAdvance:L});return}if(await ta(2e3),a||(M=await R(),a))return}})()}),{abortConfirmation:c,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),m=this.getCancellationPromise(n);let w;try{const S=await Promise.race([m,f,l]);if(S.__type===Zi.PROCESSED)w=S.response;else{let M;for(;;){const L=await this.getSignatureStatus(o);if(L==null)break;if(L.context.slot<(S.slotInWhichNonceDidAdvance??r)){await ta(400);continue}M=L;break}if(M!=null&&M.value){const L=e||"finalized",{confirmationStatus:R}=M.value;switch(L){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new ql(o);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new ql(o);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new ql(o);break;default:}w={context:M.context,value:{err:M.value.err}}}else throw new ql(o)}}finally{a=!0,c()}return w}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Zi.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===Zi.PROCESSED)a=l.response;else throw new uT(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=fe(e,Ue(de(pL)));if("error"in n)throw new we(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=fe(r,mL);if("error"in i)throw new we(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=yt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=fe(s,Ue(Q()));if("error"in o)throw new we(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=yt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=fe(s,Ue(ue()));if("error"in o)throw new we(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=fe(i,Ue(de(Ft)));if("error"in s)throw new we(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);en(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=fe(i,vL);if("error"in s)throw new we(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=yt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=fe(s,Ue(Q()));if("error"in o)throw new we(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=fe(r,zM);if("error"in i)throw new we(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=yt(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=fe(a,bM);if("error"in l)throw new we(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=fe(e,jM);if("error"in n)throw new we(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=yt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=fe(s,qM);if("error"in o)throw new we(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=fe(e,WM);if("error"in n)throw new we(n.error,"failed to get epoch schedule");const r=n.result;return new mM(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=fe(e,HM);if("error"in n)throw new we(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=fe(i,wL);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=fe(n,NL);if("error"in r)throw new we(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=fe(i,ML);if("error"in s)throw new we(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=En(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=fe(s,Gt(pe(Q())));if("error"in o)throw new we(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=fe(i,$M);if("error"in s)throw new we(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=yt(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=fe(s,RL);if("error"in o)throw new we(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=fe(o,CL);if("error"in a)throw new we(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=fe(e,Ue(LM));if("error"in n)throw new we(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=fe(e,Ue(ue()));if("error"in n)throw new we(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=fe(o,TL);if("error"in a)throw a.error;return a.result}case"none":{const a=fe(o,SL);if("error"in a)throw a.error;return a.result}default:{const a=fe(o,IL);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:f,version:m})=>({meta:f,transaction:{...c,message:Rp(m,c.message)},version:m}))}:null}}}catch(a){throw new we(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=fe(o,bL);if("error"in a)throw a.error;return a.result}case"none":{const a=fe(o,xL);if("error"in a)throw a.error;return a.result}default:{const a=fe(o,AL);if("error"in a)throw a.error;return a.result}}}catch(a){throw new we(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=fe(s,DM);if("error"in o)throw new we(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=fe(o,Cp);if("error"in a)throw new we(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:Rp(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=yt(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=fe(o,Jc);if("error"in a)throw new we(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=yt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=fe(l,Jc);if("error"in c)throw new we(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=yt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=fe(l,Cp);if("error"in c)throw new we(c.error,"failed to get transactions");const f=c.result;return f&&{...f,transaction:{...f.transaction,message:Rp(f.version,f.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=fe(i,kL);if("error"in s)throw new we(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const f=new Ms(l.message);return{meta:c,transaction:{...l,message:f}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:ni.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=fe(s,Ue(de(Q())));if("error"in o)throw new we(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=fe(i,s_);if("error"in s)throw new we(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=fe(i,s_);if("error"in s)throw new we(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=fe(i,Cp);if("error"in s)throw new we(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Ms(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:ni.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=fe(i,Jc);if("error"in s)throw new we(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=fe(o,Jc);if("error"in a)throw new we(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=fe(s,rL);if("error"in o)throw new we(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=fe(s,iL);if("error"in o)throw new we(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new t_({key:e,state:t_.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=U0.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=fe(r,LL);if("error"in i)throw new we(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await ta(100);const r=Date.now()-this._blockhashInfo.lastFetch>=IM;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await ta(aM/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=yt(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=fe(s,Gt(Q()));if("error"in o)throw new we(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const L=e.serialize(),R=Ne.Buffer.from(L).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const b=n||{};b.encoding="base64","commitment"in b||(b.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(b.innerInstructions=n.innerInstructions);const C=[R,b],k=await this._rpcRequest("simulateTransaction",C),q=fe(k,r_);if("error"in q)throw new Error("failed to simulate transaction: "+q.error.message);return q.result}let i;if(e instanceof ni){let M=e;i=new ni,i.feePayer=M.feePayer,i.instructions=e.instructions,i.nonceInfo=M.nonceInfo,i.signatures=M.signatures}else i=ni.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let M=this._disableBlockhashCaching;for(;;){const L=await this._blockhashWithExpiryBlockHeight(M);if(i.lastValidBlockHeight=L.lastValidBlockHeight,i.recentBlockhash=L.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const R=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else M=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),f={encoding:"base64",commitment:this.commitment};if(r){const M=(Array.isArray(r)?r:o.nonProgramIds()).map(L=>L.toBase58());f.accounts={encoding:"base64",addresses:M}}s&&(f.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(f.innerInstructions=n.innerInstructions);const m=[c,f],w=await this._rpcRequest("simulateTransaction",m),S=fe(w,r_);if("error"in S){let M;if("data"in S.error&&(M=S.error.data.logs,M&&Array.isArray(M))){const L=`
    `,R=L+M.join(L);console.error(S.error.message,R)}throw new Yw({action:"simulate",signature:"",transactionMessage:S.error.message,logs:M})}return S.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=En(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=fe(a,BL);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new Yw({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=fe(e,sL);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=Zw([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];en(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=yt(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=fe(e,aL);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=yt(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:n_(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=fe(e,DL);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=fe(e,uL);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=fe(e,hL);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=fe(e,fL);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=fe(e,dL);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:ve([Ie("instruction"),$a("recentSlot"),Ze("bumpSeed")])},FreezeLookupTable:{index:1,layout:ve([Ie("instruction")])},ExtendLookupTable:{index:2,layout:ve([Ie("instruction"),$a(),Wn(je(),po(Ie(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ve([Ie("instruction")])},CloseLookupTable:{index:4,layout:ve([Ie("instruction")])}});new Te("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ve([Ze("instruction"),Ie("units"),Ie("additionalFee")])},RequestHeapFrame:{index:1,layout:ve([Ze("instruction"),Ie("bytes")])},SetComputeUnitLimit:{index:2,layout:ve([Ze("instruction"),Ie("units")])},SetComputeUnitPrice:{index:3,layout:ve([Ze("instruction"),$a("microLamports")])}});new Te("ComputeBudget111111111111111111111111111111");ve([Ze("numSignatures"),Ze("padding"),_r("signatureOffset"),_r("signatureInstructionIndex"),_r("publicKeyOffset"),_r("publicKeyInstructionIndex"),_r("messageDataOffset"),_r("messageDataSize"),_r("messageInstructionIndex")]);new Te("Ed25519SigVerify111111111111111111111111111");KN.utils.isValidPrivateKey;ve([Ze("numSignatures"),_r("signatureOffset"),Ze("signatureInstructionIndex"),_r("ethAddressOffset"),Ze("ethAddressInstructionIndex"),_r("messageDataOffset"),_r("messageDataSize"),Ze("messageInstructionIndex"),Ht(20,"ethAddress"),Ht(64,"signature"),Ze("recoveryId")]);new Te("KeccakSecp256k11111111111111111111111111111");var ST;new Te("StakeConfig11111111111111111111111111111111");class TT{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}ST=TT;TT.default=new ST(0,0,Te.default);Object.freeze({Initialize:{index:0,layout:ve([Ie("instruction"),ZN(),eM()])},Authorize:{index:1,layout:ve([Ie("instruction"),je("newAuthorized"),Ie("stakeAuthorizationType")])},Delegate:{index:2,layout:ve([Ie("instruction")])},Split:{index:3,layout:ve([Ie("instruction"),lr("lamports")])},Withdraw:{index:4,layout:ve([Ie("instruction"),lr("lamports")])},Deactivate:{index:5,layout:ve([Ie("instruction")])},Merge:{index:7,layout:ve([Ie("instruction")])},AuthorizeWithSeed:{index:8,layout:ve([Ie("instruction"),je("newAuthorized"),Ie("stakeAuthorizationType"),wa("authoritySeed"),je("authorityOwner")])}});new Te("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ve([Ie("instruction"),tM()])},Authorize:{index:1,layout:ve([Ie("instruction"),je("newAuthorized"),Ie("voteAuthorizationType")])},Withdraw:{index:3,layout:ve([Ie("instruction"),lr("lamports")])},UpdateValidatorIdentity:{index:4,layout:ve([Ie("instruction")])},AuthorizeWithSeed:{index:10,layout:ve([Ie("instruction"),nM()])}});new Te("Vote111111111111111111111111111111111111111");new Te("Va1idator1nfo111111111111111111111111111111");re({name:ue(),website:Se(ue()),details:Se(ue()),iconUrl:Se(ue()),keybaseUsername:Se(ue())});new Te("Vote111111111111111111111111111111111111111");ve([je("nodePubkey"),je("authorizedWithdrawer"),Ze("commission"),wn(),Wn(ve([wn("slot"),Ie("confirmationCount")]),po(Ie(),-8),"votes"),Ze("rootSlotValid"),wn("rootSlot"),wn(),Wn(ve([wn("epoch"),je("authorizedVoter")]),po(Ie(),-8),"authorizedVoters"),ve([Wn(ve([je("authorizedPubkey"),wn("epochOfLastAuthorizedSwitch"),wn("targetEpoch")]),32,"buf"),wn("idx"),Ze("isEmpty")],"priorVoters"),wn(),Wn(ve([wn("epoch"),wn("credits"),wn("prevCredits")]),po(Ie(),-8),"epochCredits"),ve([wn("slot"),wn("timestamp")],"lastTimestamp")]);const $0=le.createContext(),FL=({children:t})=>{const[e,n]=le.useState(null),[r,i]=le.useState(0),[s,o]=le.useState(!1),a=async()=>{const c=window==null?void 0:window.solana;if(!c||!c.isPhantom){alert("Phantom wallet not found!");return}const m=(await c.connect()).publicKey.toString();n(m),o(!0),localStorage.setItem("walletAddress",m)},l=()=>{n(null),o(!1),localStorage.removeItem("walletAddress")};return le.useEffect(()=>{const c=localStorage.getItem("walletAddress");c&&(n(c),o(!0))},[]),se.jsx($0.Provider,{value:{connectWallet:a,disconnectWallet:l,walletAddress:e,walletBalance:r,isConnected:s},children:t})},zL=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,f=s>>2,m=(s&3)<<4|a>>4;let w=(a&15)<<2|c>>6,S=c&63;l||(S=64,o||(w=64)),r.push(n[f],n[m],n[w],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||m==null)throw new $L;const w=s<<2|a>>4;if(r.push(w),c!==64){const S=a<<4&240|c>>2;if(r.push(S),m!==64){const M=c<<6&192|m;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $L extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qL=function(t){const e=AT(t);return bT.encodeByteArray(e,!0)},hf=function(t){return qL(t).replace(/\./g,"")},xT=function(t){try{return bT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate globalThis object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=()=>WL().__FIREBASE_DEFAULTS__,KL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xT(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return zL()||HL()||KL()||GL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kT=t=>{var e,n;return(n=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QL=t=>{const e=kT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},RT=()=>{var t;return(t=hd())===null||t===void 0?void 0:t.config},CT=t=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[hf(JSON.stringify(n)),hf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function ZL(){var t;const e=(t=hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function e4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function n4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function r4(){const t=jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function i4(){return!ZL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s4(){try{return typeof indexedDB=="object"}catch{return!1}}function o4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=a4,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ic.prototype.create)}}class ic{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?l4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new $i(i,a,r)}}function l4(t,e){return t.replace(u4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const u4=/\{\$([^}]+)}/g;function c4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function So(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(o_(s)&&o_(o)){if(!So(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function o_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function h4(t,e){const n=new f4(t,e);return n.subscribe.bind(n)}class f4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");d4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pp),i.error===void 0&&(i.error=Pp),i.complete===void 0&&(i.complete=Pp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function d4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return t&&t._delegate?t._delegate:t}class To{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(g4(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m4(t){return t===no?void 0:t}function g4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new p4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const v4={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},w4=He.INFO,_4={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},E4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q0{constructor(e){this.name=e,this._logLevel=w4,this._logHandler=E4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const I4=(t,e)=>e.some(n=>t instanceof n);let a_,l_;function S4(){return a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T4(){return l_||(l_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PT=new WeakMap,Ym=new WeakMap,NT=new WeakMap,Np=new WeakMap,W0=new WeakMap;function A4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(As(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PT.set(n,t)}).catch(()=>{}),W0.set(e,t),e}function b4(t){if(Ym.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ym.set(t,e)}let Xm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x4(t){Xm=t(Xm)}function k4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mp(this),e,...n);return NT.set(r,e.sort?e.sort():[e]),As(r)}:T4().includes(t)?function(...e){return t.apply(Mp(this),e),As(PT.get(this))}:function(...e){return As(t.apply(Mp(this),e))}}function R4(t){return typeof t=="function"?k4(t):(t instanceof IDBTransaction&&b4(t),I4(t,S4())?new Proxy(t,Xm):t)}function As(t){if(t instanceof IDBRequest)return A4(t);if(Np.has(t))return Np.get(t);const e=R4(t);return e!==t&&(Np.set(t,e),W0.set(e,t)),e}const Mp=t=>W0.get(t);function C4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=As(o);return r&&o.addEventListener("upgradeneeded",l=>{r(As(o.result),l.oldVersion,l.newVersion,As(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const P4=["get","getKey","getAll","getAllKeys","count"],N4=["put","add","delete","clear"],Lp=new Map;function u_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=N4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Lp.set(e,s),s}x4(t=>({...t,get:(e,n,r)=>u_(e,n)||t.get(e,n,r),has:(e,n)=>!!u_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(L4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function L4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jm="@firebase/app",c_="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new q0("@firebase/app"),B4="@firebase/app-compat",O4="@firebase/analytics-compat",D4="@firebase/analytics",V4="@firebase/app-check-compat",U4="@firebase/app-check",F4="@firebase/auth",z4="@firebase/auth-compat",j4="@firebase/database",$4="@firebase/data-connect",q4="@firebase/database-compat",W4="@firebase/functions",H4="@firebase/functions-compat",K4="@firebase/installations",G4="@firebase/installations-compat",Q4="@firebase/messaging",Y4="@firebase/messaging-compat",X4="@firebase/performance",J4="@firebase/performance-compat",Z4="@firebase/remote-config",eB="@firebase/remote-config-compat",tB="@firebase/storage",nB="@firebase/storage-compat",rB="@firebase/firestore",iB="@firebase/vertexai",sB="@firebase/firestore-compat",oB="firebase",aB="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="[DEFAULT]",lB={[Jm]:"fire-core",[B4]:"fire-core-compat",[D4]:"fire-analytics",[O4]:"fire-analytics-compat",[U4]:"fire-app-check",[V4]:"fire-app-check-compat",[F4]:"fire-auth",[z4]:"fire-auth-compat",[j4]:"fire-rtdb",[$4]:"fire-data-connect",[q4]:"fire-rtdb-compat",[W4]:"fire-fn",[H4]:"fire-fn-compat",[K4]:"fire-iid",[G4]:"fire-iid-compat",[Q4]:"fire-fcm",[Y4]:"fire-fcm-compat",[X4]:"fire-perf",[J4]:"fire-perf-compat",[Z4]:"fire-rc",[eB]:"fire-rc-compat",[tB]:"fire-gcs",[nB]:"fire-gcs-compat",[rB]:"fire-fst",[sB]:"fire-fst-compat",[iB]:"fire-vertex","fire-js":"fire-js",[oB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Map,uB=new Map,eg=new Map;function h_(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(eg.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;eg.set(e,t);for(const n of Bu.values())h_(n,t);for(const n of uB.values())h_(n,t);return!0}function H0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new ic("app","Firebase",cB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new To("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=aB;function K0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw bs.create("bad-app-name",{appName:String(i)});if(n||(n=RT()),!n)throw bs.create("no-options");const s=Bu.get(i);if(s){if(So(n,s.options)&&So(r,s.config))return s;throw bs.create("duplicate-app",{appName:i})}const o=new y4(i);for(const l of eg.values())o.addComponent(l);const a=new hB(n,r,o);return Bu.set(i,a),a}function MT(t=Zm){const e=Bu.get(t);if(!e&&t===Zm&&RT())return K0();if(!e)throw bs.create("no-app",{appName:t});return e}function f_(){return Array.from(Bu.values())}function xs(t,e,n){var r;let i=(r=lB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(a.join(" "));return}qa(new To(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB="firebase-heartbeat-database",dB=1,Ou="firebase-heartbeat-store";let Bp=null;function LT(){return Bp||(Bp=C4(fB,dB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),Bp}async function pB(t){try{const n=(await LT()).transaction(Ou),r=await n.objectStore(Ou).get(BT(t));return await n.done,r}catch(e){if(e instanceof $i)Vi.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function d_(t,e){try{const r=(await LT()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(e,BT(t)),await r.done}catch(n){if(n instanceof $i)Vi.warn(n.message);else{const r=bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(r.message)}}}function BT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=1024,gB=30;class yB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=p_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>gB){const o=_B(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p_(),{heartbeatsToSend:r,unsentEntries:i}=vB(this._heartbeatsCache.heartbeats),s=hf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Vi.warn(n),""}}}function p_(){return new Date().toISOString().substring(0,10)}function vB(t,e=mB){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),m_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),m_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s4()?o4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return d_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return d_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function m_(t){return hf(JSON.stringify({version:2,heartbeats:t})).length}function _B(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){qa(new To("platform-logger",e=>new M4(e),"PRIVATE")),qa(new To("heartbeat",e=>new yB(e),"PRIVATE")),xs(Jm,c_,t),xs(Jm,c_,"esm2017"),xs("fire-js","")}EB("");function G0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IB=OT,DT=new ic("auth","Firebase",OT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new q0("@firebase/auth");function SB(t,...e){ff.logLevel<=He.WARN&&ff.warn(`Auth (${ll}): ${t}`,...e)}function vh(t,...e){ff.logLevel<=He.ERROR&&ff.error(`Auth (${ll}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,...e){throw Q0(t,...e)}function si(t,...e){return Q0(t,...e)}function VT(t,e,n){const r=Object.assign(Object.assign({},IB()),{[e]:n});return new ic("auth","Firebase",r).create(e,{appName:t.name})}function ks(t){return VT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DT.create(t,...e)}function ke(t,e,...n){if(!t)throw Q0(e,...n)}function Ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vh(e),new Error(e)}function Ui(t,e){t||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TB(){return g_()==="http:"||g_()==="https:"}function g_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TB()||t4()||"connection"in navigator)?navigator.onLine:!0}function bB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ui(n>e,"Short delay should be less than long delay!"),this.isMobile=JL()||n4()}get(){return AB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e){Ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RB=new oc(3e4,6e4);function Oo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qs(t,e,n,r,i={}){return FT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=sc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return e4()||(c.referrerPolicy="no-referrer"),UT.fetch()(await zT(t,t.config.apiHost,n,a),c)})}async function FT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xB),e);try{const i=new PB(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Zc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zc(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw VT(t,f,c);Gr(t,f)}}catch(i){if(i instanceof $i)throw i;Gr(t,"network-request-failed",{message:String(i)})}}async function fd(t,e,n,r,i={}){const s=await qs(t,e,n,r,i);return"mfaPendingCredential"in s&&Gr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function zT(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Y0(t.config,i):`${t.config.apiScheme}://${i}`;return kB.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function CB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(si(this.auth,"network-request-failed")),RB.get())})}}function Zc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=si(t,e,r);return i.customData._tokenResponse=n,i}function y_(t){return t!==void 0&&t.enterprise!==void 0}class NB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MB(t,e){return qs(t,"GET","/v2/recaptchaConfig",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t,e){return qs(t,"POST","/v1/accounts:delete",e)}async function df(t,e){return qs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BB(t,e=!1){const n=gn(t),r=await n.getIdToken(e),i=X0(r);ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ou(Op(i.auth_time)),issuedAtTime:ou(Op(i.iat)),expirationTime:ou(Op(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Op(t){return Number(t)*1e3}function X0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const i=xT(n);return i?JSON.parse(i):(vh("Failed to decode base64 JWT payload"),null)}catch(i){return vh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function v_(t){const e=X0(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $i&&OB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Du(t,df(n,{idToken:r}));ke(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jT(s.providerUserInfo):[],a=UB(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ng(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function VB(t){const e=gn(t);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jT(t){return t.map(e=>{var{providerId:n}=e,r=G0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){const n=await FT(t,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await zT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zB(t,e){return qs(t,"POST","/v2/accounts:revokeToken",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=v_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await FB(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ra;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ke(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=G0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ng(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Du(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BB(this,e)}reload(){return VB(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await Du(this,LB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,S=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,M=(o=n.photoURL)!==null&&o!==void 0?o:void 0,L=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,C=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:q,isAnonymous:Y,providerData:X,stsTokenManager:O}=n;ke(k&&O,e,"internal-error");const P=Ra.fromJSON(this.name,O);ke(typeof k=="string",e,"internal-error"),es(m,e.name),es(w,e.name),ke(typeof q=="boolean",e,"internal-error"),ke(typeof Y=="boolean",e,"internal-error"),es(S,e.name),es(M,e.name),es(L,e.name),es(R,e.name),es(b,e.name),es(C,e.name);const D=new zr({uid:k,auth:e,email:w,emailVerified:q,displayName:m,isAnonymous:Y,photoURL:M,phoneNumber:S,tenantId:L,stsTokenManager:P,createdAt:b,lastLoginAt:C});return X&&Array.isArray(X)&&(D.providerData=X.map(z=>Object.assign({},z))),R&&(D._redirectEventId=R),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ra;i.updateFromServerResponse(n);const s=new zr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ke(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ra;a.updateFromIdToken(r);const l=new zr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ng(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;function Ci(t){Ui(t instanceof Function,"Expected a class definition");let e=w_.get(t);return e?(Ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$T.type="NONE";const __=$T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wh(this.userKey,i.apiKey,s),this.fullPersistenceKey=wh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await df(this.auth,{idToken:e}).catch(()=>{});return n?zr._fromGetAccountInfoResponse(this.auth,n,e):null}return zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ca(Ci(__),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ci(__);const o=wh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const f=await c._get(o);if(f){let m;if(typeof f=="string"){const w=await df(e,{idToken:f}).catch(()=>{});if(!w)break;m=await zr._fromGetAccountInfoResponse(e,w,f)}else m=zr._fromJSON(e,f);c!==s&&(a=m),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ca(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ca(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QT(e))return"Blackberry";if(YT(e))return"Webos";if(WT(e))return"Safari";if((e.includes("chrome/")||HT(e))&&!e.includes("edge/"))return"Chrome";if(GT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qT(t=jn()){return/firefox\//i.test(t)}function WT(t=jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HT(t=jn()){return/crios\//i.test(t)}function KT(t=jn()){return/iemobile/i.test(t)}function GT(t=jn()){return/android/i.test(t)}function QT(t=jn()){return/blackberry/i.test(t)}function YT(t=jn()){return/webos/i.test(t)}function J0(t=jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jB(t=jn()){var e;return J0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $B(){return r4()&&document.documentMode===10}function XT(t=jn()){return J0(t)||GT(t)||YT(t)||QT(t)||/windows phone/i.test(t)||KT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e=[]){let n;switch(t){case"Browser":n=E_(jn());break;case"Worker":n=`${E_(jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e={}){return qs(t,"GET","/v2/passwordPolicy",Oo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=6;class KB{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:HB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new qB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ci(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await df(this,{idToken:e}),r=await zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(ks(this));const n=e?gn(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WB(this),n=new KB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ic("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ci(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[Ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ul(t){return gn(t)}class I_{constructor(e){this.auth=e,this.observer=null,this.addObserver=h4(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QB(t){dd=t}function ZT(t){return dd.loadJS(t)}function YB(){return dd.recaptchaEnterpriseScript}function XB(){return dd.gapiScript}function JB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ZB{constructor(){this.enterprise=new eO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tO="recaptcha-enterprise",eA="NO_RECAPTCHA";class nO{constructor(e){this.type=tO,this.auth=ul(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{MB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new NB(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;y_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(eA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZB().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&y_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YB();l.length!==0&&(l+=a),ZT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Vl(t,e,n,r=!1,i=!1){const s=new nO(t);let o;if(i)o=eA;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function S_(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Vl(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Vl(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Vl(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await Vl(t,e,n,!1,!0);return r(t,f)}return Promise.reject(l)})}else{const a=await Vl(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e){const n=H0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(So(s,e??{}))return i;Gr(i,"already-initialized")}return n.initialize({options:e})}function iO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sO(t,e,n){const r=ul(t);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=tA(e),{host:o,port:a}=oO(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},f=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(So(c,r.config.emulator)&&So(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,i||aO()}function tA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oO(t){const e=tA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:T_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:T_(o)}}}function T_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function lO(t,e){return qs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e){return fd(t,"POST","/v1/accounts:signInWithPassword",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(t,e){return fd(t,"POST","/v1/accounts:signInWithEmailLink",Oo(t,e))}async function hO(t,e){return fd(t,"POST","/v1/accounts:signInWithEmailLink",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Z0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,n,"signInWithPassword",uO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return cO(e,{email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return S_(e,r,"signUpPassword",lO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hO(e,{idToken:n,email:this._email,oobCode:this._password});default:Gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e){return fd(t,"POST","/v1/accounts:signInWithIdp",Oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="http://localhost";class Ao extends Z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=G0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ao(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Pa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Pa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pa(e,n)}buildRequest(){const e={requestUri:fO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pO(t){const e=Wl(Hl(t)).link,n=e?Wl(Hl(e)).deep_link_id:null,r=Wl(Hl(t)).deep_link_id;return(r?Wl(Hl(r)).link:null)||r||n||e||t}class ey{constructor(e){var n,r,i,s,o,a;const l=Wl(Hl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,m=dO((i=l.mode)!==null&&i!==void 0?i:null);ke(c&&f&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=pO(e);try{return new ey(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.providerId=cl.PROVIDER_ID}static credential(e,n){return Vu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ey.parseLink(n);return ke(r,"argument-error"),Vu._fromEmailAndCode(e,r.code,r.tenantId)}}cl.PROVIDER_ID="password";cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends nA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends ac{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ao._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return os.credential(n,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends ac{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends ac{constructor(){super("twitter.com")}static credential(e,n){return Ao._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await zr._fromIdTokenResponse(e,r,i),o=A_(r);return new Wa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=A_(r);return new Wa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function A_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends $i{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new mf(e,n,r,i)}}function rA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(t,s,e,r):s})}async function mO(t,e,n=!1){const r=await Du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(t,e,n=!1){const{auth:r}=t;if(Fr(r.app))return Promise.reject(ks(r));const i="reauthenticate";try{const s=await Du(t,rA(r,i,e,t),n);ke(s.idToken,r,"internal-error");const o=X0(s.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),Wa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e,n=!1){if(Fr(t.app))return Promise.reject(ks(t));const r="signIn",i=await rA(t,r,e),s=await Wa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function yO(t,e){return iA(ul(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t){const e=ul(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function wO(t,e,n){return Fr(t.app)?Promise.reject(ks(t)):yO(gn(t),cl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vO(t),r})}function _O(t,e,n,r){return gn(t).onIdTokenChanged(e,n,r)}function EO(t,e,n){return gn(t).beforeAuthStateChanged(e,n)}function IO(t,e,n,r){return gn(t).onAuthStateChanged(e,n,r)}function SO(t){return gn(t).signOut()}const gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gf,"1"),this.storage.removeItem(gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=1e3,AO=10;class oA extends sA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$B()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,AO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oA.type="LOCAL";const bO=oA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends sA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aA.type="SESSION";const lA=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await xO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ty("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const w=m;if(w.data.eventId===c)switch(w.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(w.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return window}function RO(t){oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function CO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NO(){return uA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebaseLocalStorageDb",MO=1,yf="firebaseLocalStorage",hA="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function LO(){const t=indexedDB.deleteDatabase(cA);return new lc(t).toPromise()}function rg(){const t=indexedDB.open(cA,MO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yf,{keyPath:hA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yf)?e(r):(r.close(),await LO(),e(await rg()))})})}async function b_(t,e,n){const r=md(t,!0).put({[hA]:e,value:n});return new lc(r).toPromise()}async function BO(t,e){const n=md(t,!1).get(e),r=await new lc(n).toPromise();return r===void 0?null:r.value}function x_(t,e){const n=md(t,!0).delete(e);return new lc(n).toPromise()}const OO=800,DO=3;class fA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(NO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CO(),!this.activeServiceWorker)return;this.sender=new kO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await b_(e,gf,"1"),await x_(e,gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>b_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>x_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=md(i,!1).getAll();return new lc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fA.type="LOCAL";const VO=fA;new oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t,e){return e?Ci(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends Z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FO(t){return iA(t.auth,new ny(t),t.bypassAuthState)}function zO(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),gO(n,new ny(t),t.bypassAuthState)}async function jO(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),mO(n,new ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FO;case"linkViaPopup":case"linkViaRedirect":return jO;case"reauthViaPopup":case"reauthViaRedirect":return zO;default:Gr(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new oc(2e3,1e4);class _a extends dA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Ui(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$O.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="pendingRedirect",_h=new Map;class WO extends dA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const r=await HO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HO(t,e){const n=QO(e),r=GO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function KO(t,e){_h.set(t._key(),e)}function GO(t){return Ci(t._redirectPersistence)}function QO(t){return wh(qO,t.config.apiKey,t.name)}async function YO(t,e,n=!1){if(Fr(t.app))return Promise.reject(ks(t));const r=ul(t),i=UO(r,e),o=await new WO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=10*60*1e3;class JO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(si(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XO&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e={}){return qs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nD=/^https?/;async function rD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eD(t);for(const n of e)try{if(iD(n))return}catch{}Gr(t,"unauthorized-domain")}function iD(t){const e=tg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!nD.test(n))return!1;if(tD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=new oc(3e4,6e4);function R_(){const t=oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oD(t){return new Promise((e,n)=>{var r,i,s;function o(){R_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R_(),n(si(t,"network-request-failed"))},timeout:sD.get()})}if(!((i=(r=oi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=oi().gapi)===null||s===void 0)&&s.load)o();else{const a=JB("iframefcb");return oi()[a]=()=>{gapi.load?o():n(si(t,"network-request-failed"))},ZT(`${XB()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function aD(t){return Eh=Eh||oD(t),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new oc(5e3,15e3),uD="__/auth/iframe",cD="emulator/auth/iframe",hD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dD(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Y0(e,cD):`https://${t.config.authDomain}/${uD}`,r={apiKey:e.apiKey,appName:t.name,v:ll},i=fD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${sc(r).slice(1)}`}async function pD(t){const e=await aD(t),n=oi().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:dD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=si(t,"network-request-failed"),a=oi().setTimeout(()=>{s(o)},lD.get());function l(){oi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gD=500,yD=600,vD="_blank",wD="http://localhost";class C_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _D(t,e,n,r=gD,i=yD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},mD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=jn().toLowerCase();n&&(a=HT(c)?vD:n),qT(c)&&(e=e||wD,l.scrollbars="yes");const f=Object.entries(l).reduce((w,[S,M])=>`${w}${S}=${M},`,"");if(jB(c)&&a!=="_self")return ED(e||"",a),new C_(null);const m=window.open(e||"",a,f);ke(m,t,"popup-blocked");try{m.focus()}catch{}return new C_(m)}function ED(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="__/auth/handler",SD="emulator/auth/handler",TD=encodeURIComponent("fac");async function P_(t,e,n,r,i,s){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ll,eventId:i};if(e instanceof nA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",c4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof ac){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),c=l?`#${TD}=${encodeURIComponent(l)}`:"";return`${AD(t)}?${sc(a).slice(1)}${c}`}function AD({config:t}){return t.emulator?Y0(t,SD):`https://${t.authDomain}/${ID}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="webStorageSupport";class bD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lA,this._completeRedirectFn=YO,this._overrideRedirectResult=KO}async _openPopup(e,n,r,i){var s;Ui((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await P_(e,n,r,tg(),i);return _D(e,o,ty())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await P_(e,n,r,tg(),i);return RO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ui(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pD(e),r=new JO(e);return n.register("authEvent",i=>(ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dp,{type:Dp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Dp];o!==void 0&&n(!!o),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XT()||WT()||J0()}}const xD=bD;var N_="@firebase/auth",M_="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CD(t){qa(new To("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JT(t)},c=new GB(r,i,s,l);return iO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qa(new To("auth-internal",e=>{const n=ul(e.getProvider("auth").getImmediate());return(r=>new kD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(N_,M_,RD(t)),xs(N_,M_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=5*60,ND=CT("authIdTokenMaxAge")||PD;let L_=null;const MD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ND)return;const i=n==null?void 0:n.token;L_!==i&&(L_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mA(t=MT()){const e=H0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rO(t,{popupRedirectResolver:xD,persistence:[VO,bO,lA]}),r=CT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=MD(s.toString());EO(n,o,()=>o(n.currentUser)),_O(n,a=>o(a))}}const i=kT("auth");return i&&sO(n,`http://${i}`),n}function LD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}QB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=si("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",LD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CD("Browser");var BD="firebase",OD="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(BD,OD,"app");const DD={apiKey:"AIzaSyCYOFhmThtA_5F9h67lGPLXuO0ZZixy29o",authDomain:"mage-trump-token.firebaseapp.com",databaseURL:"https://mage-trump-token-default-rtdb.firebaseio.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.firebasestorage.app",messagingSenderId:"974753040843",appId:"1:974753040843:web:8de9a9f42ac4f24550ce4e"},VD=K0(DD),Vp=mA(VD),gA=le.createContext(),UD=({children:t})=>{const[e,n]=le.useState(null),[r,i]=le.useState(!0);le.useEffect(()=>IO(Vp,a=>{n(a),i(!1)}),[]);const s=(a,l)=>wO(Vp,a,l),o=()=>SO(Vp);return se.jsx(gA.Provider,{value:{user:e,login:s,logout:o},children:!r&&t})},FD=()=>le.useContext(gA),zD=""+new URL("front-6e9bd7de.png",import.meta.url).href;var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,yA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,P){function D(){}D.prototype=P.prototype,O.D=P.prototype,O.prototype=new D,O.prototype.constructor=O,O.C=function(z,$,W){for(var E=Array(arguments.length-2),h=2;h<arguments.length;h++)E[h-2]=arguments[h];return P.prototype[$].apply(z,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,P,D){D||(D=0);var z=Array(16);if(typeof P=="string")for(var $=0;16>$;++$)z[$]=P.charCodeAt(D++)|P.charCodeAt(D++)<<8|P.charCodeAt(D++)<<16|P.charCodeAt(D++)<<24;else for($=0;16>$;++$)z[$]=P[D++]|P[D++]<<8|P[D++]<<16|P[D++]<<24;P=O.g[0],D=O.g[1],$=O.g[2];var W=O.g[3],E=P+(W^D&($^W))+z[0]+3614090360&4294967295;P=D+(E<<7&4294967295|E>>>25),E=W+($^P&(D^$))+z[1]+3905402710&4294967295,W=P+(E<<12&4294967295|E>>>20),E=$+(D^W&(P^D))+z[2]+606105819&4294967295,$=W+(E<<17&4294967295|E>>>15),E=D+(P^$&(W^P))+z[3]+3250441966&4294967295,D=$+(E<<22&4294967295|E>>>10),E=P+(W^D&($^W))+z[4]+4118548399&4294967295,P=D+(E<<7&4294967295|E>>>25),E=W+($^P&(D^$))+z[5]+1200080426&4294967295,W=P+(E<<12&4294967295|E>>>20),E=$+(D^W&(P^D))+z[6]+2821735955&4294967295,$=W+(E<<17&4294967295|E>>>15),E=D+(P^$&(W^P))+z[7]+4249261313&4294967295,D=$+(E<<22&4294967295|E>>>10),E=P+(W^D&($^W))+z[8]+1770035416&4294967295,P=D+(E<<7&4294967295|E>>>25),E=W+($^P&(D^$))+z[9]+2336552879&4294967295,W=P+(E<<12&4294967295|E>>>20),E=$+(D^W&(P^D))+z[10]+4294925233&4294967295,$=W+(E<<17&4294967295|E>>>15),E=D+(P^$&(W^P))+z[11]+2304563134&4294967295,D=$+(E<<22&4294967295|E>>>10),E=P+(W^D&($^W))+z[12]+1804603682&4294967295,P=D+(E<<7&4294967295|E>>>25),E=W+($^P&(D^$))+z[13]+4254626195&4294967295,W=P+(E<<12&4294967295|E>>>20),E=$+(D^W&(P^D))+z[14]+2792965006&4294967295,$=W+(E<<17&4294967295|E>>>15),E=D+(P^$&(W^P))+z[15]+1236535329&4294967295,D=$+(E<<22&4294967295|E>>>10),E=P+($^W&(D^$))+z[1]+4129170786&4294967295,P=D+(E<<5&4294967295|E>>>27),E=W+(D^$&(P^D))+z[6]+3225465664&4294967295,W=P+(E<<9&4294967295|E>>>23),E=$+(P^D&(W^P))+z[11]+643717713&4294967295,$=W+(E<<14&4294967295|E>>>18),E=D+(W^P&($^W))+z[0]+3921069994&4294967295,D=$+(E<<20&4294967295|E>>>12),E=P+($^W&(D^$))+z[5]+3593408605&4294967295,P=D+(E<<5&4294967295|E>>>27),E=W+(D^$&(P^D))+z[10]+38016083&4294967295,W=P+(E<<9&4294967295|E>>>23),E=$+(P^D&(W^P))+z[15]+3634488961&4294967295,$=W+(E<<14&4294967295|E>>>18),E=D+(W^P&($^W))+z[4]+3889429448&4294967295,D=$+(E<<20&4294967295|E>>>12),E=P+($^W&(D^$))+z[9]+568446438&4294967295,P=D+(E<<5&4294967295|E>>>27),E=W+(D^$&(P^D))+z[14]+3275163606&4294967295,W=P+(E<<9&4294967295|E>>>23),E=$+(P^D&(W^P))+z[3]+4107603335&4294967295,$=W+(E<<14&4294967295|E>>>18),E=D+(W^P&($^W))+z[8]+1163531501&4294967295,D=$+(E<<20&4294967295|E>>>12),E=P+($^W&(D^$))+z[13]+2850285829&4294967295,P=D+(E<<5&4294967295|E>>>27),E=W+(D^$&(P^D))+z[2]+4243563512&4294967295,W=P+(E<<9&4294967295|E>>>23),E=$+(P^D&(W^P))+z[7]+1735328473&4294967295,$=W+(E<<14&4294967295|E>>>18),E=D+(W^P&($^W))+z[12]+2368359562&4294967295,D=$+(E<<20&4294967295|E>>>12),E=P+(D^$^W)+z[5]+4294588738&4294967295,P=D+(E<<4&4294967295|E>>>28),E=W+(P^D^$)+z[8]+2272392833&4294967295,W=P+(E<<11&4294967295|E>>>21),E=$+(W^P^D)+z[11]+1839030562&4294967295,$=W+(E<<16&4294967295|E>>>16),E=D+($^W^P)+z[14]+4259657740&4294967295,D=$+(E<<23&4294967295|E>>>9),E=P+(D^$^W)+z[1]+2763975236&4294967295,P=D+(E<<4&4294967295|E>>>28),E=W+(P^D^$)+z[4]+1272893353&4294967295,W=P+(E<<11&4294967295|E>>>21),E=$+(W^P^D)+z[7]+4139469664&4294967295,$=W+(E<<16&4294967295|E>>>16),E=D+($^W^P)+z[10]+3200236656&4294967295,D=$+(E<<23&4294967295|E>>>9),E=P+(D^$^W)+z[13]+681279174&4294967295,P=D+(E<<4&4294967295|E>>>28),E=W+(P^D^$)+z[0]+3936430074&4294967295,W=P+(E<<11&4294967295|E>>>21),E=$+(W^P^D)+z[3]+3572445317&4294967295,$=W+(E<<16&4294967295|E>>>16),E=D+($^W^P)+z[6]+76029189&4294967295,D=$+(E<<23&4294967295|E>>>9),E=P+(D^$^W)+z[9]+3654602809&4294967295,P=D+(E<<4&4294967295|E>>>28),E=W+(P^D^$)+z[12]+3873151461&4294967295,W=P+(E<<11&4294967295|E>>>21),E=$+(W^P^D)+z[15]+530742520&4294967295,$=W+(E<<16&4294967295|E>>>16),E=D+($^W^P)+z[2]+3299628645&4294967295,D=$+(E<<23&4294967295|E>>>9),E=P+($^(D|~W))+z[0]+4096336452&4294967295,P=D+(E<<6&4294967295|E>>>26),E=W+(D^(P|~$))+z[7]+1126891415&4294967295,W=P+(E<<10&4294967295|E>>>22),E=$+(P^(W|~D))+z[14]+2878612391&4294967295,$=W+(E<<15&4294967295|E>>>17),E=D+(W^($|~P))+z[5]+4237533241&4294967295,D=$+(E<<21&4294967295|E>>>11),E=P+($^(D|~W))+z[12]+1700485571&4294967295,P=D+(E<<6&4294967295|E>>>26),E=W+(D^(P|~$))+z[3]+2399980690&4294967295,W=P+(E<<10&4294967295|E>>>22),E=$+(P^(W|~D))+z[10]+4293915773&4294967295,$=W+(E<<15&4294967295|E>>>17),E=D+(W^($|~P))+z[1]+2240044497&4294967295,D=$+(E<<21&4294967295|E>>>11),E=P+($^(D|~W))+z[8]+1873313359&4294967295,P=D+(E<<6&4294967295|E>>>26),E=W+(D^(P|~$))+z[15]+4264355552&4294967295,W=P+(E<<10&4294967295|E>>>22),E=$+(P^(W|~D))+z[6]+2734768916&4294967295,$=W+(E<<15&4294967295|E>>>17),E=D+(W^($|~P))+z[13]+1309151649&4294967295,D=$+(E<<21&4294967295|E>>>11),E=P+($^(D|~W))+z[4]+4149444226&4294967295,P=D+(E<<6&4294967295|E>>>26),E=W+(D^(P|~$))+z[11]+3174756917&4294967295,W=P+(E<<10&4294967295|E>>>22),E=$+(P^(W|~D))+z[2]+718787259&4294967295,$=W+(E<<15&4294967295|E>>>17),E=D+(W^($|~P))+z[9]+3951481745&4294967295,O.g[0]=O.g[0]+P&4294967295,O.g[1]=O.g[1]+($+(E<<21&4294967295|E>>>11))&4294967295,O.g[2]=O.g[2]+$&4294967295,O.g[3]=O.g[3]+W&4294967295}r.prototype.u=function(O,P){P===void 0&&(P=O.length);for(var D=P-this.blockSize,z=this.B,$=this.h,W=0;W<P;){if($==0)for(;W<=D;)i(this,O,W),W+=this.blockSize;if(typeof O=="string"){for(;W<P;)if(z[$++]=O.charCodeAt(W++),$==this.blockSize){i(this,z),$=0;break}}else for(;W<P;)if(z[$++]=O[W++],$==this.blockSize){i(this,z),$=0;break}}this.h=$,this.o+=P},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var P=1;P<O.length-8;++P)O[P]=0;var D=8*this.o;for(P=O.length-8;P<O.length;++P)O[P]=D&255,D/=256;for(this.u(O),O=Array(16),P=D=0;4>P;++P)for(var z=0;32>z;z+=8)O[D++]=this.g[P]>>>z&255;return O};function s(O,P){var D=a;return Object.prototype.hasOwnProperty.call(D,O)?D[O]:D[O]=P(O)}function o(O,P){this.h=P;for(var D=[],z=!0,$=O.length-1;0<=$;$--){var W=O[$]|0;z&&W==P||(D[$]=W,z=!1)}this.g=D}var a={};function l(O){return-128<=O&&128>O?s(O,function(P){return new o([P|0],0>P?-1:0)}):new o([O|0],0>O?-1:0)}function c(O){if(isNaN(O)||!isFinite(O))return m;if(0>O)return R(c(-O));for(var P=[],D=1,z=0;O>=D;z++)P[z]=O/D|0,D*=4294967296;return new o(P,0)}function f(O,P){if(O.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(O.charAt(0)=="-")return R(f(O.substring(1),P));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=c(Math.pow(P,8)),z=m,$=0;$<O.length;$+=8){var W=Math.min(8,O.length-$),E=parseInt(O.substring($,$+W),P);8>W?(W=c(Math.pow(P,W)),z=z.j(W).add(c(E))):(z=z.j(D),z=z.add(c(E)))}return z}var m=l(0),w=l(1),S=l(16777216);t=o.prototype,t.m=function(){if(L(this))return-R(this).m();for(var O=0,P=1,D=0;D<this.g.length;D++){var z=this.i(D);O+=(0<=z?z:4294967296+z)*P,P*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(M(this))return"0";if(L(this))return"-"+R(this).toString(O);for(var P=c(Math.pow(O,6)),D=this,z="";;){var $=q(D,P).g;D=b(D,$.j(P));var W=((0<D.g.length?D.g[0]:D.h)>>>0).toString(O);if(D=$,M(D))return W+z;for(;6>W.length;)W="0"+W;z=W+z}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function M(O){if(O.h!=0)return!1;for(var P=0;P<O.g.length;P++)if(O.g[P]!=0)return!1;return!0}function L(O){return O.h==-1}t.l=function(O){return O=b(this,O),L(O)?-1:M(O)?0:1};function R(O){for(var P=O.g.length,D=[],z=0;z<P;z++)D[z]=~O.g[z];return new o(D,~O.h).add(w)}t.abs=function(){return L(this)?R(this):this},t.add=function(O){for(var P=Math.max(this.g.length,O.g.length),D=[],z=0,$=0;$<=P;$++){var W=z+(this.i($)&65535)+(O.i($)&65535),E=(W>>>16)+(this.i($)>>>16)+(O.i($)>>>16);z=E>>>16,W&=65535,E&=65535,D[$]=E<<16|W}return new o(D,D[D.length-1]&-2147483648?-1:0)};function b(O,P){return O.add(R(P))}t.j=function(O){if(M(this)||M(O))return m;if(L(this))return L(O)?R(this).j(R(O)):R(R(this).j(O));if(L(O))return R(this.j(R(O)));if(0>this.l(S)&&0>O.l(S))return c(this.m()*O.m());for(var P=this.g.length+O.g.length,D=[],z=0;z<2*P;z++)D[z]=0;for(z=0;z<this.g.length;z++)for(var $=0;$<O.g.length;$++){var W=this.i(z)>>>16,E=this.i(z)&65535,h=O.i($)>>>16,v=O.i($)&65535;D[2*z+2*$]+=E*v,C(D,2*z+2*$),D[2*z+2*$+1]+=W*v,C(D,2*z+2*$+1),D[2*z+2*$+1]+=E*h,C(D,2*z+2*$+1),D[2*z+2*$+2]+=W*h,C(D,2*z+2*$+2)}for(z=0;z<P;z++)D[z]=D[2*z+1]<<16|D[2*z];for(z=P;z<2*P;z++)D[z]=0;return new o(D,0)};function C(O,P){for(;(O[P]&65535)!=O[P];)O[P+1]+=O[P]>>>16,O[P]&=65535,P++}function k(O,P){this.g=O,this.h=P}function q(O,P){if(M(P))throw Error("division by zero");if(M(O))return new k(m,m);if(L(O))return P=q(R(O),P),new k(R(P.g),R(P.h));if(L(P))return P=q(O,R(P)),new k(R(P.g),P.h);if(30<O.g.length){if(L(O)||L(P))throw Error("slowDivide_ only works with positive integers.");for(var D=w,z=P;0>=z.l(O);)D=Y(D),z=Y(z);var $=X(D,1),W=X(z,1);for(z=X(z,2),D=X(D,2);!M(z);){var E=W.add(z);0>=E.l(O)&&($=$.add(D),W=E),z=X(z,1),D=X(D,1)}return P=b(O,$.j(P)),new k($,P)}for($=m;0<=O.l(P);){for(D=Math.max(1,Math.floor(O.m()/P.m())),z=Math.ceil(Math.log(D)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),W=c(D),E=W.j(P);L(E)||0<E.l(O);)D-=z,W=c(D),E=W.j(P);M(W)&&(W=w),$=$.add(W),O=b(O,E)}return new k($,O)}t.A=function(O){return q(this,O).h},t.and=function(O){for(var P=Math.max(this.g.length,O.g.length),D=[],z=0;z<P;z++)D[z]=this.i(z)&O.i(z);return new o(D,this.h&O.h)},t.or=function(O){for(var P=Math.max(this.g.length,O.g.length),D=[],z=0;z<P;z++)D[z]=this.i(z)|O.i(z);return new o(D,this.h|O.h)},t.xor=function(O){for(var P=Math.max(this.g.length,O.g.length),D=[],z=0;z<P;z++)D[z]=this.i(z)^O.i(z);return new o(D,this.h^O.h)};function Y(O){for(var P=O.g.length+1,D=[],z=0;z<P;z++)D[z]=O.i(z)<<1|O.i(z-1)>>>31;return new o(D,O.h)}function X(O,P){var D=P>>5;P%=32;for(var z=O.g.length-D,$=[],W=0;W<z;W++)$[W]=0<P?O.i(W+D)>>>P|O.i(W+D+1)<<32-P:O.i(W+D);return new o($,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Rs=o}).apply(typeof B_<"u"?B_:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vA,Kl,wA,Ih,ig,_A,EA,IA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,_){return u==Array.prototype||u==Object.prototype||(u[d]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var d=0;d<u.length;++d){var _=u[d];if(_&&_.Math==Math)return _}throw Error("Cannot find globalThis object")}var r=n(this);function i(u,d){if(d)e:{var _=r;u=u.split(".");for(var B=0;B<u.length-1;B++){var K=u[B];if(!(K in _))break e;_=_[K]}u=u[u.length-1],B=_[u],d=d(B),d!=B&&d!=null&&e(_,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var _=0,B=!1,K={next:function(){if(!B&&_<u.length){var ee=_++;return{value:d(ee,u[ee]),done:!1}}return B=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function f(u,d,_){return u.call.apply(u.bind,arguments)}function m(u,d,_){if(!u)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,B),u.apply(d,K)}}return function(){return u.apply(d,arguments)}}function w(u,d,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,w.apply(null,arguments)}function S(u,d){var _=Array.prototype.slice.call(arguments,1);return function(){var B=_.slice();return B.push.apply(B,arguments),u.apply(this,B)}}function M(u,d){function _(){}_.prototype=d.prototype,u.aa=d.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(B,K,ee){for(var he=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)he[ft-2]=arguments[ft];return d.prototype[K].apply(B,he)}}function L(u){const d=u.length;if(0<d){const _=Array(d);for(let B=0;B<d;B++)_[B]=u[B];return _}return[]}function R(u,d){for(let _=1;_<arguments.length;_++){const B=arguments[_];if(l(B)){const K=u.length||0,ee=B.length||0;u.length=K+ee;for(let he=0;he<ee;he++)u[K+he]=B[he]}else u.push(B)}}class b{constructor(d,_){this.i=d,this.j=_,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function C(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function q(u){return q[" "](u),u}q[" "]=function(){};var Y=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function X(u,d,_){for(const B in u)d.call(_,u[B],B,u)}function O(u,d){for(const _ in u)d.call(void 0,u[_],_,u)}function P(u){const d={};for(const _ in u)d[_]=u[_];return d}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(u,d){let _,B;for(let K=1;K<arguments.length;K++){B=arguments[K];for(_ in B)u[_]=B[_];for(let ee=0;ee<D.length;ee++)_=D[ee],Object.prototype.hasOwnProperty.call(B,_)&&(u[_]=B[_])}}function $(u){var d=1;u=u.split(":");const _=[];for(;0<d&&u.length;)_.push(u.shift()),d--;return u.length&&_.push(u.join(":")),_}function W(u){a.setTimeout(()=>{throw u},0)}function E(){var u=U;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class h{constructor(){this.h=this.g=null}add(d,_){const B=v.get();B.set(d,_),this.h?this.h.next=B:this.g=B,this.h=B}}var v=new b(()=>new I,u=>u.reset());class I{constructor(){this.next=this.g=this.h=null}set(d,_){this.h=d,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let x,A=!1,U=new h,j=()=>{const u=a.Promise.resolve(void 0);x=()=>{u.then(N)}};var N=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(_){W(_)}var d=v;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}A=!1};function g(){this.s=this.s,this.C=this.C}g.prototype.s=!1,g.prototype.ma=function(){this.s||(this.s=!0,this.N())},g.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};a.addEventListener("test",_,d),a.removeEventListener("test",_,d)}catch{}return u}();function ae(u,d){if(V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,B=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(Y){e:{try{q(d.nodeName);var K=!0;break e}catch{}K=!1}K||(d=null)}}else _=="mouseover"?d=u.fromElement:_=="mouseout"&&(d=u.toElement);this.relatedTarget=d,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ce[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ae.aa.h.call(this)}}M(ae,V);var ce={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Ce(u,d,_,B,K){this.listener=u,this.proxy=null,this.src=d,this.type=_,this.capture=!!B,this.ha=K,this.key=++Ee,this.da=this.fa=!1}function ut(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function De(u){this.src=u,this.g={},this.h=0}De.prototype.add=function(u,d,_,B,K){var ee=u.toString();u=this.g[ee],u||(u=this.g[ee]=[],this.h++);var he=bt(u,d,B,K);return-1<he?(d=u[he],_||(d.fa=!1)):(d=new Ce(d,this.src,ee,!!B,K),d.fa=_,u.push(d)),d};function Oe(u,d){var _=d.type;if(_ in u.g){var B=u.g[_],K=Array.prototype.indexOf.call(B,d,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(B,K,1),ee&&(ut(d),u.g[_].length==0&&(delete u.g[_],u.h--))}}function bt(u,d,_,B){for(var K=0;K<u.length;++K){var ee=u[K];if(!ee.da&&ee.listener==d&&ee.capture==!!_&&ee.ha==B)return K}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),qe={};function mi(u,d,_,B,K){if(B&&B.once)return gi(u,d,_,B,K);if(Array.isArray(d)){for(var ee=0;ee<d.length;ee++)mi(u,d[ee],_,B,K);return null}return _=st(_),u&&u[be]?u.K(d,_,c(B)?!!B.capture:!!B,K):tt(u,d,_,!1,B,K)}function tt(u,d,_,B,K,ee){if(!d)throw Error("Invalid event type");var he=c(K)?!!K.capture:!!K,ft=it(u);if(ft||(u[Fe]=ft=new De(u)),_=ft.add(d,_,B,he,ee),_.proxy)return _;if(B=dt(),_.proxy=B,B.src=u,B.listener=_,u.addEventListener)ie||(K=he),K===void 0&&(K=!1),u.addEventListener(d.toString(),B,K);else if(u.attachEvent)u.attachEvent(Xt(d.toString()),B);else if(u.addListener&&u.removeListener)u.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return _}function dt(){function u(_){return d.call(u.src,u.listener,_)}const d=rt;return u}function gi(u,d,_,B,K){if(Array.isArray(d)){for(var ee=0;ee<d.length;ee++)gi(u,d[ee],_,B,K);return null}return _=st(_),u&&u[be]?u.L(d,_,c(B)?!!B.capture:!!B,K):tt(u,d,_,!0,B,K)}function nt(u,d,_,B,K){if(Array.isArray(d))for(var ee=0;ee<d.length;ee++)nt(u,d[ee],_,B,K);else B=c(B)?!!B.capture:!!B,_=st(_),u&&u[be]?(u=u.i,d=String(d).toString(),d in u.g&&(ee=u.g[d],_=bt(ee,_,B,K),-1<_&&(ut(ee[_]),Array.prototype.splice.call(ee,_,1),ee.length==0&&(delete u.g[d],u.h--)))):u&&(u=it(u))&&(d=u.g[d.toString()],u=-1,d&&(u=bt(d,_,B,K)),(_=-1<u?d[u]:null)&&Ye(_))}function Ye(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[be])Oe(d.i,u);else{var _=u.type,B=u.proxy;d.removeEventListener?d.removeEventListener(_,B,u.capture):d.detachEvent?d.detachEvent(Xt(_),B):d.addListener&&d.removeListener&&d.removeListener(B),(_=it(d))?(Oe(_,u),_.h==0&&(_.src=null,d[Fe]=null)):ut(u)}}}function Xt(u){return u in qe?qe[u]:qe[u]="on"+u}function rt(u,d){if(u.da)u=!0;else{d=new ae(d,this);var _=u.listener,B=u.ha||u.src;u.fa&&Ye(u),u=_.call(B,d)}return u}function it(u){return u=u[Fe],u instanceof De?u:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(u){return typeof u=="function"?u:(u[un]||(u[un]=function(d){return u.handleEvent(d)}),u[un])}function T(){g.call(this),this.i=new De(this),this.M=this,this.F=null}M(T,g),T.prototype[be]=!0,T.prototype.removeEventListener=function(u,d,_,B){nt(this,u,d,_,B)};function p(u,d){var _,B=u.F;if(B)for(_=[];B;B=B.F)_.push(B);if(u=u.M,B=d.type||d,typeof d=="string")d=new V(d,u);else if(d instanceof V)d.target=d.target||u;else{var K=d;d=new V(B,u),z(d,K)}if(K=!0,_)for(var ee=_.length-1;0<=ee;ee--){var he=d.g=_[ee];K=y(he,B,!0,d)&&K}if(he=d.g=u,K=y(he,B,!0,d)&&K,K=y(he,B,!1,d)&&K,_)for(ee=0;ee<_.length;ee++)he=d.g=_[ee],K=y(he,B,!1,d)&&K}T.prototype.N=function(){if(T.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var _=u.g[d],B=0;B<_.length;B++)ut(_[B]);delete u.g[d],u.h--}}this.F=null},T.prototype.K=function(u,d,_,B){return this.i.add(String(u),d,!1,_,B)},T.prototype.L=function(u,d,_,B){return this.i.add(String(u),d,!0,_,B)};function y(u,d,_,B){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var K=!0,ee=0;ee<d.length;++ee){var he=d[ee];if(he&&!he.da&&he.capture==_){var ft=he.listener,yn=he.ha||he.src;he.fa&&Oe(u.i,he),K=ft.call(yn,B)!==!1&&K}}return K&&!B.defaultPrevented}function F(u,d,_){if(typeof u=="function")_&&(u=w(u,_));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function H(u){u.g=F(()=>{u.g=null,u.i&&(u.i=!1,H(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class G extends g{constructor(d,_){super(),this.m=d,this.l=_,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:H(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(u){g.call(this),this.h=u,this.g={}}M(Z,g);var Le=[];function Pe(u){X(u.g,function(d,_){this.g.hasOwnProperty(_)&&Ye(d)},u),u.g={}}Z.prototype.N=function(){Z.aa.N.call(this),Pe(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=a.JSON.stringify,ct=a.JSON.parse,Ae=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function xt(){}xt.prototype.h=null;function gl(u){return u.h||(u.h=u.i())}function Nt(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Uo(){V.call(this,"d")}M(Uo,V);function kt(){V.call(this,"c")}M(kt,V);var lt={},yl=null;function wt(){return yl=yl||new T}lt.La="serverreachability";function Mt(u){V.call(this,lt.La,u)}M(Mt,V);function qi(u){const d=wt();p(d,new Mt(d))}lt.STAT_EVENT="statevent";function Lt(u,d){V.call(this,lt.STAT_EVENT,u),this.stat=d}M(Lt,V);function We(u){const d=wt();p(d,new Lt(d,u))}lt.Ma="timingevent";function vl(u,d){V.call(this,lt.Ma,u),this.size=d}M(vl,V);function mt(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function gt(){this.g=!0}gt.prototype.xa=function(){this.g=!1};function gc(u,d,_,B,K,ee){u.info(function(){if(u.g)if(ee)for(var he="",ft=ee.split("&"),yn=0;yn<ft.length;yn++){var Xe=ft[yn].split("=");if(1<Xe.length){var Rn=Xe[0];Xe=Xe[1];var Cn=Rn.split("_");he=2<=Cn.length&&Cn[1]=="type"?he+(Rn+"="+Xe+"&"):he+(Rn+"=redacted&")}}else he=null;else he=ee;return"XMLHTTP REQ ("+B+") [attempt "+K+"]: "+d+`
`+_+`
`+he})}function jt(u,d,_,B,K,ee,he){u.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+K+"]: "+d+`
`+_+`
`+ee+" "+he})}function ht(u,d,_,B){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+$t(u,_)+(B?" "+B:"")})}function yc(u,d){u.info(function(){return"TIMEOUT: "+d})}gt.prototype.info=function(){};function $t(u,d){if(!u.g)return d;if(!d)return null;try{var _=JSON.parse(d);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var B=_[u];if(!(2>B.length)){var K=B[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return xe(_)}catch{return d}}var _t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rt;function Et(){}M(Et,xt),Et.prototype.g=function(){return new XMLHttpRequest},Et.prototype.i=function(){return{}},Rt=new Et;function gr(u,d,_,B){this.j=u,this.i=d,this.l=_,this.R=B||1,this.U=new Z(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fo}function Fo(){this.i=null,this.g="",this.h=!1}var zo={},Ks={};function Gs(u,d,_){u.L=1,u.v=_c(vi(d)),u.m=_,u.P=!0,jo(u,null)}function jo(u,d){u.F=Date.now(),Wi(u),u.A=vi(u.v);var _=u.A,B=u.R;Array.isArray(B)||(B=[String(B)]),Hy(_.i,"t",B),u.C=0,_=u.j.J,u.h=new Fo,u.g=cv(u.j,_?d:null,!u.m),0<u.O&&(u.M=new G(w(u.Y,u,u.g),u.O)),d=u.U,_=u.g,B=u.ca;var K="readystatechange";Array.isArray(K)||(K&&(Le[0]=K.toString()),K=Le);for(var ee=0;ee<K.length;ee++){var he=mi(_,K[ee],B||d.handleEvent,!1,d.h||d);if(!he)break;d.g[he.key]=he}d=u.H?P(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),qi(),gc(u.i,u.u,u.A,u.l,u.R,u.m)}gr.prototype.ca=function(u){u=u.target;const d=this.M;d&&wi(u)==3?d.j():this.Y(u)},gr.prototype.Y=function(u){try{if(u==this.g)e:{const Cn=wi(this.g);var d=this.g.Ba();const Yo=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||Zy(this.g)))){this.J||Cn!=4||d==7||(d==8||0>=Yo?qi(3):qi(2)),Qs(this);var _=this.g.Z();this.X=_;t:if($o(this)){var B=Zy(this.g);u="";var K=B.length,ee=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),yi(this);var he="";break t}this.h.i=new a.TextDecoder}for(d=0;d<K;d++)this.h.h=!0,u+=this.h.i.decode(B[d],{stream:!(ee&&d==K-1)});B.length=0,this.h.g+=u,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=_==200,jt(this.i,this.u,this.A,this.l,this.R,Cn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ft,yn=this.g;if((ft=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(ft)){var Xe=ft;break t}}Xe=null}if(_=Xe)ht(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ys(this,_);else{this.o=!1,this.s=3,We(12),Nr(this),yi(this);break e}}if(this.P){_=!0;let Mr;for(;!this.J&&this.C<he.length;)if(Mr=_l(this,he),Mr==Ks){Cn==4&&(this.s=4,We(14),_=!1),ht(this.i,this.l,null,"[Incomplete Response]");break}else if(Mr==zo){this.s=4,We(15),ht(this.i,this.l,he,"[Invalid Chunk]"),_=!1;break}else ht(this.i,this.l,Mr,null),Ys(this,Mr);if($o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||he.length!=0||this.h.h||(this.s=1,We(16),_=!1),this.o=this.o&&_,!_)ht(this.i,this.l,he,"[Invalid Chunked Response]"),Nr(this),yi(this);else if(0<he.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Od(Rn),Rn.M=!0,We(11))}}else ht(this.i,this.l,he,null),Ys(this,he);Cn==4&&Nr(this),this.o&&!this.J&&(Cn==4?ov(this.j,this):(this.o=!1,Wi(this)))}else mx(this.g),_==400&&0<he.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),Nr(this),yi(this)}}}catch{}finally{}};function $o(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _l(u,d){var _=u.C,B=d.indexOf(`
`,_);return B==-1?Ks:(_=Number(d.substring(_,B)),isNaN(_)?zo:(B+=1,B+_>d.length?Ks:(d=d.slice(B,B+_),u.C=B+_,d)))}gr.prototype.cancel=function(){this.J=!0,Nr(this)};function Wi(u){u.S=Date.now()+u.I,qo(u,u.I)}function qo(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=mt(w(u.ba,u),d)}function Qs(u){u.B&&(a.clearTimeout(u.B),u.B=null)}gr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yc(this.i,this.A),this.L!=2&&(qi(),We(17)),Nr(this),this.s=2,yi(this)):qo(this,this.S-u)};function yi(u){u.j.G==0||u.J||ov(u.j,u)}function Nr(u){Qs(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Pe(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Ys(u,d){try{var _=u.j;if(_.G!=0&&(_.g==u||Xs(_.h,u))){if(!u.K&&Xs(_.h,u)&&_.G==3){try{var B=_.Da.g.parse(d)}catch{B=null}if(Array.isArray(B)&&B.length==3){var K=B;if(K[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)bc(_),Tc(_);else break e;Bd(_),We(18)}}else _.za=K[1],0<_.za-_.T&&37500>K[2]&&_.F&&_.v==0&&!_.C&&(_.C=mt(w(_.Za,_),6e3));if(1>=Ko(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Zs(_,11)}else if((u.K||_.g==u)&&bc(_),!C(d))for(K=_.Da.g.parse(d),d=0;d<K.length;d++){let Xe=K[d];if(_.T=Xe[0],Xe=Xe[1],_.G==2)if(Xe[0]=="c"){_.K=Xe[1],_.ia=Xe[2];const Rn=Xe[3];Rn!=null&&(_.la=Rn,_.j.info("VER="+_.la));const Cn=Xe[4];Cn!=null&&(_.Aa=Cn,_.j.info("SVER="+_.Aa));const Yo=Xe[5];Yo!=null&&typeof Yo=="number"&&0<Yo&&(B=1.5*Yo,_.L=B,_.j.info("backChannelRequestTimeoutMs_="+B)),B=_;const Mr=u.g;if(Mr){const kc=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kc){var ee=B.h;ee.g||kc.indexOf("spdy")==-1&&kc.indexOf("quic")==-1&&kc.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Nd(ee,ee.h),ee.h=null))}if(B.D){const Dd=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(B.ya=Dd,It(B.I,B.D,Dd))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),B=_;var he=u;if(B.qa=uv(B,B.J?B.ia:null,B.W),he.K){Vy(B.h,he);var ft=he,yn=B.L;yn&&(ft.I=yn),ft.B&&(Qs(ft),Wi(ft)),B.g=he}else iv(B);0<_.i.length&&Ac(_)}else Xe[0]!="stop"&&Xe[0]!="close"||Zs(_,7);else _.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Zs(_,7):Ld(_):Xe[0]!="noop"&&_.l&&_.l.ta(Xe),_.v=0)}}qi(4)}catch{}}var El=class{constructor(u,d){this.g=u,this.map=d}};function Wo(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ho(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ko(u){return u.h?1:u.g?u.g.size:0}function Xs(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Nd(u,d){u.g?u.g.add(d):u.h=d}function Vy(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Wo.prototype.cancel=function(){if(this.i=Uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Uy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const _ of u.g.values())d=d.concat(_.D);return d}return L(u.i)}function ex(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],_=u.length,B=0;B<_;B++)d.push(u[B]);return d}d=[],_=0;for(B in u)d[_++]=u[B];return d}function tx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var _=0;_<u;_++)d.push(_);return d}d=[],_=0;for(const B in u)d[_++]=B;return d}}}function Fy(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var _=tx(u),B=ex(u),K=B.length,ee=0;ee<K;ee++)d.call(void 0,B[ee],_&&_[ee],u)}var zy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nx(u,d){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var B=u[_].indexOf("="),K=null;if(0<=B){var ee=u[_].substring(0,B);K=u[_].substring(B+1)}else ee=u[_];d(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Js(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Js){this.h=u.h,vc(this,u.j),this.o=u.o,this.g=u.g,wc(this,u.s),this.l=u.l;var d=u.i,_=new Tl;_.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),jy(this,_),this.m=u.m}else u&&(d=String(u).match(zy))?(this.h=!1,vc(this,d[1]||"",!0),this.o=Il(d[2]||""),this.g=Il(d[3]||"",!0),wc(this,d[4]),this.l=Il(d[5]||"",!0),jy(this,d[6]||"",!0),this.m=Il(d[7]||"")):(this.h=!1,this.i=new Tl(null,this.h))}Js.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Sl(d,$y,!0),":");var _=this.g;return(_||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Sl(d,$y,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Sl(_,_.charAt(0)=="/"?sx:ix,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Sl(_,ax)),u.join("")};function vi(u){return new Js(u)}function vc(u,d,_){u.j=_?Il(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function wc(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function jy(u,d,_){d instanceof Tl?(u.i=d,lx(u.i,u.h)):(_||(d=Sl(d,ox)),u.i=new Tl(d,u.h))}function It(u,d,_){u.i.set(d,_)}function _c(u){return It(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Il(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sl(u,d,_){return typeof u=="string"?(u=encodeURI(u).replace(d,rx),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function rx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $y=/[#\/\?@]/g,ix=/[#\?:]/g,sx=/[#\?]/g,ox=/[#\?@]/g,ax=/#/g;function Tl(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Hi(u){u.g||(u.g=new Map,u.h=0,u.i&&nx(u.i,function(d,_){u.add(decodeURIComponent(d.replace(/\+/g," ")),_)}))}t=Tl.prototype,t.add=function(u,d){Hi(this),this.i=null,u=Go(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(d),this.h+=1,this};function qy(u,d){Hi(u),d=Go(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Wy(u,d){return Hi(u),d=Go(u,d),u.g.has(d)}t.forEach=function(u,d){Hi(this),this.g.forEach(function(_,B){_.forEach(function(K){u.call(d,K,B,this)},this)},this)},t.na=function(){Hi(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),_=[];for(let B=0;B<d.length;B++){const K=u[B];for(let ee=0;ee<K.length;ee++)_.push(d[B])}return _},t.V=function(u){Hi(this);let d=[];if(typeof u=="string")Wy(this,u)&&(d=d.concat(this.g.get(Go(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)d=d.concat(u[_])}return d},t.set=function(u,d){return Hi(this),this.i=null,u=Go(this,u),Wy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Hy(u,d,_){qy(u,d),0<_.length&&(u.i=null,u.g.set(Go(u,d),L(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var _=0;_<d.length;_++){var B=d[_];const ee=encodeURIComponent(String(B)),he=this.V(B);for(B=0;B<he.length;B++){var K=ee;he[B]!==""&&(K+="="+encodeURIComponent(String(he[B]))),u.push(K)}}return this.i=u.join("&")};function Go(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function lx(u,d){d&&!u.j&&(Hi(u),u.i=null,u.g.forEach(function(_,B){var K=B.toLowerCase();B!=K&&(qy(this,B),Hy(this,K,_))},u)),u.j=d}function ux(u,d){const _=new gt;if(a.Image){const B=new Image;B.onload=S(Ki,_,"TestLoadImage: loaded",!0,d,B),B.onerror=S(Ki,_,"TestLoadImage: error",!1,d,B),B.onabort=S(Ki,_,"TestLoadImage: abort",!1,d,B),B.ontimeout=S(Ki,_,"TestLoadImage: timeout",!1,d,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=u}else d(!1)}function cx(u,d){const _=new gt,B=new AbortController,K=setTimeout(()=>{B.abort(),Ki(_,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:B.signal}).then(ee=>{clearTimeout(K),ee.ok?Ki(_,"TestPingServer: ok",!0,d):Ki(_,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(K),Ki(_,"TestPingServer: error",!1,d)})}function Ki(u,d,_,B,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),B(_)}catch{}}function hx(){this.g=new Ae}function fx(u,d,_){const B=_||"";try{Fy(u,function(K,ee){let he=K;c(K)&&(he=xe(K)),d.push(B+ee+"="+encodeURIComponent(he))})}catch(K){throw d.push(B+"type="+encodeURIComponent("_badmap")),K}}function Ec(u){this.l=u.Ub||null,this.j=u.eb||!1}M(Ec,xt),Ec.prototype.g=function(){return new Ic(this.l,this.j)},Ec.prototype.i=function(u){return function(){return u}}({});function Ic(u,d){T.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ic,T),t=Ic.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,bl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Al(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ky(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ky(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Al(this):bl(this),this.readyState==3&&Ky(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Al(this))},t.Qa=function(u){this.g&&(this.response=u,Al(this))},t.ga=function(){this.g&&Al(this)};function Al(u){u.readyState=4,u.l=null,u.j=null,u.v=null,bl(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var _=d.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=d.next();return u.join(`\r
`)};function bl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Gy(u){let d="";return X(u,function(_,B){d+=B,d+=":",d+=_,d+=`\r
`}),d}function Md(u,d,_){e:{for(B in _){var B=!1;break e}B=!0}B||(_=Gy(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):It(u,d,_))}function qt(u){T.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(qt,T);var dx=/^https?$/i,px=["POST","PUT"];t=qt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,_,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rt.g(),this.v=this.o?gl(this.o):gl(Rt),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(ee){Qy(this,ee);return}if(u=_||"",_=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var K in B)_.set(K,B[K]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ee of B.keys())_.set(ee,B.get(ee));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(px,d,void 0))||B||K||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,he]of _)this.g.setRequestHeader(ee,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jy(this),this.u=!0,this.g.send(u),this.u=!1}catch(ee){Qy(this,ee)}};function Qy(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Yy(u),Sc(u)}function Yy(u){u.A||(u.A=!0,p(u,"complete"),p(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,p(this,"complete"),p(this,"abort"),Sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xy(this):this.bb())},t.bb=function(){Xy(this)};function Xy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||wi(u)!=4||u.Z()!=2)){if(u.u&&wi(u)==4)F(u.Ea,0,u);else if(p(u,"readystatechange"),wi(u)==4){u.h=!1;try{const he=u.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var _;if(!(_=d)){var B;if(B=he===0){var K=String(u.D).match(zy)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),B=!dx.test(K?K.toLowerCase():"")}_=B}if(_)p(u,"complete"),p(u,"success");else{u.m=6;try{var ee=2<wi(u)?u.g.statusText:""}catch{ee=""}u.l=ee+" ["+u.Z()+"]",Yy(u)}}finally{Sc(u)}}}}function Sc(u,d){if(u.g){Jy(u);const _=u.g,B=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||p(u,"ready");try{_.onreadystatechange=B}catch{}}}function Jy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function wi(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),ct(d)}};function Zy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mx(u){const d={};u=(u.g&&2<=wi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<u.length;B++){if(C(u[B]))continue;var _=$(u[B]);const K=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=d[K]||[];d[K]=ee,ee.push(_)}O(d,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(u,d,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||d}function ev(u){this.Aa=0,this.i=[],this.j=new gt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xl("baseRetryDelayMs",5e3,u),this.cb=xl("retryDelaySeedMs",1e4,u),this.Wa=xl("forwardChannelMaxRetries",2,u),this.wa=xl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Wo(u&&u.concurrentRequestLimit),this.Da=new hx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ev.prototype,t.la=8,t.G=1,t.connect=function(u,d,_,B){We(0),this.W=u,this.H=d||{},_&&B!==void 0&&(this.H.OSID=_,this.H.OAID=B),this.F=this.X,this.I=uv(this,null,this.W),Ac(this)};function Ld(u){if(tv(u),u.G==3){var d=u.U++,_=vi(u.I);if(It(_,"SID",u.K),It(_,"RID",d),It(_,"TYPE","terminate"),kl(u,_),d=new gr(u,u.j,d),d.L=2,d.v=_c(vi(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=d.v,_=!0),_||(d.g=cv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Wi(d)}lv(u)}function Tc(u){u.g&&(Od(u),u.g.cancel(),u.g=null)}function tv(u){Tc(u),u.u&&(a.clearTimeout(u.u),u.u=null),bc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ac(u){if(!Ho(u.h)&&!u.s){u.s=!0;var d=u.Ga;x||j(),A||(x(),A=!0),U.add(d,u),u.B=0}}function gx(u,d){return Ko(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=mt(w(u.Ga,u,d),av(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const K=new gr(this,this.j,u);let ee=this.o;if(this.S&&(ee?(ee=P(ee),z(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var d=0,_=0;_<this.i.length;_++){t:{var B=this.i[_];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(d+=B,4096<d){d=_;break e}if(d===4096||_===this.i.length-1){d=_+1;break e}}d=1e3}else d=1e3;d=rv(this,K,d),_=vi(this.I),It(_,"RID",u),It(_,"CVER",22),this.D&&It(_,"X-HTTP-Session-Id",this.D),kl(this,_),ee&&(this.O?d="headers="+encodeURIComponent(String(Gy(ee)))+"&"+d:this.m&&Md(_,this.m,ee)),Nd(this.h,K),this.Ua&&It(_,"TYPE","init"),this.P?(It(_,"$req",d),It(_,"SID","null"),K.T=!0,Gs(K,_,null)):Gs(K,_,d),this.G=2}}else this.G==3&&(u?nv(this,u):this.i.length==0||Ho(this.h)||nv(this))};function nv(u,d){var _;d?_=d.l:_=u.U++;const B=vi(u.I);It(B,"SID",u.K),It(B,"RID",_),It(B,"AID",u.T),kl(u,B),u.m&&u.o&&Md(B,u.m,u.o),_=new gr(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),d&&(u.i=d.D.concat(u.i)),d=rv(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Nd(u.h,_),Gs(_,B,d)}function kl(u,d){u.H&&X(u.H,function(_,B){It(d,B,_)}),u.l&&Fy({},function(_,B){It(d,B,_)})}function rv(u,d,_){_=Math.min(u.i.length,_);var B=u.l?w(u.l.Na,u.l,u):null;e:{var K=u.i;let ee=-1;for(;;){const he=["count="+_];ee==-1?0<_?(ee=K[0].g,he.push("ofs="+ee)):ee=0:he.push("ofs="+ee);let ft=!0;for(let yn=0;yn<_;yn++){let Xe=K[yn].g;const Rn=K[yn].map;if(Xe-=ee,0>Xe)ee=Math.max(0,K[yn].g-100),ft=!1;else try{fx(Rn,he,"req"+Xe+"_")}catch{B&&B(Rn)}}if(ft){B=he.join("&");break e}}}return u=u.i.splice(0,_),d.D=u,B}function iv(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;x||j(),A||(x(),A=!0),U.add(d,u),u.v=0}}function Bd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=mt(w(u.Fa,u),av(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,sv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=mt(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),Tc(this),sv(this))};function Od(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function sv(u){u.g=new gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=vi(u.qa);It(d,"RID","rpc"),It(d,"SID",u.K),It(d,"AID",u.T),It(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&It(d,"TO",u.ja),It(d,"TYPE","xmlhttp"),kl(u,d),u.m&&u.o&&Md(d,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=_c(vi(d)),_.m=null,_.P=!0,jo(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Tc(this),Bd(this),We(19))};function bc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function ov(u,d){var _=null;if(u.g==d){bc(u),Od(u),u.g=null;var B=2}else if(Xs(u.h,d))_=d.D,Vy(u.h,d),B=1;else return;if(u.G!=0){if(d.o)if(B==1){_=d.m?d.m.length:0,d=Date.now()-d.F;var K=u.B;B=wt(),p(B,new vl(B,_)),Ac(u)}else iv(u);else if(K=d.s,K==3||K==0&&0<d.X||!(B==1&&gx(u,d)||B==2&&Bd(u)))switch(_&&0<_.length&&(d=u.h,d.i=d.i.concat(_)),K){case 1:Zs(u,5);break;case 4:Zs(u,10);break;case 3:Zs(u,6);break;default:Zs(u,2)}}}function av(u,d){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*d}function Zs(u,d){if(u.j.info("Error code "+d),d==2){var _=w(u.fb,u),B=u.Xa;const K=!B;B=new Js(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vc(B,"https"),_c(B),K?ux(B.toString(),_):cx(B.toString(),_)}else We(2);u.G=0,u.l&&u.l.sa(d),lv(u),tv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function lv(u){if(u.G=0,u.ka=[],u.l){const d=Uy(u.h);(d.length!=0||u.i.length!=0)&&(R(u.ka,d),R(u.ka,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.ra()}}function uv(u,d,_){var B=_ instanceof Js?vi(_):new Js(_);if(B.g!="")d&&(B.g=d+"."+B.g),wc(B,B.s);else{var K=a.location;B=K.protocol,d=d?d+"."+K.hostname:K.hostname,K=+K.port;var ee=new Js(null);B&&vc(ee,B),d&&(ee.g=d),K&&wc(ee,K),_&&(ee.l=_),B=ee}return _=u.D,d=u.ya,_&&d&&It(B,_,d),It(B,"VER",u.la),kl(u,B),B}function cv(u,d,_){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new qt(new Ec({eb:_})):new qt(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hv(){}t=hv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xc(){}xc.prototype.g=function(u,d){return new or(u,d)};function or(u,d){T.call(this),this.g=new ev(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!C(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!C(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Qo(this)}M(or,T),or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){Ld(this.g)},or.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=xe(u),u=_);d.i.push(new El(d.Ya++,u)),d.G==3&&Ac(d)},or.prototype.N=function(){this.g.l=null,delete this.j,Ld(this.g),delete this.g,or.aa.N.call(this)};function fv(u){Uo.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const _ in d){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}M(fv,Uo);function dv(){kt.call(this),this.status=1}M(dv,kt);function Qo(u){this.g=u}M(Qo,hv),Qo.prototype.ua=function(){p(this.g,"a")},Qo.prototype.ta=function(u){p(this.g,new fv(u))},Qo.prototype.sa=function(u){p(this.g,new dv)},Qo.prototype.ra=function(){p(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,IA=function(){return new xc},EA=function(){return wt()},_A=lt,ig={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,Ih=_t,wl.COMPLETE="complete",wA=wl,Nt.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",T.prototype.listen=T.prototype.K,Kl=Nt,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,vA=qt}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const O_="@firebase/firestore",D_="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new q0("@firebase/firestore");function na(){return bo.logLevel}function me(t,...e){if(bo.logLevel<=He.DEBUG){const n=e.map(ry);bo.debug(`Firestore (${hl}): ${t}`,...n)}}function Fi(t,...e){if(bo.logLevel<=He.ERROR){const n=e.map(ry);bo.error(`Firestore (${hl}): ${t}`,...n)}}function Ha(t,...e){if(bo.logLevel<=He.WARN){const n=e.map(ry);bo.warn(`Firestore (${hl}): ${t}`,...n)}}function ry(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: `+t;throw Fi(e),new Error(e)}function et(t,e){t||Re()}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vn.UNAUTHENTICATED))}shutdown(){}}class $D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qD{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string"),new SA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new Vn(e)}}class WD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class HD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KD{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Fr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){et(this.o===void 0);const r=s=>{s.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new V_(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(et(typeof n.token=="string"),this.R=n.token,new V_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=GD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ze(t,e){return t<e?-1:t>e?1:0}function sg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ze(r,i);{const s=TA(),o=QD(s.encode(U_(t,n)),s.encode(U_(e,n)));return o!==0?o:ze(r,i)}}n+=r>65535?2:1}return ze(t.length,e.length)}function U_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function QD(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ze(t[n],e[n]);return ze(t.length,e.length)}function Ka(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=-62135596800,z_=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*z_);return new an(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<F_)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z_}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-F_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new an(0,0))}static max(){return new Me(new an(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__name__";class Zr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(),r===void 0?r=e.length-n:r>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Zr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ze(e.length,n.length)}static compareSegments(e,n){const r=Zr.isNumericId(e),i=Zr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):sg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class Tt extends Zr{construct(e,n,r){return new Tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Tt(n)}static emptyPath(){return new Tt([])}}const YD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends Zr{construct(e,n,r){return new An(e,n,r)}static isValidIdentifier(e){return YD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j_}static keyField(){return new An([j_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ye(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ye(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ye(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(n)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Tt.fromString(e))}static fromName(e){return new _e(Tt.fromString(e).popFirst(5))}static empty(){return new _e(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function XD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new an(n+1,0):new an(n,r));return new Ls(i,_e.empty(),e)}function JD(t){return new Ls(t.readTime,t.key,Uu)}class Ls{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ls(Me.min(),_e.empty(),Uu)}static max(){return new Ls(Me.max(),_e.empty(),Uu)}}function ZD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==e3)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,r)=>{n(e)})}static reject(e){return new te((n,r)=>{r(e)})}static waitFor(e){return new te((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next(i=>i?te.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new te((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(f=>{o[c]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new te((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function n3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}gd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function yd(t){return t==null}function vf(t){return t===0&&1/t==-1/0}function r3(t){return typeof t=="number"&&Number.isInteger(t)&&!vf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="";function i3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$_(e)),e=s3(t.get(n),e);return $_(e)}function s3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case bA:n+="";break;default:n+=s}}return n}function $_(t){return t+bA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new zt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Sn.RED,this.left=i??Sn.EMPTY,this.right=s??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Sn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new W_(this.data.getIterator())}getIteratorFrom(e){return new W_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class W_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new cr([])}unionWith(e){let n=new ln(An.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kA("Invalid base64 string: "+s):s}}(e);return new kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const o3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){if(et(!!t),typeof t=="string"){let e=0;const n=o3.exec(t);if(et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qt(t.seconds),nanos:Qt(t.nanos)}}function Qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?kn.fromBase64String(t):kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="server_timestamp",CA="__type__",PA="__previous_value__",NA="__local_write_time__";function sy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CA])===null||n===void 0?void 0:n.stringValue)===RA}function vd(t){const e=t.mapValue.fields[PA];return sy(e)?vd(e):e}function Fu(t){const e=Bs(t.mapValue.fields[NA].timestampValue);return new an(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const wf="(default)";class zu{constructor(e,n){this.projectId=e,this.database=n||wf}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database===wf}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",LA="__max__",nh={mapValue:{fields:{__type__:{stringValue:LA}}}},BA="__vector__",_f="value";function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sy(t)?4:u3(t)?9007199254740991:l3(t)?10:11:Re()}function hi(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bs(i.timestampValue),a=Bs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Os(i.bytesValue).isEqual(Os(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qt(i.geoPointValue.latitude)===Qt(s.geoPointValue.latitude)&&Qt(i.geoPointValue.longitude)===Qt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qt(i.integerValue)===Qt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qt(i.doubleValue),a=Qt(s.doubleValue);return o===a?vf(o)===vf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ka(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(q_(o)!==q_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!hi(o[l],a[l])))return!1;return!0}(t,e);default:return Re()}}function ju(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function Ga(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qt(s.integerValue||s.doubleValue),l=Qt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return H_(t.timestampValue,e.timestampValue);case 4:return H_(Fu(t),Fu(e));case 5:return sg(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Os(s),l=Os(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const f=ze(a[c],l[c]);if(f!==0)return f}return ze(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ze(Qt(s.latitude),Qt(o.latitude));return a!==0?a:ze(Qt(s.longitude),Qt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,f;const m=s.fields||{},w=o.fields||{},S=(a=m[_f])===null||a===void 0?void 0:a.arrayValue,M=(l=w[_f])===null||l===void 0?void 0:l.arrayValue,L=ze(((c=S==null?void 0:S.values)===null||c===void 0?void 0:c.length)||0,((f=M==null?void 0:M.values)===null||f===void 0?void 0:f.length)||0);return L!==0?L:K_(S,M)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===nh.mapValue&&o===nh.mapValue)return 0;if(s===nh.mapValue)return 1;if(o===nh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){const w=sg(l[m],f[m]);if(w!==0)return w;const S=Ga(a[l[m]],c[f[m]]);if(S!==0)return S}return ze(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Re()}}function H_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Bs(t),r=Bs(e),i=ze(n.seconds,r.seconds);return i!==0?i:ze(n.nanos,r.nanos)}function K_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ga(n[i],r[i]);if(s)return s}return ze(n.length,r.length)}function Qa(t){return og(t)}function og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=og(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${og(n.fields[o])}`;return i+"}"}(t.mapValue):Re()}function Sh(t){switch(Ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(t);return e?16+Sh(e):16;case 5:return 2*t.stringValue.length;case 6:return Os(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Sh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ws(r.fields,(s,o)=>{i+=s.length+Sh(o)}),i}(t.mapValue);default:throw Re()}}function G_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ag(t){return!!t&&"integerValue"in t}function oy(t){return!!t&&"arrayValue"in t}function Q_(t){return!!t&&"nullValue"in t}function Y_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Th(t){return!!t&&"mapValue"in t}function l3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[MA])===null||n===void 0?void 0:n.stringValue)===BA}function au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=au(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function u3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.value=e}static empty(){return new er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(n)}setAll(e){let n=An.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=au(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ws(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new er(au(this.value))}}function OA(t){const e=[];return Ws(t.fields,(n,r)=>{const i=new An([n]);if(Th(r)){const s=OA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fn(e,0,Me.min(),Me.min(),Me.min(),er.empty(),0)}static newFoundDocument(e,n,r,i){return new Fn(e,1,n,Me.min(),r,i,0)}static newNoDocument(e,n){return new Fn(e,2,n,Me.min(),Me.min(),er.empty(),0)}static newUnknownDocument(e,n){return new Fn(e,3,n,Me.min(),Me.min(),er.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.position=e,this.inclusive=n}}function X_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),n.key):r=Ga(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function J_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n="asc"){this.field=e,this.dir=n}}function c3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{}class nn extends DA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new f3(e,n,r):n==="array-contains"?new m3(e,r):n==="in"?new g3(e,r):n==="not-in"?new y3(e,r):n==="array-contains-any"?new v3(e,r):new nn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new d3(e,r):new p3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ga(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qr extends DA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Qr(e,n)}matches(e){return VA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function VA(t){return t.op==="and"}function UA(t){return h3(t)&&VA(t)}function h3(t){for(const e of t.filters)if(e instanceof Qr)return!1;return!0}function lg(t){if(t instanceof nn)return t.field.canonicalString()+t.op.toString()+Qa(t.value);if(UA(t))return t.filters.map(e=>lg(e)).join(",");{const e=t.filters.map(n=>lg(n)).join(",");return`${t.op}(${e})`}}function FA(t,e){return t instanceof nn?function(r,i){return i instanceof nn&&r.op===i.op&&r.field.isEqual(i.field)&&hi(r.value,i.value)}(t,e):t instanceof Qr?function(r,i){return i instanceof Qr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&FA(o,i.filters[a]),!0):!1}(t,e):void Re()}function zA(t){return t instanceof nn?function(n){return`${n.field.canonicalString()} ${n.op} ${Qa(n.value)}`}(t):t instanceof Qr?function(n){return n.op.toString()+" {"+n.getFilters().map(zA).join(" ,")+"}"}(t):"Filter"}class f3 extends nn{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class d3 extends nn{constructor(e,n){super(e,"in",n),this.keys=jA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p3 extends nn{constructor(e,n){super(e,"not-in",n),this.keys=jA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class m3 extends nn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oy(n)&&ju(n.arrayValue,this.value)}}class g3 extends nn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ju(this.value.arrayValue,n)}}class y3 extends nn{constructor(e,n){super(e,"not-in",n)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ju(this.value.arrayValue,n)}}class v3 extends nn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function Z_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new w3(t,e,n,r,i,s,o)}function ay(t){const e=Be(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qa(r)).join(",")),e.le=n}return e.le}function ly(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J_(t.startAt,e.startAt)&&J_(t.endAt,e.endAt)}function ug(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function _3(t,e,n,r,i,s,o,a){return new uc(t,e,n,r,i,s,o,a)}function uy(t){return new uc(t)}function e1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $A(t){return t.collectionGroup!==null}function lu(t){const e=Be(t);if(e.he===null){e.he=[];const n=new Set;for(const s of e.explicitOrderBy)e.he.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ln(An.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.he.push(new If(s,r))}),n.has(An.keyField().canonicalString())||e.he.push(new If(An.keyField(),r))}return e.he}function ai(t){const e=Be(t);return e.Pe||(e.Pe=E3(e,lu(t))),e.Pe}function E3(t,e){if(t.limitType==="F")return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new If(i.field,s)});const n=t.endAt?new Ef(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ef(t.startAt.position,t.startAt.inclusive):null;return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cg(t,e){const n=t.filters.concat([e]);return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hg(t,e,n){return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return ly(ai(t),ai(e))&&t.limitType===e.limitType}function qA(t){return`${ay(ai(t))}|lt:${t.limitType}`}function ra(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zA(i)).join(", ")}]`),yd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qa(i)).join(",")),`Target(${r})`}(ai(t))}; limitType=${t.limitType})`}function _d(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of lu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=X_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,lu(r),i)||r.endAt&&!function(o,a,l){const c=X_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,lu(r),i))}(t,e)}function I3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WA(t){return(e,n)=>{let r=!1;for(const i of lu(t)){const s=S3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function S3(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ga(l,c):Re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=new zt(_e.comparator);function zi(){return T3}const HA=new zt(_e.comparator);function Gl(...t){let e=HA;for(const n of t)e=e.insert(n.key,n);return e}function KA(t){let e=HA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function uo(){return uu()}function GA(){return uu()}function uu(){return new Do(t=>t.toString(),(t,e)=>t.isEqual(e))}const A3=new zt(_e.comparator),b3=new ln(_e.comparator);function Ke(...t){let e=b3;for(const n of t)e=e.add(n);return e}const x3=new ln(ze);function k3(){return x3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(e)?"-0":e}}function QA(t){return{integerValue:""+t}}function R3(t,e){return r3(e)?QA(e):cy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this._=void 0}}function C3(t,e,n){return t instanceof Sf?function(i,s){const o={fields:{[CA]:{stringValue:RA},[NA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sy(s)&&(s=vd(s)),s&&(o.fields[PA]=s),{mapValue:o}}(n,e):t instanceof $u?XA(t,e):t instanceof qu?JA(t,e):function(i,s){const o=YA(i,s),a=t1(o)+t1(i.Ie);return ag(o)&&ag(i.Ie)?QA(a):cy(i.serializer,a)}(t,e)}function P3(t,e,n){return t instanceof $u?XA(t,e):t instanceof qu?JA(t,e):n}function YA(t,e){return t instanceof Tf?function(r){return ag(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Sf extends Ed{}class $u extends Ed{constructor(e){super(),this.elements=e}}function XA(t,e){const n=ZA(e);for(const r of t.elements)n.some(i=>hi(i,r))||n.push(r);return{arrayValue:{values:n}}}class qu extends Ed{constructor(e){super(),this.elements=e}}function JA(t,e){let n=ZA(e);for(const r of t.elements)n=n.filter(i=>!hi(i,r));return{arrayValue:{values:n}}}class Tf extends Ed{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function t1(t){return Qt(t.integerValue||t.doubleValue)}function ZA(t){return oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function N3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $u&&i instanceof $u||r instanceof qu&&i instanceof qu?Ka(r.elements,i.elements,hi):r instanceof Tf&&i instanceof Tf?hi(r.Ie,i.Ie):r instanceof Sf&&i instanceof Sf}(t.transform,e.transform)}class M3{constructor(e,n){this.version=e,this.transformResults=n}}class li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Id{}function eb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nb(t.key,li.none()):new cc(t.key,t.data,li.none());{const n=t.data,r=er.empty();let i=new ln(An.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hs(t.key,r,new cr(i.toArray()),li.none())}}function L3(t,e,n){t instanceof cc?function(i,s,o){const a=i.value.clone(),l=r1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,s,o){if(!Ah(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=r1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(tb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cu(t,e,n,r){return t instanceof cc?function(s,o,a,l){if(!Ah(s.precondition,o))return a;const c=s.value.clone(),f=i1(s.fieldTransforms,l,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(s,o,a,l){if(!Ah(s.precondition,o))return a;const c=i1(s.fieldTransforms,l,o),f=o.data;return f.setAll(tb(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,a){return Ah(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function B3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=YA(r.transform,i||null);s!=null&&(n===null&&(n=er.empty()),n.set(r.field,s))}return n||null}function n1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ka(r,i,(s,o)=>N3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cc extends Id{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends Id{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function r1(t,e,n){const r=new Map;et(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,P3(o,a,n[i]))}return r}function i1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,C3(s,o,e))}return r}class nb extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O3 extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&L3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=eb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,(n,r)=>n1(n,r))&&Ka(this.baseMutations,e.baseMutations,(n,r)=>n1(n,r))}}class hy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){et(e.mutations.length===r.length);let i=function(){return A3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new hy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,Ge;function F3(t){switch(t){case ne.OK:return Re();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Re()}}function rb(t){if(t===void 0)return Fi("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Jt.OK:return ne.OK;case Jt.CANCELLED:return ne.CANCELLED;case Jt.UNKNOWN:return ne.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return ne.INTERNAL;case Jt.UNAVAILABLE:return ne.UNAVAILABLE;case Jt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Jt.NOT_FOUND:return ne.NOT_FOUND;case Jt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Jt.ABORTED:return ne.ABORTED;case Jt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Jt.DATA_LOSS:return ne.DATA_LOSS;default:return Re()}}(Ge=Jt||(Jt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=new Rs([4294967295,4294967295],0);function s1(t){const e=TA().encode(t),n=new yA;return n.update(e),new Uint8Array(n.digest())}function o1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([i,s],0)]}class fy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Rs.fromNumber(this.Ee)}Ae(e,n,r){let i=e.add(n.multiply(Rs.fromNumber(r)));return i.compare(z3)===1&&(i=new Rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=s1(e),[r,i]=o1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const n=s1(e),[r,i]=o1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sd(Me.min(),i,new zt(ze),zi(),Ke())}}class hc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hc(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,i){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=i}}class ib{constructor(e,n){this.targetId=e,this.ge=n}}class sb{constructor(e,n,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class a1{constructor(){this.pe=0,this.ye=l1(),this.we=kn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ke(),n=Ke(),r=Ke();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Re()}}),new hc(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=l1()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class j3{constructor(e){this.ke=e,this.qe=new Map,this.Qe=zi(),this.$e=rh(),this.Ue=rh(),this.Ke=new zt(ze)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){const n=e.targetId,r=e.ge.count,i=this.Xe(n);if(i){const s=i.target;if(ug(s))if(r===0){const o=new _e(s.path);this.ze(n,o,Fn.newNoDocument(o,Me.min()))}else et(r===1);else{const o=this.et(n);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Os(r).toUint8Array()}catch(l){if(l instanceof kA)return Ha("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fy(o,i,s)}catch(l){return Ha(l instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,s,null),i++)}),i}ot(e){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&ug(a.target)){const l=new _e(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Fn.newNoDocument(l,e))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let r=Ke();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new Sd(e,n,this.Ke,this.Qe,r);return this.Qe=zi(),this.$e=rh(),this.Ue=rh(),this.Ke=new zt(ze),i}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,n)?i.xe(n,1):i.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new a1,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new ln(ze),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new ln(ze),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new a1),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function rh(){return new zt(_e.comparator)}function l1(){return new zt(_e.comparator)}const $3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),q3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),W3=(()=>({and:"AND",or:"OR"}))();class H3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fg(t,e){return t.useProto3Json||yd(e)?e:{value:e}}function Af(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ob(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function K3(t,e){return Af(t,e.toTimestamp())}function ui(t){return et(!!t),Me.fromTimestamp(function(n){const r=Bs(n);return new an(r.seconds,r.nanos)}(t))}function dy(t,e){return dg(t,e).canonicalString()}function dg(t,e){const n=function(i){return new Tt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ab(t){const e=Tt.fromString(t);return et(fb(e)),e}function pg(t,e){return dy(t.databaseId,e.path)}function Up(t,e){const n=ab(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(ub(n))}function lb(t,e){return dy(t.databaseId,e)}function G3(t){const e=ab(t);return e.length===4?Tt.emptyPath():ub(e)}function mg(t){return new Tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ub(t){return et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function u1(t,e,n){return{name:pg(t,e),fields:n.value.mapValue.fields}}function Q3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(et(f===void 0||typeof f=="string"),kn.fromBase64String(f||"")):(et(f===void 0||f instanceof Buffer||f instanceof Uint8Array),kn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const f=c.code===void 0?ne.UNKNOWN:rb(c.code);return new ye(f,c.message||"")}(o);n=new sb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Up(t,r.document.name),s=ui(r.document.updateTime),o=r.document.createTime?ui(r.document.createTime):Me.min(),a=new er({mapValue:{fields:r.document.fields}}),l=Fn.newFoundDocument(i,s,o,a),c=r.targetIds||[],f=r.removedTargetIds||[];n=new bh(c,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Up(t,r.document),s=r.readTime?ui(r.readTime):Me.min(),o=Fn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new bh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Up(t,r.document),s=r.removedTargetIds||[];n=new bh([],s,i,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new U3(i,s),a=r.targetId;n=new ib(a,o)}}return n}function Y3(t,e){let n;if(e instanceof cc)n={update:u1(t,e.key,e.value)};else if(e instanceof nb)n={delete:pg(t,e.key)};else if(e instanceof Hs)n={update:u1(t,e.key,e.data),updateMask:s6(e.fieldMask)};else{if(!(e instanceof O3))return Re();n={verify:pg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Sf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:K3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Re()}(t,e.precondition)),n}function X3(t,e){return t&&t.length>0?(et(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ui(i.updateTime):ui(s);return o.isEqual(Me.min())&&(o=ui(s)),new M3(o,i.transformResults||[])}(n,e))):[]}function J3(t,e){return{documents:[lb(t,e.path)]}}function Z3(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lb(t,i);const s=function(c){if(c.length!==0)return hb(Qr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(w){return{field:ia(w.field),direction:n6(w.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:n,parent:i}}function e6(t){let e=G3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){et(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const w=cb(m);return w instanceof Qr&&UA(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(w=>function(M){return new If(sa(M.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(m){let w;return w=typeof m=="object"?m.value:m,yd(w)?null:w}(n.limit));let l=null;n.startAt&&(l=function(m){const w=!!m.before,S=m.values||[];return new Ef(S,w)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const w=!m.before,S=m.values||[];return new Ef(S,w)}(n.endAt)),_3(e,i,o,s,a,"F",l,c)}function t6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sa(n.unaryFilter.field);return nn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sa(n.unaryFilter.field);return nn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sa(n.unaryFilter.field);return nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sa(n.unaryFilter.field);return nn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(t):t.fieldFilter!==void 0?function(n){return nn.create(sa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qr.create(n.compositeFilter.filters.map(r=>cb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Re()}}(n.compositeFilter.op))}(t):Re()}function n6(t){return $3[t]}function r6(t){return q3[t]}function i6(t){return W3[t]}function ia(t){return{fieldPath:t.canonicalString()}}function sa(t){return An.fromServerFormat(t.fieldPath)}function hb(t){return t instanceof nn?function(n){if(n.op==="=="){if(Y_(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NAN"}};if(Q_(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y_(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NOT_NAN"}};if(Q_(n.value))return{unaryFilter:{field:ia(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(n.field),op:r6(n.op),value:n.value}}}(t):t instanceof Qr?function(n){const r=n.getFilters().map(i=>hb(i));return r.length===1?r[0]:{compositeFilter:{op:i6(n.op),filters:r}}}(t):Re()}function s6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r,i,s=Me.min(),o=Me.min(),a=kn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.Tt=e}}function a6(t){const e=e6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.Tn=new u6}addToCollectionParentIndex(e,n){return this.Tn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(Ls.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class u6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ln(Tt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},db=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(db,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ya(0)}static Kn(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="LruGarbageCollector",c6=1048576;function f1([t,e],[n,r]){const i=ze(t,n);return i===0?ze(e,r):i}class h6{constructor(e){this.Hn=e,this.buffer=new ln(f1),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();f1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(h1,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dl(n)?me(h1,"Ignoring IndexedDB error during garbage collection: ",n):await fl(n)}await this.er(3e5)})}}class d6{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return te.resolve(gd.ae);const r=new h6(n);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(c1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c1):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,i,s,o,a,l,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),na()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${m} documents in `+(c-l)+`ms
Total Duration: ${c-f}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function p6(t,e){return new d6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.changes=new Do(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&cu(r.mutation,i,cr.empty(),an.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const i=uo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Gl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=uo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zi();const o=uu(),a=function(){return uu()}();return n.forEach((l,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Hs)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),cu(f.mutation,c,f.mutation.getFieldMask(),an.now())):o.set(c.key,cr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var m;return a.set(c,new g6(f,(m=o.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=uu();let i=new zt((o,a)=>o-a),s=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let f=r.get(l)||cr.empty();f=a.applyToLocalView(c,f),r.set(l,f);const m=(i.get(a.batchId)||Ke()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,f=l.value,m=GA();f.forEach(w=>{if(!s.has(w)){const S=eb(n.get(w),r.get(w));S!==null&&m.set(w,S),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$A(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):te.resolve(uo());let a=Uu,l=s;return o.next(c=>te.forEach(c,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?te.resolve():this.remoteDocumentCache.getEntry(e,f).next(w=>{l=l.insert(f,w)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ke())).next(f=>({batchId:a,changes:KA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let i=Gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Gl();return this.indexManager.getCollectionParents(e,s).next(a=>te.forEach(a,l=>{const c=function(m,w){return new uc(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((m,w)=>{o=o.insert(m,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Fn.newInvalidDocument(f)))});let a=Gl();return o.forEach((l,c)=>{const f=s.get(l);f!==void 0&&cu(f.mutation,c,cr.empty(),an.now()),_d(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return te.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ui(i.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:a6(i.bundledQuery),readTime:ui(i.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.overlays=new zt(_e.comparator),this.Rr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=uo();return te.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Et(e,n,s)}),te.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const i=uo(),s=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return te.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new zt((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=uo(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=uo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>a.set(c,f)),!(a.size()>=i)););return te.resolve(a)}Et(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new V3(n,r));let s=this.Rr.get(n);s===void 0&&(s=Ke(),this.Rr.set(n,s)),this.Rr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.Vr=new ln(fn.mr),this.gr=new ln(fn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new fn(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new fn(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new _e(new Tt([])),r=new fn(n,e),i=new fn(n,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new _e(new Tt([])),r=new fn(n,e),i=new fn(n,e+1);let s=Ke();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new fn(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return _e.comparator(e.key,n.key)||ze(e.Cr,n.Cr)}static pr(e,n){return ze(e.Cr,n.Cr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new ln(fn.mr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new D3(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new fn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,n){return te.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Nr(r),s=i<0?0:i;return te.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?iy:this.Fr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),i=new fn(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const a=this.Or(o.Cr);s.push(a)}),te.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ln(ze);return n.forEach(i=>{const s=new fn(i,0),o=new fn(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),te.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;_e.isDocumentKey(s)||(s=s.child(""));const o=new fn(new _e(s),0);let a=new ln(ze);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Cr)),!0)},o),te.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){et(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return te.forEach(n.mutations,i=>{const s=new fn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new fn(n,0),i=this.Mr.firstAfterOrEqual(r);return te.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.kr=e,this.docs=function(){return new zt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(n))}getEntries(e,n){let r=zi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Fn.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zi();const o=n.path,a=new _e(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||ZD(JD(f),r)<=0||(i.has(f.key)||_d(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return te.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Re()}qr(e,n){return te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new S6(this)}getSize(e){return te.resolve(this.size)}}class S6 extends m6{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),te.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.persistence=e,this.Qr=new Do(n=>ay(n),ly),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.$r=0,this.Ur=new py,this.targetCount=0,this.Kr=Ya.Un()}forEachTarget(e,n){return this.Qr.forEach((r,i)=>n(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),te.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Ya(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.zn(n),te.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),te.waitFor(s).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),te.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new gd(0),this.zr=!1,this.zr=!0,this.jr=new _6,this.referenceDelegate=e(this),this.Hr=new T6(this),this.indexManager=new l6,this.remoteDocumentCache=function(i){return new I6(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new o6(n),this.Yr=new v6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new w6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new E6(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new A6(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,n){return te.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class A6 extends t3{constructor(e){super(),this.currentSequenceNumber=e}}class my{constructor(e){this.persistence=e,this.ti=new py,this.ni=null}static ri(e){return new my(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),te.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.ii,r=>{const i=_e.fromPath(r);return this.si(e,i).next(s=>{s||n.removeEntry(i,Me.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return te.or([()=>te.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class bf{constructor(e,n){this.persistence=e,this.oi=new Do(r=>i3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=p6(this,n)}static ri(e,n){return new bf(e,n)}Zr(){}Xr(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return te.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?te.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,n).next(a=>{a||(r++,s.removeEntry(o,Me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sh(e.data.value)),n}ar(e,n,r){return te.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.oi.get(n);return te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=i}static Yi(e,n){let r=Ke(),i=Ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return i4()?8:n3(jn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.rs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new b6;return this._s(e,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,n,o,a.size)})}).next(()=>s.result)}us(e,n,r,i){return r.documentReadCount<this.es?(na()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ra(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),te.resolve()):(na()<=He.DEBUG&&me("QueryEngine","Query:",ra(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(na()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ra(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):te.resolve())}rs(e,n){if(e1(n))return te.resolve(null);let r=ai(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hg(n,null,"F"),r=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ke(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(e,hg(n,null,"F")):this.hs(e,c,n,l)}))})))}ss(e,n,r,i){return e1(n)||i.isEqual(Me.min())?te.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(n,s);return this.ls(n,o,r,i)?te.resolve(null):(na()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ra(n)),this.hs(e,o,n,XD(i,Uu)).next(a=>a))})}cs(e,n){let r=new ln(WA(e));return n.forEach((i,s)=>{_d(e,s)&&(r=r.add(s))}),r}ls(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,n,r){return na()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ra(n)),this.ns.getDocumentsMatchingQuery(e,n,Ls.min(),r)}hs(e,n,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="LocalStore",k6=3e8;class R6{constructor(e,n,r,i){this.persistence=e,this.Ps=n,this.serializer=i,this.Ts=new zt(ze),this.Is=new Do(s=>ay(s),ly),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y6(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function C6(t,e,n,r){return new R6(t,e,n,r)}async function mb(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ke();for(const c of i){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){a.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function P6(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,f){const m=c.batch,w=m.keys();let S=te.resolve();return w.forEach(M=>{S=S.next(()=>f.getEntry(l,M)).next(L=>{const R=c.docVersions.get(M);et(R!==null),L.version.compareTo(R)<0&&(m.applyToRemoteDocument(L,c),L.isValidDocument()&&(L.setReadTime(c.commitVersion),f.addEntry(L)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gb(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function N6(t,e){const n=Be(t),r=e.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];e.targetChanges.forEach((f,m)=>{const w=i.get(m);if(!w)return;a.push(n.Hr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Hr.addMatchingKeys(s,f.addedDocuments,m)));let S=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(kn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),i=i.insert(m,S),function(L,R,b){return L.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=k6?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(w,S,f)&&a.push(n.Hr.updateTargetData(s,S))});let l=zi(),c=Ke();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(M6(s,o,e.documentUpdates).next(f=>{l=f.Vs,c=f.fs})),!r.isEqual(Me.min())){const f=n.Hr.getLastRemoteSnapshotVersion(s).next(m=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return te.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=i,s))}function M6(t,e,n){let r=Ke(),i=Ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me(yy,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:i}})}function L6(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function B6(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Hr.getTargetData(r,e).next(s=>s?(i=s,te.resolve(i)):n.Hr.allocateTargetId(r).next(o=>(i=new ps(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function gg(t,e,n){const r=Be(t),i=r.Ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dl(o))throw o;me(yy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function d1(t,e,n){const r=Be(t);let i=Me.min(),s=Ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,f){const m=Be(l),w=m.Is.get(f);return w!==void 0?te.resolve(m.Ts.get(w)):m.Hr.getTargetData(c,f)}(r,o,ai(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?i:Me.min(),n?s:Ke())).next(a=>(O6(r,I3(e),a),{documents:a,gs:s})))}function O6(t,e,n){let r=t.Es.get(e)||Me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(e,r)}class p1{constructor(){this.activeTargetIds=k3()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D6{constructor(){this.ho=new p1,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new p1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="ConnectivityMonitor";class g1{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(m1,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(m1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function yg(){return ih===null?ih=function(){return 268435456+Math.round(2147483648*Math.random())}():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="RestConnection",U6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F6{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===wf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,n,r,i,s){const o=yg(),a=this.bo(e,n.toUriEncodedString());me(Fp,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,a,l,r).then(c=>(me(Fp,`Received RPC '${e}' ${o}: `,c),c),c=>{throw Ha(Fp,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Co(e,n,r,i,s,o){return this.So(e,n,r,i,s)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}bo(e,n){const r=U6[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class j6 extends F6{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=yg();return new Promise((o,a)=>{const l=new vA;l.setWithCredentials(!0),l.listenOnce(wA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ih.NO_ERROR:const f=l.getResponseJson();me(Dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ih.TIMEOUT:me(Dn,`RPC '${e}' ${s} timed out`),a(new ye(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const m=l.getStatus();if(me(Dn,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const M=function(R){const b=R.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(b)>=0?b:ne.UNKNOWN}(S.status);a(new ye(M,S.message))}else a(new ye(ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ye(ne.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{me(Dn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);me(Dn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Wo(e,n,r){const i=yg(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IA(),a=EA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=s.join("");me(Dn,`Creating RPC '${e}' stream ${i}: ${f}`,l);const m=o.createWebChannel(f,l);let w=!1,S=!1;const M=new z6({Fo:R=>{S?me(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(w||(me(Dn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),me(Dn,`RPC '${e}' stream ${i} sending:`,R),m.send(R))},Mo:()=>m.close()}),L=(R,b,C)=>{R.listen(b,k=>{try{C(k)}catch(q){setTimeout(()=>{throw q},0)}})};return L(m,Kl.EventType.OPEN,()=>{S||(me(Dn,`RPC '${e}' stream ${i} transport opened.`),M.Qo())}),L(m,Kl.EventType.CLOSE,()=>{S||(S=!0,me(Dn,`RPC '${e}' stream ${i} transport closed`),M.Uo())}),L(m,Kl.EventType.ERROR,R=>{S||(S=!0,Ha(Dn,`RPC '${e}' stream ${i} transport errored:`,R),M.Uo(new ye(ne.UNAVAILABLE,"The operation could not be completed")))}),L(m,Kl.EventType.MESSAGE,R=>{var b;if(!S){const C=R.data[0];et(!!C);const k=C,q=(k==null?void 0:k.error)||((b=k[0])===null||b===void 0?void 0:b.error);if(q){me(Dn,`RPC '${e}' stream ${i} received error:`,q);const Y=q.status;let X=function(D){const z=Jt[D];if(z!==void 0)return rb(z)}(Y),O=q.message;X===void 0&&(X=ne.INTERNAL,O="Unknown error status: "+Y+" with message "+q.message),S=!0,M.Uo(new ye(X,O)),m.close()}else me(Dn,`RPC '${e}' stream ${i} received:`,C),M.Ko(C)}}),L(a,_A.STAT_EVENT,R=>{R.stat===ig.PROXY?me(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ig.NOPROXY&&me(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return new H3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="PersistentStream";class vb{constructor(e,n,r,i,s,o,a,l){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===n&&this.V_(r,i)},r=>{e(()=>{const i=new ye(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(y1,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(me(y1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $6 extends vb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=Q3(this.serializer,e),r=function(s){if(!("targetChange"in s))return Me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?ui(o.readTime):Me.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=mg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ug(l)?{documents:J3(s,l)}:{query:Z3(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ob(s,o.resumeToken);const c=fg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Af(s,o.snapshotVersion.toTimestamp());const c=fg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=t6(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=mg(this.serializer),n.removeTarget=e,this.I_(n)}}class q6 extends vb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=X3(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=mg(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Y3(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{}class H6 extends W6{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,dg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ne.UNKNOWN,s.toString())})}Co(e,n,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,dg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ne.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class K6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Fi(n),this.N_=!1):me("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="RemoteStore";class G6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{Vo(this)&&(me(xo,"Restarting streams for network reachability change."),await async function(l){const c=Be(l);c.W_.add(4),await fc(c),c.j_.set("Unknown"),c.W_.delete(4),await Ad(c)}(this))})}),this.j_=new K6(r,i)}}async function Ad(t){if(Vo(t))for(const e of t.G_)await e(!0)}async function fc(t){for(const e of t.G_)await e(!1)}function wb(t,e){const n=Be(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Ey(n)?_y(n):pl(n).c_()&&wy(n,e))}function vy(t,e){const n=Be(t),r=pl(n);n.K_.delete(e),r.c_()&&_b(n,e),n.K_.size===0&&(r.c_()?r.P_():Vo(n)&&n.j_.set("Unknown"))}function wy(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pl(t).y_(e)}function _b(t,e){t.H_.Ne(e),pl(t).w_(e)}function _y(t){t.H_=new j3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),pl(t).start(),t.j_.B_()}function Ey(t){return Vo(t)&&!pl(t).u_()&&t.K_.size>0}function Vo(t){return Be(t).W_.size===0}function Eb(t){t.H_=void 0}async function Q6(t){t.j_.set("Online")}async function Y6(t){t.K_.forEach((e,n)=>{wy(t,e)})}async function X6(t,e){Eb(t),Ey(t)?(t.j_.q_(e),_y(t)):t.j_.set("Unknown")}async function J6(t,e,n){if(t.j_.set("Online"),e instanceof sb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.K_.delete(a),i.H_.removeTarget(a))}(t,e)}catch(r){me(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xf(t,r)}else if(e instanceof bh?t.H_.We(e):e instanceof ib?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Me.min()))try{const r=await gb(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.K_.get(c);f&&s.K_.set(c,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const f=s.K_.get(l);if(!f)return;s.K_.set(l,f.withResumeToken(kn.EMPTY_BYTE_STRING,f.snapshotVersion)),_b(s,l);const m=new ps(f.target,l,c,f.sequenceNumber);wy(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){me(xo,"Failed to raise snapshot:",r),await xf(t,r)}}async function xf(t,e,n){if(!dl(e))throw e;t.W_.add(1),await fc(t),t.j_.set("Offline"),n||(n=()=>gb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(xo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Ad(t)})}function Ib(t,e){return e().catch(n=>xf(t,n,e))}async function bd(t){const e=Be(t),n=Vs(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:iy;for(;Z6(e);)try{const i=await L6(e.localStore,r);if(i===null){e.U_.length===0&&n.P_();break}r=i.batchId,eV(e,i)}catch(i){await xf(e,i)}Sb(e)&&Tb(e)}function Z6(t){return Vo(t)&&t.U_.length<10}function eV(t,e){t.U_.push(e);const n=Vs(t);n.c_()&&n.S_&&n.b_(e.mutations)}function Sb(t){return Vo(t)&&!Vs(t).u_()&&t.U_.length>0}function Tb(t){Vs(t).start()}async function tV(t){Vs(t).C_()}async function nV(t){const e=Vs(t);for(const n of t.U_)e.b_(n.mutations)}async function rV(t,e,n){const r=t.U_.shift(),i=hy.from(r,e,n);await Ib(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bd(t)}async function iV(t,e){e&&Vs(t).S_&&await async function(r,i){if(function(o){return F3(o)&&o!==ne.ABORTED}(i.code)){const s=r.U_.shift();Vs(r).h_(),await Ib(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await bd(r)}}(t,e),Sb(t)&&Tb(t)}async function v1(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),me(xo,"RemoteStore received new credentials");const r=Vo(n);n.W_.add(3),await fc(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Ad(n)}async function sV(t,e){const n=Be(t);e?(n.W_.delete(2),await Ad(n)):e||(n.W_.add(2),await fc(n),n.j_.set("Unknown"))}function pl(t){return t.J_||(t.J_=function(n,r,i){const s=Be(n);return s.M_(),new $6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{xo:Q6.bind(null,t),No:Y6.bind(null,t),Lo:X6.bind(null,t),p_:J6.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Ey(t)?_y(t):t.j_.set("Unknown")):(await t.J_.stop(),Eb(t))})),t.J_}function Vs(t){return t.Y_||(t.Y_=function(n,r,i){const s=Be(n);return s.M_(),new q6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:tV.bind(null,t),Lo:iV.bind(null,t),D_:nV.bind(null,t),v_:rV.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await bd(t)):(await t.Y_.stop(),t.U_.length>0&&(me(xo,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Iy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sy(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),dl(t))return new ye(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{static emptySet(e){return new Na(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=Gl(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Na)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Na;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.Z_=new zt(_e.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xa{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xa(e,n,Na.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class aV{constructor(){this.queries=_1(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const i=Be(n),s=i.queries;i.queries=_1(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new ye(ne.ABORTED,"Firestore shutting down"))}}function _1(){return new Do(t=>qA(t),wd)}async function Ab(t,e){const n=Be(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new oV,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Sy(o,`Initialization of query '${ra(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.ta.push(e),e.sa(n.onlineState),s.ea&&e.oa(s.ea)&&Ty(n)}async function bb(t,e){const n=Be(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lV(t,e){const n=Be(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&Ty(n)}function uV(t,e,n){const r=Be(t),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(e)}function Ty(t){t.ia.forEach(e=>{e.next()})}var vg,E1;(E1=vg||(vg={}))._a="default",E1.Cache="cache";class xb{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==vg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.key=e}}class Rb{constructor(e){this.key=e}}class cV{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ke(),this.mutatedKeys=Ke(),this.ya=WA(e),this.wa=new Na(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new w1,i=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const w=i.get(f),S=_d(this.query,m)?m:null,M=!!w&&this.mutatedKeys.has(w.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let R=!1;w&&S?w.data.isEqual(S.data)?M!==L&&(r.track({type:3,doc:S}),R=!0):this.va(w,S)||(r.track({type:2,doc:S}),R=!0,(l&&this.ya(S,l)>0||c&&this.ya(S,c)<0)&&(a=!0)):!w&&S?(r.track({type:0,doc:S}),R=!0):w&&!S&&(r.track({type:1,doc:w}),R=!0,(l||c)&&(a=!0)),R&&(S?(o=o.add(S),s=L?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((f,m)=>function(S,M){const L=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return L(S)-L(M)}(f.type,m.type)||this.ya(f.doc,m.doc)),this.Ca(r),i=i!=null&&i;const a=n&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Xa(this.query,e.wa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new w1,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ke(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new Rb(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new kb(r))}),n}Oa(e){this.fa=e.gs,this.pa=Ke();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Xa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ay="SyncEngine";class hV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fV{constructor(e){this.key=e,this.Ba=!1}}class dV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Do(a=>qA(a),wd),this.qa=new Map,this.Qa=new Set,this.$a=new zt(_e.comparator),this.Ua=new Map,this.Ka=new py,this.Wa={},this.Ga=new Map,this.za=Ya.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function pV(t,e,n=!0){const r=Bb(t);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Cb(r,e,n,!0),i}async function mV(t,e){const n=Bb(t);await Cb(n,e,!0,!1)}async function Cb(t,e,n,r){const i=await B6(t.localStore,ai(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await gV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&wb(t.remoteStore,i),a}async function gV(t,e,n,r,i){t.Ha=(m,w,S)=>async function(L,R,b,C){let k=R.view.ba(b);k.ls&&(k=await d1(L.localStore,R.query,!1).then(({documents:O})=>R.view.ba(O,k)));const q=C&&C.targetChanges.get(R.targetId),Y=C&&C.targetMismatches.get(R.targetId)!=null,X=R.view.applyChanges(k,L.isPrimaryClient,q,Y);return S1(L,R.targetId,X.Ma),X.snapshot}(t,m,w,S);const s=await d1(t.localStore,e,!0),o=new cV(e,s.gs),a=o.ba(s.documents),l=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);S1(t,n,c.Ma);const f=new hV(e,n,o);return t.ka.set(e,f),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),c.snapshot}async function yV(t,e,n){const r=Be(t),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!wd(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vy(r.remoteStore,i.targetId),wg(r,i.targetId)}).catch(fl)):(wg(r,i.targetId),await gg(r.localStore,i.targetId,!0))}async function vV(t,e){const n=Be(t),r=n.ka.get(e),i=n.qa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vy(n.remoteStore,r.targetId))}async function wV(t,e,n){const r=bV(t);try{const i=await function(o,a){const l=Be(o),c=an.now(),f=a.reduce((S,M)=>S.add(M.key),Ke());let m,w;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let M=zi(),L=Ke();return l.ds.getEntries(S,f).next(R=>{M=R,M.forEach((b,C)=>{C.isValidDocument()||(L=L.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,M)).next(R=>{m=R;const b=[];for(const C of a){const k=B3(C,m.get(C.key).overlayedDocument);k!=null&&b.push(new Hs(C.key,k,OA(k.value.mapValue),li.exists(!0)))}return l.mutationQueue.addMutationBatch(S,c,b,a)}).next(R=>{w=R;const b=R.applyToLocalDocumentSet(m,L);return l.documentOverlayCache.saveOverlays(S,R.batchId,b)})}).then(()=>({batchId:w.batchId,changes:KA(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new zt(ze)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(r,i.batchId,n),await dc(r,i.changes),await bd(r.remoteStore)}catch(i){const s=Sy(i,"Failed to persist write");n.reject(s)}}async function Pb(t,e){const n=Be(t);try{const r=await N6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ua.get(s);o&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?et(o.Ba):i.removedDocuments.size>0&&(et(o.Ba),o.Ba=!1))}),await dc(n,r,e)}catch(r){await fl(r)}}function I1(t,e,n){const r=Be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Be(o);l.onlineState=a;let c=!1;l.queries.forEach((f,m)=>{for(const w of m.ta)w.sa(a)&&(c=!0)}),c&&Ty(l)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _V(t,e,n){const r=Be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ua.get(e),s=i&&i.key;if(s){let o=new zt(_e.comparator);o=o.insert(s,Fn.newNoDocument(s,Me.min()));const a=Ke().add(s),l=new Sd(Me.min(),new Map,new zt(ze),o,a);await Pb(r,l),r.$a=r.$a.remove(s),r.Ua.delete(e),by(r)}else await gg(r.localStore,e,!1).then(()=>wg(r,e,n)).catch(fl)}async function EV(t,e){const n=Be(t),r=e.batch.batchId;try{const i=await P6(n.localStore,e);Mb(n,r,null),Nb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dc(n,i)}catch(i){await fl(i)}}async function IV(t,e,n){const r=Be(t);try{const i=await function(o,a){const l=Be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(et(m!==null),f=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(r.localStore,e);Mb(r,e,n),Nb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dc(r,i)}catch(i){await fl(i)}}function Nb(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function Mb(t,e,n){const r=Be(t);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function wg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||Lb(t,r)})}function Lb(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(vy(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),by(t))}function S1(t,e,n){for(const r of n)r instanceof kb?(t.Ka.addReference(r.key,e),SV(t,r)):r instanceof Rb?(me(Ay,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||Lb(t,r.key)):Re()}function SV(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(me(Ay,"New document in limbo: "+n),t.Qa.add(r),by(t))}function by(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new _e(Tt.fromString(e)),r=t.za.next();t.Ua.set(r,new fV(n)),t.$a=t.$a.insert(n,r),wb(t.remoteStore,new ps(ai(uy(n.path)),r,"TargetPurposeLimboResolution",gd.ae))}}async function dc(t,e,n){const r=Be(t),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){i.push(c);const m=gy.Yi(l.targetId,c);s.push(m)}}))}),await Promise.all(o),r.La.p_(i),await async function(l,c){const f=Be(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>te.forEach(c,w=>te.forEach(w.Hi,S=>f.persistence.referenceDelegate.addReference(m,w.targetId,S)).next(()=>te.forEach(w.Ji,S=>f.persistence.referenceDelegate.removeReference(m,w.targetId,S)))))}catch(m){if(!dl(m))throw m;me(yy,"Failed to update sequence numbers: "+m)}for(const m of c){const w=m.targetId;if(!m.fromCache){const S=f.Ts.get(w),M=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(M);f.Ts=f.Ts.insert(w,L)}}}(r.localStore,s))}async function TV(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){me(Ay,"User change. New user:",e.toKey());const r=await mb(n.localStore,e);n.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new ye(ne.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dc(n,r.Rs)}}function AV(t,e){const n=Be(t),r=n.Ua.get(e);if(r&&r.Ba)return Ke().add(r.key);{let i=Ke();const s=n.qa.get(e);if(!s)return i;for(const o of s){const a=n.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function Bb(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_V.bind(null,e),e.La.p_=lV.bind(null,e.eventManager),e.La.Ja=uV.bind(null,e.eventManager),e}function bV(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IV.bind(null,e),e}class kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Td(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return C6(this.persistence,new x6,e.initialUser,this.serializer)}Xa(e){return new pb(my.ri,this.serializer)}Za(e){return new D6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kf.provider={build:()=>new kf};class xV extends kf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){et(this.persistence.referenceDelegate instanceof bf);const r=this.persistence.referenceDelegate.garbageCollector;return new f6(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new pb(r=>bf.ri(r,n),this.serializer)}}class _g{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>I1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TV.bind(null,this.syncEngine),await sV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new aV}()}createDatastore(e){const n=Td(e.databaseInfo.databaseId),r=function(s){return new j6(s)}(e.databaseInfo);return function(s,o,a,l){return new H6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new G6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>I1(this.syncEngine,n,0),function(){return g1.D()?new g1:new V6}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,f){const m=new dV(i,s,o,a,l,c);return f&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Be(i);me(xo,"RemoteStore shutting down."),s.W_.add(5),await fc(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_g.provider={build:()=>new _g};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="FirestoreClient";class kV{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vn.UNAUTHENTICATED,this.clientId=AA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{me(Us,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(me(Us,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jp(t,e){t.asyncQueue.verifyOperationInProgress(),me(Us,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function T1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RV(t);me(Us,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>v1(e.remoteStore,i)),t._onlineComponents=e}async function RV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(Us,"Using user provided OfflineComponentProvider");try{await jp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ha("Error using user provided cache. Falling back to memory cache: "+n),await jp(t,new kf)}}else me(Us,"Using default OfflineComponentProvider"),await jp(t,new xV(void 0));return t._offlineComponents}async function Db(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(Us,"Using user provided OnlineComponentProvider"),await T1(t,t._uninitializedComponentsProvider._online)):(me(Us,"Using default OnlineComponentProvider"),await T1(t,new _g))),t._onlineComponents}function CV(t){return Db(t).then(e=>e.syncEngine)}async function Vb(t){const e=await Db(t),n=e.eventManager;return n.onListen=pV.bind(null,e.syncEngine),n.onUnlisten=yV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vV.bind(null,e.syncEngine),n}function PV(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const f=new Ob({next:w=>{f.su(),o.enqueueAndForget(()=>bb(s,m));const S=w.docs.has(a);!S&&w.fromCache?c.reject(new ye(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&l&&l.source==="server"?c.reject(new ye(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(w)},error:w=>c.reject(w)}),m=new xb(uy(a.path),f,{includeMetadataChanges:!0,Ta:!0});return Ab(s,m)}(await Vb(t),t.asyncQueue,e,n,r)),r.promise}function NV(t,e,n={}){const r=new Mi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const f=new Ob({next:w=>{f.su(),o.enqueueAndForget(()=>bb(s,m)),w.fromCache&&l.source==="server"?c.reject(new ye(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(w)},error:w=>c.reject(w)}),m=new xb(a,f,{includeMetadataChanges:!0,Ta:!0});return Ab(s,m)}(await Vb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e,n){if(!n)throw new ye(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MV(t,e,n,r){if(e===!0&&r===!0)throw new ye(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b1(t){if(!_e.isDocumentKey(t))throw new ye(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function x1(t){if(_e.isDocumentKey(t))throw new ye(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function Fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xd(t);throw new ye(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firestore.googleapis.com",k1=!0;class R1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zb,this.ssl=k1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:k1;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=db;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c6)throw new ye(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ub((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jD;switch(r.type){case"firstParty":return new HD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=A1.get(n);r&&(me("ComponentProvider","Removing Datastore"),A1.delete(n),r.terminate())}(this),Promise.resolve()}}function LV(t,e,n,r={}){var i;const s=(t=Fs(t,kd))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==zb&&s.host!==a&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!So(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,f;if(typeof r.mockUserToken=="string")c=r.mockUserToken,f=Vn.MOCK_USER;else{c=XL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ye(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vn(m)}t._authCredentials=new $D(new SA(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ml(this.firestore,e,this._query)}}class sr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class Cs extends ml{constructor(e,n,r){super(e,n,uy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new _e(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function Rf(t,e,...n){if(t=gn(t),Fb("collection","path",e),t instanceof kd){const r=Tt.fromString(e,...n);return x1(r),new Cs(t,null,r)}{if(!(t instanceof sr||t instanceof Cs))throw new ye(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tt.fromString(e,...n));return x1(r),new Cs(t.firestore,null,r)}}function jb(t,e,...n){if(t=gn(t),arguments.length===1&&(e=AA.newId()),Fb("doc","path",e),t instanceof kd){const r=Tt.fromString(e,...n);return b1(r),new sr(t,null,new _e(r))}{if(!(t instanceof sr||t instanceof Cs))throw new ye(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tt.fromString(e,...n));return b1(r),new sr(t.firestore,t instanceof Cs?t.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="AsyncQueue";class P1{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yb(this,"async_queue_retry"),this.Su=()=>{const r=zp();r&&me(C1,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=zp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=zp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Mi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!dl(e))throw e;me(C1,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const i=Iy.createAndSchedule(this,e,n,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class pc extends kd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new P1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P1(e),this._firestoreClient=void 0,await e}}}function BV(t,e){const n=typeof t=="object"?t:MT(),r=typeof t=="string"?t:e||wf,i=H0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=QL("firestore");s&&LV(i,...s)}return i}function xy(t){if(t._terminated)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OV(t),t._firestoreClient}function OV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,f){return new a3(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Ub(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new kV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ja(kn.fromBase64String(e))}catch(n){throw new ye(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ja(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=/^__.*__$/;class VV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new cc(e,this.data,n,this.fieldTransforms)}}class $b{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Py{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Py(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Cf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(qb(this.Lu)&&DV.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class UV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Td(e)}ju(e,n,r,i=!1){return new Py({Lu:e,methodName:n,zu:r,path:An.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ny(t){const e=t._freezeSettings(),n=Td(t._databaseId);return new UV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FV(t,e,n,r,i,s={}){const o=t.ju(s.merge||s.mergeFields?2:0,e,n,i);My("Data must be an object, but it was:",o,r);const a=Wb(r,o);let l,c;if(s.merge)l=new cr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const w=Eg(e,m,n);if(!o.contains(w))throw new ye(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Kb(f,w)||f.push(w)}l=new cr(f),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new VV(new er(a),l,c)}class Cd extends ky{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cd}}function zV(t,e,n,r){const i=t.ju(1,e,n);My("Data must be an object, but it was:",i,r);const s=[],o=er.empty();Ws(r,(l,c)=>{const f=Ly(e,l,n);c=gn(c);const m=i.Uu(f);if(c instanceof Cd)s.push(f);else{const w=mc(c,m);w!=null&&(s.push(f),o.set(f,w))}});const a=new cr(s);return new $b(o,a,i.fieldTransforms)}function jV(t,e,n,r,i,s){const o=t.ju(1,e,n),a=[Eg(e,r,n)],l=[i];if(s.length%2!=0)throw new ye(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)a.push(Eg(e,s[w])),l.push(s[w+1]);const c=[],f=er.empty();for(let w=a.length-1;w>=0;--w)if(!Kb(c,a[w])){const S=a[w];let M=l[w];M=gn(M);const L=o.Uu(S);if(M instanceof Cd)c.push(S);else{const R=mc(M,L);R!=null&&(c.push(S),f.set(S,R))}}const m=new cr(c);return new $b(f,m,o.fieldTransforms)}function $V(t,e,n,r=!1){return mc(n,t.ju(r?4:3,e))}function mc(t,e){if(Hb(t=gn(t)))return My("Unsupported field value:",e,t),Wb(t,e);if(t instanceof ky)return function(r,i){if(!qb(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=mc(a,i.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=an.fromDate(r);return{timestampValue:Af(i.serializer,s)}}if(r instanceof an){const s=new an(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Af(i.serializer,s)}}if(r instanceof Ry)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ja)return{bytesValue:ob(i.serializer,r._byteString)};if(r instanceof sr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cy)return function(o,a){return{mapValue:{fields:{[MA]:{stringValue:BA},[_f]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return cy(a.serializer,c)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${xd(r)}`)}(t,e)}function Wb(t,e){const n={};return xA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(t,(r,i)=>{const s=mc(i,e.qu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Hb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof an||t instanceof Ry||t instanceof Ja||t instanceof sr||t instanceof ky||t instanceof Cy)}function My(t,e,n){if(!Hb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xd(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Eg(t,e,n){if((e=gn(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Ly(t,e);throw Cf("Field path arguments must be of type string or ",t,!1,void 0,n)}const qV=new RegExp("[~\\*/\\[\\]]");function Ly(t,e,n){if(e.search(qV)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rd(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ye(ne.INVALID_ARGUMENT,a+t+l)}function Kb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(By("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WV extends Gb{data(){return super.data()}}function By(t,e){return typeof e=="string"?Ly(t,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oy{}class KV extends Oy{}function GV(t,e,...n){let r=[];e instanceof Oy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Dy).length,a=s.filter(l=>l instanceof Pd).length;if(o>1||o>0&&a>0)throw new ye(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pd extends KV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pd(e,n,r)}_apply(e){const n=this._parse(e);return Qb(e._query,n),new ml(e.firestore,e.converter,cg(e._query,n))}_parse(e){const n=Ny(e.firestore);return function(s,o,a,l,c,f,m){let w;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ye(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){M1(m,f);const M=[];for(const L of m)M.push(N1(l,s,L));w={arrayValue:{values:M}}}else w=N1(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||M1(m,f),w=$V(a,o,m,f==="in"||f==="not-in");return nn.create(c,f,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function QV(t,e,n){const r=e,i=By("where",t);return Pd._create(i,r,n)}class Dy extends Oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Qb(o,l),o=cg(o,l)}(e._query,n),new ml(e.firestore,e.converter,cg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function N1(t,e,n){if(typeof(n=gn(n))=="string"){if(n==="")throw new ye(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$A(e)&&n.indexOf("/")!==-1)throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Tt.fromString(n));if(!_e.isDocumentKey(r))throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return G_(t,new _e(r))}if(n instanceof sr)return G_(t,n._key);throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(n)}.`)}function M1(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qb(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ye(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YV{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[_f].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Qt(o.doubleValue));return new Cy(s)}convertGeoPoint(e){return new Ry(Qt(e.latitude),Qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Bs(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Tt.fromString(e);et(fb(r));const i=new zu(r.get(1),r.get(3)),s=new _e(r.popFirst(5));return i.isEqual(n)||Fi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yb extends Gb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(By("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xh extends Yb{data(e={}){return super.data(e)}}class JV{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xh(this._firestore,this._userDataWriter,r.key,r,new Yl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new xh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new xh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:ZV(a.type),doc:l,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ZV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t){t=Fs(t,sr);const e=Fs(t.firestore,pc);return PV(xy(e),t._key).then(n=>rU(e,t,n))}class Xb extends YV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,n)}}function Ig(t){t=Fs(t,ml);const e=Fs(t.firestore,pc),n=xy(e),r=new Xb(e);return HV(t._query),NV(n,t._query).then(i=>new JV(e,r,t,i))}function tU(t,e,n,...r){t=Fs(t,sr);const i=Fs(t.firestore,pc),s=Ny(i);let o;return o=typeof(e=gn(e))=="string"||e instanceof Rd?jV(s,"updateDoc",t._key,e,n,r):zV(s,"updateDoc",t._key,e),Jb(i,[o.toMutation(t._key,li.exists(!0))])}function nU(t,e){const n=Fs(t.firestore,pc),r=jb(t),i=XV(t.converter,e);return Jb(n,[FV(Ny(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,li.exists(!1))]).then(()=>r)}function Jb(t,e){return function(r,i){const s=new Mi;return r.asyncQueue.enqueueAndForget(async()=>wV(await CV(r),i,s)),s.promise}(xy(t),e)}function rU(t,e,n){const r=n.docs.get(e._key),i=new Xb(t);return new Yb(t,i,e._key,r,new Yl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){hl=i})(ll),qa(new To("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new pc(new qD(r.getProvider("auth-internal")),new KD(o,r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ye(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xs(O_,D_,e),xs(O_,D_,"esm2017")})();const iU={apiKey:"AIzaSyCYOFhmThtA_5F9h67lGPLXuO0ZZixy29o",authDomain:"mage-trump-token.firebaseapp.com",databaseURL:"https://mage-trump-token-default-rtdb.firebaseio.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.firebasestorage.app",messagingSenderId:"974753040843",appId:"1:974753040843:web:8de9a9f42ac4f24550ce4e"},Zb=f_().length===0?K0(iU):f_()[0],Wu=BV(Zb);mA(Zb);function sU(){const{connectWallet:t,walletAddress:e,walletBalance:n,isConnected:r,disconnectWallet:i}=le.useContext($0),[s,o]=le.useState(""),[a,l]=le.useState(""),[c,f]=le.useState(!1),m=new UL("https://multi-solitary-mound.solana-mainnet.quiknode.pro/8e58afdbaa8a8759d59583bd41d191ce8445d9c3/"),w=new Te("4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"),S=async()=>{o("Connecting...");try{const b=window==null?void 0:window.solana;if(!b||!b.isPhantom)throw new Error("Phantom wallet not found!");const k=(await b.connect()).publicKey.toString();if(!k)throw new Error("Wallet address is missing!");localStorage.setItem("walletAddress",k),o("Wallet Connected!"),t(k);const q=k,Y=jb(Wu,"users",q);(await eU(Y)).exists()?await tU(Y,{balance:n||.5,claimed:!1,createdAt:new Date}):await nU(Rf(Wu,"users"),{wallet:q,referral:R(),claimed:!1,createdAt:new Date}),f(!0)}catch(b){console.error("Error connecting wallet:",b),o("Failed to connect"),l(b.message)}},M=async()=>{try{if(!e)throw new Error("Wallet address is missing!");const b=window==null?void 0:window.solana;if(!b||!b.isPhantom)throw new Error("Phantom wallet not found!");const{blockhash:C}=await m.getRecentBlockhash("confirmed"),k=new ni({recentBlockhash:C,feePayer:new Te(e)}).add(Mu.transfer({fromPubkey:new Te(e),toPubkey:w,lamports:5e8})),{signature:q}=await b.signAndSendTransaction(k,{commitment:"confirmed"});console.log("Transaction signature:",q),alert("0.5 SOL successfully received"),f(!1)}catch(b){console.error("Error sending SOL:",b),l(b.message),f(!1)}},L=()=>{o("Disconnecting..."),i(),o("Wallet Disconnected!")},R=()=>new URLSearchParams(window.location.search).get("ref")||null;return se.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col items-center justify-between",children:[se.jsxs("header",{className:"w-full flex justify-between items-center px-10 py-6",children:[se.jsxs("div",{className:"flex gap-10 text-white font-semibold text-sm",children:[se.jsx(Hc,{to:"/",className:"hover:underline",children:"HOME"}),se.jsx(Hc,{to:"/about",className:"hover:underline",children:"ABOUT"}),se.jsx(Hc,{to:"/roadmap",className:"hover:underline",children:"ROADMAP"}),se.jsx(Hc,{to:"/referrals",className:"hover:underline text-yellow-300",children:"REFERALS"})]}),se.jsx("button",{onClick:r?L:S,className:`${r?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"} text-white font-semibold py-2 px-4 rounded`,children:r?`Connected: ${e}`:"Connect Wallet"})]}),se.jsxs("main",{className:"flex flex-col md:flex-row items-center justify-center flex-grow px-4 text-center md:text-left",children:[se.jsx("div",{className:"w-full md:w-1/2 flex justify-center",children:se.jsx("img",{src:zD,alt:"Trump Mage",className:"w-64 md:w-[320px] lg:w-[380px]"})}),se.jsxs("div",{className:"w-full md:w-1/2 flex flex-col justify-center items-center md:items-start mt-6 md:mt-0",children:[se.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"MAGE TRUMP TOKEN"}),se.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Claim $MAGE Airdrop"}),se.jsx("p",{className:"text-sm text-gray-200 max-w-sm mb-6",children:"Connect your wallet to receive 0.5 SOL, locked until launch on April 27"}),se.jsx("button",{onClick:r?L:S,className:`${r?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"} text-white font-semibold py-2 px-6 rounded`,children:r?"Disconnect Wallet":"Connect Wallet"}),s&&se.jsx("p",{className:"mt-4",children:s}),a&&se.jsx("p",{className:"mt-4 text-red-500",children:a})]})]}),c&&se.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex items-center justify-center",children:se.jsxs("div",{className:"bg-white p-6 rounded shadow-lg",children:[se.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Confirm Transaction"}),se.jsx("p",{className:"text-black",children:"Do you want to receive 0.5 SOL?"}),se.jsxs("div",{className:"mt-4 flex gap-4",children:[se.jsx("button",{onClick:M,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded",children:"Yes"}),se.jsx("button",{onClick:()=>f(!1),className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",children:"Cancel"})]})]})})]})}function oU(){const[t,e]=le.useState([]),[n,r]=le.useState(0),[i,s]=le.useState([]);return le.useEffect(()=>{(async()=>{const l=(await Ig(Rf(Wu,"users"))).docs.map(m=>({id:m.id,...m.data()}));e(l),r(l.reduce((m,w)=>m+parseFloat(w.balance||0),0));const f=(await Ig(Rf(Wu,"transactions"))).docs.map(m=>({id:m.id,...m.data()}));s(f.sort((m,w)=>{var S,M;return((S=w.timestamp)==null?void 0:S.seconds)-((M=m.timestamp)==null?void 0:M.seconds)}))})()},[]),se.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[se.jsx("div",{className:"flex justify-between items-center mb-6",children:se.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"})}),se.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[se.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[se.jsx("h2",{className:"text-xl font-semibold",children:"Total Users"}),se.jsx("p",{className:"text-3xl mt-2",children:t.length})]}),se.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[se.jsx("h2",{className:"text-xl font-semibold",children:"Estimated SOL Received"}),se.jsxs("p",{className:"text-3xl mt-2",children:[n.toFixed(2)," SOL"]})]})]}),se.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 overflow-x-auto mb-8",children:[se.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Users"}),se.jsxs("table",{className:"w-full text-left text-sm",children:[se.jsx("thead",{children:se.jsxs("tr",{children:[se.jsx("th",{className:"p-2",children:"Wallet"}),se.jsx("th",{className:"p-2",children:"Referral"}),se.jsx("th",{className:"p-2",children:"Balance (SOL)"}),se.jsx("th",{className:"p-2",children:"Claimed"}),se.jsx("th",{className:"p-2",children:"Date"})]})}),se.jsx("tbody",{children:t.map(o=>{var a;return se.jsxs("tr",{className:"border-t border-gray-700",children:[se.jsx("td",{className:"p-2",children:o.wallet}),se.jsx("td",{className:"p-2",children:o.referral||"-"}),se.jsx("td",{className:"p-2",children:o.balance||"0.000"}),se.jsx("td",{className:"p-2",children:o.claimed?"✅":"❌"}),se.jsx("td",{className:"p-2",children:((a=o.createdAt)==null?void 0:a.toDate().toLocaleString())||"-"})]},o.id)})})]})]}),se.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 overflow-x-auto",children:[se.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Transaction History"}),se.jsxs("table",{className:"w-full text-left text-sm",children:[se.jsx("thead",{children:se.jsxs("tr",{children:[se.jsx("th",{className:"p-2",children:"From"}),se.jsx("th",{className:"p-2",children:"To"}),se.jsx("th",{className:"p-2",children:"Amount (SOL)"}),se.jsx("th",{className:"p-2",children:"Date"})]})}),se.jsx("tbody",{children:i.map(o=>{var a;return se.jsxs("tr",{className:"border-t border-gray-700",children:[se.jsx("td",{className:"p-2",children:o.from}),se.jsx("td",{className:"p-2",children:o.to}),se.jsx("td",{className:"p-2",children:o.amount}),se.jsx("td",{className:"p-2",children:((a=o.timestamp)==null?void 0:a.toDate().toLocaleString())||"-"})]},o.id)})})]})]})]})}function aU(){const{login:t}=FD(),e=nS(),[n,r]=le.useState(""),[i,s]=le.useState(""),[o,a]=le.useState(""),l=async c=>{c.preventDefault();try{await t(n,i),e("/admin")}catch{a("Login failed. Check your credentials.")}};return se.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:se.jsxs("form",{onSubmit:l,className:"bg-gray-800 p-8 rounded shadow-md w-full max-w-sm",children:[se.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),o&&se.jsx("p",{className:"text-red-500 text-sm mb-4",children:o}),se.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 mb-4 rounded bg-gray-700 border border-gray-600",value:n,onChange:c=>r(c.target.value),required:!0}),se.jsx("input",{type:"password",placeholder:"Password",className:"w-full p-2 mb-4 rounded bg-gray-700 border border-gray-600",value:i,onChange:c=>s(c.target.value),required:!0}),se.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 p-2 rounded font-semibold",children:"Login"})]})})}function lU(){const{walletAddress:t}=le.useContext($0),[e,n]=le.useState([]),[r,i]=le.useState(0);le.useEffect(()=>{t&&s()},[t]);const s=async()=>{const o=GV(Rf(Wu,"users"),QV("referral","==",t)),l=(await Ig(o)).docs.map(c=>({id:c.id,...c.data()}));n(l),i(l.length*.1)};return se.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white p-6",children:[se.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Referral Program"}),se.jsxs("div",{className:"max-w-5xl mx-auto mb-6",children:[se.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Referrals"}),se.jsxs("div",{className:"mb-4",children:[se.jsxs("p",{children:["Your wallet address: ",t]}),se.jsxs("p",{children:["Total earnings from referrals: ",r," SOL (fictitious)"]})]}),se.jsx("h3",{className:"text-lg font-medium",children:"People who signed up using your referral link:"}),se.jsx("ul",{className:"list-disc pl-5",children:e.map(o=>se.jsxs("li",{children:["Wallet: ",o.wallet,", Date: ",new Date(o.createdAt.seconds*1e3).toLocaleDateString()]},o.id))})]})]})}function uU(){return se.jsx(X2,{children:se.jsx(FL,{children:se.jsxs(UD,{children:[" ",se.jsxs(q2,{children:[se.jsx($l,{path:"/",element:se.jsx(sU,{})}),se.jsx($l,{path:"/admin",element:se.jsx(oU,{})})," ",se.jsx($l,{path:"/login",element:se.jsx(aU,{})}),se.jsx($l,{path:"/referrals",element:se.jsx(lU,{})})]})]})})})}window.Buffer=Ne.Buffer;$p.createRoot(document.getElementById("root")).render(se.jsx(q1.StrictMode,{children:se.jsx(uU,{})}));
